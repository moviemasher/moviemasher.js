"use strict";(self.webpackChunk_moviemasher_example_supabase=self.webpackChunk_moviemasher_example_supabase||[]).push([[182],{7182:function(e,t,n){n.r(t),n.d(t,{Activity:function(){return Ce},ActivityContent:function(){return De},ActivityContentContext:function(){return be},ActivityContentContextDefault:function(){return ke},ActivityContext:function(){return ye},ActivityContextDefault:function(){return he},ActivityDefaultProps:function(){return ze},ActivityGroup:function(){return pe},ActivityGroups:function(){return fe},ActivityItem:function(){return Se},ActivityLabel:function(){return xe},ActivityPicked:function(){return we},ActivityPicker:function(){return Ne},ActivityProgress:function(){return Me},Bar:function(){return Ie},BooleanTypeInput:function(){return Ft},Browser:function(){return $e},BrowserContent:function(){return nt},BrowserContext:function(){return Le},BrowserContextDefault:function(){return Fe},BrowserControl:function(){return lt},BrowserDefaultProps:function(){return dt},BrowserPicker:function(){return ot},Button:function(){return tn},ClipContext:function(){return ft},ClipContextDefault:function(){return pt},ClipItem:function(){return gt},ColorGroupInput:function(){return Qt},CreateEditedControl:function(){return Ct},DataGroupInputs:function(){return Kt},DataTypeInputs:function(){return Gt},DefinitionContext:function(){return tt},DefinitionContextDefault:function(){return et},DefinitionDrop:function(){return Lt},DefinitionItem:function(){return ut},DefinitionSelect:function(){return Vt},EditorRedoButton:function(){return kt},EditorRemoveButton:function(){return bt},EditorUndoButton:function(){return Dt},EmptyElement:function(){return At},EncodeControl:function(){return St},IconTypeInput:function(){return Ht},InputContext:function(){return zt},InputContextDefault:function(){return Bt},Inspector:function(){return un},InspectorContent:function(){return dn},InspectorContext:function(){return Mt},InspectorContextDefault:function(){return Nt},InspectorDefaultProps:function(){return mn},InspectorMovable:function(){return Yt},InspectorPicked:function(){return pn},InspectorPicker:function(){return fn},InspectorProperties:function(){return en},InspectorProperty:function(){return $t},Masher:function(){return hn},MasherContext:function(){return ge},MasherContextDefault:function(){return Ze},MasherDefaultProps:function(){return Hn},Mashing:function(){return Wn},MovablesGroupInput:function(){return nn},NumericTypeInput:function(){return Wt},OpacityGroupInput:function(){return rn},OptionGroupInput:function(){return ln},OptionTypeInput:function(){return Xt},Panel:function(){return Re},PanelContent:function(){return qn},PanelFoot:function(){return Ae},PanelHead:function(){return Un},Panels:function(){return Vn},PercentTypeInput:function(){return Ut},Player:function(){return zn},PlayerButton:function(){return Tn},PlayerContent:function(){return gn},PlayerContext:function(){return En},PlayerContextDefault:function(){return yn},PlayerDefaultProps:function(){return Sn},PlayerNotPlaying:function(){return bn},PlayerPlaying:function(){return kn},PlayerTime:function(){return Dn},PlayerTimeControl:function(){return Cn},PointGroupInput:function(){return an},Problems:function(){return Pe},RgbTypeInput:function(){return _t},SaveControl:function(){return xt},SelectEditedControl:function(){return It},SizeGroupInput:function(){return cn},Slider:function(){return qt},TextTypeInput:function(){return Jt},Timeline:function(){return Ln},TimelineAddClipControl:function(){return Gn},TimelineAddTrackControl:function(){return Rn},TimelineContent:function(){return On},TimelineContext:function(){return yt},TimelineContextDefault:function(){return ht},TimelineDefaultProps:function(){return Bn},TimelineDefaultZoom:function(){return Fn},TimelineScrubber:function(){return In},TimelineScrubberElement:function(){return xn},TimelineSizer:function(){return wn},TimelineTrack:function(){return Pn},TimelineTrackIcon:function(){return An},TimelineTracks:function(){return Mn},TimelineZoom:function(){return jn},TimelineZoomer:function(){return Nn},TrackContext:function(){return vt},TrackContextDefault:function(){return mt},TweenInputKey:function(){return jt},VideoView:function(){return Xn},View:function(){return ae},ViewControl:function(){return Ot},activityLabel:function(){return de},assertActivityGroup:function(){return ve},elementSetPreviewSize:function(){return vn},isActivityGroup:function(){return me},labelInterpolate:function(){return ue},labelLookup:function(){return le},labelObjects:function(){return oe},labelTranslate:function(){return se},labels:function(){return ce},panelOptionsStrict:function(){return Oe},propsMediaTypes:function(){return at},propsSelectTypes:function(){return it},sessionGet:function(){return _n},sessionSet:function(){return Jn},useApiDefinitions:function(){return Ke},useClient:function(){return qe},useClip:function(){return Tt},useDefinition:function(){return st},useEditor:function(){return Ue},useEditorActivity:function(){return Te},useEditorDefinitions:function(){return We},useListeners:function(){return Et},useRefresh:function(){return Ye}});var r,a,i,o=n(9142),c=n(4165),l=n(5861),s=n(4942),u=n(2982),d=n(885),p=n(4925),f=n(7762),m=n(1413),v=n(2791),h=n(2994),y=n(827),E=n(5083),Z=["initialPicked","initialCollapsed","className"],g=["children"],T=["collapsed"],C=["id","className","children"],k=["initialPicked"],b=["className","children"],D=["children","type","types","className","id"],S=["children"],x=["className","iconRatio"],P=["className"],w=["children"],N=["children"],M=["children","type"],I=["children"],O=["children"],R=["children"],A=["children"],j=["children"],G=["type","types","children","className"],B=["selectType","selectedItems"],z=["property","className","removeHandler","index","movable","selected","select"],F=["useView","selected"],L=["disabled","className"],V=["movableGenerator","selectedMovable","property"],H=["selectType","selectedItems"],W=["selectType","selectedItems"],q=["selectType","selectedItems"],U=["selectType","selectedItems","dataGroup"],_=["editType","clientOptions","previewSize","icons","mashMedia"],J=["children","className"],X=["className","children"],K=["className","inactive","styleHeight","styleWidth"],Q=["className"],Y=["children"],$=["className","icons"],ee=["zoom","children"],te=["children"],ne=["disabled"],re=["panels"],ae=v.forwardRef((function(e,t){return v.createElement("div",(0,m.Z)({ref:t},e))})),ie=/{{([a-z0-9_]*)}}/,oe={internal:"Internal Error",client:{internal:"Internal Client Error"},import:{bytes:"Size above {{value}}",extension:"Extension {{value}}",type:"Type {{value}}",size:"Dimensions {{value}}",duration:"Duration {{value}}",render:"{{value}}",displaySize:"{{width}}x{{height}}"}},ce={audible:"Audible",clip:"Clip",update:"Save",delete:"Remove {{type}}",unlabeled:"Unlabeled {{type}}",analyze:"Analyzing...",load:"Loading...",complete:"Completed",create:"New",render:"Render",view:"View",open:"Open...",undo:"Undo",redo:"Redo",mash:"Mash"},le=function(e){var t,n=oe,r=e.split("."),a=(0,f.Z)(r);try{for(a.s();!(t=a.n()).done;){var i=n[t.value];if((0,h.isString)(i))return i;n=i}}catch(o){a.e(o)}finally{a.f()}return""},se=function(e){return e.includes(".")?le(e):ce[e]||e},ue=function(e,t){var n=se(e),r=n.match(ie);return r?(r.forEach((function(e,r){if(r){var a="{{".concat(e,"}}"),i=se(t[e]);n=n.replace(a,i)}})),n):n},de=function(e){if(!(0,h.isObject)(e))return"";e.label;var t=e.error,n=e.type,r=e.value;return t?r?ue(t,{value:r}):se(t):se(n)},pe=function(e){return e.Active="active",e.Error="error",e.Complete="complete",e}(pe||{}),fe=Object.values(pe),me=function(e){return(0,h.isPopulatedString)(e)&&fe.includes(e)};function ve(e,t){me(e)||(0,h.errorThrow)(e,"ActivityGroup",t)}var he={label:"",activities:[],allActivities:[],picked:"active",pick:h.EmptyMethod},ye=v.createContext(he),Ee=v.createContext({collapsed:!1,changeCollapsed:function(){}}),Ze={streaming:!1,setStreaming:h.EmptyMethod,current:{},changeDefinition:h.EmptyMethod,drop:function(){return Promise.resolve([])},editorIndex:{},icons:{}},ge=v.createContext(Ze),Te=function(){var e=v.useContext(ge).editor;(0,h.assertDefined)(e);var t=v.useRef([]),n=e.eventTarget,r=function(e){var n=e.type;if((0,h.isEventType)(n)&&e instanceof CustomEvent){var r=e.detail,a=r.id,i=r.type,o=t.current,c=o.find((function(e){return e.id===a})),l=c||{id:a,activityGroup:"active",infos:[]};l.infos.unshift(r),i===y.ActivityType.Complete?l.activityGroup="complete":i===y.ActivityType.Error&&(l.activityGroup="error"),c||o.unshift(l)}},a=v.useSyncExternalStore((function(e){return n.addEventListener(h.EventType.Active,e),function(){n.removeEventListener(h.EventType.Active,e)}}),(function(){return t.current})),i=function(){return n.addEventListener(h.EventType.Active,r),function(){n.removeEventListener(h.EventType.Active,r)}};return v.useEffect((function(){return i()}),[]),[e,a]};function Ce(e){var t=e.initialPicked,n=void 0===t?"active":t,r=e.initialCollapsed,a=void 0!==r&&r,i=e.className,o=(0,p.Z)(e,Z);ve(n);var c=v.useState(a),l=(0,d.Z)(c,2),s=l[0],u=l[1],f=v.useState(""),y=(0,d.Z)(f,2),E=y[0],g=(y[1],Te()),T=(0,d.Z)(g,2),C=(T[0],T[1]),k=v.useState(n),b=(0,d.Z)(k,2),D=b[0],S=b[1],x={activities:v.useMemo((function(){return C.filter((function(e){return e.activityGroup===D}))}),[D,C.length]),allActivities:C,picked:D,pick:S,label:E},P={collapsed:s,changeCollapsed:u},w=[];i&&w.push(i),s&&w.push(h.ClassCollapsed);var N=(0,m.Z)((0,m.Z)({},o),{},{className:w.join(" ")});return v.createElement(ye.Provider,{value:x},v.createElement(Ee.Provider,{value:P},v.createElement(ae,(0,m.Z)({},N))))}var ke={infos:[],activityGroup:"active",id:""},be=v.createContext(ke);function De(e){var t=v.useContext(ye),n=v.useContext(Ee).collapsed,r=t.activities;if(n)return null;var a=e.children,i=(0,p.Z)(e,g),o=v.Children.only(a);(0,h.assertTrue)(v.isValidElement(o));var c=r.map((function(e){var t={children:v.cloneElement(o),value:e,key:e.id};return v.createElement(be.Provider,(0,m.Z)({},t))})),l=(0,m.Z)((0,m.Z)({},i),{},{children:c});return v.createElement(ae,(0,m.Z)({},l))}function Se(e){var t=e.collapsed,n=(0,p.Z)(e,T),r=v.useState(!!t),a=(0,d.Z)(r,2),i={collapsed:a[0],changeCollapsed:a[1]};return v.createElement(Ee.Provider,{value:i},v.createElement(ae,(0,m.Z)({},n)))}function xe(e){var t=v.useContext(Ee).collapsed,n=v.useContext(be).infos,r=(0,d.Z)(n,1)[0],a=(n.find((function(e){return e.label}))||{label:""}).label||r.type,i=(0,m.Z)({},e);if(t)i.children=a;else{var o=[a].concat((0,u.Z)(n.map((function(e){return de(e)}))));i.children=o.map((function(e,t){return v.createElement(ae,{key:t,children:e})}))}return v.createElement(ae,(0,m.Z)({},i))}var Pe={child:"single child element expected"};function we(e){var t=v.useContext(ye),n=e.id,r=e.children;if(ve(n),n!==t.picked)return null;var a=v.Children.only(r);return(0,h.assertTrue)(v.isValidElement(a),Pe.child),a}function Ne(e){var t=e.id,n=e.className,r=e.children,a=(0,p.Z)(e,C);ve(t);var i=v.Children.only(r);(0,h.assertTrue)(v.isValidElement(i),Pe.child);var o=v.useContext(ye),c=o.picked,l=o.pick,s=[];n&&s.push(n),t===c&&s.push(h.ClassSelected);var u=(0,m.Z)((0,m.Z)({},a),{},{className:s.join(" "),key:"activity-picker-".concat(t),onClick:function(){return l(t)}});return v.cloneElement(i,u)}function Me(e){var t=v.useContext(ye),n=v.useContext(be),r=n.infos,a=(n.id,[]),i=0,o=0;if((0,h.isPopulatedArray)(r)){var c=(0,d.Z)(r,1)[0],l=c.step,s=c.steps;(0,h.isPositive)(l)&&(0,h.isAboveZero)(s)&&(o=l,i=s)}else{var u=t.allActivities,p=t.label;(0,h.isPopulatedString)(p)&&a.push(v.createElement("label",{key:"label"},p));var f=u.filter((function(e){return"active"===e.activityGroup}));f.length&&f.forEach((function(e){var t=e.infos,n=(0,d.Z)(t,1)[0];(0,h.assertObject)(n,"info");var r=n.step,a=n.steps;(0,h.isPositive)(a)&&(i+=a),(0,h.isPositive)(r)&&(o+=r)}))}if(i){var y=o/i,E={value:y,max:1,children:"".concat(Math.round(100*y),"%"),key:"progress"};a.push(v.createElement("progress",(0,m.Z)({},E)))}var Z=(0,m.Z)((0,m.Z)({},e),{},{key:"activity-progress",children:a});return v.createElement(ae,(0,m.Z)({},Z))}function Ie(e){var t=e.before,n=e.content,r=e.after,a=e.props,i=void 0===a?{}:a;if(!(t||n||r))return null;var o=[t,n,r].filter(Boolean);return i.children=o,v.createElement(ae,(0,m.Z)({},i))}var Oe=function(e){var t,n,r,a,i,o,c,l,s;return e.header||(e.header={}),(t=e.header).props||(t.props={}),(n=e.header.props).key||(n.key="header"),(r=e.header.props).className||(r.className="head"),e.content||(e.content={}),(a=e.content).props||(a.props={}),(i=e.content.props).key||(i.key="content"),(o=e.content.props).className||(o.className="content"),e.footer||(e.footer={}),(c=e.footer).props||(c.props={}),(l=e.footer.props).key||(l.key="footer"),(s=e.footer.props).className||(s.className="foot"),e.props||(e.props={}),(0,h.assertPopulatedObject)(e.icons),e};function Re(e){var t=e.children,n=e.className,r=e.collapsed,a=v.useState(!!r),i=(0,d.Z)(a,2),o=i[0],c=i[1],l=[];n&&l.push(n),o&&l.push("collapsed");var s={children:t,className:l.join(" ")},u={collapsed:o,changeCollapsed:c};return v.createElement(Ee.Provider,{value:u},v.createElement(ae,(0,m.Z)({},s)))}function Ae(e){if(v.useContext(Ee).collapsed)return null;var t=e.before,n=e.content,r=e.after,a=e.props,i=void 0===a?{}:a;if(!(t||n||r))return null;var o=[t,n,r].filter(Boolean);return i.children=o,v.createElement(ae,(0,m.Z)({},i))}function je(e){var t=v.useContext(Ee),n=t.collapsed,r=t.changeCollapsed,a=(0,m.Z)((0,m.Z)({},e),{},{onClick:function(){r(!n)}});return v.createElement(ae,(0,m.Z)({},a))}function Ge(e){return v.useContext(Ee).collapsed?null:v.createElement(v.Fragment,null,e.children)}function Be(e){return v.useContext(Ee).collapsed?v.createElement(v.Fragment,null,e.children):null}var ze=function(){var e,t,n,r,a,i,o=Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),c=o.icons;(e=o.props).key||(e.key="activity"),(t=o.props).className||(t.className="panel activity"),(n=o.props).initialPicked||(n.initialPicked="active"),(0,h.isUndefined)(o.props.initialCollapsed)&&(o.props.initialCollapsed=!0),(r=o.header).content||(r.content=[v.createElement(ae,{key:"panel-icon",children:c.activity}),v.createElement(Ge,{key:"not-collapsed"},v.createElement(ae,{key:"view"})),v.createElement(Be,{key:"collapsed"},v.createElement(Me,{key:"progress",className:"progress"})),v.createElement(je,{key:"collapse-control"},v.createElement(Ge,{key:"not-collapsed",children:c.collapse}),v.createElement(Be,{key:"collapsed",children:c.collapsed}))]),(a=o.content).children||(a.children=v.createElement(Se,{className:"item",collapsed:!0},v.createElement(je,{key:"collapse-control"},v.createElement(Ge,{key:"not-collapsed",children:c.collapse}),v.createElement(Be,{key:"collapsed",children:c.collapsed})),v.createElement(xe,{key:"label",className:"label"}),v.createElement(we,{key:"active",id:"active"},v.createElement(Me,{key:"progress"})),v.createElement(we,{key:"error",id:"error",children:c.error}),v.createElement(we,{key:"complete",id:"complete",children:c.complete}))),(i=o.footer).content||(i.content=[v.createElement(Ne,{key:"active",id:"active",className:h.ClassButton,children:c.active}),v.createElement(Ne,{key:"error",id:"error",className:h.ClassButton,children:c.error}),v.createElement(Ne,{key:"complete",id:"complete",className:h.ClassButton,children:c.complete})]);var l=v.createElement(v.Fragment,null,v.createElement(Ie,(0,m.Z)({},o.header)),v.createElement(De,(0,m.Z)({},o.content.props),o.content.children),v.createElement(Ae,(0,m.Z)({},o.footer)));return(0,m.Z)((0,m.Z)({},o.props),{},{children:l})},Fe={addPicker:h.EmptyMethod,refresh:h.EmptyMethod,definitions:[],pick:h.EmptyMethod,picked:"",removePicker:h.EmptyMethod},Le=v.createContext(Fe),Ve=h.EventType.Added,He=h.EventType.Resize,We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=v.useContext(ge).editor;(0,h.assertDefined)(t);var n=t.media,r=v.useRef({}),a=t.eventTarget,i=function(e){var t=e.type;if((0,h.isEventType)(t)&&e instanceof CustomEvent){var n=e.detail.definitionTypes;if((0,h.isPopulatedArray)(n)){var a=n,i=r.current;Object.keys(i).filter((function(e){return a.some((function(t){return e.includes(t)}))})).forEach((function(e){return delete i[e]}))}}},o=v.useSyncExternalStore((function(e){return a.addEventListener(Ve,e),a.addEventListener(He,e),function(){a.removeEventListener(Ve,e),a.removeEventListener(He,e)}}),(function(){var t,a=e.join("-")||"empty";return(t=r.current)[a]||(t[a]=function(){var t=e.map((function(e){return n.byType(e)}));return 1===t.length?t[0]:t.flat()}())})),c=function(){return a.addEventListener(Ve,i),function(){a.removeEventListener(Ve,i)}};return v.useEffect((function(){return c()}),[]),o},qe=function(){return v.useContext(ge).client},Ue=function(){return v.useContext(ge).editor},_e="api-definitions",Je="disabled",Xe="empty",Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=qe();if(!t.enabled(y.ReadOperation))return[];var n=Ue();(0,h.assertDefined)(n);var r=v.useRef({}),a=n.eventTarget,i=function(n){switch(n){case Xe:case Je:break;default:!function(n){var i={type:e};t.list(i).then((function(e){console.debug("DataDefinitionRetrieveResponse",h.Endpoints.data.definition.retrieve,e),e.error;var t=e.data;if(t){var i=r.current[n];i.push.apply(i,(0,u.Z)(t)),a.dispatchEvent(new CustomEvent(_e))}}))}(n)}return[]};return v.useSyncExternalStore((function(e){return a.addEventListener(_e,e),function(){a.removeEventListener(_e,e)}}),(function(){var t=e.length?e.join("-"):Xe,n=r.current[t];return n||(r.current[t]=i(t))}))},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=We(e),n=Ke(e).filter((function(e){return!t.some((function(t){return t.id===e.id}))}));return[].concat((0,u.Z)(t),(0,u.Z)(n))},Ye=function(){var e=v.useState(0),t=(0,d.Z)(e,2),n=t[0],r=t[1];return[function(){r((new Date).valueOf())},n]};function $e(e){var t=e.initialPicked,n=void 0===t?"container":t,r=(0,p.Z)(e,k),a=v.useState({}),i=(0,d.Z)(a,2),o=i[0],c=i[1],l=v.useContext(ge).changeDefinition,u=Ye(),f=(0,d.Z)(u,1)[0],y=v.useState(n),E=(0,d.Z)(y,2),Z=E[0],g=E[1],T={value:{refresh:f,definitions:Qe(o[Z]),picked:Z,pick:function(e){(0,h.assertPopulatedString)(e),l(),g(e)},addPicker:function(e,t){c((function(n){return(0,m.Z)((0,m.Z)({},n),{},(0,s.Z)({},e,t))}))},removePicker:function(e){c((function(t){return(0,m.Z)((0,m.Z)({},t),{},(0,s.Z)({},e,[]))}))}},children:v.createElement(ae,(0,m.Z)({},r))};return v.createElement(Le.Provider,(0,m.Z)({},T))}var et={},tt=v.createContext(et);function nt(e){var t=v.useState(!1),n=(0,d.Z)(t,2),r=n[0],a=n[1],i=e.className,o=e.children,c=(0,p.Z)(e,b),l=v.useContext(ge),s=v.useContext(Le).definitions||[],u=l.drop,f=function(e){return!!e&&(0,y.dragTypes)(e).includes(y.TransferTypeFiles)},E=function(e){(0,h.eventStop)(e),a(!1)},Z=[];i&&Z.push(i),r&&Z.push(h.ClassDropping);var g=v.Children.only(o);(0,h.assertTrue)(v.isValidElement(g));var T=(0,m.Z)((0,m.Z)({},c),{},{className:Z.join(" "),key:"browser-content",children:function(){var e=g.props;return s.map((function(t){var n=(0,m.Z)((0,m.Z)({},e),{},{key:t.id}),r={children:v.cloneElement(g,n),value:{definition:t},key:t.id};return v.createElement(tt.Provider,(0,m.Z)({},r))}))}(),onDrop:function(e){E(e);var t=e.dataTransfer;f(t)&&u(t.files)},onDragOver:function(e){(0,h.eventStop)(e),a(f(e.dataTransfer))},onDragLeave:E});return v.createElement(ae,(0,m.Z)({},T))}var rt=function(e,t,n){return e?[e]:t?(0,h.isString)(t)?t.split(",").map((function(e){return e.trim()})):t:n?n.map((function(e){return e.name})):[]},at=function(e,t,n){var r=rt(e,t);return n&&!r.length&&r.push(n),r.filter((function(e){return(0,h.isMediaType)(e)})).map((function(e){return e}))},it=function(e,t,n){var r=rt(e,t);return n&&!r.length&&r.push(n),r.filter((function(e){return(0,h.isSelectType)(e)})).map((function(e){return e}))};function ot(e){var t=e.children,n=e.type,r=e.types,a=e.className,i=e.id,o=(0,p.Z)(e,D);(0,h.assertPopulatedString)(i);var c=v.useContext(Le),l=c.pick,s=c.picked,u=c.addPicker,d=c.removePicker,f=[];a&&f.push(a),s===i&&f.push(h.ClassSelected),v.useEffect((function(){return u(i,at(n,r,i)),function(){d(i)}}),[]);var y=(0,m.Z)((0,m.Z)({},o),{},{className:f.join(" "),key:"browser-picker-".concat(i),onClick:function(){l(i)}}),E=v.Children.only(t);return(0,h.assertTrue)(v.isValidElement(E),Pe.child),v.cloneElement(E,y)}var ct="upload-control-id";function lt(e){var t=e.children,n=(0,p.Z)(e,S),r=v.useRef(null),a=qe(),i=v.useContext(ge).drop,o=a.accept(),c=(0,m.Z)({accept:o,multiple:!0,id:ct,onChange:function(e){var t=e.currentTarget.files;t&&i(t)},type:"file",key:"browser-control-input",ref:r},n),l=v.createElement("input",(0,m.Z)({},c));if(!v.isValidElement(t))return l;var s={children:[v.Children.only(t),l],key:"browser-control",htmlFor:ct};return v.createElement("label",(0,m.Z)({},s))}var st=function(){return v.useContext(tt).definition};function ut(e){var t=e.className,n=e.iconRatio,r=(0,p.Z)(e,x),a=n||.25,i=v.useRef(null),o=v.useRef(null),s=v.useContext(Le).refresh,u=v.useContext(ge),d=u.editor,f=u.changeDefinition,E=u.current;(0,h.assertTrue)(d);var Z=st(),g=Z.id,T=Z.label,C=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.rect,(n=i.current)&&(0,h.sizeAboveZero)(t)){e.next=4;break}return e.abrupt("return");case 4:return r=(0,h.sizeCeil)((0,h.sizeScale)((0,h.sizeCopy)(t),a,a)),e.next=7,Z.definitionIcon(r);case 7:(o=e.sent)&&n.replaceChildren(o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();v.useEffect((function(){C()}),[]),i.current&&C();var k=function(e){e.stopPropagation(),f(Z),s()},b=(0,m.Z)((0,m.Z)({},r),{},{className:t,children:function(){var e=[v.createElement(ae,{key:"icon",ref:i})];return T&&e.unshift(v.createElement("label",{key:"label"},T)),e}(),ref:o,key:g});return e.draggable&&(b.onDragStart=function(e){k(e);var t=o.current.getBoundingClientRect().left,n={offset:e.clientX-t,mediaObject:Z.toJSON()},r=JSON.stringify(n),a=e.dataTransfer;a&&(a.effectAllowed="copy",a.setData(Z.type+y.DragSuffix,r))},b.onPointerDown=k,b.className=function(){var e=[];return t&&e.push(t),E.mediaId===g&&e.push(h.ClassSelected),e.join(" ")}()),v.createElement(ae,(0,m.Z)({},b))}var dt=function(){var e,t,n,r,a,i,o,c,l=Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),s=l.icons;(e=l.props).key||(e.key="browser"),(t=l.props).className||(t.className="panel browser"),(n=l.props).initialPicked||(n.initialPicked="container"),(r=l.header).content||(r.content=[v.createElement(ae,{key:"panel-icon",children:s.browser})]),(a=l.footer).content||(a.content=[v.createElement(ot,{key:"effect",id:"effect",className:h.ClassButton,children:s.effect}),v.createElement(ot,{key:"container",id:"container",className:h.ClassButton,children:s.container}),v.createElement(ot,{key:"content",id:"content",className:h.ClassButton,children:s.content})]),(i=l.footer).before||(i.before=[v.createElement(ot,{key:"video",id:"video",types:"video,videosequence",className:h.ClassButton,children:s.browserVideo}),v.createElement(ot,{key:"audio",id:"audio",className:h.ClassButton,children:s.browserAudio}),v.createElement(ot,{key:"image",id:"image",className:h.ClassButton,children:s.browserImage}),v.createElement(ot,{key:"font",id:"font",className:h.ClassButton,children:s.browserText})]),(o=l.footer).after||(o.after=[v.createElement(lt,{key:"import",children:s.import})]),(c=l.content).children||(c.children=v.createElement(ut,{draggable:!0,className:"definition preview"}));var u=v.createElement(v.Fragment,null,v.createElement(Ie,(0,m.Z)({},l.header)),v.createElement(nt,(0,m.Z)({},l.content.props),l.content.children),v.createElement(Ie,(0,m.Z)({},l.footer)));return(0,m.Z)((0,m.Z)({},l.props),{},{children:u})},pt={prevClipEnd:0},ft=v.createContext(pt),mt={},vt=v.createContext(mt),ht={dragTypeValid:function(){return!1},frame:0,frames:0,onDragLeave:h.EmptyMethod,onDrop:h.EmptyMethod,rect:h.RectZero,refreshed:0,refresh:h.EmptyMethod,scale:0,scroll:{x:0,y:0},setDroppingClip:h.EmptyMethod,setDroppingPosition:h.EmptyMethod,setDroppingTrack:h.EmptyMethod,setRect:h.EmptyMethod,setScroll:h.EmptyMethod,setZoom:h.EmptyMethod,zoom:1},yt=v.createContext(ht),Et=function(e){var t=Ue().eventTarget,n=function(t){var n=t.type,r=e[n];r&&r(t)},r=function(){return Object.keys(e).forEach((function(e){t.addEventListener(e,n)})),function(){Object.keys(e).forEach((function(e){t.removeEventListener(e,n)}))}};v.useEffect((function(){return r()}),[])},Zt=500;function gt(e){var t,n=e.className,r=(0,p.Z)(e,P),a=v.useRef(null),i=v.useRef(null),o=Ue(),c=v.useContext(vt),l=v.useContext(yt),u=Ye(),f=(0,d.Z)(u,2),E=f[0],Z=f[1],g=v.useRef({}).current,T=v.useContext(ft),C=l.droppingPosition,k=l.droppingClip,b=l.scale,D=l.selectedClip,S=l.onDrop,x=l.dragTypeValid,w=l.setDroppingPosition,N=l.setDroppingClip,M=l.setDroppingTrack,I=l.onDragLeave,O=c.track,R=T.clip,A=T.prevClipEnd;(0,h.assertTrue)(R);var j=function(){var e=a.current,t=null===e||void 0===e?void 0:e.parentNode;return t instanceof HTMLDivElement?t.offsetHeight:0},G=v.useState(j),B=(0,d.Z)(G,2),z=B[0],F=B[1],L=R.label,V=R.frame,H=R.frames,W=function(){if(!(0,h.isAboveZero)(b)||!(0,h.isAboveZero)(H))return 0;var e=(0,y.pixelFromFrame)(H,b,"floor"),t=g.width;return e&&e!==t&&(g.width=e,E()),e},q=W();Et((t={},(0,s.Z)(t,h.EventType.Action,(function(e){if(!g.redraw){var t=e.type;if((0,h.isEventType)(t)&&e instanceof CustomEvent&&t===h.EventType.Action){var n=e.detail;if(n){var r=n.action;if(r){var a=r.target;if((0,h.isObject)(a)){switch(a){case R:case R.container:case R.content:break;default:if("color"===r.property)break;return}E()}}}}}})),(0,s.Z)(t,h.EventType.Save,E),t));var U=function(){var e=g.width,t=g.redraw;delete g.timeout,delete g.redraw;var n=a.current,r=o.mashMedia,i=n&&r&&e&&e===W();if((t||!i)&&(E(),!i))return Promise.resolve();var c=function(){var e=o.rect,t={width:z*(e.width/e.height),height:z};return(0,h.sizeCeil)(t)}(),s=function(e){var t=e.width,n=e.height;return{width:Math.max(t,q),height:n}}(c),u=R.clipIcon(s,l.scale,2);return u?u.then((function(t){var a=W();t&&e>=a&&n.replaceChildren(function(e,t,n){var r=(0,h.colorToRgb)(e),a=(0,h.colorRgbDifference)(r),i=(0,h.colorFromRgb)(a),o=(0,h.svgPolygonElement)(t,"",e),c={x:t.width,y:0,width:n,height:t.height},s=(0,h.svgPolygonElement)(c,"",i),u={width:t.width+n,height:t.height},d=(0,h.idGenerate)("pattern"),p=[o,s],f=(0,h.svgPatternElement)(u,d,p),m=(0,h.svgDefsElement)([f]),v={width:l.rect.width,height:z},y=(0,h.svgPolygonElement)(v,"",(0,h.svgUrl)(d));return(0,h.svgSvgElement)(v,[m,y])}(r.color,c,2),t)})):Promise.resolve()};v.useEffect((function(){if(!z)return F(j);var e=a.current,t=o.mashMedia;e&&t&&(g.timeout?g.redraw||(g.redraw=!0):g.timeout=setTimeout(U,Zt))}),[Z,b,z]);var _=function(e){e.stopPropagation(),o.selection.set(R)},J={width:q};A>-1&&(J.marginLeft=(0,y.pixelFromFrame)(V-A,b,"floor"));var X=(0,m.Z)((0,m.Z)({},r),{},{style:J,className:function(){var e=R===D,t=[];return n&&t.push(n),e&&t.push(h.ClassSelected),k===R&&t.push((0,y.droppingPositionClass)(C)),t.join(" ")}(),onPointerDown:_,onDragStart:function(e){_(e);var t=e.dataTransfer,n=e.clientX,r=i.current;if(t&&r){var a={offset:n-r.getBoundingClientRect().left},o=JSON.stringify(a);t.effectAllowed="move",t.setData("clip"+y.DragSuffix,o)}},onDragEnd:function(e){(0,h.eventStop)(e);var t=e.dataTransfer;t&&("none"===t.dropEffect&&o.removeClip(R))},onDragOver:function(e){(0,h.eventStop)(e);var t=e.dataTransfer;if(t){var n=x(t,R),r=n?h.DroppingPosition.At:h.DroppingPosition.None;M(n?O:void 0),N(n?R:void 0),w(r)}},onDragLeave:I,onDrop:S,onClick:function(e){return e.stopPropagation()},draggable:!0,ref:i,children:function(){var e={key:"clip-previews",ref:a},t={width:q,height:z};if((0,h.sizeAboveZero)(t)){var n=t.width,r=t.height;e.width=n,e.height=r,e.viewBox="0 0 ".concat(n," ").concat(r)}var i=[v.createElement("svg",(0,m.Z)({},e))];return L&&i.unshift(v.createElement("label",{key:"label"},L)),i}()});return v.createElement(ae,(0,m.Z)({},X))}var Tt=function(){return v.useContext(ft).clip};function Ct(e){var t,n=e.children,r=(0,p.Z)(e,w),a=Ue(),i=function(){return a.can(h.MasherAction.Save)},o=v.useState(i),c=(0,d.Z)(o,2),l=c[0],u=c[1],f=function(){u(i())};Et((t={},(0,s.Z)(t,h.EventType.Action,f),(0,s.Z)(t,h.EventType.Loaded,f),(0,s.Z)(t,h.EventType.Save,f),t));var y=(0,m.Z)((0,m.Z)({},r),{},{onClick:function(){l||a.create()},disabled:l});return v.cloneElement(v.Children.only(n),y)}function kt(e){var t=v.useState(!0),n=(0,d.Z)(t,2),r=n[0],a=n[1],i=Ue();Et((0,s.Z)({},h.EventType.Action,(function(){a(!i.can(h.MasherAction.Redo))})));var o=e.children,c=(0,p.Z)(e,N),l=(0,m.Z)((0,m.Z)({},c),{},{onClick:function(){i.redo()},disabled:r});return v.cloneElement(v.Children.only(o),l)}function bt(e){var t=e.children,n=e.type,r=(0,p.Z)(e,M),a=n||h.SelectType.Clip;(0,h.assertSelectType)(a);var i=Ue(),o=v.useState(!i.selection[a]),c=(0,d.Z)(o,2),l=c[0],u=c[1];Et((0,s.Z)({},h.EventType.Selection,(function(){u(!i.selection[a])})));var f=v.Children.only(t),y=(0,m.Z)((0,m.Z)((0,m.Z)({},r),f.props),{},{onClick:function(){if(!l){var e=i.selection[a];(0,h.isEffect)(e)?i.removeEffect(e):(0,h.isClip)(e)?i.removeClip(e):(0,h.isTrack)(e)&&i.removeTrack(e)}},disabled:l});return v.cloneElement(f,y)}function Dt(e){var t=Ue(),n=v.useState(!0),r=(0,d.Z)(n,2),a=r[0],i=r[1];Et((0,s.Z)({},h.EventType.Action,(function(){i(!t.can(h.MasherAction.Undo))})));var o=e.children,c=(0,p.Z)(e,I),l=(0,m.Z)((0,m.Z)({},c),{},{onClick:function(){t.undo()},disabled:a});return v.cloneElement(v.Children.only(o),l)}function St(e){var t,n=qe(),r=e.children,a=(0,p.Z)(e,O),i=Ue(),o=function(){return!i.can(h.MasherAction.Render)},c=v.useState(o),l=(0,d.Z)(c,2),u=l[0],f=l[1],E=function(){return f(o())};if(Et((t={},(0,s.Z)(t,h.EventType.Save,E),(0,s.Z)(t,h.EventType.Loaded,E),(0,s.Z)(t,h.EventType.Action,E),t)),!n.enabled(y.EncodeOperation))return null;var Z=(0,m.Z)((0,m.Z)({},a),{},{onClick:function(){if(!u){var e=i.mashMedia;(0,h.assertMashMedia)(e),f(!0),n.encode(e)}},disabled:u});return v.cloneElement(v.Children.only(r),Z)}function xt(e){var t,n=Ue(),r=qe(),a=function(){return!n.can(h.MasherAction.Save)},i=v.useState(a),o=(0,d.Z)(i,2),c=o[0],l=o[1],u=function(){l(a())};if(Et((t={},(0,s.Z)(t,h.EventType.Action,u),(0,s.Z)(t,h.EventType.Save,u),t)),!r.enabled(y.WriteOperation))return null;var f=e.children,E=(0,p.Z)(e,R),Z=(0,m.Z)((0,m.Z)({},E),{},{onClick:function(){if(!c){l(!0);var e=n.mashMedia;(0,h.assertMashMedia)(e),r.save(e)}},disabled:c});return v.cloneElement(v.Children.only(f),Z)}var Pt={enabled:!1,servers:{},endpointPromise:function(){return Promise.resolve({})}},wt=v.createContext(Pt),Nt={actionCount:0,selectedInfo:{tweenDefined:{},tweenSelected:{},selectedType:h.SelectType.None,selectTypes:[]},selectedItems:[],changeSelected:h.EmptyMethod,changeTweening:h.EmptyMethod},Mt=v.createContext(Nt);function It(e){var t,n,r,a=Ue(),i=v.useState(!1),o=(0,d.Z)(i,2),c=o[0],l=o[1],f=v.useState((function(){return[]})),y=(0,d.Z)(f,2),E=y[0],Z=y[1],g=v.useState((null===(t=a.mashMedia)||void 0===t?void 0:t.id)||""),T=(0,d.Z)(g,2),C=T[0],k=T[1],b=v.useContext(wt),D=v.useContext(Mt).selectedInfo.selectedType,S=v.useState((null===(n=a.mashMedia)||void 0===n?void 0:n.label)||""),x=(0,d.Z)(S,2),P=x[0],w=x[1],N=function(){return a.can(h.MasherAction.Save)},M=v.useState(N),I=(0,d.Z)(M,2),O=I[0],R=I[1],j=b.enabled,G=b.servers,B=b.endpointPromise,z=function(){R(N())};Et((r={},(0,s.Z)(r,h.EventType.Action,(function(){var e=a.mashMedia;(0,h.assertObject)(e,"mashMedia");var t=e.label;P!==t&&(Z((function(e){return(0,u.Z)(e)})),w(t)),z()})),(0,s.Z)(r,h.EventType.Loaded,(function(e){var t=e.type;if((0,h.isEventType)(t)&&(0,h.isSelectType)(t)&&t===D){var n=a.mashMedia;(0,h.assertObject)(n,"mashMedia");var r=n.id,i=n.label;Z((function(e){var t=e.filter((function(e){return(0,h.isPopulatedString)(e.label)})),a=t.findIndex((function(e){return e.id===r}));return(0,h.isPositive)(a)?t.splice(a,1,n):t.push(n),k(r),w(i),t}))}})),(0,s.Z)(r,h.EventType.Save,z),r));if(v.useEffect((function(){if(j&&G[h.ServerType.Data]&&!c){l(!0);var e={partial:!0},t=h.Endpoints.data[a.editType].retrieve;console.debug("RetrieveRequest",t,e),B(t,e).then((function(e){console.debug("RetrieveResponse",t,e);var n=e.described,r=e.error;r?console.error("RetrieveResponse",t,r):Z((function(e){var t=(0,u.Z)(e);return n.forEach((function(e){var n=e.id,r=e.label;!t.find((function(e){return e.id===n}))&&(0,h.isPopulatedString)(r)&&t.push(e)})),t}))}))}}),[G,j]),E.length<2)return null;var F=e.children,L=(0,p.Z)(e,A),V=v.Children.only(F);(0,h.assertTrue)(v.isValidElement(V));var H={key:"mashMedia-select",onChange:function(e){if(!O){var t=e.target.selectedIndex,n=E[t];(0,h.assertObject)(n,"described[selectedIndex]");var r={id:n.id},i=a.editType,o=h.Endpoints.data[i].get;console.debug("GetRequest",o,r),B(o,r).then((function(e){console.debug("GetResponse",o,e);var t=e.error,n=e.mash;if(!t)return a.load(n);console.error("GetResponse",o,t)}))}},disabled:O,children:function(){var e=a.editType,t=a.mashMedia,n=[v.createElement("optgroup",{key:"group",label:se("open")})];if(!t)return n;var r=t.id,i=t.label;return n.push.apply(n,(0,u.Z)(E.map((function(t){var n=t.label,a=t.id,o=a===r?i:n,c={children:(0,h.isPopulatedString)(o)?o:ue("unlabeled",{type:e}),value:a,key:a};return v.createElement("option",(0,m.Z)({},c))})))),n}(),value:C},W=(0,m.Z)((0,m.Z)({},L),{},{children:[V,v.createElement("select",(0,m.Z)({},H))]});return v.createElement(ae,(0,m.Z)({},W))}function Ot(e){var t,n=Ue(),r=function(){var e=n.mashMedia;return!(0,h.isMashMedia)(e)||!e.encodings.length},a=v.useState(r),i=(0,d.Z)(a,2),o=i[0],c=i[1],l=function(){return c(r())};Et((t={},(0,s.Z)(t,h.EventType.Render,l),(0,s.Z)(t,h.EventType.Loaded,l),t));var u=e.children,f=(0,p.Z)(e,j),y=(0,m.Z)((0,m.Z)({},f),{},{onClick:function(){if(!o){var e=n.mashMedia;(0,h.assertMashMedia)(e);var t=e.encodings,r=(0,d.Z)(t,1)[0].request.endpoint;(0,h.assertEndpoint)(r);var a=(0,h.endpointUrl)(r);window.open(a)}},disabled:o});return v.cloneElement(v.Children.only(u),y)}function Rt(e){return null}var At=v.createElement(Rt,{key:"empty"}),jt="tween-input-key",Gt=(r={},(0,s.Z)(r,h.DataType.Boolean,At),(0,s.Z)(r,h.DataType.ContainerId,At),(0,s.Z)(r,h.DataType.ContentId,At),(0,s.Z)(r,h.DataType.DefinitionId,At),(0,s.Z)(r,h.DataType.FontId,At),(0,s.Z)(r,h.DataType.Frame,At),(0,s.Z)(r,h.DataType.Icon,At),(0,s.Z)(r,h.DataType.Number,At),(0,s.Z)(r,h.DataType.Percent,At),(0,s.Z)(r,h.DataType.Rgb,At),(0,s.Z)(r,h.DataType.String,At),(0,s.Z)(r,h.DataType.Option,At),r),Bt={value:"",name:"",property:{type:h.DataType.String,name:"",defaultValue:""}},zt=v.createContext(Bt);function Ft(){var e=v.useContext(zt),t=e.changeHandler,n=e.property,r=e.value,a=e.name;if(!n)return null;var i={type:"checkbox",name:a,checked:!!r};return t?i.onChange=function(e){t(a,e.target.checked)}:i.disabled=!0,v.createElement("input",(0,m.Z)({},i))}function Lt(e){var t=e.type,n=e.types,r=e.children,a=e.className,i=(0,p.Z)(e,G),o=v.Children.only(r);(0,h.assertTrue)(v.isValidElement(o));var s=v.useState(!1),u=(0,d.Z)(s,2),f=u[0],E=u[1],Z=v.useContext(zt),g=v.useContext(ge),T=g.drop,C=g.editor;(0,h.assertDefined)(C);var k=Z.changeHandler,b=Z.value,D=Z.name;(0,h.assertTrue)(k);var S=C.media,x=at(t,n),P=function(e){var t=e.dataTransfer;if((0,h.assertTrue)(t),(0,y.dragTypes)(t).includes(y.TransferTypeFiles))return!0;var n=(0,y.dragType)(t);return!!(0,h.isMediaType)(n)&&x.includes(n)},w=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,a,i,o,l,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.eventStop)(t),E(!1),P(t)){e.next=4;break}return e.abrupt("return");case 4:if(n=t.dataTransfer,(0,h.assertTrue)(n),!(0,y.dragTypes)(n).includes(y.TransferTypeFiles)){e.next=11;break}return e.next=10,T(n.files).then((function(e){if(e.length){var t="containerId"===D?e.filter(h.isContainerDefinition):e,n=(0,d.Z)(t,1)[0];n&&((0,h.assertTrue)(S.installed(n.id),"".concat(n.type," installed")),k(D,n.id))}}));case 10:return e.abrupt("return");case 11:if(r=(0,y.dropType)(n),a=n.getData(r),i=JSON.parse(a),o=i.mediaObject,!(0,h.isMediaObject)(o)){e.next=20;break}if(l=S.define(o),s=(0,d.Z)(l,1),u=s[0],"containerId"!==D||(0,h.isContainerDefinition)(u)){e.next=19;break}return e.abrupt("return");case 19:k(D,o.id);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=v.useMemo((function(){var e=[];return a&&e.push(a),f&&e.push(h.ClassDropping),e.join(" ")}),[f]),M=(0,m.Z)((0,m.Z)({},i),{},{className:N,children:function(){if(!b)return null;(0,h.assertPopulatedString)(b);var e=S.fromId(b);(0,h.assertMedia)(e);var t={definition:e,key:e.id},n={children:v.cloneElement(o,t),value:{definition:e}};return v.createElement(tt.Provider,(0,m.Z)({},n))}(),onDragLeave:function(){E(!1)},onDragOver:function(e){var t=P(e);E(t),t&&e.preventDefault()},onDrop:w,value:String(b),key:"".concat(D,"-drop")});return v.createElement(ae,(0,m.Z)({},M))}function Vt(){var e=v.useContext(zt),t=e.changeHandler,n=e.value,r=e.name,a=Ue().media;(0,h.assertTrue)(t);var i={children:a.byType(h.FontType).map((function(e){var t=e.id,n={value:t,children:e.label,key:t};return v.createElement("option",(0,m.Z)({},n))})),name:r,onChange:function(e){t(r,e.target.value)},value:String(n),key:"".concat(r,"-select")};return v.createElement("select",(0,m.Z)({},i))}function Ht(){var e=v.useContext(zt),t=v.useContext(ge).icons,n=Object.keys(t),r=e.changeHandler,a=e.property,i=e.value,o=e.name;if(!a)return null;var c={children:n.map((function(e){var t={value:e,children:e,key:e};return v.createElement("option",(0,m.Z)({},t))})),name:o,value:String(i),key:"".concat(o,"-select")};return r?c.onChange=function(e){r(o,e.target.value)}:c.disabled=!0,v.createElement("select",(0,m.Z)({},c))}function Wt(){var e=v.useContext(zt),t=Ue(),n=e.changeHandler,r=e.property,a=e.value,i=e.name,o=e.time;if(!r)return null;var s=r.min,u=r.max,d=r.step,p={type:"number",name:i,value:String(a)};return(0,h.isDefined)(s)&&(p.min=s),(0,h.isDefined)(u)&&(p.max=u),(0,h.isDefined)(d)&&(p.step=d),n?p.onChange=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(r){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.target.value,!o){e.next=4;break}return e.next=4,t.goToTime(o);case 4:n(i,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():p.disabled=!0,v.createElement("input",(0,m.Z)({},p))}function qt(e){var t=e.className,n=e.onChange,r=(0,m.Z)({},e),a=["slider"];if(t&&a.push(t),r.className=a.join(" "),n){r.onChange=function(e){n(e,e.currentTarget.valueAsNumber)}}return v.createElement("input",(0,m.Z)({type:"range"},r))}function Ut(){var e=Ue(),t=v.useContext(zt),n=t.changeHandler,r=t.property,a=t.value,i=t.name,o=t.time,s=t.defaultValue;if(!r)return null;var u=r.max,d=r.min,p=r.step,f=r.defaultValue,y={value:(0,h.isDefined)(a)?a:(0,h.isDefined)(s)?s:f,min:(0,h.isNumber)(d)?d:0,max:(0,h.isNumber)(u)?u:1,step:(0,h.isNumber)(p)?p:.01,name:i};if(n){var E=function(){var t=(0,l.Z)((0,c.Z)().mark((function t(r,a){var l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=(0,h.isArray)(a)?a[0]:a,!o){t.next=4;break}return t.next=4,e.goToTime(o);case 4:n(i,l);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();y.onChange=E}else y.disabled=!0;return v.createElement(qt,(0,m.Z)({className:"slider"},y))}function _t(){v.useContext(ge).icons;var e=v.useContext(zt),t=Ue(),n=e.changeHandler,r=e.property,a=e.value,i=e.name,o=e.time,s=e.defaultValue;if(!r)return null;var u=r.defaultValue,d=(0,h.isDefined)(a)?a:(0,h.isDefined)(s)?s:u,p={type:"color",name:i,value:String(d)};return n?p.onChange=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(r){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.target.value,!o){e.next=4;break}return e.next=4,t.goToTime(o);case 4:n(i,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():p.disabled=!0,v.createElement("input",(0,m.Z)({},p))}function Jt(){var e=v.useContext(zt),t=e.changeHandler,n=e.property,r=e.value,a=e.name;if(!n)return null;var i={name:a,type:"text",value:String(r)};return t?i.onChange=function(e){t(a,e.target.value)}:i.disabled=!0,v.createElement("input",(0,m.Z)({},i))}function Xt(){var e=v.useContext(zt),t=e.changeHandler,n=e.property,r=e.value,a=e.name,i=n.options;(0,h.assertPopulatedArray)(i);var o={children:i.map(String).map((function(e){var t={value:e,children:e,key:e};return v.createElement("option",(0,m.Z)({},t))})),name:a,value:String(r),key:"".concat(a,"-select")};return t?o.onChange=function(e){t(a,e.target.value)}:o.disabled=!0,v.createElement("select",(0,m.Z)({},o))}Gt[h.DataType.Boolean]=v.createElement(Ft,null),Gt[h.DataType.ContainerId]=v.createElement(Lt,{types:h.ContainerTypes,className:"definition-drop"},v.createElement(ut,{className:"definition preview"})),Gt[h.DataType.ContentId]=v.createElement(Lt,{types:h.ContentTypes,className:"definition-drop"},v.createElement(ut,{className:"definition preview"})),Gt[h.DataType.FontId]=v.createElement(Vt,null),Gt[h.DataType.Icon]=v.createElement(Ht,null),Gt[h.DataType.Number]=v.createElement(Wt,null),Gt[h.DataType.Frame]=v.createElement(Wt,null),Gt[h.DataType.Percent]=v.createElement(Ut,null),Gt[h.DataType.Rgb]=v.createElement(_t,null),Gt[h.DataType.String]=v.createElement(Jt,null),Gt[h.DataType.Option]=v.createElement(Xt,null);var Kt=(a={},(0,s.Z)(a,h.DataGroup.Size,At),(0,s.Z)(a,h.DataGroup.Point,At),(0,s.Z)(a,h.DataGroup.Opacity,At),(0,s.Z)(a,h.DataGroup.Color,At),(0,s.Z)(a,h.DataGroup.Effects,At),(0,s.Z)(a,h.DataGroup.Timing,At),a);function Qt(e){var t=v.useContext(ge).icons,n=Ue(),r=e.selectType,a=e.selectedItems,i=(0,p.Z)(e,B);(0,h.assertSelectType)(r);var o=v.useContext(Mt),c=a||o.selectedItems,l=o.changeTweening,s=o.selectedInfo,u=s.tweenDefined,d=s.tweenSelected,f=s.onEdge,y=s.time,E=s.nearStart,Z=s.timeRange;(0,h.assertTimeRange)(Z),(0,h.assertTime)(y);var g=u[h.DataGroup.Color],T=d[h.DataGroup.Color],C=(0,h.selectedPropertyObject)(c,h.DataGroup.Color,r),k=C.color,b=C["color".concat(h.PropertyTweenSuffix)],D=T?b:k,S=D.property,x=D.changeHandler,P=D.value,w=D.name,N=S.type,M=S.name,I=w||M,O=Gt[N],R={property:S,value:P,name:I,changeHandler:x};R.time=(0,h.tweenInputTime)(Z,f,E,g,T),T&&(R.defaultValue=k.value);var A=[h.ClassSelected,h.ClassButton].join(" "),j={children:t.start,className:T?h.ClassButton:A,key:"start",onClick:function(){n.goToTime(Z.startTime),l(h.DataGroup.Color,!1)}},G={key:"end",className:T?A:h.ClassButton,children:g?t.end:t.endUndefined,onClick:function(){n.goToTime(Z.lastTime),l(h.DataGroup.Color,!0)}},z={key:"context",value:R,children:O},F=(0,m.Z)((0,m.Z)({},i),{},{key:"inspector-".concat(r,"-").concat(I),children:[t.color,v.createElement(zt.Provider,(0,m.Z)({},z)),v.createElement(ae,{className:"start-end",key:"start-end"},v.createElement(ae,(0,m.Z)({},j)),v.createElement(ae,(0,m.Z)({},G)))]});return v.createElement(ae,(0,m.Z)({},F))}function Yt(e){var t=e.property,n=e.className,r=e.removeHandler,a=e.index,i=e.movable,o=e.selected,c=e.select,l=(0,p.Z)(e,z),s=o===i,u=v.useContext(ge).icons,d=function(){s||c(i)},f=[n||"movable"];s&&f.push(h.ClassSelected);var E=[],Z=i.value("label"),g=i.value("icon");if((0,h.isPopulatedString)(g)){var T=u[g];T&&E.push(T)}(0,h.isPopulatedString)(Z)&&E.push(Z);var C=(0,m.Z)((0,m.Z)({},l),{},{children:E,className:f.join(" "),onMouseDown:d,onDragStart:function(e){s||d();var n={index:a},r=JSON.stringify(n),i=e.dataTransfer;i&&(i.effectAllowed="move",i.setData("".concat(t).concat(y.DragSuffix),r))},onDragEnd:function(e){var t=e.dataTransfer;t&&("none"===t.dropEffect&&r(i))},onClick:function(e){return e.stopPropagation()},draggable:!0});return v.createElement(ae,(0,m.Z)({},C))}function $t(e){var t=e.defaultValue,n=e.changeHandler,r=e.time,a=e.property,i=e.value,o=e.name,c=a.type,l=a.defaultValue,s={key:"context",value:{property:a,value:i,changeHandler:n,name:o,time:r,defaultValue:(0,h.isDefined)(t)?t:l},children:Gt[c]};return v.createElement(zt.Provider,(0,m.Z)({},s))}function en(e){var t=v.useContext(ge).icons,n=v.useContext(Mt),r=e.selectedItems,a=n.selectedItems,i=r||a,o=[],c=[],l={};return i.forEach((function(n){if((0,h.isSelectedProperty)(n)){var r=n.property,a=n.changeHandler,s=n.selectType,u=n.value,d=n.name,p=r.name,f=r.group;if(f){var y=[f,s].join("-");return void(l[y]||(l[y]=!0,c.push(v.cloneElement(Kt[f],{selectType:s,selectedItems:i}))))}var E=d||p,Z=(0,m.Z)({key:"inspector-".concat(s,"-").concat(E),property:r,value:u,changeHandler:a,name:E},e),g=t[E],T=v.createElement($t,(0,m.Z)({},Z));if(g){var C=[T];C.unshift(g);var k={children:C,className:"row",key:"icon-".concat(s,"-").concat(E)};o.push(v.createElement(ae,(0,m.Z)({},k)))}else o.push(T)}else{var b=n.name;(0,h.assertDataGroup)(b);var D={key:"inspector-".concat(b),selectedMovable:n};c.push(v.cloneElement(Kt[b],D))}})),v.createElement(v.Fragment,null,o,c)}function tn(e){var t=e.useView,n=e.selected,r=(0,p.Z)(e,F);if(!t)return v.createElement("button",(0,m.Z)({},r));var a=r.disabled,i=r.className,o=(0,p.Z)(r,L),c=[h.ClassButton];i&&c.push(i),a?c.push(h.ClassDisabled):n&&c.push(h.ClassSelected);var l=(0,m.Z)((0,m.Z)({},o),{},{className:c.join(" ")});return v.createElement(ae,(0,m.Z)({},l))}function nn(e){var t=e.movableGenerator,n=e.selectedMovable,r=e.property,a=(0,p.Z)(e,V);(0,h.assertPopulatedObject)(n);var i=Ue(),o=v.useContext(ge),c=v.useState(!1),l=(0,d.Z)(c,2),s=l[0],u=l[1],f=v.useState(null),E=(0,d.Z)(f,2),Z=E[0],g=E[1],T=v.useRef(null),C=v.useMemo((function(){var e=["list"];return s&&e.push(h.ClassDropping),e.join(" ")}),[s]),k=o.icons,b=n.value,D=n.addHandler,S=n.removeHandler,x=n.moveHandler,P=Z&&b.includes(Z)?Z:null;P!==Z&&g(P);var w=function(e){var t;return!(null===(t=(0,y.dropType)(e.dataTransfer))||void 0===t||!t.startsWith(r))},N={children:b.map((function(e,t){var n={key:e.id,selected:P,select:g,movable:e,index:t,removeHandler:S,property:r};return v.createElement(Yt,(0,m.Z)({},n))})),ref:T,onDragLeave:function(){u(!1)},onDragOver:function(e){var t=w(e);u(t),t&&e.preventDefault()},onDrop:function(e){if(u(!1),w(e)){e.preventDefault();var t=e.dataTransfer;if(t){var n=(0,y.dropType)(t),r=t.getData(n),a=JSON.parse(r).index,i=function(e){var t=e.target;if(t&&t instanceof HTMLDivElement){var n=t.getAttribute("index");if(n)return Number(n)}return b.length}(e);i!==a&&((0,h.assertDefined)(P),x(P,i))}}},onClick:function(){g(null)},key:"view",className:C},M={disabled:!P,onClick:function(){S(P)},key:"remove-button",children:k.remove},I=[k[r],v.createElement(tn,(0,m.Z)({},M))];if(t){var O={key:"add-button",children:k.add,onClick:function(){D(t({}))}};I.push(v.createElement(tn,(0,m.Z)({},O)))}var R={className:"icons",children:I,key:"icons"},A=(0,m.Z)((0,m.Z)({},a),{},{key:"".concat(r,"s-view"),className:"row",children:[v.createElement(ae,(0,m.Z)({},R)),v.createElement(ae,(0,m.Z)({},N))]}),j=v.createElement(ae,(0,m.Z)({},A));if(!P)return j;var G={selectedItems:P.selectedItems(i.actions),key:"movable-properties"};return v.createElement(v.Fragment,null,j,v.createElement(en,(0,m.Z)({},G)))}function rn(e){var t=v.useContext(ge).icons,n=Ue(),r=e.selectType,a=e.selectedItems,i=(0,p.Z)(e,H);(0,h.assertSelectType)(r);var o=v.useContext(Mt),c=a||o.selectedItems,l=o.changeTweening,s=o.selectedInfo,u=s.tweenDefined,d=s.tweenSelected,f=s.onEdge,y=s.time,E=s.nearStart,Z=s.timeRange;(0,h.assertTimeRange)(Z),(0,h.assertTime)(y);var g=u[h.DataGroup.Opacity],T=d[h.DataGroup.Opacity],C=(0,h.selectedPropertyObject)(c,h.DataGroup.Opacity,r),k=C.opacity,b=C["opacity".concat(h.PropertyTweenSuffix)],D=T?b:k,S=D.property,x=D.changeHandler,P=D.value,w=D.name,N=S.type,M=S.name,I=w||M,O=Gt[N],R={property:S,value:P,name:I,changeHandler:x};R.time=(0,h.tweenInputTime)(Z,f,E,g,T),T&&(R.defaultValue=k.value);var A=[h.ClassSelected,h.ClassButton].join(" "),j={children:t.start,className:T?h.ClassButton:A,key:"start",onClick:function(){n.goToTime(Z.startTime),l(h.DataGroup.Opacity,!1)}},G={key:"end",className:T?A:h.ClassButton,children:g?t.end:t.endUndefined,onClick:function(){n.goToTime(Z.lastTime),l(h.DataGroup.Opacity,!0)}},B={key:"context",value:R,children:O},z=(0,m.Z)((0,m.Z)({},i),{},{key:"inspector-".concat(r,"-").concat(I),children:[t.opacity,v.createElement(zt.Provider,(0,m.Z)({},B)),v.createElement(ae,{className:"start-end",key:"start-end"},v.createElement(ae,(0,m.Z)({},j)),v.createElement(ae,(0,m.Z)({},G)))]});return v.createElement(ae,(0,m.Z)({},z))}function an(e){var t=v.useContext(ge).icons,n=Ue(),r=e.selectType,a=e.selectedItems,i=(0,p.Z)(e,W);(0,h.assertSelectType)(r);var o=v.useContext(Mt),c=a||o.selectedItems,l=o.changeTweening,s=o.selectedInfo,u=s.tweenDefined,d=s.tweenSelected,f=s.onEdge,y=s.time,E=s.nearStart,Z=s.timeRange;(0,h.assertTimeRange)(Z),(0,h.assertTime)(y);var g=u[h.DataGroup.Point],T=d[h.DataGroup.Point],C=(0,h.selectedPropertyObject)(c,h.DataGroup.Point,r),k=(0,h.selectedPropertiesScalarObject)(C),b=C.offE,D=C.offW,S=C.offN,x=C.offS,P=C.x,w=C.y,N=C["x".concat(h.PropertyTweenSuffix)],M=C["y".concat(h.PropertyTweenSuffix)],I=T?N:P,O=T?M:w,R=k.offE,A=k.offW,j=k.offN,G=k.offS,B={},z=[I,O],F=(0,h.tweenInputTime)(Z,f,E,g,T);z.forEach((function(e){if(e){var t=e.property,n=e.changeHandler,a=e.value,i=e.name,o=t.type,c=t.name,l=i||c,s=l.replace(h.PropertyTweenSuffix,""),u=Gt[o],d="inspector-".concat(r,"-").concat(l),p={property:t,value:a,name:l,changeHandler:n,time:F};T&&(p.defaultValue=k[s]);var f={key:d,value:p,children:u};B[s]=v.createElement(zt.Provider,(0,m.Z)({},f))}else console.error("PointInput",I,O)}));var L=[h.ClassSelected,h.ClassButton].join(" "),V={children:t.start,className:T?h.ClassButton:L,key:"start",onClick:function(){n.goToTime(Z.startTime),l(h.DataGroup.Point,!1)}},H={key:"end",className:T?L:h.ClassButton,children:g?t.end:t.endUndefined,onClick:function(){n.goToTime(Z.lastTime),l(h.DataGroup.Point,!0)}},q=[t.point,v.createElement(ae,{className:"start-end",key:"".concat(r,"-point-start-end")},v.createElement(ae,(0,m.Z)({},V)),v.createElement(ae,(0,m.Z)({},H)))],U=[v.createElement(ae,{key:"horz-icon",children:t.horz,className:h.ClassButton})],_=[v.createElement(ae,{key:"vert-icon",children:t.vert,className:h.ClassButton})];if(b){var J={key:"lock-east",className:h.ClassButton,children:R?t.unlock:t.lock,onClick:function(){b.changeHandler("offE",!R)}},X=v.createElement(ae,(0,m.Z)({},J));U.push(X)}if(U.push(B.x),D){var K={key:"lock-west",className:h.ClassButton,children:A?t.unlock:t.lock,onClick:function(){D.changeHandler("offW",!A)}},Q=v.createElement(ae,(0,m.Z)({},K));U.push(Q)}if(S){var Y={key:"lock-north",className:h.ClassButton,children:j?t.unlock:t.lock,onClick:function(){S.changeHandler("offN",!j)}},$=v.createElement(ae,(0,m.Z)({},Y));_.push($)}if(_.push(B.y),x){var ee={key:"lock-south",className:h.ClassButton,children:G?t.unlock:t.lock,onClick:function(){x.changeHandler("offS",!G)}},te=v.createElement(ae,(0,m.Z)({},ee));_.push(te)}var ne=[v.createElement(ae,{key:"x",children:U}),v.createElement(ae,{key:"y",children:_})],re=(0,m.Z)({},i);return v.createElement("fieldset",(0,m.Z)({},re),v.createElement("legend",{key:"legend"},v.createElement(ae,null,q)),ne)}Kt[h.DataGroup.Color]=v.createElement(Qt,{className:"color tween row",key:"color-group-input"}),Kt[h.DataGroup.Effects]=v.createElement(nn,{property:"effect",key:"effects-group-input"}),Kt[h.DataGroup.Opacity]=v.createElement(rn,{className:"opacity tween row",key:"opacity-group-input"}),Kt[h.DataGroup.Point]=v.createElement(an,{key:"point-input"});var on=(i={},(0,s.Z)(i,h.Orientation.H,"width"),(0,s.Z)(i,h.Orientation.V,"height"),i);function cn(e){var t=v.useContext(ge).icons,n=Ue(),r=e.selectType,a=e.selectedItems,i=(0,p.Z)(e,q);(0,h.assertSelectType)(r,"selectType");var o=v.useContext(Mt),c=a||o.selectedItems,l=o.selectedInfo,s=o.changeTweening,u=l.tweenDefined,d=l.tweenSelected,f=l.onEdge,y=l.time,E=l.nearStart,Z=l.timeRange;(0,h.assertTimeRange)(Z),(0,h.assertTime)(y);var g=u[h.DataGroup.Size],T=d[h.DataGroup.Size],C=(0,h.selectedPropertyObject)(c,h.DataGroup.Size,r),k=C.lock,b=C.width,D=C.height,S=C["width".concat(h.PropertyTweenSuffix)],x=C["height".concat(h.PropertyTweenSuffix)],P=T?S:b,w=T?x:D,N=(0,h.selectedPropertiesScalarObject)(C),M=N.lock;(0,h.assertString)(M,"lockValue");var I=(0,h.isOrientation)(M)?M:void 0,O={},R=[P,w],A=(0,h.tweenInputTime)(Z,f,E,g,T);R.forEach((function(e){var t=e.property,n=e.changeHandler,a=e.value,i=e.name,o=t.type,c=t.name,l=i||c,s=l.replace(h.PropertyTweenSuffix,""),u=Gt[o],d="inspector-".concat(r,"-").concat(l),p={property:t,value:a,name:l,time:A};T&&(p.defaultValue=N[s]),I&&s===on[I]||(p.changeHandler=n);var f={key:d,value:p,children:u};O[s]=v.createElement(zt.Provider,(0,m.Z)({},f))}));var j={key:"lock-width",className:h.ClassButton,children:I===h.Orientation.H?t.lock:t.unlock,onClick:function(){var e=I===h.Orientation.H?"":h.Orientation.H;k.changeHandler("lock",e)}},G=v.createElement(ae,(0,m.Z)({},j)),B={key:"lock-height",className:h.ClassButton,children:I===h.Orientation.V?t.lock:t.unlock,onClick:function(){var e=I===h.Orientation.V?"":h.Orientation.V;k.changeHandler("lock",e)}},z=[h.ClassSelected,h.ClassButton].join(" "),F=v.createElement(ae,(0,m.Z)({},B)),L={children:t.start,className:T?h.ClassButton:z,key:"start",onClick:function(){n.goToTime(Z.startTime),s(h.DataGroup.Size,!1)}},V={key:"end",className:T?z:h.ClassButton,children:g?t.end:t.endUndefined,onClick:function(){n.goToTime(Z.lastTime),s(h.DataGroup.Size,!0)}},H=[t.size,v.createElement(ae,{className:"start-end",key:"".concat(r,"-size-start-end")},v.createElement(ae,(0,m.Z)({},L)),v.createElement(ae,(0,m.Z)({},V)))],W=[v.createElement(ae,{key:"width-icon",children:t.width,className:h.ClassButton}),O.width,G],U=[v.createElement(ae,{key:"height-icon",children:t.height,className:h.ClassButton}),O.height,F],_=[v.createElement(ae,{key:"width",children:W}),v.createElement(ae,{key:"height",children:U})],J=(0,m.Z)({},i);return v.createElement("fieldset",(0,m.Z)({},J),v.createElement("legend",{key:"legend"},v.createElement(ae,null,H)),_)}function ln(e){var t=v.useContext(ge).icons,n=e.selectType,r=e.selectedItems,a=e.dataGroup,i=(0,p.Z)(e,U);(0,h.assertSelectType)(n);var c=v.useContext(Mt),l=r||c.selectedItems,s=(0,h.selectedPropertyObject)(l,a,n),u=Object.fromEntries(Object.entries(s).map((function(t){var n=(0,d.Z)(t,2),r=n[0],a=n[1],i=a.property,o=a.changeHandler,c=a.selectType,l=a.value,s=a.name,u=i.name,p=s||u,f=(0,m.Z)({key:"inspector-".concat(c,"-group-").concat(p),property:i,value:l,changeHandler:o,name:p},e);return[r,v.createElement($t,(0,m.Z)({},f))]}))),f=u[a],y=(0,p.Z)(u,[a].map(o.Z)),E=t[a];if(!(0,h.isPopulatedObject)(y)){var Z={key:a,children:[E,f],className:"row"};return v.createElement(ae,(0,m.Z)({},Z))}var g=[E];f&&g.push(f);var T=Object.entries(y).map((function(e){var n=(0,d.Z)(e,2),r=n[0],a=n[1],i=t[r],o=[a];i&&o.unshift(v.createElement(ae,{key:"".concat(r,"-icon"),children:i,className:h.ClassButton}));var c={key:"".concat(r,"-view"),children:o};return v.createElement(ae,(0,m.Z)({},c))})),C=(0,m.Z)({},i);return v.createElement("fieldset",(0,m.Z)({},C),v.createElement("legend",{key:"legend"},v.createElement(ae,null,g)),T)}Kt[h.DataGroup.Size]=v.createElement(cn,{key:"size-group-input"});var sn={dataGroup:h.DataGroup.Timing,key:"".concat(h.DataGroup.Timing,"-group-input")};function un(e){var t,n=Ue(),r=v.useState((function(){return 0})),a=(0,d.Z)(r,2),i=a[0],o=a[1],c=v.useRef({tweenDefined:{},tweenSelected:{},selectedType:h.SelectType.None,selectTypes:[]}),l=v.useState((function(){return h.SelectTypes})),p=(0,d.Z)(l,2),f=p[0],y=p[1],E=v.useState((function(){return[]})),Z=(0,d.Z)(E,2),g=Z[0],T=Z[1],C=function(){o((function(e){return e+1}))},k=function(){var e=n.selection,t=e.selectTypes,r=e.clip,a=e.mash,i=c.current,o=i.selectedType,l=i.selectTypes,s=f.find((function(e){return t.includes(e)}));(0,h.assertSelectType)(s),s!==o&&(i.selectedType=s),(0,h.arraySet)(l,t);var u=n.selection.selectedItems([s]),p={};if(r&&a){var m=u.filter((function(e){if((0,h.isSelectedProperty)(e)){var t=e.property,n=e.name,r=t.tweenable,a=t.group;if(r&&a&&n)return n.endsWith(h.PropertyTweenSuffix)}}));if(m.forEach((function(e){var t=e.property,n=e.value,r=t.group;(0,h.assertDataGroup)(r),p[r]=(0,h.isDefined)(n)})),m.length){var v=a.time,y=a.quantize,E=r.timeRange(y);i.time=v,i.timeRange=E;var Z=E.frame+Math.round(E.frames/2),g=(0,h.timeFromArgs)(Z,y),k=(0,h.timeEqualizeRates)(g,v),b=(0,d.Z)(k,2),D=b[0],S=b[1];i.nearStart=D.frame>S.frame;var x=i.nearStart?E.startTime:E.lastTime;i.onEdge=v.equalsTime(x)}}i.tweenDefined=p,T(u),C()};Et((t={},(0,s.Z)(t,h.EventType.Action,C),(0,s.Z)(t,h.EventType.Selection,k),t));var b=v.useCallback((function(e){(0,h.assertSelectType)(e),y((function(t){var n=t.indexOf(e);(0,h.assertPositive)(n);var r=[e];return n&&r.push.apply(r,(0,u.Z)(t.slice(0,n))),n<t.length-1&&r.push.apply(r,(0,u.Z)(t.slice(n+1))),(0,h.assertTrue)(r.length===t.length,"type lengths match"),(0,h.arraySet)(t,r),k(),t})),c.current.selectedType=e,T(n.selection.selectedItems([e]))}),[]),D=(0,m.Z)((0,m.Z)({},Nt),{},{actionCount:i,selectedItems:g,changeSelected:b,changeTweening:function(e,t){c.current.tweenSelected[e]=t,k()},selectedInfo:c.current});return v.createElement(Mt.Provider,{value:D},v.createElement(ae,(0,m.Z)({},e)))}function dn(e){return v.createElement(ae,(0,m.Z)({},e))}function pn(e){var t=v.useContext(Mt).selectedInfo.selectedType,n=e.type,r=e.types,a=e.children,i=it(n,r);return(0,h.assertPopulatedArray)(i),i.includes(t)?v.createElement(v.Fragment,null,a):null}function fn(e){var t=e.id,n=e.children,r=e.className;(0,h.assertSelectType)(t);var a=v.useContext(Mt),i=a.changeSelected,o=a.selectedInfo,c=o.selectTypes,l=o.selectedType;if(!c.includes(t))return null;var s=[];(0,h.isPopulatedString)(r)&&s.push(r),l===t&&s.push(h.ClassSelected);var u={children:n,onClick:function(){i(t)},className:s.join(" ")};return v.createElement(ae,(0,m.Z)({},u))}Kt[h.DataGroup.Timing]=v.createElement(ln,(0,m.Z)({},sn));var mn=function(){var e,t,n,r,a,i=Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),o=i.icons;(e=i.props).key||(e.key="inspector"),(t=i.props).className||(t.className="panel inspector"),(n=i.header).content||(n.content=[v.createElement(ae,{key:"panel-icon",children:o.inspector}),v.createElement(Dt,{key:"undo"},v.createElement(tn,null,o.undo,se("undo"))),v.createElement(kt,{key:"redo"},v.createElement(tn,null,o.redo,se("redo")))]),(r=i.footer).content||(r.content=[v.createElement(fn,{key:"mash",className:h.ClassButton,id:"mash"},o.mmTube),v.createElement(fn,{key:"clip",className:h.ClassButton,id:"clip"},o.clip),v.createElement(fn,{key:"container",className:h.ClassButton,id:"container"},o.container),v.createElement(fn,{key:"content",className:h.ClassButton,id:"content"},o.content)]);var c=[v.createElement(en,{key:"properties"})],l=[h.SelectType.Clip,h.SelectType.Track];c.push(v.createElement(pn,{type:"mash",key:"inspector-mash"},v.createElement(ae,null,v.createElement(St,{key:"render-process"},v.createElement(tn,null,se("render"),o.render)),v.createElement(Ot,{key:"view-control"},v.createElement(tn,null,se("view"),o.view))))),l.forEach((function(e){c.push(v.createElement(pn,{key:"".concat(e,"-delete"),type:e},v.createElement(bt,{type:e},v.createElement(tn,null,ue("delete",{type:e}),o.remove))))})),(a=i.content).children||(a.children=v.createElement(v.Fragment,null,c));var s=v.createElement(v.Fragment,null,v.createElement(Ie,(0,m.Z)({},i.header)),v.createElement(dn,(0,m.Z)({},i.content.props),i.content.children),v.createElement(Ie,(0,m.Z)({},i.footer)));return(0,m.Z)((0,m.Z)({},i.props),{},{children:s})},vn=function(e,t){if(t&&e){var n=t.width,r=t.height;e.style.setProperty("--preview-width","".concat(n,"px")),e.style.setProperty("--preview-height","".concat(r,"px"))}};function hn(e){var t=e.editType,n=void 0===t?h.VideoType:t,r=e.clientOptions,a=void 0===r?y.ClientDisabledArgs:r,i=e.previewSize,o=e.icons,c=void 0===o?{}:o,l=e.mashMedia,s=(0,p.Z)(e,_);console.log("Masher",n,i);var u=v.useRef((0,y.clientInstance)(a)),f=v.useRef((0,h.editorInstance)({editType:n})),E=v.useRef({}),Z=v.useRef({}),g=v.useRef(null),T=v.useRef(null),C=v.useContext(wt),k=v.useState(!1),b=(0,d.Z)(k,2),D=b[0],S=b[1],x=v.useState(!1),P=(0,d.Z)(x,2),w=P[0],N=P[1],M=u.current,I=f.current,O=E.current,R=Z.current,A=C.endpointPromise,j=C.servers;v.useEffect((function(){vn(T.current,i)}),[i]);var G=function(e){var t=e||l||{mash:{id:(0,h.idTemporary)(),media:[]}};console.log("Masher.editorLoad",e,l,t);var n=g.current;(0,h.assertObject)(n,"svg"),I.svgElement=n;var r=t.mash;I.load(r)};v.useEffect((function(){if(console.debug("Masher useEffect",D),M.enabled(y.ReadOperation)){if(!D){S(!0);var e={};console.debug("DataDefaultRequest",h.Endpoints.data[n].default,e),A(h.Endpoints.data[n].default,e).then((function(e){var t,r;console.debug("DataDefaultResponse",h.Endpoints.data[n].default,e);e.previewSize;console.log("Masher DataDefaultResponse",null===(t=j.file)||void 0===t?void 0:t.prefix),null!==(r=j.file)&&void 0!==r&&r.prefix&&((0,h.urlBaseInitialize)(String(j.file.prefix)),console.log("Masher DataDefaultResponse",j.file.prefix)),G(e)}))}}else G()}),[D]);var B=function(e){R.mediaId=null===e||void 0===e?void 0:e.id},z={client:M,editor:I,streaming:w,setStreaming:N,current:R,editorIndex:O,drop:function(e,t){return console.log("Masher drop",e,t),e?(console.log("Masher drop editorIndex = ",t),(0,h.isClip)(e)?(console.log("Masher drop Clip"),Promise.resolve([])):(0,h.isEffect)(e)?(console.log("Masher drop Effect"),Promise.resolve([])):(0,h.isMediaObject)(e)?(console.log("Masher drop DefinitionObject"),function(e,t){return I.addMedia(e,t)}(e,t)):(0,h.isMashAndMediaObject)(e)?(console.log("Masher drop MashAndMediaObject"),Promise.resolve([])):function(e,t){var n=(0,y.dropFilesFromList)(e,j.file);if(n.length){var r=[],a=[],i=I.eventTarget;if(n.forEach((function(e){e instanceof File?a.push(e):r.push(e)})),r.length&&r.forEach((function(e){var t=(0,h.idGenerate)("activity-error"),n=(0,m.Z)({id:t,type:y.ActivityType.Error},e);i.emit(h.EventType.Active,n)})),a.length)return I.addFiles(a,t)}else console.log("Masher.dropFiles no info");return Promise.resolve([])}(e,t).then((function(e){console.log("Masher.dropFiles",e);var t=(0,d.Z)(e,1)[0];return(0,h.isMedia)(t)&&B(t),e}))):Promise.resolve([])},changeDefinition:B,icons:c},F=(0,m.Z)((0,m.Z)({},s),{},{onDrop:h.eventStop,ref:T});return v.createElement(ge.Provider,{value:z},v.createElement(ae,(0,m.Z)({},F)),v.createElement("svg",{style:{display:"none"},ref:g}))}var yn={paused:!1,changePaused:h.EmptyMethod,changeVolume:h.EmptyMethod,volume:0},En=v.createContext(yn),Zn=10;function gn(e){var t,n=e.children,r=e.className,a=(0,p.Z)(e,J),i=Ue(),o=v.useState((function(){return(0,h.rectCopy)(i.rect)})),c=(0,d.Z)(o,2),l=c[0],f=c[1],E=v.useRef(null),Z=v.useRef(null),g=v.useContext(ge),T=v.useState(!1),C=(0,d.Z)(T,2),k=C[0],b=C[1],D=v.useContext(En).disabled,S=g.drop,x=v.useRef({}).current,P=v.useState(new ResizeObserver((function(){var e=Z.current;if(e){var t=(0,h.rectRound)(e.getBoundingClientRect());f((function(){return i.rect=t,(0,h.rectCopy)(t)}))}}))),w=(0,d.Z)(P,1)[0];v.useEffect((function(){var e=Z.current;return e&&w.observe(e),function(){w.disconnect()}}),[]);var N=function(){var e=x.redraw;return delete x.timeout,delete x.redraw,i.previewItems(!D).then((function(t){!function(e){var t=E.current;t&&t.replaceChildren.apply(t,(0,u.Z)(e))}(t),e&&I()}))},M=function(){N().then(h.EmptyMethod)},I=function(){var e=E.current,t=i.rect;e&&(0,h.sizeAboveZero)(t)&&(x.timeout?x.redraw=!0:x.timeout=setTimeout(M,Zn))};Et((t={},(0,s.Z)(t,h.EventType.Draw,I),(0,s.Z)(t,h.EventType.Selection,I),t));var O=function(e){return!!e&&(!!(0,y.dragTypes)(e).includes(y.TransferTypeFiles)||(0,h.isMediaType)((0,y.dragType)(e)))},R=function(e){(0,h.eventStop)(e),b(!1)},A=[];r&&A.push(r),k&&A.push(h.ClassDropping);var j=(0,m.Z)((0,m.Z)({},a),{},{ref:Z,className:A.join(" "),key:"player-content",onDragOver:function(e){(0,h.eventStop)(e),b(O(e.dataTransfer))},onDrop:function(e){R(e);var t=e.dataTransfer;if(O(t)){var n=i.mashMedia;(0,h.assertObject)(n,"mashMedia");var r={clip:i.time.scale(n.quantize).frame,track:-1};if((0,y.dragTypes)(t).includes(y.TransferTypeFiles))S(t.files,r);else{var a=(0,y.dragType)(t);(0,h.assertMediaType)(a);var o=(0,y.dragData)(t,a);(0,y.assertDragDefinitionObject)(o);var c=o.mediaObject;(0,h.isMediaObject)(c)&&S(c,r)}}},onDragLeave:R,onPointerDown:function(){i.selection.unset(h.SelectType.Clip)}});if((0,h.sizeAboveZero)(l)){var G={ref:E,key:"svg",className:"svgs"},B=[v.createElement("div",(0,m.Z)({},G))];if(n){var z=v.Children.only(n);v.isValidElement(z)&&B.push(z)}j.children=B}return v.createElement(ae,(0,m.Z)({},j))}function Tn(e){var t=v.useContext(En),n=t.paused,r=t.changePaused,a=(0,m.Z)((0,m.Z)({},e),{},{key:"player-button",onClick:function(){r(!n)}});return v.createElement(ae,(0,m.Z)({},a))}function Cn(e){var t,n=Ue(),r=function(){return n.timeRange.timeRange},a=v.useState(r),i=(0,d.Z)(a,2),o=i[0],c=i[1],l=function(){c(r())};Et((t={},(0,s.Z)(t,h.EventType.Time,l),(0,s.Z)(t,h.EventType.Duration,l),t));var u=(0,m.Z)({value:o.frame,min:0,max:o.frames,step:1,onChange:function(e,t){var r=(0,h.isArray)(t)?t[0]:t;n.time=(0,h.timeFromArgs)(r,o.fps)},className:"frame slider"},e);return v.createElement(qt,(0,m.Z)({},u))}function kn(e){return v.useContext(En).paused?null:e.children}function bn(e){return v.useContext(En).paused?e.children:null}function Dn(e){var t,n=Ue(),r=function(){return n.timeRange},a=v.useState(r),i=(0,d.Z)(a,2),o=i[0],c=i[1],l=function(){c(r())};Et((t={},(0,s.Z)(t,h.EventType.Time,l),(0,s.Z)(t,h.EventType.Duration,l),t));var u=o.seconds,p=o.fps,f=o.lengthSeconds,y=[(0,h.stringSeconds)(u,p,f),"/",(0,h.stringSeconds)(f,p,f)],E=(0,m.Z)((0,m.Z)({},e),{},{key:"player-time",children:y});return v.createElement(ae,(0,m.Z)({},E))}var Sn=function(){var e,t,n,r,a,i=Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),o=i.icons;(e=i.props).key||(e.key="player"),(t=i.props).className||(t.className="panel player"),(n=i.content).children||(n.children=v.createElement(gn,(0,m.Z)({},i.content.props),v.createElement(ae,{key:"drop-box",className:"drop-box"}))),(r=i.header).content||(r.content=[v.createElement(ae,{key:"panel-icon",children:o.app}),v.createElement(It,{key:"select-mashMedia",className:"row",children:o.document}),v.createElement(xt,{key:"save-process"},v.createElement(tn,{key:"button"},se("update"),o.document)),v.createElement(Ct,{key:"create-mashMedia"},v.createElement(tn,null,se("create"),o.document))]),(a=i.footer).content||(a.content=[v.createElement(Tn,{key:"play-button",className:h.ClassButton},v.createElement(kn,{key:"playing"},o.pause),v.createElement(bn,{key:"not-playing"},o.play)),v.createElement(Cn,{key:"time-slider"}),v.createElement(Dn,{key:"time",className:"time"})]);var c=v.createElement(v.Fragment,null,v.createElement(Ie,(0,m.Z)({},i.header)),i.content.children,v.createElement(Ie,(0,m.Z)({},i.footer)));return(0,m.Z)((0,m.Z)({},i.props),{},{children:c})};function xn(e){var t=v.useContext(yt),n=t.scale,r=t.frame,a=v.useMemo((function(){return(0,m.Z)((0,m.Z)({},e),{},{style:{left:(0,y.pixelFromFrame)(r,n)}})}),[r,n]);return v.createElement(ae,(0,m.Z)({},a))}function Pn(e){var t=Ue().selection.mash,n=e.className,r=e.children,a=(0,p.Z)(e,X),i=v.Children.only(r);(0,h.assertTrue)(v.isValidElement(i));var o=v.useContext(vt),c=v.useContext(yt),l=o.track,s=c.dragTypeValid,u=c.onDragLeave,d=c.onDrop,f=c.droppingTrack,E=c.setDroppingTrack,Z=c.droppingPosition,g=c.setDroppingPosition,T=c.setDroppingClip,C=c.selectedTrack,k=v.useMemo((function(){var e=l===C,t=[];return n&&t.push(n),e&&t.push(h.ClassSelected),f===l&&t.push((0,y.droppingPositionClass)(Z)),t.join(" ")}),[Z,f,C]);if(!t||!l)return null;var b=l.clips,D=l.dense,S=l.index,x=(0,m.Z)((0,m.Z)({},a),{},{className:k,children:function(){var e=D?-1:0,t=i.props;return b.map((function(n){var r=(0,m.Z)((0,m.Z)({},t),{},{key:n.id}),a={children:v.cloneElement(i,r),value:{clip:n,prevClipEnd:e},key:n.id},o=v.createElement(ft.Provider,(0,m.Z)({},a));return D||(e=n.frames+n.frame),o}))}(),onDragLeave:u,onDragOver:function(e){(0,h.eventStop)(e);var t=e.dataTransfer;if(t){var n=s(t),r=n?h.DroppingPosition.At:h.DroppingPosition.None;T(),E(n?l:void 0),g(r)}},onDrop:d,key:"track-".concat(S)});return v.createElement(ae,(0,m.Z)({},x))}function wn(e){var t=v.useRef(null),n=v.useContext(yt),r=v.useState(new ResizeObserver((function(){(0,n.setRect)(t.current.getBoundingClientRect())}))),a=(0,d.Z)(r,1)[0];v.useEffect((function(){var e=t.current;return e&&a.observe(e),function(){a.disconnect()}}),[t.current]);var i=(0,m.Z)((0,m.Z)({},e),{},{ref:t});return v.createElement(ae,(0,m.Z)({},i))}function Nn(e){var t=Ue(),n=v.useContext(yt),r=function(){return!t.selection.mash},a=v.useState(r),i=(0,d.Z)(a,2),o=i[0],c=i[1];Et((0,s.Z)({},h.EventType.Selection,(function(){c(r())})));var l=(0,m.Z)({disabled:o,key:"time-slider",value:n.zoom,min:0,max:1,step:.01,onChange:function(e,t){var r=(0,h.isArray)(t)?t[0]:t;n.zoom!==r&&n.setZoom(r)}},e);return v.createElement(qt,(0,m.Z)({className:"zoom slider"},l))}function Mn(e){var t,n=v.useState((function(){return 0})),r=(0,d.Z)(n,2),a=r[0],i=r[1],o=function(){i((function(e){return e+1}))},c=Ue();Et((t={},(0,s.Z)(t,h.EventType.Loaded,o),(0,s.Z)(t,h.EventType.Track,o),t));var l=e.children,u={key:"track-content",children:v.useMemo((function(){var e=c.selection.mash;if(!e)return[];var t=e.tracks;return(0,h.arrayReversed)(t).map((function(e,t){var n=e.identifier,r=e.index,a={children:v.Children.map(l,(function(e){if(!v.isValidElement(e))throw"TimelineTracks";return v.cloneElement(e,{key:"track-clone-".concat(t,"-").concat(r,"-").concat(n)})})),value:{track:e},key:"track-context-".concat(t,"-").concat(r,"-").concat(n)};return v.createElement(vt.Provider,(0,m.Z)({},a))}))}),[a])};return v.createElement(v.Fragment,(0,m.Z)({},u))}function In(e){var t=Ue(),n=v.useRef(-1),r=v.useRef(null),a=v.useContext(yt),i=a.frames,o=a.scale,c=a.rect,l=e.className,u=e.inactive,f=e.styleHeight,E=e.styleWidth,Z=(0,p.Z)(e,K),g=function(){return!t.selection.mash},T=v.useState(g),C=(0,d.Z)(T,2),k=C[0],b=C[1];Et((0,s.Z)({},h.EventType.Selection,(function(){b(g())})));var D=c.width,S=c.height,x=v.useMemo((function(){var e=[];l&&e.push(l),k&&e.push(h.ClassDisabled);var a=(0,m.Z)((0,m.Z)({},Z),{},{ref:r,className:e.join(" ")});if(E||f){var c={};if(f&&(c.minHeight=S),E){var s=(0,y.pixelFromFrame)(i,o,"ceil");c.minWidth=Math.max(s,s)}a.style=c}return u||k||(a.onPointerDown=function(){var e=globalThis.window,a=function(){e.removeEventListener("pointermove",i),e.removeEventListener("pointerup",c)},i=function(e){(0,h.eventStop)(e);var a=r.current;if(a&&t.selection.mash){var i=e.clientX;if(n.current!==i){n.current=i;var c=a.getBoundingClientRect(),l=Math.max(0,Math.min(c.width,i-c.x)),s=(0,h.pixelToFrame)(l,o,"floor");t.time=(0,h.timeFromArgs)(s,t.selection.mash.quantize)}}},c=function(e){i(e),a()};return function(t){t.stopPropagation(),n.current=-1,e.addEventListener("pointermove",i),e.addEventListener("pointerup",c),i(t)}}()),a}),[i,o,D,S,k]);return v.createElement(ae,(0,m.Z)({},x))}function On(e){var t=e.className,n=(0,p.Z)(e,Q),r=v.useContext(yt),a=r.dragTypeValid,i=r.onDrop,o=r.setScroll,c=r.setDroppingClip,l=r.setDroppingTrack,u=r.setDroppingPosition,f=v.useRef(null),y=v.useState(!1),E=(0,d.Z)(y,2),Z=E[0],g=E[1],T=Ue();Et((0,s.Z)({},h.EventType.Loaded,(function(){var e;null===(e=f.current)||void 0===e||e.scrollTo(0,0)})));var C=function(e){(0,h.eventStop)(e),g(!1)},k=[];t&&k.push(t),Z&&k.push(h.ClassDropping);var b=(0,m.Z)((0,m.Z)({className:k.join(" ")},n),{},{onPointerDown:function(){T.selection.unset(h.SelectType.Track)},onScroll:function(){var e=f.current;if(e){var t=e.scrollLeft,n=e.scrollTop;o({x:t,y:n})}},onDragOver:function(e){(0,h.eventStop)(e);var t=e.dataTransfer;if(t){var n=a(t),r=n?h.DroppingPosition.At:h.DroppingPosition.None;c(),l(),u(r),g(n)}},onDragLeave:C,onDrop:function(e){C(e),i(e)},ref:f});return v.createElement(ae,(0,m.Z)({},b))}function Rn(e){var t=Ue(),n=function(){return!t.selection.mash},r=v.useState(n),a=(0,d.Z)(r,2),i=a[0],o=a[1];Et((0,s.Z)({},h.EventType.Selection,(function(){o(n())})));var c=e.children,l=(0,p.Z)(e,Y),u=(0,m.Z)((0,m.Z)({},l),{},{disabled:i});return u.onClick=function(){t.addTrack()},v.cloneElement(v.Children.only(c),u)}function An(e){var t=e.className,n=e.icons,r=(0,p.Z)(e,$),a=v.useContext(yt),i=v.useContext(vt),o=a.droppingTrack,c=a.droppingPosition,l=a.selectedTrack,s=i.track,u=v.useMemo((function(){var e=[];return t&&e.push(t),s===l&&e.push(h.ClassSelected),s===o&&e.push((0,y.droppingPositionClass)(c)),e.join(" ")}),[c,o,l]);if(!s)return null;var d=s.dense,f=s.index,E=d?n.trackDense:n.track,Z=(0,m.Z)((0,m.Z)({},r),{},{className:u,children:E,key:"track-icon-".concat(f)});return v.createElement(ae,(0,m.Z)({},Z))}function jn(e){var t=Ue(),n=e.zoom,r=e.children,a=(0,p.Z)(e,ee),i=v.useContext(yt),o=function(){return!t.selection.mash},c=v.useState(o),l=(0,d.Z)(c,2),u=l[0],f=l[1];Et((0,s.Z)({},h.EventType.Selection,(function(){f(o())})));var y=(0,m.Z)((0,m.Z)({},a),{},{onClick:function(){i.setZoom(n)},disabled:u});return v.cloneElement(v.Children.only(r),y)}function Gn(e){var t=Ue(),n=v.useContext(ge),r=n.current,a=n.drop,i=function(){return!t.selection.mash},o=v.useState(i),c=(0,d.Z)(o,2),l=c[0],u=c[1];Et((0,s.Z)({},h.EventType.Selection,(function(){u(i())})));var f=e.children,y=(0,p.Z)(e,te),E=(0,m.Z)((0,m.Z)({},y),{},{disabled:l});return E.onClick=function(){var e=t.selection,n=t.mashMedia,i=e.clip,o=e.track,c=r.mediaId||h.DefaultContentId;(0,h.assertPopulatedString)(c);var l={id:c},s={clip:0,track:-1};i&&o?(s.clip=o.dense?o.clips.indexOf(i):i.endFrame,s.track=o.index):s.clip=t.time.scale(n.quantize).frame,a(l,s)},v.cloneElement(v.Children.only(f),E)}var Bn=function(){var e,t,n,r,a,i=Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),o=i.icons;(e=i.props).key||(e.key="timeline"),(t=i.props).className||(t.className="panel timeline"),(n=i.header).content||(n.content=[v.createElement(ae,{key:"panel-icon",children:o.timeline})]),(r=i.footer).content||(r.content=[v.createElement(Gn,{key:"add-clip"},v.createElement(tn,{children:o.add})),v.createElement(Rn,{key:"add-track"},v.createElement(tn,{children:[o.add,o.trackDense]})),v.createElement(jn,{key:"zoom-out",zoom:0},v.createElement(tn,{useView:!0},o.zoomLess)),v.createElement(Nn,{key:"zoomer"}),v.createElement(jn,{key:"zoom-in",zoom:1},v.createElement(tn,{useView:!0},o.zoomMore))]),(a=i.content).children||(a.children=v.createElement(v.Fragment,null,v.createElement(In,{styleWidth:!0,inactive:!0,styleHeight:!0,className:"scrubber-bar"},v.createElement(xn,{className:"scrubber-element-bar"})),v.createElement(In,{styleWidth:!0,className:"scrubber-icon"},v.createElement(xn,{className:"scrubber-element-icon"})),v.createElement(Mn,null,v.createElement(An,{className:"track-icon",icons:o}),v.createElement(Pn,{className:"track"},v.createElement(gt,{className:"clip preview"}))),v.createElement(wn,{className:"drop-box"})));var c=v.createElement(v.Fragment,null,v.createElement(Ie,(0,m.Z)({},i.header)),v.createElement(On,(0,m.Z)({},i.content.props),i.content.children),v.createElement(Ie,(0,m.Z)({},i.footer)));return(0,m.Z)((0,m.Z)({},i.props),{},{children:c})};function zn(e){var t,n=e.disabled,r=(0,p.Z)(e,ne),a=Ue(),i=v.useState(a.paused),o=(0,d.Z)(i,2),c=o[0],l=o[1],u=v.useState(a.volume),f=(0,d.Z)(u,2),y=f[0],E=f[1],Z=function(){l(a.paused)};Et((t={},(0,s.Z)(t,h.EventType.Pause,Z),(0,s.Z)(t,h.EventType.Play,Z),(0,s.Z)(t,h.EventType.Volume,(function(){E(a.volume)})),t));var g={value:{paused:c,disabled:n,volume:y,changePaused:function(e){a.paused=e},changeVolume:function(e){a.volume=e}},children:v.createElement(ae,(0,m.Z)({},r))};return v.createElement(En.Provider,(0,m.Z)({},g))}var Fn=1;function Ln(e){var t,n=Ue(),r=v.useContext(ge).drop,a=function(){var e;return(null===(e=n.selection.mash)||void 0===e?void 0:e.frame)||0},i=function(){var e;return(null===(e=n.selection.mash)||void 0===e?void 0:e.frames)||0},o=v.useState(i),c=(0,d.Z)(o,2),l=c[0],u=c[1],p=v.useState(a),f=(0,d.Z)(p,2),E=f[0],Z=f[1],g=v.useState(h.DroppingPosition.None),T=(0,d.Z)(g,2),C=T[0],k=T[1],b=v.useState(),D=(0,d.Z)(b,2),S=D[0],x=D[1],P=v.useState(),w=(0,d.Z)(P,2),N=w[0],M=w[1],I=v.useState(),O=(0,d.Z)(I,2),R=O[0],A=O[1],j=v.useState(0),G=(0,d.Z)(j,2),B=G[0],z=G[1],F=v.useState(),L=(0,d.Z)(F,2),V=L[0],H=L[1],W=v.useState(Fn),q=(0,d.Z)(W,2),U=q[0],_=q[1],J=v.useState(h.RectZero),X=(0,d.Z)(J,2),K=X[0],Q=X[1],Y=v.useState(h.RectZero),$=(0,d.Z)(Y,2),ee=$[0],te=$[1],ne=function(){z((function(e){return e+1}))};Et((t={},(0,s.Z)(t,h.EventType.Loaded,(function(){_(Fn)})),(0,s.Z)(t,h.EventType.Action,ne),(0,s.Z)(t,h.EventType.Selection,(function(){H(n.selection.clip),A(n.selection.track)})),(0,s.Z)(t,h.EventType.Time,(function(){Z(a())})),(0,s.Z)(t,h.EventType.Duration,(function(){u(i())})),t));var re=function(e,t){var n=(0,y.dragTypes)(e);if(n.includes(y.TransferTypeFiles))return!0;var r=n.find(y.isTransferType);return!!r&&(!(!t&&!r.startsWith("clip"))||(0,y.dragMediaType)(r)!==h.EffectType)},ie=function(e){(0,h.eventStop)(e),k(h.DroppingPosition.None),x(void 0),M(void 0)},oe=K.width,ce=v.useMemo((function(){return oe?(0,y.pixelPerFrame)(l,oe,U):0}),[U,oe,l]),le={scroll:ee,setScroll:te,scale:ce,refreshed:B,refresh:ne,zoom:U,setZoom:_,rect:K,setRect:Q,droppingTrack:S,setDroppingTrack:x,droppingClip:N,setDroppingClip:M,droppingPosition:C,setDroppingPosition:k,onDragLeave:ie,onDrop:function(e){(0,h.eventStop)(e);var t=e.dataTransfer,a=e.clientX;if(console.log("Timeline onDrop",null===t||void 0===t?void 0:t.types),t&&re(t,N)){console.log("Timeline onDrop",t.types,N);var i=(0,y.dragTypes)(t).includes(y.TransferTypeFiles),o=!(null===S||void 0===S||!S.dense),c=S?S.index:-1,l=(null===S||void 0===S?void 0:S.clips)||[],s=i?{}:(0,y.dragData)(t),u=!i&&(0,y.isDragOffsetObject)(s),d=u?s.offset:0,p=function(e,t){if(!e)return-1;if(!N)return 0;var n=t.indexOf(N);return C===h.DroppingPosition.After?n+1:n}(o,l);if(!(0,h.isPositive)(p)){var f=a-K.x,m=(0,h.pixelToFrame)(Math.max(0,ee.x+(f-d)),ce);p=o?function(e,t){var n=t.length;if(!n)return 0;var r=t.findIndex((function(t){return e<t.frame+t.frames}));return r>-1?r:n}(m,l):m}var v={clip:p,track:c};if(i)r(t.files,v);else if(u)if(console.log("onDrop",s),(0,y.isDragDefinitionObject)(s)){var E=s.mediaObject;(0,h.isMediaObject)(E)&&r(E,v)}else{var Z=n.selection.clip;(0,h.assertClip)(Z),n.moveClip(Z,v)}ie(e)}else console.log("Timeline onDrop invalid",null===t||void 0===t?void 0:t.types,!!N)},dragTypeValid:re,selectedClip:V,selectedTrack:R,frame:E,frames:l},se={children:v.createElement(ae,(0,m.Z)({},e)),value:le};return v.createElement(yt.Provider,(0,m.Z)({},se))}function Vn(e){return v.createElement(ae,(0,m.Z)({},e))}var Hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.className||(e.className="editor masher"),e.icons||(e.icons=E.Icons);var t=e.panels,n=void 0===t?{}:t,r=(0,p.Z)(e,re),a=n.player,i=void 0===a?{}:a,o=n.browser,c=void 0===o?{}:o,l=n.timeline,s=void 0===l?{}:l,u=n.inspector,d=void 0===u?{}:u,f=n.activity,y=void 0===f?{}:f,Z=[];if(i&&(i.icons||(i.icons=e.icons),Z.push(v.createElement(zn,(0,m.Z)({},Sn(i))))),c&&(c.icons||(c.icons=e.icons),Z.push(v.createElement($e,(0,m.Z)({},dt(c))))),d||y){var g=[];y&&(y.icons||(y.icons=e.icons),g.push(v.createElement(Ce,(0,m.Z)({},ze(y))))),d&&(d.icons||(d.icons=e.icons),g.push(v.createElement(un,(0,m.Z)({},mn(d)))));var T={children:g,key:"panels",className:"panels"};Z.push(v.createElement(Vn,(0,m.Z)({},T)))}return s&&(s.icons||(s.icons=e.icons),Z.push(v.createElement(Ln,(0,m.Z)({},Bn(s))))),(0,m.Z)((0,m.Z)({className:"editor masher"},r),{},{editType:h.VideoType,children:Z})};function Wn(e){var t=e.type,n=e.types,r=e.children,a=at(t,n),i=Ue();return a.includes(i.editType)?v.createElement(v.Fragment,null,r):null}function qn(e){var t=e.children,n=e.className;if(!t)return null;var r={className:n,children:t};return v.createElement(ae,(0,m.Z)({},r))}function Un(e){var t=e.children,n=e.className;if(!t)return null;var r={className:n,children:t};return v.createElement(ae,(0,m.Z)({},r))}var _n=function(e){return globalThis.window.sessionStorage.getItem(e)||""},Jn=function(e,t){globalThis.window.sessionStorage.setItem(e,String(t))},Xn=v.forwardRef((function(e,t){return v.createElement("video",(0,m.Z)((0,m.Z)({},e),{},{ref:t}))}))}}]);
//# sourceMappingURL=182.f1d8f0f7.chunk.js.map