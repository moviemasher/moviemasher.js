{"version":3,"file":"static/js/128.d431e0d7.chunk.js","mappings":"mhKA6BYA,E,wsCC1BCC,GAAOC,EAAAA,YAAgD,SAACC,EAAOC,GAAA,OAC1EF,EAAAA,cAAC,OAAAG,EAAAA,EAAAA,GAAA,CAAIC,IAAKF,GAASD,GACrB,ICHMI,GAAa,mBAGNC,GAAmC,CAC9CC,SAAU,iBACVC,OAAQ,CAAED,SAAU,yBACpBE,OAAQ,CACNC,MAAO,uBACPC,UAAW,sBACXC,KAAM,iBACNC,KAAM,uBACNC,SAAU,qBACVC,OAAQ,YACRC,YAAa,yBAGJC,GAAuB,CAClCC,QAAS,UACTC,KAAM,OACNC,OAAQ,OACRC,OAAQ,kBACRC,UAAW,qBACXC,QAAS,eACTC,KAAM,aACNC,SAAU,YACVC,OAAQ,MACRX,OAAQ,SACRY,KAAM,OACNC,KAAM,UACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QAGKC,GAAe,SAAA/B,GAC1B,IAEwBgC,EAFpB/B,EAAcI,GACZ4B,EAAajC,EAAGkC,MAAM,KAC5BC,GAAAC,EAAAA,EAAAA,GAAwBH,GAAA,IAAxB,IAAAE,EAAAE,MAAAL,EAAAG,EAAAG,KAAAC,MAAoC,KAC5BF,EAAQpC,EADL+B,EAAAQ,OAET,IAAIC,EAAAA,EAAAA,UAASJ,GAAQ,OAAOA,EAE5BpC,EAASoC,CAAA,CAEX,OAAAK,GAAAP,EAAAlC,EAAAyC,EAAA,SAAAP,EAAAQ,GAAA,OAAO,EACT,EAEaC,GAAkB,SAAA5C,GAAA,OACzBA,EAAG6C,SAAS,KAAad,GAAY/B,GAElCgB,GAAOhB,IAAOA,CAAA,EAGV8C,GAAmB,SAAC9C,EAAYC,GAC3C,IAAIgC,EAAaW,GAAe5C,GAE1BH,EAAUoC,EAAWc,MAAM3C,IACjC,OAAKP,GAELA,EAAQmD,SAAQ,SAACX,EAAOC,GACtB,GAAKA,EAAL,CACA,IAAMW,EAAA,KAAAC,OAAcb,EAAA,MACdc,EAAUP,GAAe3C,EAAQoC,IAEvCJ,EAAaA,EAAWmB,QAAQH,EAAQE,EAJtB,CAKpB,IAEOlB,CACT,EF7DaoB,GAAiB,SAAArD,GAC5B,KAAKsD,EAAAA,EAAAA,UAAStD,GAAO,MAAO,GAEUA,EAA9BuD,MAAR,IAAetB,EAAuBjC,EAAvBwD,MAAO3D,EAAgBG,EAAhBW,KAAM0B,EAAUrC,EAAVwC,MAC5B,OAAIP,EACEI,EAAcS,GAAiBb,EAAO,CAAEO,MAAAH,IACrCO,GAAeX,GAYjBW,GAAe/C,EACxB,EAEY4D,KAAA5D,EAAA4D,IAAA,IACVC,OAAS,SACT7D,EAAA8D,MAAQ,QACR9D,EAAA+D,SAAW,WAHD/D,GAKCgE,GAAiBC,OAAOC,OAAON,IAC/BO,GAAmB,SAAAhE,GAAA,OACvBiE,EAAAA,EAAAA,mBAAkBjE,IAAS6D,GAAehB,SAAS7C,EAAqB,EAE1E,SAASkE,GAAoBlE,EAAYC,GACzC+D,GAAgBhE,KAAQmE,EAAAA,EAAAA,YAAWnE,EAAO,gBAAiBC,EAClE,CAgBO,IAAMmE,GAAmD,CAC9Db,MAAO,GACPc,WAAY,GACZC,cAAe,GACfC,OAAQ,SACRC,KAAMC,EAAAA,aAGKC,GAAkBC,EAAAA,cAAoBP,IGnDtCQ,GAAkBC,EAAAA,cALiC,CAC9DC,WAAW,EACXC,gBAAiB,WAAO,ICWbC,GAA+C,CAC1DC,WAAW,EACXC,aAAcC,EAAAA,YACdC,QAAS,CAAC,EACVC,iBAAkBF,EAAAA,YAClBG,KAAM,kBAAMC,QAAQC,QAAQ,GAAE,EAC9BC,YAAa,CAAC,EACdC,MAAO,CAAC,GAGGC,GAAgBC,EAAAA,cAAoBZ,ICtBpCa,GAAoB,WAEzB,IACE5F,EADc6F,EAAAA,WAAiBH,IAC/BI,QACRC,EAAAA,EAAAA,eAAc/F,GAER,IAAAgC,EAAmB6D,EAAAA,OAA8B,IAC/CjG,EAAgBI,EAAhBgG,YAMF3D,EAAe,SAAA4D,GACnB,IAAQC,EAASD,EAATvF,KACR,IAAIyF,EAAAA,EAAAA,aAAYD,IAAUD,aAAiBG,YAAc,CACjD,IAAAC,EAAqBJ,EAAMK,OACzBC,EAAaF,EAAbG,GAAIC,EAASJ,EAAT3F,KACKgG,EAAkB1E,EAA3BmD,QACFwB,EAAWD,EAAcE,MAAK,SAAAC,GAAA,OAAYA,EAASL,KAAOD,CAAE,IAE5D7D,EAA2BiE,GAAY,CAAEH,GAAAD,EAAIO,cAAA,SAAqCC,MAAO,IAC/FrE,EAASqE,MAAMC,QAAQX,GACnBI,IAASQ,EAAAA,aAAAA,SAAuBvE,EAASoE,cAAA,WACpCL,IAASQ,EAAAA,aAAAA,QAChBvE,EAASoE,cAAA,SAENH,GAAUD,EAAcM,QAAQtE,EAAQ,CAEjD,EACMM,EAAgB6C,EAAAA,sBAA6C,SAAAI,GAAA,OACjErG,EAAYsH,iBAAiBC,EAAAA,UAAAA,OAAkBlB,GACxC,WACLrG,EAAYwH,oBAAoBD,EAAAA,UAAAA,OAAkBlB,EACpD,KAzBkB,WAAd,OACGjE,EAAiBmD,OAAA,IA+BpBkC,EAAc,WAAd,OACJzH,EAAYsH,iBAAiBC,EAAAA,UAAAA,OAAkB9E,GAExC,WANPzC,EAAYwH,oBAAoBD,EAAAA,UAAAA,OAAkB9E,EAMlB,GAGlC,OAAAwD,EAAAA,WAAgB,kBAAMwB,GAAY,GAAG,IAE9B,CAACrH,EAAQgD,EAClB,ECvCO,SAASsE,GAASvH,GACvB,IAAAwH,EAKIxH,EAJFyH,cAAAxH,OAAA,IAAAuH,EAAA,SAAAA,EAAAE,EAIE1H,EAHF2H,iBAAA1F,OAAA,IAAAyF,GAAmBA,EACnB7H,EAEEG,EAFF4H,UACGvF,GACLwF,EAAAA,EAAAA,GAAI7H,EAAA8H,GACJ5D,GAAoBjE,GAEpB,IAAA8H,EAAkCC,EAAAA,SAAe/F,GAAgBgG,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA1DzF,EAAA2F,EAAA,GAAWhF,EAAYgF,EAAA,GAAAE,EACJH,EAAAA,SAAe,IAAEI,GAAAF,EAAAA,EAAAA,GAAAC,EAAA,GAApChF,EAAAiF,EAAA,GAAeC,GAAAD,EAAA,GAEKvC,MAAkByC,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA9BlC,GAARmC,EAAA,GAAgBA,EAAA,IAAAC,EACKP,EAAAA,SAAe/H,GAAauI,GAAAN,EAAAA,EAAAA,GAAAK,EAAA,GAAjDjC,EAAAkC,EAAA,GAAQhC,EAASgC,EAAA,GAOlB7B,EAA4C,CAChDtC,WANyB2D,EAAAA,SAAc,kBAEhC7B,EAASsC,QAAO,SAAAC,GAAA,OAAYA,EAAS3B,gBAAkBT,CAAM,MACnE,CAACA,EAAQH,EAASwC,SAInBrE,cAAe6B,EACf5B,OAAA+B,EAAQ9B,KAAMgC,EAAWjD,MAAAJ,GAIrByD,EAA4C,CAAE9B,UAAAxC,EAAWyC,gBAAiB9B,GAE1EN,EAAoB,GACtB9C,GAAW8C,EAAQiG,KAAK/I,GACxByC,GAAWK,EAAQiG,KAAKC,EAAAA,gBAE5B,IAAM/B,GAAA5G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAiBmC,GAAA,IAAMuF,UAAWjF,EAAQmG,KAAK,OAErD,OACEd,EAAAA,cAACtD,GAAgBqE,SAAhB,CAAyBvG,MAAOmE,GAC/BqB,EAAAA,cAACpD,GAAgBmE,SAAhB,CAAyBvG,MAAOoE,GAC/BoB,EAAAA,cAAClI,IAAAI,EAAAA,EAAAA,GAAA,GAAU4G,KAInB,CC1DO,IAAMkC,GAAgD,CAC3DhC,MAAO,GACPD,cAAA,SACAN,GAAI,IAGOwC,GAAyBC,EAAAA,cAAoBF,ICKnD,SAASG,GAAgBnJ,GACxB,IAAAC,EAAkBmJ,EAAAA,WAAiB1E,IAEjC7E,EADgBuJ,EAAAA,WAAiBxE,IACjCE,UACAzC,EAAepC,EAAfoE,WACR,GAAIxE,EAAW,OAAO,KAEtB,IAAQyC,EAAsBtC,EAAtBqJ,SAAapG,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAAsJ,GACxBnG,EAAQiG,EAAAA,SAAAA,KAAoB9G,IAClCiH,EAAAA,EAAAA,YAAWH,EAAAA,eAAqBjG,IAEhC,IAAMmE,EAAejF,EAAWmH,KAAI,SAAArD,GAElC,IAAMK,EAAe,CAAE6C,SADND,EAAAA,aAAmBjG,GACHX,MAAO2D,EAAUsD,IAAKtD,EAASM,IAEhE,OADgB2C,EAAAA,cAACH,GAAuBF,UAAA7I,EAAAA,EAAAA,GAAA,GAAcsG,GAExD,IACMN,GAAAhG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAiB+C,GAAA,IAAMoG,SAAU/B,IACvC,OAAO8B,EAAAA,cAACtJ,IAAAI,EAAAA,EAAAA,GAAA,GAASgG,GACnB,CCpBO,SAASwD,GAAa1J,GAC3B,IAAmBC,EAA2BD,EAAtC8E,UAA6B7C,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAA2J,GAAAC,EAETC,EAAAA,WAAiB5J,GAAa6J,GAAA5B,EAAAA,EAAAA,GAAA0B,EAAA,GAC7DtH,EAA4C,CAAEwC,UAD7CgF,EAAA,GACwD/E,gBAD9B+E,EAAA,IAGjC,OACED,EAAAA,cAACjF,GAAgBmE,SAAhB,CAAyBvG,MAAOF,GAC/BuH,EAAAA,cAAC/J,IAAAI,EAAAA,EAAAA,GAAA,GAAU+B,IAGjB,CCbQ,SAAS8H,GAAc/J,GACvB,IACEiC,EADgB+H,EAAAA,WAAiBpF,IACjCE,UAGAzC,EADuB2H,EAAAA,WAAiBf,IACxCjC,MACD1E,GADC4F,EAAAA,EAAAA,GACY7F,EAAA,GAAJ,GAEVc,GADcd,EAAMwE,MAAK,SAAAX,GAAA,OAAQA,EAAK3C,KAAK,KAAK,CAAEA,MAAO,KACrCA,OAASjB,EAAU3B,KACvC2G,GAAApH,EAAAA,EAAAA,GAAA,GAAgCF,GACtC,GAAIiC,EAAWqF,EAAU+B,SAAWlG,MAC/B,CACH,IAAM+C,EAAA,CAAW/C,GAAAD,QAAA+G,EAAAA,EAAAA,GAAU5H,EAAMmH,KAAI,SAAArD,GAAA,OAAQ9C,GAAc8C,EAAK,MAChEmB,EAAU+B,SAAWnD,EAAOsD,KAAI,SAACrD,EAAOG,GAAA,OAAM0D,EAAAA,cAAClK,GAAA,CAAK2J,IAAKnD,EAAG+C,SAAUlD,GAAS,IAEjF,OAAO6D,EAAAA,cAAClK,IAAAI,EAAAA,EAAAA,GAAA,GAAUoH,GACnB,CC3BM,IAAM4C,GAAW,CACtBC,MAAO,iCCUF,SAASC,GAAepK,GACvB,IAAAC,EAAkBoK,EAAAA,WAAiB3F,IACjCzC,EAAiBjC,EAAjByG,GAAI5G,EAAaG,EAAbqJ,SAIZ,GAHAnF,GAAoBjC,GAGhBA,IADehC,EAAXsE,OACW,OAAO,KAE1B,IAAMjC,EAAQ+H,EAAAA,SAAAA,KAAoBxK,GAClC,OAAAyK,EAAAA,EAAAA,YAAWD,EAAAA,eAAqB/H,GAAQ4H,GAASC,OAE1C7H,CAET,CCdQ,SAASiI,GAAevK,GAC9B,IAAQC,EAAqCD,EAArCyG,GAAIxE,EAAiCjC,EAAjC4H,UAAW/H,EAAsBG,EAAtBqJ,SAAahH,GAAKwF,EAAAA,EAAAA,GAAI7H,EAAAwK,GAC7CtG,GAAoBjE,GAEpB,IAAMqC,EAAQmI,EAAAA,SAAAA,KAAoB5K,IAClC6K,EAAAA,EAAAA,YAAWD,EAAAA,eAAqBnI,GAAQ4H,GAASC,OAE3C,IAAAlH,EAAkBwH,EAAAA,WAAiB/F,IACjCvB,EAAiBF,EAAjBsB,OAAQ+C,EAASrE,EAATuB,KAEV0B,EAAoB,GACtBjE,GAAWiE,EAAQ0C,KAAK3G,GACxBhC,IAAOkD,GAAQ+C,EAAQ0C,KAAK+B,EAAAA,eAEhC,IAAMxE,GAAAjG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDmC,GAAA,IACHuF,UAAW1B,EAAQ4C,KAAK,KACxBW,IAAA,mBAAAvG,OAAwBjD,GACxB2K,QAAS,kBAAMtD,EAAKrH,EACtB,IAEA,OAAOwK,EAAAA,aAAmBnI,EAAO6D,EAClC,CCjBO,SAAS0E,GAAiB7K,GAC1B,IAAAC,EAAkB6K,EAAAA,WAAiBpG,IACnCzC,EAAyB6I,EAAAA,WAAiB7B,IACxCpJ,EAAcoC,EAAd+E,MACF1E,GADgBL,EAAPwE,GACsB,IACjCxD,EAAa,EACbE,EAAY,EAChB,IAAI4H,EAAAA,EAAAA,kBAAiBlL,GAAQ,CAC3B,IAAOqG,GAAPgC,EAAAA,EAAAA,GAAerI,EAAA,GAAJ,GACHsG,EAAgBD,EAAhB8E,KAAM1E,EAAUJ,EAAV+E,OACVC,EAAAA,EAAAA,YAAW/E,KAASgF,EAAAA,EAAAA,aAAY7E,KAClCnD,EAAYgD,EACZlD,EAAaqD,EAAA,KAEV,CACL,IAAQJ,EAAyBjG,EAAzBqE,cAAe6B,EAAUlG,EAAVsD,OACnB6H,EAAAA,EAAAA,mBAAkBjF,IACpB7D,EAASsG,KAAKkC,EAAAA,cAAC,SAAMrB,IAAI,SAAStD,IAEpC,IAAMG,EAASJ,EAAcuC,QAAO,SAAAjC,GAAA,MACnB,WAAfA,EAAeO,aAChB,IACGT,EAAOqC,QACTrC,EAAOtD,SAAQ,SAAAwD,GACP,IAAEE,EAAUF,EAAVQ,MACDL,GADCuB,EAAAA,EAAAA,GACOxB,EAAA,GAAJ,IACX2E,EAAAA,EAAAA,cAAa1E,EAAM,QAEnB,IAAQC,EAAgBD,EAAhBqE,KAAMrI,EAAUgE,EAAVsE,OACVC,EAAAA,EAAAA,YAAWvI,KAAQM,GAAcN,IACjCuI,EAAAA,EAAAA,YAAWtE,KAAOzD,GAAayD,EACrC,GAAC,CAIL,GAAI3D,EAAY,CACd,IAAMiD,EAAW/C,EAAYF,EACvBkD,EAAgB,CACpB3D,MAAO0D,EAAUoF,IAAK,EACtBjC,SAAA,GAAAnG,OAAaqI,KAAKC,MAAM,IAAQtF,GAAQ,KACxCuD,IAAK,YAEPnH,EAASsG,KAAKkC,EAAAA,cAAC,YAAA5K,EAAAA,EAAAA,GAAA,GAAaiG,IAAiB,CAE/C,IAAMmB,GAAApH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDF,GAAA,IAAOyJ,IAAK,oBAAqBJ,SAAU/G,IAEhD,OAAOwI,EAAAA,cAAChL,IAAAI,EAAAA,EAAAA,GAAA,GAAUoH,GACnB,CCnDM,SAASmE,GAAIzL,GAClB,IAAQC,EAAkDD,EAAlD0L,OAAQzJ,EAA0CjC,EAA1C2L,QAAS9L,EAAiCG,EAAjC4L,MAAAC,EAAiC7L,EAA1B8L,MAAOzJ,OAAA,IAAAwJ,EAAY,CAAC,EAAEA,EACtD,KAAM5L,GAAUgC,GAAWpC,GAAQ,OAAO,KAE1C,IAAMyC,EAAW,CAACrC,EAAQgC,EAASpC,GAAO4I,OAAOsD,SAEjD,OAAA1J,EAAUgH,SAAW/G,EACd0J,EAAAA,cAAClM,IAAAI,EAAAA,EAAAA,GAAA,GAASmC,GACnB,CCEO,IAAM4J,GAAsB,SAAAjM,GAAA,IAAAkM,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OACjC1M,EAAQ2M,SAAR3M,EAAQ2M,OAAW,CAAC,IACpBT,EAAAlM,EAAQ2M,QAAOb,QAAfI,EAAeJ,MAAU,CAAC,IAC1BK,EAAAnM,EAAQ2M,OAAOb,OAAMrC,MAArB0C,EAAqB1C,IAAQ,WAC7B2C,EAAApM,EAAQ2M,OAAOb,OAAMlE,YAArBwE,EAAqBxE,UAAc,QAEnC5H,EAAQ2L,UAAR3L,EAAQ2L,QAAY,CAAC,IACrBU,EAAArM,EAAQ2L,SAAQG,QAAhBO,EAAgBP,MAAU,CAAC,IAC3BQ,EAAAtM,EAAQ2L,QAAQG,OAAMrC,MAAtB6C,EAAsB7C,IAAQ,YAC9B8C,EAAAvM,EAAQ2L,QAAQG,OAAMlE,YAAtB2E,EAAsB3E,UAAc,WAEpC5H,EAAQ4M,SAAR5M,EAAQ4M,OAAW,CAAC,IACpBJ,EAAAxM,EAAQ4M,QAAOd,QAAfU,EAAeV,MAAU,CAAC,IAC1BW,EAAAzM,EAAQ4M,OAAOd,OAAMrC,MAArBgD,EAAqBhD,IAAQ,WAC7BiD,EAAA1M,EAAQ4M,OAAOd,OAAMlE,YAArB8E,EAAqB9E,UAAc,QAEnC5H,EAAQ8L,QAAR9L,EAAQ8L,MAAU,CAAC,IAEnBe,EAAAA,EAAAA,uBAAsB7M,EAAQ0F,OAEvB1F,CAAA,EAOF,SAAS8M,GAAM9M,GACpB,IAAQC,EAAkDD,EAAlDqJ,SAAUpH,EAAwCjC,EAAxC4H,UAAsB/H,EAAkBG,EAA7B8E,UAAAiI,EACQC,EAAAA,WAAiBnN,GAAaoN,GAAA/E,EAAAA,EAAAA,GAAA6E,EAAA,GAA5D1K,EAAA4K,EAAA,GAAW3K,EAAe2K,EAAA,GAE3BhK,EAAoB,GACtBhB,GAAWgB,EAAQ2F,KAAK3G,GACxBI,GAAWY,EAAQ2F,KAAK,aAE5B,IAAMzF,EAAY,CAAEkG,SAAApJ,EAAU2H,UAAW3E,EAAQ6F,KAAK,MAChDxB,EAA4C,CAAExC,UAAAzC,EAAW0C,gBAAAzC,GAC/D,OAAO0K,EAAAA,cAACpI,GAAgBmE,SAAhB,CAAyBvG,MAAO8E,GACtC0F,EAAAA,cAAClN,IAAAI,EAAAA,EAAAA,GAAA,GAASiD,IAEd,CCtDO,SAAS+J,GAAUlN,GAGxB,GAFqBmN,EAAAA,WAAiBvI,IAC9BE,UACO,OAAO,KAEtB,IAAQjF,EAAkDG,EAAlD0L,OAAQrJ,EAA0CrC,EAA1C2L,QAASrJ,EAAiCtC,EAAjC4L,MAAAwB,EAAiCpN,EAA1B8L,MAAO7I,OAAA,IAAAmK,EAAY,CAAC,EAAEA,EAEtD,KAAMvN,GAAUwC,GAAWC,GAAQ,OAAO,KAE1C,IAAMa,EAAW,CAACtD,EAAQwC,EAASC,GAAOmG,OAAOsD,SAEjD,OAAA9I,EAAUoG,SAAWlG,EACdgK,EAAAA,cAACrN,IAAAI,EAAAA,EAAAA,GAAA,GAAS+C,GACnB,CCfO,SAASoK,GAAgBrN,GACxB,IAAAC,EAAkBqN,EAAAA,WAAiB1I,IACjC3C,EAA6ChC,EAA7C6E,UAA4BjF,EAAiBI,EAAlC8E,gBACb1C,GAAAnC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDF,GAAA,IACH4K,QAAS,WAAQ/K,GAAcoC,EAAW,IAE5C,OAAOqL,EAAAA,cAACxN,IAAAI,EAAAA,EAAAA,GAAA,GAASmC,GACnB,CCVO,SAASkL,GAAavN,GAE3B,OADqBwN,EAAAA,WAAiB5I,IACrBE,UAAkB,KAE5B0I,EAAAA,cAAAA,EAAAA,SAAA,KAAGxN,EAAMqJ,SAClB,CCLO,SAASoE,GAAUzN,GAExB,OADqB0N,EAAAA,WAAiB9I,IACpBE,UAEX4I,EAAAA,cAAAA,EAAAA,SAAA,KAAG1N,EAAMqJ,UAFoB,IAGtC,CCYO,IAAMsE,GAAyE,WAAsB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACpGhO,EAAgBgM,GADwEiC,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAQ,CAAC,GAE/FjM,EAAUhC,EAAVyF,OACRkI,EAAA3N,EAAc6L,OAAMrC,MAApBmE,EAAoBnE,IAAQ,aAC5BoE,EAAA5N,EAAc6L,OAAMlE,YAApBiG,EAAoBjG,UAAc,mBAClCkG,EAAA7N,EAAc6L,OAAMrE,gBAApBqG,EAAoBrG,cAAA,WAChB2G,EAAAA,EAAAA,aAAYnO,EAAc6L,MAAMnE,oBAAmB1H,EAAc6L,MAAMnE,kBAAmB,IAE9FoG,EAAA9N,EAAc0M,QAAOhB,UAArBoC,EAAqBpC,QAAY,CAC/B0C,EAAAA,cAACvO,GAAA,CAAK2J,IAAI,aAAaJ,SAAUpH,EAAMqM,WACvCD,EAAAA,cAACd,GAAA,CAAa9D,IAAI,iBAAgB4E,EAAAA,cAACvO,GAAA,CAAK2J,IAAI,UAC5C4E,EAAAA,cAACZ,GAAA,CAAUhE,IAAI,aACb4E,EAAAA,cAACxD,GAAA,CAAiBpB,IAAI,WAAW7B,UAAU,cAE7CyG,EAAAA,cAAChB,GAAA,CAAgB5D,IAAI,oBACnB4E,EAAAA,cAACd,GAAA,CAAa9D,IAAI,gBAAgBJ,SAAUpH,EAAMsM,WAClDF,EAAAA,cAACZ,GAAA,CAAUhE,IAAI,YAAYJ,SAAUpH,EAAM6C,gBAI/CkJ,EAAA/N,EAAc0L,SAAQtC,WAAtB2E,EAAsB3E,SAAagF,EAAAA,cAAC3E,GAAA,CAAa9B,UAAU,OAAO9C,WAAW,GAC3EuJ,EAAAA,cAAChB,GAAA,CAAgB5D,IAAI,oBACnB4E,EAAAA,cAACd,GAAA,CAAa9D,IAAI,gBAAgBJ,SAAUpH,EAAMsM,WAClDF,EAAAA,cAACZ,GAAA,CAAUhE,IAAI,YAAYJ,SAAUpH,EAAM6C,aAE7CuJ,EAAAA,cAACtE,GAAA,CAAcN,IAAI,QAAQ7B,UAAU,UACrCyG,EAAAA,cAACjE,GAAA,CAAeX,IAAI,SAAShD,GAAG,UAC9B4H,EAAAA,cAACxD,GAAA,CAAiBpB,IAAI,cAExB4E,EAAAA,cAACjE,GAAA,CAAeX,IAAI,QAAQhD,GAAG,QAAQ4C,SAAUpH,EAAMuB,QACvD6K,EAAAA,cAACjE,GAAA,CAAeX,IAAI,WAAWhD,GAAG,WAAW4C,SAAUpH,EAAMT,cAG/DyM,EAAAhO,EAAc2M,QAAOjB,UAArBsC,EAAqBtC,QAAY,CAC/B0C,EAAAA,cAAC9D,GAAA,CAAed,IAAI,SAAShD,GAAG,SAASmB,UAAW4G,EAAAA,YAAanF,SAAUpH,EAAMwM,SACjFJ,EAAAA,cAAC9D,GAAA,CAAed,IAAI,QAAQhD,GAAG,QAAQmB,UAAW4G,EAAAA,YAAanF,SAAUpH,EAAMuB,QAC/E6K,EAAAA,cAAC9D,GAAA,CAAed,IAAI,WAAWhD,GAAG,WAAWmB,UAAW4G,EAAAA,YAAanF,SAAUpH,EAAMT,aAGvF,IAAM3B,EAAWwO,EAAAA,cAAAA,EAAAA,SAAA,KACfA,EAAAA,cAAC5C,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc0M,SACvB0B,EAAAA,cAAClF,IAAAjJ,EAAAA,EAAAA,GAAA,GAAoBD,EAAc0L,QAAQG,OACxC7L,EAAc0L,QAAQtC,UAEzBgF,EAAAA,cAACnB,IAAAhN,EAAAA,EAAAA,GAAA,GAAcD,EAAc2M,UAG/B,OAAA1M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYD,EAAc6L,OAAA,IAAOzC,SAAAxJ,GACnC,ECxDa6O,GAAiD,CAC5DC,UAAWC,EAAAA,YACXC,QAASD,EAAAA,YACTE,YAAa,GACbtK,KAAMoK,EAAAA,YACNrK,OAAQ,GACRwK,aAAcH,EAAAA,aAGHI,GAAiBC,EAAAA,cAAoBP,ICf5CQ,GAA8BC,EAAAA,UAAAA,MAC9BC,GAA+BD,EAAAA,UAAAA,OACxBE,GAAuB,WAAyC,IAAxCrP,EAAAkO,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAqB,GAEhDjM,EADcqN,EAAAA,WAAiB3J,IAC/BI,QACRwJ,EAAAA,EAAAA,eAActN,GAER,IAAEpC,EAAUoC,EAAVuN,MAEFnN,EAAWiN,EAAAA,OAAyC,CAAC,GACnDhN,EAAgBL,EAAhBgE,YAYFqB,EAAe,SAAAd,GACnB,IAAQE,EAASF,EAAT7F,KACR,IAAI8O,EAAAA,EAAAA,aAAY/I,IAAUF,aAAiBH,YAAc,CACjD,IACEO,EADWJ,EAAXD,OACAmJ,gBACR,IAAIC,EAAAA,EAAAA,kBAAiB/I,GAAkB,CAC/B,IAAAjE,EAAQiE,EAENE,EAAWzE,EAAX+C,QACOtB,OAAO8L,KAAK9I,GACR2B,QAAO,SAAAoH,GAAA,OAAMlN,EAAMmN,MAAK,SAAAC,GAAA,OAAQF,EAAGhN,SAASkN,EAAK,GAAC,IACjE/M,SAAQ,SAAA6M,GAAA,cAAa/I,EAAQ+I,EAAG,KAG1C,EACM3J,EAAgBoJ,EAAAA,sBAAwC,SAAA9I,GAAA,OAC5DlE,EAAY6E,iBAAiB+H,GAA6B1I,GAC1DlE,EAAY6E,iBAAiBiI,GAA8B5I,GACpD,WACLlE,EAAY+E,oBAAoB6H,GAA6B1I,GAC7DlE,EAAY+E,oBAAoB+H,GAA8B5I,EAChE,KA1BkB,WAAM,IAAAwJ,EAClBxJ,EAAMxG,EAAM8I,KAAK,MAAQ,QAC/B,OAAOkH,EAAA3N,EAAS+C,SAAQoB,KAAjBwJ,EAAiBxJ,GAPC,WACzB,IAAMA,EAAQxG,EAAMwJ,KAAI,SAAA9C,GAAA,OAAQ7G,EAAMoQ,OAAOvJ,EAAK,IAClD,OAAwB,IAAjBF,EAAMmC,OAAenC,EAAM,GAAKA,EAAM0J,MAC/C,CAImCjN,GACnC,IA8BMqD,EAAc,WAAd,OACJhE,EAAY6E,iBAAiB+H,GAA6B5H,GACnD,WALPhF,EAAY+E,oBAAoB6H,GAA6B5H,EAK7B,GAGlC,OAAAgI,EAAAA,WAAgB,kBAAMhJ,GAAY,GAAG,IAE9BJ,CACT,EC9DaiK,GAAY,WAAZ,OAA0BC,EAAAA,WAAiBzK,IAAepF,MAAA,ECA1D8P,GAAY,WAAZ,OAA0BC,EAAAA,WAAiB3K,IAAeI,MAAA,ECOjEwK,GAAsB,kBACtBC,GAAyB,WACzBC,GAAsB,QAEfC,GAAoB,WAAwC,IAAvC1Q,EAAAkO,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAoB,GAE9CjO,EAASkQ,KACf,IAAKlQ,EAAO0Q,QAAQC,EAAAA,eAAgB,MAAO,GAE3C,IAAM3O,EAASoO,MACfQ,EAAAA,EAAAA,eAAc5O,GAER,IAAApC,EAAWiR,EAAAA,OAAyC,CAAC,GAEnDzO,EAAgBJ,EAAhBgE,YAeFhD,EAAsB,SAAAkD,GAC1B,OAAOA,GACL,KAAKsK,GACL,KAAKD,GAAwB,MAC7B,SAjBwB,SAAArK,GAE1B,IAAMG,EAA6B,CAAE3F,KAAMX,GACpCC,EAAO8Q,KAAKzK,GAAS0K,MAAM,SAAAxK,GAAkC,IAAAyK,EAClEC,QAAQC,MAAM,iCAAkCC,EAAAA,UAAAA,KAAAA,WAAAA,SAAoC5K,GAC5DA,EAAhBhD,MAAR,IAAemD,EAASH,EAAT6K,KACV1K,KACSsK,EAAApR,EAASuF,QAAQe,IACzByC,KAAA0I,MAAAL,GAAAhH,EAAAA,EAAAA,GAAQtD,IACdtE,EAAYkP,cAAc,IAAIlL,YAAYkK,KAC5C,GACF,CAMajO,CAAmB6D,GAE9B,MAAO,EACT,EAwBA,OAPsB2K,EAAAA,sBAAwC,SAAA3K,GAAA,OAC5D9D,EAAY8E,iBAAiBoJ,GAAqBpK,GAC3C,WACL9D,EAAYgF,oBAAoBkJ,GAAqBpK,EACvD,KAbkB,WAClB,IAAMA,EANDnG,EAAM2I,OAEJ3I,EAAM8I,KAAK,KAFQ2H,GAQ1B,OADc5Q,EAASuF,QAAQe,KAIxBtG,EAASuF,QAAQe,GAAOlD,EAAmBkD,GACpD,GAUF,ECjEaqL,GAAiB,WAAyC,IAAxCxR,EAAAkO,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAqB,GAC5CjO,EAAoBoP,GAAqBrP,GAEzCH,EADiB6Q,GAAkB1Q,GACNyI,QAAO,SAAAnG,GAAA,OACvCrC,EAAkB6P,MAAK,SAAA7M,GAAA,OAAoBA,EAAiBwD,KAAOnE,EAAcmE,EAAE,GACtF,IAGA,MAAO,GAAPvD,QAAA+G,EAAAA,EAAAA,GAFqBhK,IAAAgK,EAAAA,EAAAA,GAAsBpK,GAG7C,ECba4R,GAAa,WACxB,IAAAC,EAA0BC,EAAAA,SAAe,GAACC,GAAA1J,EAAAA,EAAAA,GAAAwJ,EAAA,GAAnC1R,EAAA4R,EAAA,GAAO3R,EAAQ2R,EAAA,GAEtB,MAAO,CADa,WAAQ3R,GAAS,IAAI4R,MAAOC,UAAW,EACtC9R,EACvB,ECcO,SAAS+R,GAAQ/R,GACtB,IAAAgS,EAAiDhS,EAAzCyH,cAAAxH,OAAA,IAAA+R,EAAgB,YAAAA,EAAgB/P,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAAiS,GAAAC,EAEXC,EAAAA,SAAiC,CAAC,GAACC,GAAAlK,EAAAA,EAAAA,GAAAgK,EAAA,GAAlErS,EAAAuS,EAAA,GAAa/P,EAAc+P,EAAA,GAE1BnP,EADckP,EAAAA,WAAiBxM,IAC/BN,iBAAAgN,EACUZ,KAAXtO,GAAsB+E,EAAAA,EAAAA,GAAAmK,EAAA,GAAf,GAAAC,EACeH,EAAAA,SAAelS,GAAasS,GAAArK,EAAAA,EAAAA,GAAAoK,EAAA,GAAjDhL,EAAAiL,EAAA,GAAQrM,EAASqM,EAAA,GA0BnB3L,EAAe,CACnBpE,MAV8C,CAC9CqM,QAAA1L,EACA2L,YAZkB0C,GAAe3R,EAAYyH,IAa7C/C,OAAA+C,EACA9C,KApBY,SAAA7B,IACZ6P,EAAAA,EAAAA,uBAAsB7P,GACtBM,IACAiD,EAAUvD,EACZ,EAiBEgM,UAbgB,SAAChM,EAAYmE,GAC7BzE,GAAe,SAAAqG,GAAA,OAAAxI,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAkBwI,GAAA,IAAA+J,EAAAA,EAAAA,GAAA,GAAW9P,EAAKmE,GAAM,GACzD,EAYEiI,aAVoB,SAAApM,GACpBN,GAAe,SAAAyE,GAAA,OAAA5G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAkB4G,GAAA,IAAA2L,EAAAA,EAAAA,GAAA,GAAW9P,EAAK,IAAG,GACtD,GAaE0G,SAAU8I,EAAAA,cAACrS,IAAAI,EAAAA,EAAAA,GAAA,GAAS+B,KAEtB,OACEkQ,EAAAA,cAACnD,GAAejG,UAAA7I,EAAAA,EAAAA,GAAA,GAAc0G,GAElC,CCtDO,IAAM8L,GAAuD,CACpE,EAEaC,GAAoBC,EAAAA,cAAoBF,ICQ9C,SAASG,GAAe7S,GAC7B,IAAA8S,EAAwBC,EAAAA,UAAe,GAAKC,GAAA9K,EAAAA,EAAAA,GAAA4K,EAAA,GAArC7S,EAAA+S,EAAA,GAAM/Q,EAAO+Q,EAAA,GACZnT,EAAiCG,EAAjC4H,UAAWvF,EAAsBrC,EAAtBqJ,SAAa/G,GAAKuF,EAAAA,EAAAA,GAAI7H,EAAAiT,GAEnChQ,EAAgB8P,EAAAA,WAAiBpN,IAEjC2B,EADiByL,EAAAA,WAAiB/D,IACLF,aAAe,GAC1C5I,EAASjD,EAATqC,KAEFa,EAAa,SAAAuC,GAAA,QACZA,IAEEwK,EAAAA,EAAAA,WAAUxK,GAAc7F,SAASsQ,EAAAA,kBAFd,EAgBtBzM,EAAe,SAAAgC,IACnB0K,EAAAA,EAAAA,WAAU1K,GACVzG,GAAQ,EACV,EAEM0E,EAAoB,GACtB9G,GAAW8G,EAAQiC,KAAK/I,GACxBI,GAAM0G,EAAQiC,KAAKyK,EAAAA,eAEvB,IAAMzM,EAAQmM,EAAAA,SAAAA,KAAoB1Q,IAClCiR,EAAAA,EAAAA,YAAWP,EAAAA,eAAqBnM,IAEhC,IAWME,GAAA5G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDoC,GAAA,IACHsF,UAAWjB,EAAQmC,KAAK,KACxBW,IAAK,kBACLJ,SAfiB,WACjB,IAAMX,EAAa9B,EAAMkF,MACzB,OAAOxE,EAAYkC,KAAI,SAAA+J,GACrB,IAAM1D,GAAA3P,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAkBwI,GAAA,IAAYe,IAAK8J,EAAW9M,KAE9C+M,EAAe,CAAEnK,SADN0J,EAAAA,aAAmBnM,EAAOiJ,GACVrN,MAAO,CAAEiR,WAAAF,GAAc9J,IAAK8J,EAAW9M,IAExE,OADgBsM,EAAAA,cAACJ,GAAkB5J,UAAA7I,EAAAA,EAAAA,GAAA,GAAcsT,GAEnD,GACF,CAMY7Q,GACV+Q,OAvCc,SAAAhL,GACdhC,EAAYgC,GACZ,IAAQ6K,EAAiB7K,EAAjBiL,aACJxN,EAAUoN,IAAerN,EAAKqN,EAAaK,MACjD,EAmCUC,WAjCU,SAAAnL,IAClB0K,EAAAA,EAAAA,WAAU1K,GACVzG,EAAQkE,EAAUuC,EAAMiL,cAC1B,EA8BsBG,YAAApN,IAGtB,OAAOqM,EAAAA,cAACjT,IAAAI,EAAAA,EAAAA,GAAA,GAAS4G,GACnB,CC1EA,IAAMiN,GAAmB,SAAC/T,EAAiBC,EAA2BgC,GAAA,OAChEjC,EAAe,CAACA,GAEfC,GAED+T,EAAAA,EAAAA,UAAS/T,GAAeA,EAAMiC,MAAM,KAAKsH,KAAI,SAAA3J,GAAA,OAAUA,EAAOoU,MAAM,IAEjEhU,EAJYgC,EAAaA,EAAWuH,KAAI,SAAA3J,GAAA,OAAYA,EAASqU,IAAI,IAAI,EAAC,EAOlEC,GAAkB,SAACnU,EAAeC,EAA2BgC,GACxE,IAAMpC,EAAUkU,GAAiB/T,EAAMC,GACvC,OAAIgC,IAAOpC,EAAQ8I,QAAQ9I,EAAQ+I,KAAK3G,GACnBpC,EAAQ4I,QAAO,SAAAnG,GAAA,OAAU8R,EAAAA,EAAAA,aAAY9R,EAAO,IAC7CkH,KAAI,SAAAlH,GAAA,OAAUA,CAAmB,GACvD,EAGa+R,GAAmB,SAACrU,EAAeC,EAA2BgC,GACzE,IAAMpC,EAAUkU,GAAiB/T,EAAMC,GACvC,OAAIgC,IAAOpC,EAAQ8I,QAAQ9I,EAAQ+I,KAAK3G,GACnBpC,EAAQ4I,QAAO,SAAAnG,GAAA,OAAUgS,EAAAA,EAAAA,cAAahS,EAAO,IAC9CkH,KAAI,SAAAlH,GAAA,OAAUA,CAAoB,GACxD,ECLO,SAASiS,GAAcvU,GAC5B,IAAQC,EAAkDD,EAAlDqJ,SAAUpH,EAAwCjC,EAAxCW,KAAMd,EAAkCG,EAAlCwU,MAAOnS,EAA2BrC,EAA3B4H,UAAWtF,EAAgBtC,EAAhByG,GAAOxD,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAAyU,IAC1DC,EAAAA,EAAAA,uBAAsBpS,GAEhB,IAAAa,EAAiBwR,EAAAA,WAAiB3F,IAChC1H,EAA0CnE,EAA1CqB,KAAM0B,EAAoC/C,EAApCoB,OAAQ4B,EAA4BhD,EAA5BwL,UAAWrI,EAAiBnD,EAAjB4L,aAE3BvI,EAAU,GACZnE,GAAWmE,EAAQoC,KAAKvG,GACxB6D,IAAW5D,GAAIkE,EAAQoC,KAAKgM,EAAAA,eAEhCD,EAAAA,WAAgB,kBACdxO,EAAU7D,EAAI6R,GAAgBlS,EAAMpC,EAAOyC,IACpC,WAAQgE,EAAahE,EAAI,IAC/B,IAEH,IAAMoE,GAAAxG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD+C,GAAA,IACH2E,UAAWpB,EAAQsC,KAAK,KACxBW,IAAA,kBAAAvG,OAAuBZ,GACvBsI,QAAS,WAAQtD,EAAKhF,EAAI,IAEtBqE,EAAQgO,EAAAA,SAAAA,KAAoB1U,GAClC,OAAA4U,EAAAA,EAAAA,YAAWF,EAAAA,eAAqBhO,GAAQuD,GAASC,OAE1CwK,EAAAA,aAAmBhO,EAAOD,EACnC,CCvCA,IAAMoO,GAAmB,oBAElB,SAASC,GAAe/U,GAC7B,IAAQC,EAAsBD,EAAtBqJ,SAAapH,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAAgV,GACxBnV,EAAYoV,EAAAA,OAA+B,MAC3C5S,EAAS8N,KAEPlN,EADcgS,EAAAA,WAAiBtP,IAC/BL,KAUFY,GAAAhG,EAAAA,EAAAA,GAAA,CACJgV,OAHa7S,EAAO6S,SAIpBC,UAAU,EACV1O,GAAIqO,GACJM,SAXgB,SAAA1O,GAChB,IAAQC,EAAUD,EAAM2O,cAAhBzB,MACJjN,GAAO1D,EAAK0D,EAClB,EASEhG,KAAM,OACN8I,IAAK,wBACLtJ,IAAKN,GACFoC,GAECkE,EAAQ8O,EAAAA,cAAC,SAAA/U,EAAAA,EAAAA,GAAA,GAAUgG,IAEzB,IAAK+O,EAAAA,eAAqBhV,GAAW,OAAOkG,EAI5C,IAAMK,EAAa,CACjB6C,SAHW,CAAC4L,EAAAA,SAAAA,KAAoBhV,GAAWkG,GAI3CsD,IAAK,kBACL6L,QAASR,IAEX,OAAOG,EAAAA,cAAC,SAAA/U,EAAAA,EAAAA,GAAA,GAAUsG,GACpB,CC1CO,IAAM+O,GAAgB,WAAhB,OAA6BC,EAAAA,WAAiB7C,IAAmBc,UAAA,ECmBvE,SAASgC,GAAezV,GAC7B,IAAQC,EAAkCD,EAAlC4H,UAAW3F,EAAuBjC,EAAvB0V,UAAc7V,GAAKgI,EAAAA,EAAAA,GAAI7H,EAAA2V,GACpCtT,EAAQJ,GAAa,IAErBK,EAASsT,EAAAA,OAA6B,MACtC3S,EAAU2S,EAAAA,OAA6B,MAErCtO,EADesO,EAAAA,WAAiB5G,IAChCH,QACF3I,EAAgB0P,EAAAA,WAAiBjQ,IAC/BQ,EAAsCD,EAAtCH,OAAQO,EAA8BJ,EAA9Bb,iBAAkBmB,EAAYN,EAAZd,SAElCyQ,EAAAA,EAAAA,YAAW1P,GAEL,IAAAO,EAAQ6O,KAEN5O,EAAcD,EAAdD,GAAIG,EAAUF,EAAVnD,MAENZ,EAAA,eAAAmT,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAY,SAAAC,IAAA,IAAA1C,EAAA2C,EAAAC,EAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAER,GADAjD,EAASrN,EAATuQ,MACAP,EAAY7T,EAAZ8C,WACSuR,EAAAA,EAAAA,eAAcnD,GAAI,CAAA+C,EAAAE,KAAA,eAAAF,EAAAK,OAAA,iBAE4B,OAAzDR,GAASS,EAAAA,EAAAA,WAASC,EAAAA,EAAAA,YAAUC,EAAAA,EAAAA,UAASvD,GAAOnR,EAAOA,IAAMkU,EAAAE,KAAA,EACzC/P,EAAMsQ,eAAeZ,GAAM,QAA3CC,EAAAE,EAAAU,OACOd,EAAQe,gBAAgBb,GACvC,wBAAAE,EAAAY,OAAA,GAAAjB,EAAA,uBARM,OAAAJ,EAAAxE,MAAA,KAAApD,UAAA,KAUN0H,EAAAA,WAAgB,WAAQjT,GAAY,GAAG,IACnCL,EAAO8C,SAASzC,IAEpB,IAMM+F,EAAiB,SAAA8K,GACrBA,EAAM4D,kBAEN9Q,EAAiBI,GACjBY,GACF,EAyBMyI,GAAA7P,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDL,GAAA,IACH+H,UAAA3H,EACAoJ,SAvCiB,WACjB,IAAMmK,EAAQ,CAACoC,EAAAA,cAAC9V,GAAA,CAAK2J,IAAI,OAAOtJ,IAAKmC,KACrC,OAAIsE,GAAO4M,EAAMvM,QAAQ2O,EAAAA,cAAC,SAAMnM,IAAI,SAAS7C,IACtC4M,CACT,CAmCY1M,GACV3G,IAAK8C,EAASwG,IAAK9C,IAErB,OAAI3G,EAAMqX,YACRtH,EAAUuH,YA9BS,SAAA9D,GACnB9K,EAAc8K,GACR,IACE4C,EADKnT,EAAQmC,QAASmS,wBACtBC,KAGFC,EAA6B,CAAEC,OAFjBlE,EAAZmE,QAE+CvB,EAAMwB,YADzClR,EAAMmR,UAEpBC,EAAOC,KAAKC,UAAUP,GACpBQ,EAAiBzE,EAAjBG,aACHsE,IAELA,EAAaC,cAAgB,OAE7BD,EAAaE,QAAQzR,EAAM/F,KAAOyX,EAAAA,WAAYN,GAChD,EAiBE/H,EAAUsI,cAAgB3P,EAC1BqH,EAAUnI,UAhBe,WACzB,IAAM4L,EAAmB,GACzB,OAAIvT,GAAWuT,EAAQ5K,KAAK3I,GACxBuG,EAAQ8R,UAAY3R,GAAI6M,EAAQ5K,KAAK2P,EAAAA,eAClC/E,EAAQ1K,KAAK,IACtB,CAWwB+G,IAEjB+F,EAAAA,cAAC9V,IAAAI,EAAAA,EAAAA,GAAA,GAAS6P,GACnB,CCtFO,IAAMyI,GAAsE,WAAsB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACjG/Y,EAAgBgM,GADqEiC,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAQ,CAAC,GAE5FjM,EAAUhC,EAAVyF,OACR+S,EAAAxY,EAAc6L,OAAMrC,MAApBgP,EAAoBhP,IAAQ,YAC5BiP,EAAAzY,EAAc6L,OAAMlE,YAApB8Q,EAAoB9Q,UAAc,kBAClC+Q,EAAA1Y,EAAc6L,OAAMrE,gBAApBkR,EAAoBlR,cAAkB,cACtCmR,EAAA3Y,EAAc0M,QAAOhB,UAArBiN,EAAqBjN,QAAY,CAC/BsN,EAAAA,cAACnZ,GAAA,CAAK2J,IAAI,aAAaJ,SAAUpH,EAAMiX,aAGzCL,EAAA5Y,EAAc2M,QAAOjB,UAArBkN,EAAqBlN,QAAY,CAC/BsN,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,SAAShD,GAAG,SAASmB,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAMmX,SAChFH,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,YAAYhD,GAAG,YAAYmB,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAMoX,YACtFJ,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,UAAUhD,GAAG,UAAUmB,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAM0J,aAEpFmN,EAAA7Y,EAAc2M,QAAOlB,SAArBoN,EAAqBpN,OAAW,CAC9BuN,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,QAAQhD,GAAG,QAAQ+N,MAAM,sBAAsB5M,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAMqX,eAC1GL,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,QAAQhD,GAAG,QAAQmB,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAMsX,eAC9EN,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,QAAQhD,GAAG,QAAQmB,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAMuX,eAC9EP,EAAAA,cAAC1E,GAAA,CAAc9K,IAAI,OAAOhD,GAAG,OAAOmB,UAAWuR,EAAAA,YAAa9P,SAAUpH,EAAMwX,iBAG9EV,EAAA9Y,EAAc2M,QAAOhB,QAArBmN,EAAqBnN,MAAU,CAC7BqN,EAAAA,cAAClE,GAAA,CAAetL,IAAI,SAASJ,SAAUpH,EAAMzB,YAG/CwY,EAAA/Y,EAAc0L,SAAQtC,WAAtB2P,EAAsB3P,SACpB4P,EAAAA,cAACxD,GAAA,CAAe4B,WAAW,EAAMzP,UAAU,wBAG7C,IAAM/H,EAAWoZ,EAAAA,cAAAA,EAAAA,SAAA,KACfA,EAAAA,cAACxN,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc0M,SACvBsM,EAAAA,cAACpG,IAAA3S,EAAAA,EAAAA,GAAA,GAAmBD,EAAc0L,QAAQG,OACvC7L,EAAc0L,QAAQtC,UAEzB4P,EAAAA,cAACxN,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc2M,UAGzB,OAAA1M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYD,EAAc6L,OAAA,IAAOzC,SAAAxJ,GACnC,EC9Ca6Z,GAA2C,CACtDC,YAAa,GAGFC,GAAcC,EAAAA,cAAoBH,ICLlCI,GAA6C,CAAC,EAE9CC,GAAeC,EAAAA,cAAoBF,ICsBnCG,GAAmD,CAC9DC,cAAA,WAA2B,OAAO,CAAM,EACxCC,MAAO,EACPC,OAAQ,EACRtG,YAAauG,EAAAA,YACb3G,OAAQ2G,EAAAA,YACR3D,KAAM4D,EAAAA,SACNC,UAAW,EAAG1L,QAASwL,EAAAA,YACvBG,MAAO,EACPC,OAAQ,CAAE/T,EAAG,EAAGE,EAAG,GACnB8T,gBAAiBL,EAAAA,YACjBM,oBAAqBN,EAAAA,YACrBO,iBAAkBP,EAAAA,YAClBQ,QAASR,EAAAA,YACTS,UAAWT,EAAAA,YACXU,QAASV,EAAAA,YACTW,KAAM,GAGKC,GAAkBC,EAAAA,cAAoBjB,IC1CtCkB,GAAgB,SAAAnb,GACrB,IACEiC,EADOoO,KACPpK,YAEFpG,EAAe,SAAAoD,GACb,IAAEE,EAASF,EAATtC,KACF2G,EAAUtH,EAAOmD,GACnBmE,GAASA,EAAQrE,EACvB,EASMX,EAAe,WAAf,OACJwB,OAAO8L,KAAK5P,GAAQgD,SAAQ,SAAAC,GAC1BhB,EAAYkF,iBAAiBlE,EAAWpD,EAC1C,IACO,WAVMiE,OAAO8L,KAAK5P,GACpBgD,SAAQ,SAAAG,GACXlB,EAAYoF,oBAAoBlE,EAAWtD,EAC7C,GAOiC,GAGnCub,EAAAA,WAAgB,kBAAM9Y,GAAa,GAAG,GACxC,ECbM+Y,GAAsB,IAMrB,SAASC,GAAStb,GAAmC,IAAAub,EAClDtb,EAAuBD,EAAvB4H,UAAc3F,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAAwb,GACzB3b,EAAS4b,EAAAA,OAA4B,MACrCpZ,EAAUoZ,EAAAA,OAA6B,MACvCnZ,EAAS+N,KACTpN,EAAewY,EAAAA,WAAiB1B,IAChC5W,EAAkBsY,EAAAA,WAAiBR,IAAeS,EAE/BjK,KAAWkK,GAAAzT,EAAAA,EAAAA,GAAAwT,EAAA,GAA7BpU,EAAAqU,EAAA,GAASzV,EAAKyV,EAAA,GAGJrV,EADGmV,EAAAA,OAA4B,CAAC,GACzCrW,QACFoB,EAAciV,EAAAA,WAAiB7B,IAEnClT,EAGEvD,EAHFyY,iBAAkBjV,EAGhBxD,EAHgB0Y,aAAcjV,EAG9BzD,EAH8BqX,MAAO7X,EAGrCQ,EAHqC2Y,aAAchV,EAGnD3D,EAHmDuQ,OACrDhL,EAEEvF,EAFF+W,cAAe3G,EAEbpQ,EAFawX,oBAAqB9K,EAElC1M,EAFkCuX,gBAAiB3K,EAEnD5M,EAFmDyX,iBACrDpH,EACErQ,EADF2Q,YAEMqC,EAAUlT,EAAV8Y,MACA3F,EAAqB5P,EAArBtF,KAAMmV,EAAe7P,EAAfmT,aACdqC,EAAAA,EAAAA,YAAW5F,GAEL,IAsBAqB,EAAkB,WAChB,IAAEwE,EAAYpc,EAAZuF,QACF8W,EAAS,OAAAD,QAAA,IAAAA,OAAA,EAAAA,EAASE,WACxB,OAAID,aAAkBE,eAEbF,EAAOG,aAIT,CACT,EAAAC,EAEwCb,EAAAA,SAAehE,GAAe8E,GAAArU,EAAAA,EAAAA,GAAAoU,EAAA,GAA/DxE,EAAAyE,EAAA,GAActE,EAAesE,EAAA,GAE5BC,EAAyBpG,EAAzB7S,MAAOkZ,EAAkBrG,EAAlB+D,MAAOuC,EAAWtG,EAAXgE,OAEhBuC,EAAkB,WACtB,KAAMC,EAAAA,EAAAA,aAAYhW,MAAUgW,EAAAA,EAAAA,aAAYF,GAEtC,OAAO,EAGH,IAAAT,GAAeY,EAAAA,EAAAA,gBAAeH,EAAQ9V,EAAO,SAC3CsV,EAAU5V,EAAVwW,MACR,OAAIb,GAAgBA,IAAiBC,IACnC5V,EAASwW,MAAQb,EACjB3U,KAEK2U,CACT,EAEMc,EAAeJ,IAgCrBxB,IAAAI,EAAA,IAAA9I,EAAAA,EAAAA,GAAA8I,EAAgByB,EAAAA,UAAAA,QA9BQ,SAAAf,GAEtB,IAAI3V,EAAS2W,OAAb,CAEA,IAAQf,EAASD,EAATtb,KAGR,IAFKuc,EAAAA,EAAAA,aAAYhB,IACXD,aAAiB5V,aACnB6V,IAASc,EAAAA,UAAAA,OAAb,CAEA,IAAQG,EAAWlB,EAAX1V,OACR,GAAK4W,EAAL,CAEA,IAAQC,EAAWD,EAAXE,OACR,GAAKD,EAAL,CAEA,IAAQE,EAAWF,EAAXG,OACR,IAAKC,EAAAA,EAAAA,UAASF,GAEd,QAAOA,GACL,KAAKlH,EACL,KAAKA,EAAKiD,UACV,KAAKjD,EAAKzK,QAAS,MACnB,QACE,GAAwB,UAApByR,EAAOK,SAAsB,MACjC,OAGJnW,GAAQ,CAdW,CAHA,CAHkB,CALV,CA0B7B,KAEmCmL,EAAAA,EAAAA,GAAA8I,EAAiByB,EAAAA,UAAAA,KAAiB1V,GAAQiU,IAE7E,IAaMmC,EAAc,WAClB,IAAQzB,EAAkB3V,EAAlBwW,MAAOZ,EAAW5V,EAAX2W,cACR3W,EAASqX,eACTrX,EAAS2W,OAEV,IAAEE,EAAYtd,EAAZuF,QACAgY,EAAc9a,EAAdsb,UAEFN,EAAQH,GAAWC,GAAanB,GAASA,IAAUU,IACzD,IAAIT,IAAWoB,KACbhW,KACKgW,GAAO,OAAO/X,QAAQC,UAE7B,IAAMqY,EA1BU,WACV,IAAE5B,EAAS3Z,EAAToU,KACFwF,EAAO,CACXY,MAAOhF,GAAgBmE,EAAKa,MAAQb,EAAK6B,QAASA,OAAQhG,GAE5D,OAAOiG,EAAAA,EAAAA,UAAS7B,EAClB,CAoBsB8B,GACdC,EAnBU,SAAAhC,GAChB,IAAQC,EAAkBD,EAAlBa,MAAOK,EAAWlB,EAAX6B,OACf,MAAO,CAAEhB,MAAOvR,KAAKD,IAAI4Q,EAAOa,GAAee,OAAAX,EACjD,CAgBmBe,CAASL,GAIpBM,EAAU/H,EAAKgI,SAASH,EAAU9a,EAAgBqX,MAAO,GAC/D,OAAK2D,EAEEA,EAAQnN,MAAK,SAAAqN,GAClB,IAAMC,EAAc3B,IAChB0B,GAAWpC,GAASqC,GAEtBnB,EAAQjG,gBA7HS,SAAC+E,EAAcC,EAAYiB,GAChD,IAAMC,GAAMmB,EAAAA,EAAAA,YAAWtC,GACjBqB,GAAgBkB,EAAAA,EAAAA,oBAAmBpB,GACnCS,GAAYY,EAAAA,EAAAA,cAAanB,GACzBW,GAAeS,EAAAA,EAAAA,mBAAkBxC,EAAM,GAAID,GAC3CkC,EAAY,CAChBzX,EAAGwV,EAAKY,MAAOlW,EAAG,EAClBkW,MAAOK,EAASW,OAAQ5B,EAAK4B,QAEzBO,GAAeK,EAAAA,EAAAA,mBAAkBP,EAAW,GAAIN,GAEhDS,EAAc,CAClBxB,MAAOZ,EAAKY,MAAQK,EAASW,OAAQ5B,EAAK4B,QAEtCa,GAAYC,EAAAA,EAAAA,YAAW,WAEvBC,GAAUC,EAAAA,EAAAA,mBAAkBR,EAAaK,EAD1B,CAACV,EAAcI,IAE9BU,GAAcC,EAAAA,EAAAA,gBAAe,CAACH,IAC9BI,EAAgB,CAAEnC,MAAO3Z,EAAgBuT,KAAKoG,MAAOgB,OAAQhG,GAC7DoH,GAAmBR,EAAAA,EAAAA,mBAAkBO,EAAe,IAAIE,EAAAA,EAAAA,QAAOR,IACrE,OAAOS,EAAAA,EAAAA,eAAcH,EAAe,CAACF,EAAaG,GACpD,CAwG8BG,CAAejC,EAAUkC,MAAOzB,EAAa,GAAIQ,EAE7E,IARqB9Y,QAAQC,SAS/B,EAuBAiW,EAAAA,WArBqB,WACnB,IAAK3D,EAEH,OAAOG,EAAgBR,GAGnB,IAAEwE,EAAYpc,EAAZuF,QACA8W,EAAc5Z,EAAdsb,UACR,GAAM3B,GAAWC,EAEjB,IAAI5V,EAASqX,QAKX,YAJKrX,EAAS2W,SAEZ3W,EAAS2W,QAAS,IAKtB3W,EAASqX,QAAU4B,WAAW7B,EAAarC,GAAmB,CAChE,GAE8B,CAACnV,EAAOU,EAAOkR,IAE7C,IAAM0H,EAAiB,SAAAvD,GACrBA,EAAM7E,kBACN9U,EAAOmd,UAAUC,IAAItJ,EACvB,EAoEMuJ,EAAuB,CAAE7C,MAAOC,GAClC1G,GAAe,IACjBsJ,EAAMC,YAAa/C,EAAAA,EAAAA,gBAAeJ,EAAQpG,EAAazP,EAAO,UAGhE,IAAMiZ,GAAA3f,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD+B,GAAA,IACH6d,MAAAH,EACA/X,UAnCyB,WACzB,IAAMqU,EAAW7F,IAASzT,EACpBuZ,EAAoB,GAC1B,OAAIjc,GAAWic,EAAQtT,KAAK3I,GACxBgc,GAAUC,EAAQtT,KAAKmX,EAAAA,eACvBpZ,IAAiByP,GAAM8F,EAAQtT,MAAKoX,EAAAA,EAAAA,uBAAsBtZ,IAGvDwV,EAAQpT,KAAK,IACtB,CA0BamX,GACX5H,cAAAmH,EAAelI,YAhEI,SAAA2E,GACnBuD,EAAcvD,GAEd,IAAQC,EAA0BD,EAA1BtI,aAAcwJ,EAAYlB,EAAZtE,QACdyF,EAAY/a,EAAZ+C,QACR,GAAM8W,GAAgBkB,EAAtB,CAEM,IAGAa,EAAO,CAAEvG,OAAQyF,EAHVC,EAAQ7F,wBACbC,MAGF2G,EAAOpG,KAAKC,UAAUiG,GAC5B/B,EAAahE,cAAgB,OAC7BgE,EAAa/D,QAAQ,OAAS+H,EAAAA,WAAY/B,EARJ,CASxC,EAkD8BgC,UA3EX,SAAAlE,IACjBmE,EAAAA,EAAAA,WAAUnE,GACV,IAAQC,EAAiBD,EAAjBtI,aACHuI,IAGc,SADIA,EAAfmE,YAEN/d,EAAOge,WAAWlK,GAEtB,EAmEEvC,WAjDkB,SAAAoI,IAClBmE,EAAAA,EAAAA,WAAUnE,GACV,IAAQC,EAAiBD,EAAjBtI,aACR,GAAKuI,EAAL,CAEA,IAAMiB,EAAiBzU,EAAcwT,EAAc9F,GAC7CgH,EAAMD,EAAiBoD,EAAAA,iBAAAA,GAAsBA,EAAAA,iBAAAA,KACnDxQ,EAAiBoN,EAAiBhH,OAAQ,GAC1CtG,EAAgBsN,EAAiB/G,OAAO,GACxC7C,EAAoB6J,EANK,CAO3B,EAuCctJ,YAAAN,EAAaE,OAAA5M,EACzB8D,QAAU,SAAAqR,GAAA,OAA4BA,EAAM7E,iBAAgB,EAC5DC,WAAW,EACXlX,IAAKkC,EACLgH,SA9BiB,WACjB,IAAM4S,EAA0B,CAC9BxS,IAAK,gBAAiBtJ,IAAKN,GAEvBqc,EAAO,CAAEY,MAAOC,EAAce,OAAQhG,GAC5C,IAAI0I,EAAAA,EAAAA,eAActE,GAAO,CACvB,IAAQkB,EAAkBlB,EAAlBY,MAAOQ,EAAWpB,EAAX4B,OACf7B,EAASa,MAAQM,EACjBnB,EAAS6B,OAASR,EAClBrB,EAASwE,QAAA,OAAAvd,OAAiBka,EAAA,KAAAla,OAASoa,EAAA,CAErC,IAAMH,EAAQ,CAAC1B,EAAAA,cAAC,OAAAvb,EAAAA,EAAAA,GAAA,GAAS+b,KACzB,OAAIO,GAAOW,EAAMlW,QAAQwU,EAAAA,cAAC,SAAMhS,IAAI,SAAS+S,IACtCW,CACT,CAgBYuD,KAGZ,OAAOjF,EAAAA,cAAC3b,IAAAI,EAAAA,EAAAA,GAAA,GAAU2f,GACpB,CC7RO,IAAMc,GAAU,WAAV,OAAsBC,EAAAA,WAAiBhH,IAAa1Y,IAAA,ECG1D,SAAS2f,GAAoB7gB,GAAmC,IAAA8gB,EAC7D7gB,EAAsBD,EAAtBqJ,SAAapH,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAA+gB,GACxBlhB,EAASwQ,KACThO,EAAc,WAAd,OAAoBxC,EAAOmhB,IAAIC,EAAAA,aAAAA,KAAiB,EAAAC,EACtBC,EAAAA,SAAe9e,GAAW+e,GAAAlZ,EAAAA,EAAAA,GAAAgZ,EAAA,GAAnD5e,EAAA8e,EAAA,GAAUne,EAAWme,EAAA,GACtBje,EAAiB,WAAQF,EAAYZ,IAAe,EAE1D8Y,IAAA2F,EAAA,IAAArO,EAAAA,EAAAA,GAAAqO,EACGO,EAAAA,UAAAA,OAAmBle,IAAAsP,EAAAA,EAAAA,GAAAqO,EACnBO,EAAAA,UAAAA,OAAmBle,IAAAsP,EAAAA,EAAAA,GAAAqO,EACnBO,EAAAA,UAAAA,KAAiBle,GACpB2d,IAQA,IAAM5a,GAAAhG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqB+B,GAAA,IAAM2I,QANjB,WACVtI,GAEJzC,EAAO4B,QACT,EAE0C6f,SAAAhf,IAC1C,OAAO6e,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBlhB,GAAWiG,EAG3D,CCtBO,SAASqb,GAAiBvhB,GAE/B,IAAAwhB,EAAgCC,EAAAA,UAAe,GAAIC,GAAAxZ,EAAAA,EAAAA,GAAAsZ,EAAA,GAA5CvhB,EAAAyhB,EAAA,GAAUzf,EAAWyf,EAAA,GACtB7hB,EAASwQ,KACf8K,IAAA1I,EAAAA,EAAAA,GAAA,GACGkP,EAAAA,UAAAA,QAAmB,WAAQ1f,GAAapC,EAAOmhB,IAAIY,EAAAA,aAAAA,MAAoB,KAE1E,IAAQvf,EAAsBrC,EAAtBqJ,SAAa/G,GAAKuF,EAAAA,EAAAA,GAAI7H,EAAA6hB,GAGxB1e,GAAAjD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqBoC,GAAA,IAAMsI,QAFjB,WAAQ/K,EAAOgC,MAAO,EAEIyf,SAAArhB,IAC1C,OAAOwhB,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBpf,GAAWc,EAC3D,CCXO,SAAS2e,GAAmB9hB,GACjC,IAAQC,EAA4BD,EAA5BqJ,SAAUpH,EAAkBjC,EAAlBW,KAASd,GAAKgI,EAAAA,EAAAA,GAAI7H,EAAA+hB,GAC9B1f,EAAaJ,GAAQ+f,EAAAA,WAAAA,MAC3BC,EAAAA,EAAAA,kBAAiB5f,GAEX,IAAAC,EAAS+N,KAAU6R,EACOC,EAAAA,UAAgB7f,EAAOmd,UAAUpd,IAAW+f,GAAAla,EAAAA,EAAAA,GAAAga,EAAA,GAArEjf,EAAAmf,EAAA,GAAUjf,EAAWif,EAAA,GAC5BjH,IAAA1I,EAAAA,EAAAA,GAAA,GACG4P,EAAAA,UAAAA,WAAsB,WAAQlf,GAAab,EAAOmd,UAAUpd,GAAa,KAG5E,IASM6D,EAAQic,EAAAA,SAAAA,KAAoBliB,GAE5BkG,GAAAjG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAkBL,GAASqG,EAAM4F,OAAA,IAAOlB,QAX9B,WACd,IAAI3H,EAAJ,CAEA,IAAMqD,EAAahE,EAAOmd,UAAUpd,IAChCigB,EAAAA,EAAAA,UAAShc,GAAahE,EAAOigB,aAAajc,IACrCkc,EAAAA,EAAAA,QAAOlc,GAAahE,EAAOge,WAAWha,IACtCmc,EAAAA,EAAAA,SAAQnc,IAAahE,EAAOogB,YAAYpc,EAL7B,CAMtB,EAIuDgb,SAAAre,IACvD,OAAOkf,EAAAA,aAAmBjc,EAAOC,EACnC,CCzBO,SAASwc,GAAiB3iB,GACzB,IAAAC,EAASoQ,KAAUuS,EACOC,EAAAA,UAAe,GAAIC,GAAA5a,EAAAA,EAAAA,GAAA0a,EAAA,GAA5C3gB,EAAA6gB,EAAA,GAAUjjB,EAAWijB,EAAA,GAC5B3H,IAAA1I,EAAAA,EAAAA,GAAA,GACGsQ,EAAAA,UAAAA,QAAmB,WAAQljB,GAAaI,EAAO+gB,IAAIgC,EAAAA,aAAAA,MAAoB,KAE1E,IAAQ3gB,EAAsBrC,EAAtBqJ,SAAa/G,GAAKuF,EAAAA,EAAAA,GAAI7H,EAAAijB,GAIxB9f,GAAAjD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqBoC,GAAA,IAAMsI,QAFjB,WAAQ3K,EAAO2B,MAAO,EAEI0f,SAAUrf,IACpD,OAAQ4gB,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBxgB,GAAWc,EAC5D,CCVO,SAAS+f,GAAcljB,GAAmC,IAAAmjB,EACzDljB,EAASkQ,KACPlO,EAAsBjC,EAAtBqJ,SAAaxJ,GAAKgI,EAAAA,EAAAA,GAAI7H,EAAAojB,GACxB/gB,EAASgO,KAET/N,EAAc,WAAd,OAAqBD,EAAO2e,IAAIqC,EAAAA,aAAAA,OAAmB,EAAAC,EACzBC,EAAAA,SAAejhB,GAAWkhB,GAAAtb,EAAAA,EAAAA,GAAAob,EAAA,GAAnDrgB,EAAAugB,EAAA,GAAUrgB,EAAWqgB,EAAA,GACtBlc,EAAiB,WAAjB,OAAuBnE,EAAYb,IAAa,EAOtD,GANA6Y,IAAAgI,EAAA,IAAA1Q,EAAAA,EAAAA,GAAA0Q,EACGM,EAAAA,UAAAA,KAAiBnc,IAAAmL,EAAAA,EAAAA,GAAA0Q,EACjBM,EAAAA,UAAAA,OAAmBnc,IAAAmL,EAAAA,EAAAA,GAAA0Q,EACnBM,EAAAA,UAAAA,OAAmBnc,GACtB6b,KAEKljB,EAAO0Q,QAAQ+S,EAAAA,iBAAkB,OAAO,KAW7C,IAAMvd,GAAAjG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqBL,GAAA,IAAM+K,QATjB,WACd,IAAI3H,EAAJ,CAEA,IAAQqD,EAAcjE,EAAdub,WACR+F,EAAAA,EAAAA,iBAAgBrd,GAEhBnD,GAAY,GACZlD,EAAO2jB,OAAOtd,EANM,CAOtB,EAC0Cgb,SAAAre,IAC1C,OAAOsgB,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBthB,GAAWkE,EAC3D,CC3BO,SAAS0d,GAAY7jB,GAAkC,IAAA8jB,EACtD7jB,EAASoQ,KACTpO,EAASkO,KAETtQ,EAAc,WAAd,OAAqBI,EAAO+gB,IAAI+C,EAAAA,aAAAA,KAAiB,EAAAC,EACvBC,EAAAA,SAAepkB,GAAWqkB,GAAAhc,EAAAA,EAAAA,GAAA8b,EAAA,GAAnD3hB,EAAA6hB,EAAA,GAAU5hB,EAAW4hB,EAAA,GAEtBjhB,EAAiB,WAAQX,EAAYzC,IAAe,EAM1D,GALAsb,IAAA2I,EAAA,IAAArR,EAAAA,EAAAA,GAAAqR,EACGK,EAAAA,UAAAA,OAAmBlhB,IAAAwP,EAAAA,EAAAA,GAAAqR,EACnBK,EAAAA,UAAAA,KAAiBlhB,GACpB6gB,KAEK7hB,EAAO0O,QAAQyT,EAAAA,gBAAiB,OAAO,KAE5C,IAAQjhB,EAAsBnD,EAAtBqJ,SAAa/B,GAAKO,EAAAA,EAAAA,GAAI7H,EAAAqkB,GAYxBle,GAAAjG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqBoH,GAAA,IAAMsD,QAVjB,WACd,IAAIvI,EAAJ,CAEAC,GAAY,GACZ,IAAQgE,EAAcrG,EAAd2d,WACR0G,EAAAA,EAAAA,iBAAgBhe,GAEhBrE,EAAOsiB,KAAKje,EANQ,CAOtB,EAE0Cgb,SAAAjf,IAC1C,OAAO4hB,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoB9gB,GAAWgD,EAC3D,CC/BO,IAAMqe,GAAyC,CACpD7T,SAAS,EACT8T,QAAS,CAAC,EACVC,gBAAiB,kBAAMnf,QAAQC,QAAQ,CAAC,EAC1C,GAEamf,GAAaC,EAAAA,cAAoBJ,ICejCK,GAAqD,CAChEC,YAAa,EACbC,aAAc,CACZC,aAAc,CAAC,EACfC,cAAe,CAAC,EAChBC,aAAcC,EAAAA,WAAAA,KACdC,YAAa,IAEfC,cAAe,GACfC,eAAgBC,EAAAA,YAChBC,eAAgBD,EAAAA,aAGLE,GAAmBC,EAAAA,cAAoBb,IClB7C,SAASc,GAAoB3lB,GAA8C,IAAA4lB,EAAAC,EAAAC,EAC1E7lB,EAASoQ,KAAU0V,EACSC,EAAAA,UAAe,GAAKC,GAAA/d,EAAAA,EAAAA,GAAA6d,EAAA,GAA/C9jB,EAAAgkB,EAAA,GAAWpmB,EAAYomB,EAAA,GAAAC,EACIF,EAAAA,UAA6B,iBAAM,EAAE,IAAAG,GAAAje,EAAAA,EAAAA,GAAAge,EAAA,GAAhE7jB,EAAA8jB,EAAA,GAAW7jB,EAAY6jB,EAAA,GAAAC,EAEEJ,EAAAA,UAAsB,QAAPJ,EAAA3lB,EAAO2d,iBAAA,IAAAgI,OAAA,EAAPA,EAAkBnf,KAAM,IAAE4f,GAAAne,EAAAA,EAAAA,GAAAke,EAAA,GAAlEnjB,EAAAojB,EAAA,GAAUljB,EAAWkjB,EAAA,GACtB/e,EAAa0e,EAAAA,WAAiBrB,IAG5Bre,EAFiB0f,EAAAA,WAAiBP,IAClCV,aACAG,aAAAoB,EAE8BN,EAAAA,UAAsB,QAAPH,EAAA5lB,EAAO2d,iBAAA,IAAAiI,OAAA,EAAPA,EAAkBtiB,QAAS,IAAEgjB,GAAAre,EAAAA,EAAAA,GAAAoe,EAAA,GAA3E9f,EAAA+f,EAAA,GAAa7f,EAAc6f,EAAA,GAC5B5f,EAAc,WAAd,OAAoB1G,EAAO+gB,IAAIwF,EAAAA,aAAAA,KAAiB,EAAAC,EACtBT,EAAAA,SAAerf,GAAW+f,GAAAxe,EAAAA,EAAAA,GAAAue,EAAA,GAAnD7f,EAAA8f,EAAA,GAAU/jB,EAAW+jB,EAAA,GACpB5f,EAAsCQ,EAAtCqJ,QAASjI,EAA6BpB,EAA7Bmd,QAASlR,EAAoBjM,EAApBod,gBAEpB7U,EAAiB,WAAQlN,EAAYgE,IAAe,EAmC1DwU,IAAA2K,EAAA,IAAArT,EAAAA,EAAAA,GAAAqT,EACGa,EAAAA,UAAAA,QAbkB,WACnB,IAAQnK,EAAcvc,EAAd2d,WACRgJ,EAAAA,EAAAA,cAAapK,EAAW,aAExB,IAAQC,EAAUD,EAAVjZ,MACJiD,IAAgBiW,IAClBna,GAAa,SAAAoa,GAAA,OAAAzS,EAAAA,EAAAA,GAAgByS,EAAQ,IACrChW,EAAe+V,IAEjB5M,GACF,KAGsB4C,EAAAA,EAAAA,GAAAqT,EACnBa,EAAAA,UAAAA,QAnCmB,SAAAnK,GACpB,IAAQC,EAASD,EAAT7b,KAGR,IAFMkmB,EAAAA,EAAAA,aAAYpK,KAASqK,EAAAA,EAAAA,cAAarK,IAEpCA,IAASnW,EAAb,CAEA,IAAQoW,EAAczc,EAAd2d,WACRgJ,EAAAA,EAAAA,cAAalK,EAAW,aAExB,IAAQC,EAAcD,EAAdjW,GAAIsW,EAAUL,EAAVnZ,MACZjB,GAAa,SAAAykB,GACX,IAAM/I,EAAO+I,EAASte,QAAO,SAAAiV,GAAA,OAAUsJ,EAAAA,EAAAA,mBAAkBtJ,EAAOna,MAAM,IAChE2a,EAAQF,EAAKiJ,WAAU,SAAAvJ,GAAA,OAAUA,EAAOjX,KAAOkW,CAAE,IACvD,OAAIuK,EAAAA,EAAAA,YAAWhJ,GAAQF,EAAKmJ,OAAOjJ,EAAO,EAAGxB,GACxCsB,EAAKpV,KAAK8T,GACfvZ,EAAYwZ,GACZjW,EAAeqW,GACRiB,CACT,GAdiC,CAenC,KAgBsBvL,EAAAA,EAAAA,GAAAqT,EACnBa,EAAAA,UAAAA,KAAiB9W,GACpBiW,IAgDA,GA1BAE,EAAAA,WAAgB,WAEd,GADMlf,GAAW4B,EAAQ0e,EAAAA,WAAAA,QACrBnlB,EAAJ,CAEApC,GAAa,GACb,IAAM2c,EAAmC,CAAE6K,SAAS,GAC9C5K,EAAW6K,EAAAA,UAAAA,KAAernB,EAAOsnB,UAAUC,SACjDtW,QAAQC,MAAM,kBAAmBsL,EAAUD,GAC3CjJ,EAAgBkJ,EAAUD,GAASxL,MAAM,SAAA0L,GACvCxL,QAAQC,MAAM,mBAAoBsL,EAAUC,GAC5C,IAAQC,EAAqBD,EAArB+K,UAAW1K,EAAUL,EAAVlZ,MACfuZ,EAAO7L,QAAQ1N,MAAM,mBAAoBiZ,EAAUM,GAClDza,GAAa,SAAAykB,GAChB,IAAM/I,GAAA/T,EAAAA,EAAAA,GAAW8c,GACjB,OAAApK,EAAU3Z,SAAQ,SAAAkb,GAChB,IAAQR,EAAcQ,EAAdzX,GAAIihB,EAAUxJ,EAAV3a,MACEya,EAAKnX,MAAK,SAAA8gB,GAAA,OAAUA,EAAOlhB,KAAOiX,CAAE,OACpCsJ,EAAAA,EAAAA,mBAAkBU,IAEhC1J,EAAKpV,KAAKsV,EACZ,IACOF,CACT,GACF,GArBqB,CAsBvB,GAAG,CAACtV,EAAS5B,IAETzE,EAAUsG,OAAS,EAAG,OAAO,KAE3B,IAkBE0N,EAAsBrW,EAAtBqJ,SAAagW,GAAKxX,EAAAA,EAAAA,GAAI7H,EAAA4nB,GACxBnQ,EAAQuO,EAAAA,SAAAA,KAAoB3P,IAClCwR,EAAAA,EAAAA,YAAW7B,EAAAA,eAAqBvO,IAEhC,IAAMK,EAAgB,CACpBrO,IAAK,mBACL2L,SAxE6D,SAAAoH,GAC7D,IAAI5V,EAAJ,CAEM,IAAE6V,EAAkBD,EAAMe,OAAxBuK,cACFpL,EAASra,EAAUoa,IACzBmK,EAAAA,EAAAA,cAAalK,EAAQ,4BAEf,IACAK,EAA0B,CAAEtW,GADnBiW,EAAPjW,IAEAsgB,EAAa9mB,EAAbsnB,SACFvJ,EAAWsJ,EAAAA,UAAAA,KAAeP,GAAUgB,IAC1C7W,QAAQC,MAAM,aAAc6M,EAAUjB,GACtCxJ,EAAgByK,EAAUjB,GAAS/L,MAAM,SAAAkN,GACvChN,QAAQC,MAAM,cAAe6M,EAAUE,GACvC,IAAQR,EAAgBQ,EAAhB1a,MAAOkkB,EAASxJ,EAATpc,KACf,IAAI4b,EACC,OAAOzd,EAAOsB,KAAKmmB,GADbxW,QAAQ1N,MAAM,cAAewa,EAAUN,EAEpD,GAhBoB,CAiBtB,EAsDY4D,SAAA1a,EAAUyC,SAxBG,WACvB,IAAQmT,EAAwBvc,EAAxBsnB,SAAU9K,EAAcxc,EAAd2d,UACZlB,EAAW,CAACsJ,EAAAA,cAAC,YAASvc,IAAI,QAAQlG,MAAOX,GAAe,WAC9D,IAAK6Z,EAAW,OAAOC,EAEvB,IAAYC,EAAiCF,EAArChW,GAAqBsW,EAAgBN,EAAvBlZ,MACtB,OAAAmZ,EAAS9T,KAAA0I,MAAToL,GAAAzS,EAAAA,EAAAA,GAAiB5H,EAAUmH,KAAI,SAAAud,GAC7B,IAAe/I,EAAoB+I,EAA3BxjB,MAAoB2a,EAAO6I,EAAPtgB,GACtBiX,EAASQ,IAAOvB,EAAYI,EAAciB,EAE1CwB,EAAc,CAAEnW,UADL2d,EAAAA,EAAAA,mBAAkBtJ,GAASA,EAAQ5a,GAAiB,YAAa,CAAEnC,KAAM6b,IAC1Dha,MAAO0b,EAAIzU,IAAKyU,GAEhD,OADe8H,EAAAA,cAAC,UAAA9lB,EAAAA,EAAAA,GAAA,GAAWsf,GAE7B,MAEO9C,CACT,CAQgCtG,GAAoB5T,MAAOS,GAErDgV,GAAA/X,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAiBmf,GAAA,IAAMhW,SAAU,CAACoO,EAAOuO,EAAAA,cAAC,UAAA9lB,EAAAA,EAAAA,GAAA,GAAW4X,OAC3D,OAAOkO,EAAAA,cAAClmB,IAAAI,EAAAA,EAAAA,GAAA,GAAU+X,GACpB,CCtJO,SAAS+P,GAAYhoB,GAAmC,IAAAioB,EACvDhoB,EAASoQ,KAETpO,EAAc,WAClB,IAAQkE,EAAclG,EAAd2d,UACR,QAAKsK,EAAAA,EAAAA,aAAY/hB,KAEKA,EAAdgiB,UAEUxf,MACpB,EAAAyf,EACgCC,EAAAA,SAAepmB,GAAWqmB,GAAApgB,EAAAA,EAAAA,GAAAkgB,EAAA,GAAnDvoB,EAAAyoB,EAAA,GAAUjmB,EAAWimB,EAAA,GACtBhmB,EAAiB,WAAjB,OAAuBD,EAAYJ,IAAa,EACtDkZ,IAAA8M,EAAA,IAAAxV,EAAAA,EAAAA,GAAAwV,EACGM,EAAAA,UAAAA,OAAmBjmB,IAAAmQ,EAAAA,EAAAA,GAAAwV,EACnBM,EAAAA,UAAAA,OAAmBjmB,GACtB2lB,IAEA,IAAQhlB,EAAsBjD,EAAtBqJ,SAAalG,GAAK0E,EAAAA,EAAAA,GAAI7H,EAAAwoB,GAgBxBtiB,GAAAhG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqBiD,GAAA,IAAMyH,QAdjB,WACd,IAAI/K,EAAJ,CAEA,IAAQsG,EAAclG,EAAd2d,WACR6K,EAAAA,EAAAA,iBAAgBtiB,GAEV,IAAEG,EAAcH,EAAdgiB,UAEDzhB,GAFCwB,EAAAA,EAAAA,GACW5B,EAAA,GAAJ,GACaoiB,QAArBC,UACPC,EAAAA,EAAAA,gBAAeliB,GAEf,IAAMC,GAAMkiB,EAAAA,EAAAA,aAAYniB,GACxBoiB,OAAOnnB,KAAKgF,EAXQ,CAYtB,EAC0C2a,SAAAzhB,IAC1C,OAAOwoB,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBplB,GAAWiD,EAC3D,CCrCO,IAAM6iB,GAA+BC,EAAAA,eAF5C,SAAmChpB,GAAqC,OAAO,IAAK,GAEvC,CAA0ByJ,IAAI,UAG9Dwf,GAAgB,kBCDhBC,IAAAC,EAAA,IAAA1W,EAAAA,EAAAA,GAAA0W,EACVC,EAAAA,SAAAA,QAAmBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACnBC,EAAAA,SAAAA,YAAuBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACvBC,EAAAA,SAAAA,UAAqBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACrBC,EAAAA,SAAAA,aAAwBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACxBC,EAAAA,SAAAA,OAAkBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EAClBC,EAAAA,SAAAA,MAAiBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACjBC,EAAAA,SAAAA,KAAgBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EAChBC,EAAAA,SAAAA,OAAkBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EAClBC,EAAAA,SAAAA,QAAmBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACnBC,EAAAA,SAAAA,IAAeL,KAAAtW,EAAAA,EAAAA,GAAA0W,EACfC,EAAAA,SAAAA,OAAkBL,KAAAtW,EAAAA,EAAAA,GAAA0W,EAClBC,EAAAA,SAAAA,OAAkBL,IACrBI,GCRaE,GAA6C,CACxD7mB,MAAO,GACP0R,KAAM,GACNuJ,SAAU,CAAE9c,KAAM2oB,EAAAA,SAAAA,OAAiBpV,KAAM,GAAIqV,aAAc,KAGhDC,GAAeC,EAAAA,cAAoBJ,ICbzC,SAASK,KACR,IAAA1pB,EAAe2pB,EAAAA,WAAiBH,IAC9BvpB,EAAyCD,EAAzC4pB,cAAe3nB,EAA0BjC,EAA1Byd,SAAU5d,EAAgBG,EAAhBwC,MAAOH,EAASrC,EAATkU,KACxC,IAAKjS,EAAU,OAAO,KAEtB,IAAMK,EAA4B,CAChC3B,KAAM,WACNuT,KAAA7R,EACAwnB,UAAWhqB,GAEb,OAAII,EACFqC,EAAW8S,SAAY,SAAAnS,GACrBhD,EAAcoC,EAAMY,EAAMsa,OAAOsM,QACnC,EACKvnB,EAAWgf,UAAW,EACtBqI,EAAAA,cAAC,SAAAzpB,EAAAA,EAAAA,GAAA,GAAUoC,GACpB,CCDO,SAASwnB,GAAe9pB,GAC7B,IAAQC,EAA8CD,EAA9CW,KAAMsB,EAAwCjC,EAAxCwU,MAAO3U,EAAiCG,EAAjCqJ,SAAUhH,EAAuBrC,EAAvB4H,UAActF,GAAKuF,EAAAA,EAAAA,GAAI7H,EAAA+pB,GAChD9mB,EAAQ+mB,EAAAA,SAAAA,KAAoBnqB,IAClCoqB,EAAAA,EAAAA,YAAWD,EAAAA,eAAqB/mB,IAEhC,IAAAinB,EAA4BF,EAAAA,UAAe,GAAKG,GAAAjiB,EAAAA,EAAAA,GAAAgiB,EAAA,GAAzC/mB,EAAAgnB,EAAA,GAAQ7iB,EAAS6iB,EAAA,GAClBjkB,EAAe8jB,EAAAA,WAAiBR,IAChCrjB,EAAgB6jB,EAAAA,WAAiBrkB,IAC/BW,EAAiBH,EAAjBb,KAAMkB,EAAWL,EAAXJ,QACdqkB,EAAAA,EAAAA,eAAc5jB,GACd,IAAQE,EAA+BR,EAA/B0jB,cAAejjB,EAAgBT,EAAhB1D,MAAOoE,EAASV,EAATgO,MAC9B+V,EAAAA,EAAAA,YAAWvjB,GAEL,IAAE/D,EAAU6D,EAAVgJ,MACF1I,EAAaqN,GAAgBlU,EAAMgC,GAenCsR,EAAe,SAAA8L,GACnB,IAAQ5H,EAAiB4H,EAAjB1L,aAKR,IAJAsW,EAAAA,EAAAA,YAAWxS,IAEG4S,EAAAA,EAAAA,WAAU5S,GAEd5U,SAASynB,EAAAA,mBAAoB,OAAO,EAE9C,IAAMrS,GAAesS,EAAAA,EAAAA,UAAS9S,GAC9B,SAAK+S,EAAAA,EAAAA,aAAYvS,IAEVnR,EAAWjE,SAASoV,EAC7B,EAUMzE,EAAA,eAAAiX,GAAA1U,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAS,SAAAyU,EAAOrL,GAAA,IAAA5H,EAAAQ,EAAAuE,EAAAC,EAAAC,EAAAiO,EAAAC,EAAAjO,EAAA,OAAA3G,EAAAA,EAAAA,KAAAM,MAAA,SAAAuU,GAAA,cAAAA,EAAArU,KAAAqU,EAAApU,MAAA,WACpBqU,EAAAA,EAAAA,WAAUzL,GACV/X,GAAU,GACLiM,EAAY8L,GAAK,CAAAwL,EAAApU,KAAA,eAAAoU,EAAAjU,OAAA,iBAEd,GAAAa,EAAiB4H,EAAjB1L,cACRsW,EAAAA,EAAAA,YAAWxS,KAEG4S,EAAAA,EAAAA,WAAU5S,GAEd5U,SAASynB,EAAAA,mBAAiB,CAAAO,EAAApU,KAAA,eAAAoU,EAAApU,KAAA,EAC5BnQ,EAAKmR,EAAa7D,OAAO5C,MAAK,SAAA2L,GAClC,GAAKA,EAAYhU,OAAjB,CAGM,IAAAoe,EADqB,gBAATngB,EACQ+V,EAAYlU,OAAOsiB,EAAAA,uBAAyBpO,EAC/DqB,GAD+D9V,EAAAA,EAAAA,GACjD6e,EAAA,GAAJ,GACb/I,KACFiM,EAAAA,EAAAA,YAAWtnB,EAAMqoB,UAAUhN,EAAWvX,IAAK,GAAHvD,OAAM8a,EAAWrd,KAAA,eAEzD+F,EAAcE,EAAMoX,EAAWvX,IARF,CAUjC,IAAC,cAAAokB,EAAAjU,OAAA,iBAMK,GAHFqB,GAAOgT,EAAAA,EAAAA,UAASxT,GAChB+E,EAAO/E,EAAayT,QAAQjT,GAC5BwE,EAA6B1E,KAAKoT,MAAM3O,GACtCE,EAAgBD,EAAhB7E,cACJwT,EAAAA,EAAAA,eAAc1O,GAAc,CAAHmO,EAAApU,KAAA,SACV,GADUkU,EACNhoB,EAAM0oB,OAAO3O,GAAWkO,GAAA1iB,EAAAA,EAAAA,GAAAyiB,EAAA,GAAtChO,EAAUiO,EAAA,GACJ,gBAAThkB,IAA2BmkB,EAAAA,EAAAA,uBAAsBpO,GAAU,CAAAkO,EAAApU,KAAA,gBAAAoU,EAAAjU,OAAA,kBAE/DlQ,EAAcE,EAAM8V,EAAYjW,IAAG,yBAAAokB,EAAA1T,OAAA,GAAAuT,EAAA,KAEvC,gBAnCMY,GAAA,OAAAb,EAAAnZ,MAAA,KAAApD,UAAA,KA4CAkI,EAAgB4T,EAAAA,SAPK,WACzB,IAAM3K,EAAU,GAChB,OAAIhd,GAAWgd,EAAQzW,KAAKvG,GACxBc,GAAQkc,EAAQzW,KAAK2iB,EAAAA,eAClBlM,EAAQvW,KAAK,IACtB,GAEwD,CAAC3F,IAEnDkT,GAAAnW,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDoC,GAAA,IACHsF,UAAWwO,EACX/M,SApFiB,WACjB,IAAK1C,EAAO,OAAO,MAEnB6kB,EAAAA,EAAAA,uBAAsB7kB,GACtB,IAAM0Y,EAAa1c,EAAM8oB,OAAO9kB,IAChC+kB,EAAAA,EAAAA,aAAYrM,GAEZ,IAAM5H,EAAkB,CAAEhE,WAAA4L,EAAY5V,IAAK4V,EAAW5Y,IAEhDwR,EAAe,CAAE5O,SADN2gB,EAAAA,aAAmB/mB,EAAOwU,GACVjV,MAAO,CAAEiR,WAAA4L,IAC1C,OAAO2K,EAAAA,cAACrX,GAAkB5J,UAAA7I,EAAAA,EAAAA,GAAA,GAAa+X,GACzC,CAyEYvP,GACVoL,YA1DkB,WAAQxM,GAAU,EAAO,EA2D3CuM,WAzDkB,SAAAwL,GAClB,IAAM5H,EAAUlE,EAAY8L,GAC5B/X,EAAUmQ,GACNA,GAAS4H,EAAMsM,gBACrB,EAsDEjY,OAAAF,EACAhR,MAAOopB,OAAOjlB,GACd8C,IAAA,GAAAvG,OAAQ0D,EAAA,WAEV,OAAOojB,EAAAA,cAAClqB,IAAAI,EAAAA,EAAAA,GAAA,GAASmW,GACnB,CC1HO,SAASwV,KACR,IAAA7rB,EAAe8rB,EAAAA,WAAiBtC,IAC9BvpB,EAA+BD,EAA/B4pB,cAAe3nB,EAAgBjC,EAAhBwC,MAAO3C,EAASG,EAATkU,KAEtB5R,EADO+N,KACPb,OACRuc,EAAAA,EAAAA,YAAW9rB,GAEX,IAUMqH,EAAc,CAClB+B,SAPc/G,EAAM2N,OAAO+b,EAAAA,UAAUxiB,KAAI,SAAAtD,GACzC,IAAQC,EAAcD,EAAdO,GAAIH,EAAUJ,EAAV3C,MAEZ,OAAOuoB,EAAAA,cAAC,UAAA5rB,EAAAA,EAAAA,GAAA,GADY,CAAEsC,MAAO2D,EAAIkD,SAAU/C,EAAOmD,IAAKtD,IAEzD,IAIE+N,KAAArU,EACAuV,SAbgB,SAAAlP,GAChBjG,EAAcJ,EAAMqG,EAAMqX,OAAO/a,MACnC,EAYEA,MAAOopB,OAAO3pB,GACdwH,IAAA,GAAAvG,OAAQrD,EAAA,YAEV,OAAOisB,EAAAA,cAAC,UAAA5rB,EAAAA,EAAAA,GAAA,GAAWoH,GACrB,CCzBO,SAAS2kB,KACR,IAAAjsB,EAAeksB,EAAAA,WAAiB1C,IAG9BvnB,EADciqB,EAAAA,WAAiBvmB,IAC/BD,MACF7F,EAAQiE,OAAO8L,KAAK3N,GAClBI,EAAyCrC,EAAzC4pB,cAAetnB,EAA0BtC,EAA1Byd,SAAUxa,EAAgBjD,EAAhBwC,MAAOW,EAASnD,EAATkU,KACxC,IAAK5R,EAAU,OAAO,KAQtB,IAAM4D,EAA6B,CACjCmD,SANcxJ,EAAM2J,KAAI,SAAArD,GAAA,OAEjB+lB,EAAAA,cAAC,UAAAhsB,EAAAA,EAAAA,GAAA,GADY,CAAEsC,MAAO2D,EAAIkD,SAAUlD,EAAIsD,IAAKtD,IAErD,IAIC+N,KAAA/Q,EACAX,MAAOopB,OAAO3oB,GACdwG,IAAA,GAAAvG,OAAQC,EAAA,YAEV,OAAId,EACF6D,EAAYkP,SAAY,SAAAjP,GACxB9D,EAAcc,EAAMgD,EAAMoX,OAAO/a,MACnC,EACO0D,EAAYob,UAAW,EAGvB4K,EAAAA,cAAC,UAAAhsB,EAAAA,EAAAA,GAAA,GAAWgG,GACrB,CC7BO,SAASimB,KACR,IAAAnsB,EAAeosB,EAAAA,WAAiB5C,IAChCvpB,EAASoQ,KACPpO,EAA+CjC,EAA/C4pB,cAAe/pB,EAAgCG,EAAhCyd,SAAUpb,EAAsBrC,EAAtBwC,MAAOF,EAAetC,EAAfkU,KAAMjR,EAASjD,EAATqsB,KAC9C,IAAKxsB,EAAU,OAAO,KAEtB,IAAQsD,EAAmBtD,EAAnBysB,IAAKhlB,EAAczH,EAAdyL,IAAKpF,EAASrG,EAATmL,KAGZ7E,EAA4B,CAChCxF,KAAM,SACNuT,KAAA5R,EACAE,MAAOopB,OAAOvpB,IAEhB,OAAIkqB,EAAAA,EAAAA,WAAUppB,KAAMgD,EAAWmmB,IAAMnpB,IACjCopB,EAAAA,EAAAA,WAAUjlB,KAAMnB,EAAWmF,IAAMhE,IACjCilB,EAAAA,EAAAA,WAAUrmB,KAAOC,EAAW6E,KAAO9E,GAEnCjE,EACFkE,EAAWiP,SAAA,eAAAoX,GAAAzW,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAW,SAAAwW,EAAOnmB,GAAA,IAAAE,EAAA,OAAAwP,EAAAA,EAAAA,KAAAM,MAAA,SAAAoW,GAAA,cAAAA,EAAAlW,KAAAkW,EAAAjW,MAAA,OAEvB,GADIjQ,EAAUF,EAAMiX,OAAhB/a,MAAAkqB,EAAAC,GACJ1pB,GAAAypB,EAAAC,GAAA,CAAAD,EAAAjW,KAAA,eAAAiW,EAAAjW,KAAA,EAAYxW,EAAO2sB,SAAS3pB,GAAI,OACpChB,EAAcK,EAAMkE,GACtB,wBAAAkmB,EAAAvV,OAAA,GAAAsV,EAAA,qBAAAI,GAAA,OAAAL,EAAAlb,MAAA,KAAApD,UAAA,EAJW,GAKN/H,EAAWmb,UAAW,EACtB8K,EAAAA,cAAC,SAAAlsB,EAAAA,EAAAA,GAAA,GAAUiG,GAEpB,CCxBO,SAAS2mB,GAAO9sB,GACrB,IAAQC,EAAwBD,EAAxB4H,UAAW3F,EAAajC,EAAboV,SACbvV,GAAAK,EAAAA,EAAAA,GAAA,GAA+BF,GAC/BqC,EAAU,CAAC,UAGjB,GAFIpC,GAAWoC,EAAQuG,KAAK3I,GAC5BJ,EAAQ+H,UAAYvF,EAAQyG,KAAK,KAC7B7G,EAAU,CAIZpC,EAAQuV,SAHc,SAAAjS,GACpBlB,EAASkB,EAAOA,EAAMkS,cAAc0X,cACtC,CACmB,CAIrB,OADcC,EAAAA,cAAC,SAAA9sB,EAAAA,EAAAA,GAAA,CAAMS,KAAK,SAAad,GAEzC,CCjBO,SAASotB,KACR,IAAAjtB,EAASqQ,KACTpQ,EAAeitB,EAAAA,WAAiB1D,IAC9BvnB,EAA4FhC,EAA5F2pB,cAAe/pB,EAA6EI,EAA7Ewd,SAAiBpb,EAA4DpC,EAAnEuC,MAAqBF,EAA8CrC,EAA9CiU,KAAMjR,EAAwChD,EAAxCosB,KAAoBlpB,EAAoBlD,EAAlCspB,aAClE,IAAK1pB,EAAU,OAAO,KAEtB,IAAQyH,EAAkDzH,EAAlDyL,IAAKpF,EAA6CrG,EAA7CysB,IAAKnmB,EAAwCtG,EAAxCmL,KAAoB1E,EAAoBzG,EAAlC0pB,aAElB7iB,EAA6B,CACjClE,OAFY2qB,EAAAA,EAAAA,WAAU9qB,GAAgBA,GAAgB8qB,EAAAA,EAAAA,WAAUhqB,GAAkBA,EAAiBmD,EAGnGgmB,KAAKc,EAAAA,EAAAA,UAASlnB,GAAOA,EAAM,EAC3BoF,KAAK8hB,EAAAA,EAAAA,UAAS9lB,GAAOA,EAAM,EAC3B0D,MAAMoiB,EAAAA,EAAAA,UAASjnB,GAAQA,EAAO,IAC9B+N,KAAA5R,GAEF,GAAIL,EAAe,CACjB,IAAM0E,EAAA,eAAA0mB,GAAAtX,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAgC,SAAAqX,EAAO1mB,EAAQjE,GAAA,IAAAmE,EAAA,OAAAkP,EAAAA,EAAAA,KAAAM,MAAA,SAAAiX,GAAA,cAAAA,EAAA/W,KAAA+W,EAAA9W,MAAA,OAE/C,GADE3P,GAAQ0mB,EAAAA,EAAAA,SAAQ7qB,GAAUA,EAAO,GAAKA,EAAA4qB,EAAAZ,GACxC1pB,GAAAsqB,EAAAZ,GAAA,CAAAY,EAAA9W,KAAA,eAAA8W,EAAA9W,KAAA,EAAYzW,EAAO4sB,SAAS3pB,GAAI,OACpChB,EAAcK,EAAMwE,GACtB,wBAAAymB,EAAApW,OAAA,GAAAmW,EAAA,qBAJMG,EAAAC,GAAA,OAAAL,EAAA/b,MAAA,KAAApD,UAAA,KAKNxH,EAAY0O,SAAWzO,CAAA,MAClBD,EAAY4a,UAAW,EAE9B,OAAO4L,EAAAA,cAACJ,IAAA5sB,EAAAA,EAAAA,GAAA,CAAO0H,UAAU,UAAalB,GACxC,CCzBO,SAASinB,KACQC,EAAAA,WAAiBjoB,IAC/BD,MADF,IAEAzD,EAAe2rB,EAAAA,WAAiBpE,IAChC3pB,EAASwQ,KACPhO,EAA2FJ,EAA3F2nB,cAAetnB,EAA4EL,EAA5Ewb,SAAiBxa,EAA2DhB,EAAlEO,MAAqBW,EAA6ClB,EAA7CiS,KAAM5M,EAAuCrF,EAAvCoqB,KAAoBnmB,EAAmBjE,EAAjCsnB,aAClE,IAAKjnB,EAAU,OAAO,KAEhB,IAAgB6D,EAAoB7D,EAAlCinB,aAEFjjB,GAAQunB,EAAAA,EAAAA,WAAU5qB,GAAgBA,GAAgB4qB,EAAAA,EAAAA,WAAU3nB,GAAkBA,EAAiBC,EAC/FK,EAA4B,CAChC7F,KAAM,QAASuT,KAAA/Q,EAAMX,MAAOopB,OAAOtlB,IAErC,OAAIjE,EAEFmE,EAAW4O,SAAA,eAAA0Y,GAAA/X,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAW,SAAA8X,EAAOrnB,GAAA,IAAAC,EAAA,OAAAqP,EAAAA,EAAAA,KAAAM,MAAA,SAAA0X,GAAA,cAAAA,EAAAxX,KAAAwX,EAAAvX,MAAA,OAEvB,GADI9P,EAAUD,EAAM6W,OAAhB/a,MAAAwrB,EAAArB,GACJrlB,GAAA0mB,EAAArB,GAAA,CAAAqB,EAAAvX,KAAA,eAAAuX,EAAAvX,KAAA,EAAY5W,EAAO+sB,SAAStlB,GAAI,OACpCjF,EAAcc,EAAMwD,GACtB,wBAAAqnB,EAAA7W,OAAA,GAAA4W,EAAA,qBAAAE,GAAA,OAAAH,EAAAxc,MAAA,KAAApD,UAAA,EAJW,GAKN1H,EAAW8a,UAAW,EACtBsM,EAAAA,cAAC,SAAA1tB,EAAAA,EAAAA,GAAA,GAAUsG,GACpB,CCzBO,SAAS0nB,KACR,IAAAluB,EAAemuB,EAAAA,WAAiB3E,IAC9BvpB,EAAyCD,EAAzC4pB,cAAe3nB,EAA0BjC,EAA1Byd,SAAU5d,EAAgBG,EAAhBwC,MAAOH,EAASrC,EAATkU,KACxC,IAAKjS,EAAU,OAAO,KAEtB,IAAMK,EAA4B,CAChC4R,KAAA7R,EAAM1B,KAAM,OAAQ6B,MAAOopB,OAAO/rB,IAEpC,OAAII,EACFqC,EAAW8S,SAAY,SAAAnS,GACrBhD,EAAcoC,EAAMY,EAAMsa,OAAO/a,MACnC,EACKF,EAAWgf,UAAW,EACtB6M,EAAAA,cAAC,SAAAjuB,EAAAA,EAAAA,GAAA,GAAUoC,GACpB,CCdO,SAAS8rB,KACR,IAAApuB,EAAequB,EAAAA,WAAiB7E,IAC9BvpB,EAAyCD,EAAzC4pB,cAAe3nB,EAA0BjC,EAA1Byd,SAAU5d,EAAgBG,EAAhBwC,MAAOH,EAASrC,EAATkU,KAChC5R,EAAYL,EAAZqsB,SACRC,EAAAA,EAAAA,sBAAqBjsB,GAGrB,IAAMa,EAA6B,CACjCkG,SAFU/G,EAAQkH,IAAIoiB,QAERpiB,KAAI,SAAAlC,GAAA,OAEX+mB,EAAAA,cAAC,UAAAnuB,EAAAA,EAAAA,GAAA,GADY,CAAEsC,MAAO8E,EAAI+B,SAAU/B,EAAImC,IAAKnC,IAErD,IACC4M,KAAA7R,EACAG,MAAOopB,OAAO/rB,GACd4J,IAAA,GAAAvG,OAAQb,EAAA,YAEV,OAAIpC,EACFkD,EAAYiS,SAAY,SAAA9N,GACxBrH,EAAcoC,EAAMiF,EAAMiW,OAAO/a,MACnC,EACOW,EAAYme,UAAW,EAGvB+M,EAAAA,cAAC,UAAAnuB,EAAAA,EAAAA,GAAA,GAAWiD,GACrB,CTNA+lB,GAAesF,EAAAA,SAAAA,SAAoB7E,EAAAA,cAACD,GAAA,MC2GpCR,GAAeuF,EAAAA,SAAAA,aACbzE,EAAAA,cAACF,GAAA,CAAetV,MAAOka,EAAAA,eAAgB9mB,UAAU,mBAC/CoiB,EAAAA,cAACvU,GAAA,CAAe7N,UAAU,wBAI9BshB,GAAeuF,EAAAA,SAAAA,WACbzE,EAAAA,cAACF,GAAA,CAAetV,MAAOma,EAAAA,aAAc/mB,UAAU,mBAC7CoiB,EAAAA,cAACvU,GAAA,CAAe7N,UAAU,wBCzG9BshB,GAAe0F,EAAAA,SAAAA,QAAmB9C,EAAAA,cAACD,GAAA,MCInC3C,GAAe2F,EAAAA,SAAAA,MAAiB3C,EAAAA,cAACD,GAAA,MCFjC/C,GAAe4F,EAAAA,SAAAA,QAAmB1C,EAAAA,cAACD,GAAA,MACnCjD,GAAe4F,EAAAA,SAAAA,OAAkB1C,EAAAA,cAACD,GAAA,MEFlCjD,GAAe6F,EAAAA,SAAAA,SAAoB7B,EAAAA,cAACD,GAAA,MCFpC/D,GAAe8F,EAAAA,SAAAA,KAAgBpB,EAAAA,cAACD,GAAA,MCXhCzE,GAAe+F,EAAAA,SAAAA,QAAmBd,EAAAA,cAACD,GAAA,MCUnChF,GAAegG,EAAAA,SAAAA,QAAmBb,EAAAA,cAACD,GAAA,MCrB5B,IAAMe,IAAAC,EAAA,IAAA3c,EAAAA,EAAAA,GAAA2c,EACVC,EAAAA,UAAAA,KAAiBtG,KAAAtW,EAAAA,EAAAA,GAAA2c,EACjBC,EAAAA,UAAAA,MAAkBtG,KAAAtW,EAAAA,EAAAA,GAAA2c,EAClBC,EAAAA,UAAAA,QAAoBtG,KAAAtW,EAAAA,EAAAA,GAAA2c,EACpBC,EAAAA,UAAAA,MAAkBtG,KAAAtW,EAAAA,EAAAA,GAAA2c,EAClBC,EAAAA,UAAAA,QAAoBtG,KAAAtW,EAAAA,EAAAA,GAAA2c,EAEpBC,EAAAA,UAAAA,OAAmBtG,IAEtBqG,GCLO,SAASE,GAAgBtvB,GACxB,IACEiC,EADcstB,EAAAA,WAAiB5pB,IAC/BD,MAEF7F,EAASwQ,KAEPhO,EAAmDrC,EAAnDwvB,WAA2BltB,EAAwBtC,EAAvCqlB,cAA8BpiB,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAAyvB,IAC3DC,EAAAA,EAAAA,kBAAiBrtB,GAEX,IAAAc,EAAmBosB,EAAAA,WAAiB9J,IACpCne,EAAgBhF,GAAca,EAAiBkiB,cAE7Cnf,EAAiC/C,EAAjCqiB,eAAgBrf,EAAiBhD,EAAjB4hB,aAEhBze,EAAoEH,EAApE6e,aAAcxe,EAAsDL,EAAtD8e,cAAeve,EAAuCP,EAAvCwpB,OAAQhpB,EAA+BR,EAA/BkmB,KAAMzlB,EAAyBT,EAAzBypB,UAAWjtB,EAAcwD,EAAd0pB,WAC9DC,EAAAA,EAAAA,iBAAgBntB,IAChBotB,EAAAA,EAAAA,YAAWppB,GAEL,IAAAG,EAAaR,EAAa0pB,EAAAA,UAAAA,OAC1BtnB,EAAclC,EAAcwpB,EAAAA,UAAAA,OAE5Bzc,GAAS0c,EAAAA,EAAAA,wBAAuB3oB,EAAe0oB,EAAAA,UAAAA,MAAiB3tB,GAC9DwN,EAAqD0D,EAArD+L,MAAwCvP,EAAawD,EAAA,QAAArQ,OAArCgtB,EAAAA,sBAClB1c,EAAgB9K,EAAcqH,EAAWF,EAGvCsG,EAAsD3C,EAAtDiK,SAAUrH,EAA4C5C,EAA5CoW,cAAevT,EAA6B7C,EAA7BhR,MAAa6c,EAAgB7L,EAAtBU,KAChCuD,EAA6BtB,EAA7BxV,KAAYmX,EAAiB3B,EAAvBjC,KACR+D,EAAOoH,GAAevH,EACtB0E,EAAQ0M,GAAezR,GACvBgF,EAAsC,CAC1CgB,SAAAtH,EAAU3T,MAAA6T,EAAOnC,KAAA+D,EAAM2R,cAAAxT,GAIzBqG,EAAa4P,MAAO8D,EAAAA,EAAAA,gBAAextB,EAAW+D,EAAQE,EAAWE,EAAY4B,GAGzEA,IAEF+T,EAAa8M,aAAe1Z,EAAMrN,OAGpC,IAAMka,EAAiB,CAAC0T,EAAAA,cAAeC,EAAAA,aAAavnB,KAAK,KAEnD6T,EAA4B,CAChCtT,SAAUpH,EAAMquB,MAChB1oB,UAAWc,EAAc2nB,EAAAA,YAAc3T,EACvCjT,IAAK,QACLmB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU4tB,WAC1BrqB,EAAe8pB,EAAAA,UAAAA,OAAiB,EAClC,GAGIjT,EAA0B,CAC9BtT,IAAK,MACL7B,UAAWc,EAAcgU,EAAiB2T,EAAAA,YAC1ChnB,SAAUvC,EAAa7E,EAAMuuB,IAAMvuB,EAAMwuB,aACzC7lB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU+tB,UAC1BxqB,EAAe8pB,EAAAA,UAAAA,OAAiB,EAClC,GAGIjJ,EAAgB,CAAEtd,IAAK,UAAWjH,MAAOia,EAAcpT,SAAUmT,GAEjEwB,GAAA9d,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD+C,GAAA,IACHwG,IAAA,aAAAvG,OAAkBb,EAAA,KAAAa,OAAc+U,GAChC5O,SAAU,CACRpH,EAAMqd,MACNiQ,EAAAA,cAAC/F,GAAazgB,UAAA7I,EAAAA,EAAAA,GAAA,GAAc6mB,IAC5BwI,EAAAA,cAACzvB,GAAA,CAAK8H,UAAU,YAAY6B,IAAI,aAC9B8lB,EAAAA,cAACzvB,IAAAI,EAAAA,EAAAA,GAAA,GAAUyc,IACX4S,EAAAA,cAACzvB,IAAAI,EAAAA,EAAAA,GAAA,GAAU6c,QAIjB,OAAOwS,EAAAA,cAACzvB,IAAAI,EAAAA,EAAAA,GAAA,GAAU8d,GACpB,CC5EO,SAAS2S,GAAiB3wB,GAC/B,IACEC,EACED,EADFyd,SAAUxb,EACRjC,EADQ4H,UAAW/H,EACnBG,EADmB4wB,cAAevuB,EAClCrC,EADkC6wB,MAAOvuB,EACzCtC,EADyC8wB,QAAS7tB,EAClDjD,EADkD+wB,SAAU5tB,EAC5DnD,EAD4DgxB,OAAW1pB,GAC3EO,EAAAA,EAAAA,GAAI7H,EAAAixB,GACE/qB,EAAajD,IAAaX,EAGxBgE,EADc4qB,EAAAA,WAAiBvrB,IAC/BD,MAEFc,EAAc,WAAaN,GAAY/C,EAAOb,EAAS,EAsBvDsE,EAAU,CAAC3E,GAAa,WAC1BiE,GAAYU,EAAQgC,KAAKuoB,EAAAA,eAC7B,IAAMxuB,EAAe,GAGfmE,EAAQxE,EAAQE,MAAM,SACtBkG,EAAOpG,EAAQE,MAAM,QAC3B,IAAI4uB,EAAAA,EAAAA,mBAAkB1oB,GAAO,CAC3B,IAAMmH,EAAcvJ,EAAMoC,GACtBmH,GAAalN,EAAaiG,KAAKiH,EAAW,EAE5CuhB,EAAAA,EAAAA,mBAAkBtqB,IAAQnE,EAAaiG,KAAK9B,GAEhD,IAAMyM,GAAArT,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDoH,GAAA,IACH+B,SAAU1G,EACViF,UAAWhB,EAAQkC,KAAK,KACxBuoB,YAAA7qB,EAAa8Q,YA7BM,SAAAzH,GACd3J,GAAYM,IAEX,IAAAgN,EAAOuE,KAAKC,UADL,CAAE6Y,MAAAxuB,IAEP8T,EAAiBtG,EAAjB8D,aAEHwC,IAELA,EAAa+B,cAAgB,OAC7B/B,EAAagC,QAAA,GAAAjV,OAAWjD,GAAAiD,OAAWouB,EAAAA,YAAc9d,GACnD,EAmB4B2M,UArCT,SAAAtQ,GACjB,IAAQE,EAAiBF,EAAjB8D,aACH5D,IAGc,SADIA,EAAfsQ,YACmBxgB,EAAcyC,GAC3C,EAgCEsI,QAAU,SAAAiF,GAAA,OAA4BA,EAAMuH,iBAAgB,EAC5DC,WAAW,IAEb,OAAO6Z,EAAAA,cAACpxB,IAAAI,EAAAA,EAAAA,GAAA,GAASqT,GACnB,CClDO,SAASge,GAAkBvxB,GAChC,IACgBC,EACZD,EADFupB,aAA4BtnB,EAC1BjC,EAD0B4pB,cAAe/pB,EACzCG,EADyCqsB,KAAMhqB,EAC/CrC,EAD+Cyd,SAAUnb,EACzDtC,EADyDwC,MAAOS,EAChEjD,EADgEkU,KAG5D/Q,EAAwCd,EAAxC1B,KAAoB2G,EAAoBjF,EAAlCknB,aAKRjjB,EAAe,CACnBmD,IAAK,UAAWjH,MAJG,CACnBib,SAAApb,EAAUG,MAAAF,EAAOsnB,cAAA3nB,EAAeiS,KAAAjR,EAAMopB,KAAAxsB,EAAM0pB,cAFzBiI,EAAAA,EAAAA,WAAUvxB,GAAgBA,EAAeqH,GAKvB+B,SAAU6f,GAAe/lB,IAEhE,OAAOsuB,EAAAA,cAACjI,GAAazgB,UAAA7I,EAAAA,EAAAA,GAAA,GAAaoG,GACpC,CChBO,SAASorB,GAAoB1xB,GAC5B,IACEiC,EADc0vB,EAAAA,WAAiBhsB,IAC/BD,MACF7F,EAAmB8xB,EAAAA,WAAiBlM,IACnBpjB,EAAerC,EAA9BqlB,cACe/iB,EAAmBzC,EAAlCwlB,cACFpiB,EAAgBZ,GAAcC,EAE9Ba,EAAsC,GACtCmE,EAAoC,GACpCpB,EAAwB,CAAC,EAC/B,OAAAjD,EAAcD,SAAQ,SAAAmD,GACpB,IAAIyrB,EAAAA,EAAAA,oBAAmBzrB,GAAe,CACpC,IAAQG,EAAkEH,EAAlEsX,SAAUjX,EAAwDL,EAAxDyjB,cAAeljB,EAAyCP,EAAzCqpB,WAAY7oB,EAA6BR,EAA7B3D,MAAaoE,EAAgBT,EAAtB+N,KACtCvR,EAAwB2D,EAA9B4N,KAAoBpN,EAAUR,EAAVurB,MAE5B,GAAI/qB,EAAO,CACT,IAAM0M,EAAM,CAAC1M,EAAOJ,GAAYoC,KAAK,KAKrC,YAJK5C,EAAOsN,KACVtN,EAAOsN,IAAO,EACdlM,EAAcsB,KAAK+oB,EAAAA,aAAmBxC,GAAgBroB,GAAQ,CAAE0oB,WAAA9oB,EAAY2e,cAAApiB,MAE9E,CAGF,IAAMyF,EAAO9B,GAAejE,EAEtB4Q,GAAArT,EAAAA,EAAAA,GAAA,CACJuJ,IAAA,aAAAvG,OAAkBwD,EAAA,KAAAxD,OAAcwF,GAChC+U,SAAAnX,EAAU9D,MAAAmE,EAAOijB,cAAApjB,EAAe0N,KAAAxL,GAC7B1I,GAEC6P,EAAO5N,EAAMyG,GACbqH,EAAoB4hB,EAAAA,cAACJ,IAAArxB,EAAAA,EAAAA,GAAA,GAAsBqT,IACjD,GAAI1D,EAAM,CACR,IAAM2D,EAAe,CAACzD,GACtByD,EAAavM,QAAQ4I,GACrB,IAAMsG,EAAY,CAChB9M,SAAUmK,EACV5L,UAAW,MACX6B,IAAA,QAAAvG,OAAawD,EAAA,KAAAxD,OAAcwF,IAG7BvF,EAAgByF,KAAK+oB,EAAAA,cAAC7xB,IAAAI,EAAAA,EAAAA,GAAA,GAAUiW,IAAc,MACzChT,EAAgByF,KAAKmH,EAAiB,KAExC,CACL,IAAQzJ,EAASH,EAAT+N,MACR4d,EAAAA,EAAAA,iBAAgBxrB,GAEhB,IAAME,EAAa,CACjBiD,IAAA,aAAAvG,OAAkBoD,GAClByrB,gBAAiB5rB,GAEnBmB,EAAcsB,KAAK+oB,EAAAA,aAAmBxC,GAAgB7oB,GAAOE,GAAW,CAE5E,IACOmrB,EAAAA,cAAAA,EAAAA,SAAA,KAAGxuB,EAAiBmE,EAC7B,CCnEO,SAAS0qB,GAAOhyB,GACrB,IAAQC,EAA+BD,EAA/BiyB,QAAShwB,EAAsBjC,EAAtB+wB,SAAalxB,GAAKgI,EAAAA,EAAAA,GAAI7H,EAAAkyB,GACvC,IAAKjyB,EAAS,OAAOkyB,EAAAA,cAAC,UAAAjyB,EAAAA,EAAAA,GAAA,GAAYL,IAElC,IAAQwC,EAAmCxC,EAAnCyhB,SAAUhf,EAAyBzC,EAAzB+H,UAAc3E,GAAO4E,EAAAA,EAAAA,GAAIhI,EAAAuyB,GACrCjvB,EAAU,CAACkvB,EAAAA,aACb/vB,GAAWa,EAAQyF,KAAKtG,GACxBD,EAAUc,EAAQyF,KAAK0pB,EAAAA,eAClBrwB,GAAUkB,EAAQyF,KAAK2pB,EAAAA,eAChC,IAAMjrB,GAAApH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD+C,GAAA,IACH2E,UAAWzE,EAAQ2F,KAAK,OAE1B,OAAOqpB,EAAAA,cAACryB,IAAAI,EAAAA,EAAAA,GAAA,GAAUoH,GACpB,CCDO,SAASkrB,GAAmBxyB,GACjC,IAAQC,EAAyDD,EAAzDyyB,iBAAkBxwB,EAAuCjC,EAAvC+xB,gBAAiBlyB,EAAsBG,EAAtByd,SAAapb,GAAKwF,EAAAA,EAAAA,GAAI7H,EAAA0yB,IACjEC,EAAAA,EAAAA,uBAAsB1wB,GAEhB,IAAAK,EAAS+N,KACTpN,EAAgB2vB,EAAAA,WAAiBjtB,IAAaktB,EACxBD,EAAAA,UAAe,GAAKE,GAAA5qB,EAAAA,EAAAA,GAAA2qB,EAAA,GAAzC1vB,EAAA2vB,EAAA,GAAQxrB,EAASwrB,EAAA,GAAAC,EACQH,EAAAA,SAA+B,MAAII,GAAA9qB,EAAAA,EAAAA,GAAA6qB,EAAA,GAA5D7sB,EAAA8sB,EAAA,GAAU7sB,EAAW6sB,EAAA,GACtB1sB,EAAMssB,EAAAA,OAA6B,MAEnCpsB,EAAgBosB,EAAAA,SAAc,WAClC,IAAMjW,EAAU,CAAC,QACjB,OAAIxZ,GAAQwZ,EAAQ/T,KAAKqqB,EAAAA,eAClBtW,EAAQ7T,KAAK,IACtB,GAAG,CAAC3F,IAEIuD,EAAUzD,EAAVyC,MACAiB,EAAkD1E,EAAlDO,MAAOoE,EAA2C3E,EAA3CixB,WAAYvwB,EAA+BV,EAA/B2uB,cAAe9pB,EAAgB7E,EAAhBkxB,YACpCzqB,EAAmBxC,GAAYS,EAAM9D,SAASqD,GAAaA,EAAW,KACxEwC,IAAoBxC,GAAUC,EAAYuC,GAE9C,IASMmH,EAAe,SAAA8M,GAAA,IAAAyW,EAAA,QACU,QAA5BA,GAACC,EAAAA,EAAAA,UAAS1W,EAAMhJ,qBAAY,IAAAyf,IAA3BA,EAA8BE,WAAWzzB,GAAQ,EA8C/Cwf,EAAgB,CACpBhW,SAbO1C,EAAM6C,KAAI,SAACmT,EAASI,GACzB,IAAMgK,EAAmC,CACvCtd,IAAKkT,EAAQlW,GACbsqB,SAAUroB,EACVsoB,OAAQ7qB,EACR2qB,QAAAnU,EACAkU,MAAA9T,EAAO6T,cAAAjuB,EAAe8a,SAAA5d,GAExB,OAAO+yB,EAAAA,cAACjC,IAAAzwB,EAAAA,EAAAA,GAAA,GAAqB6mB,GAC/B,IAKA5mB,IAAAmG,EACAwN,YA9CkB,WAAQxM,GAAU,EAAO,EA+C3CuM,WA7CkB,SAAA8I,GAClB,IAAMI,EAAUlN,EAAY8M,GAC5BrV,EAAUyV,GACNA,GAASJ,EAAMgP,gBACrB,EA0CEjY,OAxCc,SAAAiJ,GAEd,GADArV,GAAU,GACLuI,EAAY8M,GAAjB,CAEAA,EAAMgP,iBACN,IAAQ5O,EAAiBJ,EAAjBhJ,aACR,GAAKoJ,EAAL,CAEM,IAAAgK,GAAOsM,EAAAA,EAAAA,UAAStW,GAChBiB,EAAOjB,EAAamO,QAAQnE,GAE1BrJ,EADK3F,KAAKoT,MAAMnN,GAChB6S,MACFnJ,EAjCW,SAAA/K,GACjB,IAAQI,EAAWJ,EAAXY,OACR,GAAIR,GAAUA,aAAkBX,eAAgB,CAC9C,IAAM2K,EAAQhK,EAAOwW,aAAa,SAClC,GAAIxM,EAAO,OAAOyM,OAAOzM,EAAK,CAEhC,OAAOpgB,EAAMgC,MACf,CA0BuB4K,CAAUoJ,GAE3B+K,IAAiBhK,KAErB+V,EAAAA,EAAAA,eAAc/qB,GACd5B,EAAY4B,EAAiBgf,GAXJ,CAJM,CAgBjC,EAuBE9c,QArBuC,WAAQzE,EAAY,KAAM,EAsBjEsD,IAAK,OACL7B,UAAWpB,GAGPiR,EAAc,CAClB6J,UAAW5Y,EACXkC,QAAS,WAAQjI,EAAc+F,EAAkB,EACjDe,IAAK,gBACLJ,SAAU3C,EAAMgtB,QAEZ5b,EAAe,CACnBpR,EAAM7G,GACN+yB,EAAAA,cAACZ,IAAA9xB,EAAAA,EAAAA,GAAA,GAAYuX,KAEf,GAAIxX,EAAkB,CACpB,IAAM0c,EAAW,CACflT,IAAK,aACLJ,SAAU3C,EAAMitB,IAChB/oB,QAAS,WAAQhE,EAAW3G,EAAiB,CAAC,GAAI,GAEpD6X,EAAalP,KAAKgqB,EAAAA,cAACZ,IAAA9xB,EAAAA,EAAAA,GAAA,GAAYyc,IAAa,CAG9C,IAAM1E,EAAiB,CACrBrQ,UAAW,QACXyB,SAAUyO,EACVrO,IAAK,SAGD+S,GAAAtc,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDmC,GAAA,IACHoH,IAAA,GAAAvG,OAAQrD,EAAA,UACR+H,UAAW,MACXyB,SAAU,CACVupB,EAAAA,cAAC9yB,IAAAI,EAAAA,EAAAA,GAAA,GAAU+X,IACX2a,EAAAA,cAAC9yB,IAAAI,EAAAA,EAAAA,GAAA,GAAUmf,OAGP5C,EAAWmW,EAAAA,cAAC9yB,IAAAI,EAAAA,EAAAA,GAAA,GAAUsc,IAC5B,IAAK9T,EAAiB,OAAO+T,EAE7B,IAAMC,EAA2C,CAC/C2I,cAAe3c,EAAgB2c,cAAc/iB,EAAOsxB,SACpDnqB,IAAK,sBAEP,OAAOmpB,EAAAA,cAAAA,EAAAA,SAAA,KACJnW,EACDmW,EAAAA,cAAClB,IAAAxxB,EAAAA,EAAAA,GAAA,GAAyBwc,IAE9B,CC7IO,SAASmX,GAAkB7zB,GAC1B,IACEiC,EADc6xB,EAAAA,WAAiBnuB,IAC/BD,MACF7F,EAASwQ,KACPhO,EAAmDrC,EAAnDwvB,WAA2BltB,EAAwBtC,EAAvCqlB,cAA8BpiB,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAA+zB,IAC3DC,EAAAA,EAAAA,kBAAiB3xB,GACX,IAAAc,EAAmB2wB,EAAAA,WAAiBrO,IACpCne,EAAgBhF,GAAca,EAAiBkiB,cAC7Cnf,EAAiC/C,EAAjCqiB,eAAgBrf,EAAiBhD,EAAjB4hB,aAGhBze,EAAoEH,EAApE6e,aAAcxe,EAAsDL,EAAtD8e,cAAeve,EAAuCP,EAAvCwpB,OAAQhpB,EAA+BR,EAA/BkmB,KAAMzlB,EAAyBT,EAAzBypB,UAAWjtB,EAAcwD,EAAd0pB,WAC9DoE,EAAAA,EAAAA,iBAAgBtxB,IAChBuxB,EAAAA,EAAAA,YAAWvtB,GAEL,IAAAG,EAAaR,EAAa6tB,EAAAA,UAAAA,SAC1BzrB,EAAclC,EAAc2tB,EAAAA,UAAAA,SAE5B5gB,GAAS6gB,EAAAA,EAAAA,wBAAuB9sB,EAAe6sB,EAAAA,UAAAA,QAAmB9xB,GAChEwN,EAA2D0D,EAA3D8gB,QAA4CtkB,EAAewD,EAAA,UAAArQ,OAAvCoxB,EAAAA,sBACtB9gB,EAAkB9K,EAAcqH,EAAaF,EAE3CsG,EAAsD3C,EAAtDiK,SAAUrH,EAA4C5C,EAA5CoW,cAAevT,EAA6B7C,EAA7BhR,MAAa6c,EAAgB7L,EAAtBU,KAEhCuD,EAA6BtB,EAA7BxV,KAAYmX,EAAiB3B,EAAvBjC,KACR+D,EAAOoH,GAAevH,EACtB0E,EAAQ0M,GAAezR,GACvBgF,EAAsC,CAC1CgB,SAAAtH,EAAU3T,MAAA6T,EAAOnC,KAAA+D,EAAM2R,cAAAxT,GAGzBqG,EAAa4P,MAAOkI,EAAAA,EAAAA,gBAAe5xB,EAAW+D,EAAQE,EAAWE,EAAY4B,GAGzEA,IAEF+T,EAAa8M,aAAe1Z,EAAQrN,OAGtC,IAAMka,EAAiB,CAAC8X,EAAAA,cAAeC,EAAAA,aAAa3rB,KAAK,KACnD6T,EAA4B,CAChCtT,SAAUpH,EAAMquB,MAChB1oB,UAAWc,EAAc+rB,EAAAA,YAAc/X,EACvCjT,IAAK,QACLmB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU4tB,WAC1BrqB,EAAeiuB,EAAAA,UAAAA,SAAmB,EACpC,GAGIpX,EAA0B,CAC9BtT,IAAK,MACL7B,UAAWc,EAAcgU,EAAiB+X,EAAAA,YAC1CprB,SAAUvC,EAAa7E,EAAMuuB,IAAMvuB,EAAMwuB,aACzC7lB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU+tB,UAC1BxqB,EAAeiuB,EAAAA,UAAAA,SAAmB,EACpC,GAGIpN,EAAgB,CAAEtd,IAAK,UAAWjH,MAAOia,EAAcpT,SAAUmT,GAEjEwB,GAAA9d,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD+C,GAAA,IACHwG,IAAA,aAAAvG,OAAkBb,EAAA,KAAAa,OAAc+U,GAChC5O,SAAU,CACRpH,EAAMoyB,QACNP,EAAAA,cAACtK,GAAazgB,UAAA7I,EAAAA,EAAAA,GAAA,GAAc6mB,IAC5B+M,EAAAA,cAACh0B,GAAA,CAAK8H,UAAU,YAAY6B,IAAI,aAC9BqqB,EAAAA,cAACh0B,IAAAI,EAAAA,EAAAA,GAAA,GAAUyc,IACXmX,EAAAA,cAACh0B,IAAAI,EAAAA,EAAAA,GAAA,GAAU6c,QAIjB,OAAO+W,EAAAA,cAACh0B,IAAAI,EAAAA,EAAAA,GAAA,GAAU8d,GACpB,CC3EO,SAAS0W,GAAgB10B,GACxB,IACEiC,EADc0yB,EAAAA,WAAiBhvB,IAC/BD,MAEF7F,EAASwQ,KACPhO,EAAmDrC,EAAnDwvB,WAA2BltB,EAAwBtC,EAAvCqlB,cAA8BpiB,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAA40B,IAC3DC,EAAAA,EAAAA,kBAAiBxyB,GAIX,IAAAc,EAAmBwxB,EAAAA,WAAiBlP,IACpCne,EAAgBhF,GAAca,EAAiBkiB,cAE7Cnf,EAAiC/C,EAAjCqiB,eAAgBrf,EAAiBhD,EAAjB4hB,aAChBze,EAAoEH,EAApE6e,aAAcxe,EAAsDL,EAAtD8e,cAAeve,EAAuCP,EAAvCwpB,OAAQhpB,EAA+BR,EAA/BkmB,KAAMzlB,EAAyBT,EAAzBypB,UAAWjtB,EAAcwD,EAAd0pB,WAC9DiF,EAAAA,EAAAA,iBAAgBnyB,IAChBoyB,EAAAA,EAAAA,YAAWpuB,GAEL,IAAAG,EAAaR,EAAa0uB,EAAAA,UAAAA,OAC1BtsB,EAAclC,EAAcwuB,EAAAA,UAAAA,OAE5BzhB,GAAS0hB,EAAAA,EAAAA,wBAAuB3tB,EAAe0tB,EAAAA,UAAAA,MAAiB3yB,GAChEwN,GAAuBqlB,EAAAA,EAAAA,gCAA+B3hB,GAE1DxD,EAGEwD,EAHF4hB,KAAM3hB,EAGJD,EAHI6hB,KAAMjf,EAGV5C,EAHU8hB,KAAMjf,EAGhB7C,EAHgB+hB,KAAMjf,EAGtB9C,EAHsB7M,EAAG2Y,EAGzB9L,EAHyB3M,EACE6Q,EAE3BlE,EAAA,IAAArQ,OAFGqyB,EAAAA,sBACwBzd,EAC3BvE,EAAA,IAAArQ,OADGqyB,EAAAA,sBAGDtd,EAAYvP,EAAc+O,EAAOpB,EACjCmG,EAAY9T,EAAcoP,EAAOuH,EAG/B5C,EACJ5M,EADFslB,KAAuBzY,EACrB7M,EADeulB,KAAuBzY,EACtC9M,EADgCwlB,KAAuBtY,EACvDlN,EADiDylB,KAG/CvO,EAAiD,CAAC,EAClD/I,EAAuB,CAAC/F,EAAWuE,GAInC0B,GAASsX,EAAAA,EAAAA,gBAAe7yB,EAAW+D,EAAQE,EAAWE,EAAY4B,GAExEsV,EAAqBhb,SAAQ,SAAA2c,GAC3B,GAAKA,EAAL,CAIA,IAAQE,EAAsDF,EAAtDlC,SAAUxB,EAA4C0D,EAA5CiK,cAAe1N,EAA6ByD,EAA7Bnd,MAAa2a,EAAgBwC,EAAtBzL,KAChCkJ,EAA6ByC,EAA7Blf,KAAY2c,EAAiBuC,EAAvB3L,KACR2J,EAAOV,GAAeG,EACtBW,EAAWJ,EAAKza,QAAQmyB,EAAAA,oBAAqB,IAC7CpX,EAAQ+K,GAAe9L,GACvBiB,EAAA,aAAAnb,OAAmBb,EAAA,KAAAa,OAAc2a,GACjCS,EAAsC,CAC1Cb,SAAAoC,EAAUrd,MAAA0Z,EAAOhI,KAAA2J,EAAM+L,cAAA3N,EAAeoQ,KAAMnO,GAI1CxV,IAEF4V,EAAaiL,aAAe1Z,EAAOoO,IAGrC,IAAMU,EAAgB,CAAElV,IAAA4U,EAAK7b,MAAO8b,EAAcjV,SAAU8U,GAC5D4I,EAAe9I,GAAY0W,EAAAA,cAACnL,GAAazgB,UAAA7I,EAAAA,EAAAA,GAAA,GAAcye,GAnBrD,MADAzN,QAAQ1N,MAAM,aAAcyU,EAAWuE,EAqB3C,IAEA,IAAMkB,EAAiB,CAAC+X,EAAAA,cAAeC,EAAAA,aAAa5sB,KAAK,KACnD4e,EAA4B,CAChCre,SAAUpH,EAAMquB,MAChB1oB,UAAWc,EAAcgtB,EAAAA,YAAchY,EACvCjU,IAAK,QACLmB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU4tB,WAC1BrqB,EAAe8uB,EAAAA,UAAAA,OAAiB,EAClC,GAGIxV,EAA0B,CAC9B/V,IAAK,MACL7B,UAAWc,EAAcgV,EAAiBgY,EAAAA,YAC1CrsB,SAAUvC,EAAa7E,EAAMuuB,IAAMvuB,EAAMwuB,aACzC7lB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU+tB,UAC1BxqB,EAAe8uB,EAAAA,UAAAA,OAAiB,EAClC,GAGIrN,EAAiB,CACrB1lB,EAAM0zB,MACNhB,EAAAA,cAAC70B,GAAA,CAAK8H,UAAU,YAAY6B,IAAA,GAAAvG,OAAQb,EAAA,qBAClCsyB,EAAAA,cAAC70B,IAAAI,EAAAA,EAAAA,GAAA,GAAUwnB,IACXiN,EAAAA,cAAC70B,IAAAI,EAAAA,EAAAA,GAAA,GAAUsf,MAKToW,EAAY,CAACjB,EAAAA,cAAC70B,GAAA,CAAK2J,IAAI,YAAYJ,SAAUpH,EAAM4zB,KAAMjuB,UAAW8tB,EAAAA,eACpEI,EAAY,CAACnB,EAAAA,cAAC70B,GAAA,CAAK2J,IAAI,YAAYJ,SAAUpH,EAAM8zB,KAAMnuB,UAAW8tB,EAAAA,eAE1E,GAAI3lB,EAAM,CACR,IAAM4P,EAAgB,CACpBlW,IAAK,YACL7B,UAAW8tB,EAAAA,YACXrsB,SAAUoT,EAAYxa,EAAM+zB,OAAS/zB,EAAMg0B,KAC3CrrB,QAAS,WAAQmF,EAAK6Z,cAAc,QAASnN,EAAW,GAEpDoD,EAAW8U,EAAAA,cAAC70B,IAAAI,EAAAA,EAAAA,GAAA,GAAUyf,IAE5BiW,EAAUhtB,KAAKiX,EAAQ,CAGzB,GADA+V,EAAUhtB,KAAMme,EAAergB,GAC3B8M,EAAM,CACR,IAAMmM,EAAgB,CACpBlW,IAAK,YACL7B,UAAW8tB,EAAAA,YACXrsB,SAAUqT,EAAYza,EAAM+zB,OAAS/zB,EAAMg0B,KAC3CrrB,QAAS,WAAQ4I,EAAKoW,cAAc,QAASlN,EAAW,GAEpDmD,EAAW8U,EAAAA,cAAC70B,IAAAI,EAAAA,EAAAA,GAAA,GAAUyf,IAC5BiW,EAAUhtB,KAAKiX,EAAQ,CAEzB,GAAI1J,EAAM,CACR,IAAMwJ,EAAgB,CACpBlW,IAAK,aACL7B,UAAW8tB,EAAAA,YACXrsB,SAAUsT,EAAY1a,EAAM+zB,OAAS/zB,EAAMg0B,KAC3CrrB,QAAS,WAAQuL,EAAKyT,cAAc,QAASjN,EAAW,GAEpDkD,EAAW8U,EAAAA,cAAC70B,IAAAI,EAAAA,EAAAA,GAAA,GAAUyf,IAE5BmW,EAAUltB,KAAKiX,EAAQ,CAGzB,GADAiW,EAAUltB,KAAKme,EAAengB,GAC1BwP,EAAM,CACR,IAAMuJ,GAAgB,CACpBlW,IAAK,aACL7B,UAAW8tB,EAAAA,YACXrsB,SAAU0T,EAAY9a,EAAM+zB,OAAS/zB,EAAMg0B,KAC3CrrB,QAAS,WAAQwL,EAAKwT,cAAc,QAAS7M,EAAW,GAEpD8C,GAAW8U,EAAAA,cAAC70B,IAAAI,EAAAA,EAAAA,GAAA,GAAUyf,KAC5BmW,EAAUltB,KAAKiX,GAAQ,CAEzB,IAAMI,GAAW,CACf0U,EAAAA,cAAC70B,GAAA,CAAK2J,IAAI,IAAIJ,SAAUusB,IACxBjB,EAAAA,cAAC70B,GAAA,CAAK2J,IAAI,IAAIJ,SAAUysB,KAGpBpV,IAAAxgB,EAAAA,EAAAA,GAAA,GAAqB+C,GAC3B,OAAO0xB,EAAAA,cAAC,YAAAz0B,EAAAA,EAAAA,GAAA,GAAcwgB,IACpBiU,EAAAA,cAAC,UAAOlrB,IAAI,UAASkrB,EAAAA,cAAC70B,GAAA,KAAM6nB,IAC3B1H,GAGL,CP3EAkP,GAAgBa,EAAAA,UAAAA,OAAmBT,EAAAA,cAACD,GAAA,CAAgB1nB,UAAU,kBAAkB6B,IAAI,sBK8DpF0lB,GAAgB+G,EAAAA,UAAAA,SAAqBtD,EAAAA,cAACJ,GAAA,CAAmB/U,SAAS,SAAShU,IAAI,wBClE/E0lB,GAAgBgF,EAAAA,UAAAA,SAAqBL,EAAAA,cAACD,GAAA,CAAkBjsB,UAAU,oBAAoB6B,IAAI,wBCiF1F0lB,GAAgB6F,EAAAA,UAAAA,OAAmBL,EAAAA,cAACD,GAAA,CAAgBjrB,IAAI,gBC9JxD,IAAM0sB,IAAAC,EAAA,IAAA3jB,EAAAA,EAAAA,GAAA2jB,EACHC,EAAAA,YAAAA,EAAgB,UAAA5jB,EAAAA,EAAAA,GAAA2jB,EAAUC,EAAAA,YAAAA,EAAgB,UAC7CD,GAEO,SAASE,GAAet2B,GACvB,IACEiC,EADcs0B,EAAAA,WAAiB5wB,IAC/BD,MACF7F,EAASwQ,KACPhO,EAAmDrC,EAAnDwvB,WAA2BltB,EAAwBtC,EAAvCqlB,cAA8BpiB,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAAw2B,IAC3DC,EAAAA,EAAAA,kBAAiBp0B,EAAY,cACvB,IAAAc,EAAmBozB,EAAAA,WAAiB9Q,IACpCne,EAAgBhF,GAAca,EAAiBkiB,cAC7Cnf,EAAiC/C,EAAjC4hB,aAAc5e,EAAmBhD,EAAnBqiB,eACdlf,EAAoEJ,EAApE8e,aAAcxe,EAAsDN,EAAtD+e,cAAeve,EAAuCR,EAAvCypB,OAAQhpB,EAA+BT,EAA/BmmB,KAAMzlB,EAAyBV,EAAzB0pB,UAAWjtB,EAAcuD,EAAd2pB,WAC9D6G,EAAAA,EAAAA,iBAAgB/zB,IAChBg0B,EAAAA,EAAAA,YAAWhwB,GAEL,IAAAG,EAAaR,EAAaswB,EAAAA,UAAAA,MAC1BluB,EAAclC,EAAcowB,EAAAA,UAAAA,MAE5BrjB,GAASsjB,EAAAA,EAAAA,wBAAuBvvB,EAAesvB,EAAAA,UAAAA,KAAgBv0B,GAGnEwN,EAGE0D,EAHF0iB,KAAMlmB,EAGJwD,EAHIuJ,MAAOtJ,EAGXD,EAHWuK,OACoB3H,EAE/B5C,EAAA,QAAArQ,OAFO4zB,EAAAA,sBACyB1gB,EAChC7C,EAAA,SAAArQ,OADQ4zB,EAAAA,sBAGNzgB,EAAgB3N,EAAcyN,EAAWpG,EACzCsP,EAAiB3W,EAAc0N,EAAY5C,EAC3CiE,GAAuBsf,EAAAA,EAAAA,gCAA+BxjB,GAE9CuE,EAAcL,EAApBwe,MACRe,EAAAA,EAAAA,cAAalf,EAAW,aAExB,IAAMG,GAAcgf,EAAAA,EAAAA,eAAcnf,GAAaA,OAA2B,EAEpE0E,EAAiD,CAAC,EAClDC,EAAuB,CAACpG,EAAegJ,GAGvC3C,GAASwa,EAAAA,EAAAA,gBAAev0B,EAAW+D,EAAQE,EAAWE,EAAY4B,GAExE+T,EAAqBzZ,SAAQ,SAAA0d,GAE3B,IAAQf,EAAsDe,EAAtDjD,SAAUoC,EAA4Ca,EAA5CkJ,cAAe3N,EAA6ByE,EAA7Ble,MAAa0Z,EAAgBwE,EAAtBxM,KAChCiJ,EAA6BwC,EAA7Bhf,KAAYyc,EAAiBuC,EAAvBzL,KACRoJ,EAAOpB,GAAekB,EACtBS,EAAWP,EAAKla,QAAQ0zB,EAAAA,oBAAqB,IAC7C7Y,EAAQiL,GAAe/L,GACvBgB,EAAA,aAAAjb,OAAmBb,EAAA,KAAAa,OAAcoa,GACjCe,EAAsC,CAC1CZ,SAAAkC,EAAUnd,MAAAyZ,EAAO/H,KAAAoJ,EAAM+O,KAAM3P,GAI3BhU,IAEF2V,EAAakL,aAAe9R,EAAOoG,IAG/B5F,GAAe4F,IAAasY,GAAsBle,KACtDoG,EAAauL,cAAgB/J,GAE/B,IAAMvB,EAAgB,CACpB7U,IAAA0U,EAAK3b,MAAO6b,EAAchV,SAAU4U,GAEtCzB,EAAeqB,GAAY0Y,EAAAA,cAAC/M,GAAazgB,UAAA7I,EAAAA,EAAAA,GAAA,GAAcoe,GACzD,IACA,IAAM3B,EAAiB,CACrBlT,IAAK,aACL7B,UAAWuvB,EAAAA,YACX9tB,SAAU4O,IAAgBoe,EAAAA,YAAAA,EAAgBp0B,EAAMg0B,KAAOh0B,EAAM+zB,OAC7DprB,QAAS,WACP,IAAM8V,EAAQzI,IAAgBoe,EAAAA,YAAAA,EAAgB,GAAKA,EAAAA,YAAAA,EACnDxmB,EAAK+Z,cAAc,OAAQlJ,EAC7B,GAEI3D,EAAYwZ,EAAAA,cAACz2B,IAAAI,EAAAA,EAAAA,GAAA,GAAUyc,IACvBoK,EAAkB,CACtBtd,IAAK,cACL7B,UAAWuvB,EAAAA,YACX9tB,SAAU4O,IAAgBoe,EAAAA,YAAAA,EAAgBp0B,EAAMg0B,KAAOh0B,EAAM+zB,OAC7DprB,QAAS,WACP,IAAM8V,EAAQzI,IAAgBoe,EAAAA,YAAAA,EAAgB,GAAKA,EAAAA,YAAAA,EACnDxmB,EAAK+Z,cAAc,OAAQlJ,EAC7B,GAEI1C,EAAiB,CAACoZ,EAAAA,cAAeD,EAAAA,aAAaruB,KAAK,KACnDoV,EAAaqY,EAAAA,cAACz2B,IAAAI,EAAAA,EAAAA,GAAA,GAAU6mB,IACxBrJ,EAA4B,CAChCrU,SAAUpH,EAAMquB,MAChB1oB,UAAWc,EAAcyuB,EAAAA,YAAcnZ,EACvCvU,IAAK,QACLmB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU4tB,WAC1BpqB,EAAeywB,EAAAA,UAAAA,MAAgB,EACjC,GAEIlP,EAA0B,CAC9Bje,IAAK,MACL7B,UAAWc,EAAcsV,EAAiBmZ,EAAAA,YAC1C9tB,SAAUvC,EAAa7E,EAAMuuB,IAAMvuB,EAAMwuB,aACzC7lB,QAAS,WACP/K,EAAO+sB,SAASjqB,EAAU+tB,UAC1BvqB,EAAeywB,EAAAA,UAAAA,MAAgB,EACjC,GAEIpX,EAAiB,CACrBvd,EAAMrB,KACN21B,EAAAA,cAACz2B,GAAA,CAAK8H,UAAU,YAAY6B,IAAA,GAAAvG,OAAQb,EAAA,oBAClCk0B,EAAAA,cAACz2B,IAAAI,EAAAA,EAAAA,GAAA,GAAUwd,IACX6Y,EAAAA,cAACz2B,IAAAI,EAAAA,EAAAA,GAAA,GAAUwnB,MAGTC,EAAgB,CACpB4O,EAAAA,cAACz2B,GAAA,CAAK2J,IAAI,aAAaJ,SAAUpH,EAAM6a,MAAOlV,UAAWuvB,EAAAA,cACzD3a,EAAeM,MACfC,GAEI6Y,EAAiB,CACrBW,EAAAA,cAACz2B,GAAA,CAAK2J,IAAI,cAAcJ,SAAUpH,EAAM6b,OAAQlW,UAAWuvB,EAAAA,cAC3D3a,EAAesB,OACfI,GAEI4X,EAAW,CACfS,EAAAA,cAACz2B,GAAA,CAAK2J,IAAI,QAAQJ,SAAUse,IAC5B4O,EAAAA,cAACz2B,GAAA,CAAK2J,IAAI,SAASJ,SAAUusB,KAGzB3V,GAAA/f,EAAAA,EAAAA,GAAA,GAAqB+C,GAC3B,OAAOszB,EAAAA,cAAC,YAAAr2B,EAAAA,EAAAA,GAAA,GAAc+f,GACpBsW,EAAAA,cAAC,UAAO9sB,IAAI,UAAS8sB,EAAAA,cAACz2B,GAAA,KAAM0f,IAC3BsW,EAEL,CCxIO,SAASuB,GAAiBr3B,GACzB,IACEiC,EADcq1B,EAAAA,WAAiB3xB,IAC/BD,MACA7F,EAA8DG,EAA9DwvB,WAA2BntB,EAAmCrC,EAAlDqlB,cAA2B/iB,EAAuBtC,EAAvBu3B,UAAct0B,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAAw3B,IACtEC,EAAAA,EAAAA,kBAAiB53B,GAEX,IAAAsD,EAAmBm0B,EAAAA,WAAiB7R,IACpCne,EAAgBjF,GAAcc,EAAiBkiB,cAC/Cnf,GAASwxB,EAAAA,EAAAA,wBAAuBpwB,EAAehF,EAAWzC,GAC1DsG,EAAgCrC,OAAO6zB,YAAY7zB,OAAO8zB,QAAQ1xB,GAAQsD,KAAI,SAAAquB,GAA6B,IAAAC,GAAA5vB,EAAAA,EAAAA,GAAA2vB,EAAA,GAA3B/wB,EAAAgxB,EAAA,GAAKpvB,EAAgBovB,EAAA,GACjGvkB,EAAkE7K,EAAlE+U,SAAU5N,EAAwDnH,EAAxDkhB,cAAe7Z,EAAyCrH,EAAzC8mB,WAAYhc,EAA6B9K,EAA7BlG,MAAa2T,EAAgBzN,EAAtBwL,KACtCkC,EAAiB7C,EAAvBW,KACFmC,EAAOF,GAAeC,EACtBiJ,GAAAnf,EAAAA,EAAAA,GAAA,CACJuJ,IAAA,aAAAvG,OAAkB6M,EAAA,WAAA7M,OAAoBmT,GACtCoH,SAAAlK,EAAU/Q,MAAAgR,EAAOoW,cAAA/Z,EAAeqE,KAAAmC,GAC7BrW,GAEL,MAAO,CAAC8G,EAAKwwB,EAAAA,cAAC/F,IAAArxB,EAAAA,EAAAA,GAAA,GAAsBmf,IACtC,KAEqB/Y,EAA4BH,EAAxC7D,GAAsBkE,GAAcqB,EAAAA,EAAAA,GAAI1B,EAAA,CAAxC7D,GAASkH,IAAAuuB,EAAAA,IACZrxB,EAAczE,EAAMK,GAC1B,KAAK01B,EAAAA,EAAAA,mBAAkBxxB,GAIrB,OAAO8wB,EAAAA,cAACx3B,IAAAI,EAAAA,EAAAA,GAAA,GAHU,CAChBuJ,IAAKnH,EAAW+G,SAAU,CAAC3C,EAAaJ,GAAQsB,UAAW,SAK/D,IAAMjB,EAAiB,CAACD,GACpBJ,GAAOK,EAAeiC,KAAKtC,GAC/B,IAAMM,EAAW9C,OAAO8zB,QAAQpxB,GAAegD,KAAI,SAAAyuB,GAAkB,IAAAC,GAAAhwB,EAAAA,EAAAA,GAAA+vB,EAAA,GAAhBnxB,EAAAoxB,EAAA,GAAKxvB,EAAKwvB,EAAA,GACvD3kB,EAAOtR,EAAM6E,GACb+I,EAAW,CAACnH,GACd6K,GAAM1D,EAAS5I,QAAQqwB,EAAAA,cAACx3B,GAAA,CAAK2J,IAAA,GAAAvG,OAAQ4D,EAAA,SAAYuC,SAAUkK,EAAM3L,UAAWuwB,EAAAA,eAChF,IAAMpoB,EAAa,CAAEtG,IAAA,GAAAvG,OAAQ4D,EAAA,SAAYuC,SAAAwG,GACzC,OAAOynB,EAAAA,cAACx3B,IAAAI,EAAAA,EAAAA,GAAA,GAAU6P,GACpB,IAGMpN,GAAAzC,EAAAA,EAAAA,GAAA,GAAqB+C,GAC3B,OAAOq0B,EAAAA,cAAC,YAAAp3B,EAAAA,EAAAA,GAAA,GAAcyC,GACpB20B,EAAAA,cAAC,UAAO7tB,IAAI,UAAS6tB,EAAAA,cAACx3B,GAAA,KAAM6G,IAC3BC,EAEL,CD4FAuoB,GAAgByH,EAAAA,UAAAA,MAAkBL,EAAAA,cAACD,GAAA,CAAe7sB,IAAI,qBCzFpD,IAAM2uB,GAAc,CAAEb,UAAWc,EAAAA,UAAAA,OAAkB5uB,IAAA,GAAAvG,OAAQm1B,EAAAA,UAAAA,OAAU,iBCzChE,SAASC,GAAUt4B,GAAoC,IAAAu4B,EACtDt4B,EAASoQ,KAAUmoB,EACaC,EAAAA,UAAe,kBAAM,CAAC,IAAAC,GAAAxwB,EAAAA,EAAAA,GAAAswB,EAAA,GAArDv2B,EAAAy2B,EAAA,GAAa74B,EAAc64B,EAAA,GAC5Br2B,EAAOo2B,EAAAA,OAA2B,CACtCzT,aAAc,CAAC,EAAGC,cAAe,CAAC,EAClCC,aAAcyT,EAAAA,WAAAA,KAAiBvT,YAAa,KAC7CwT,EACuCH,EAAAA,UAA6B,kBAAMI,EAAAA,WAAW,IAAAC,GAAA5wB,EAAAA,EAAAA,GAAA0wB,EAAA,GAA/Et2B,EAAAw2B,EAAA,GAAc71B,EAAe61B,EAAA,GAAAC,EACMN,EAAAA,UAA8B,iBAAM,EAAE,IAAAO,GAAA9wB,EAAAA,EAAAA,GAAA6wB,EAAA,GAAzE51B,EAAA61B,EAAA,GAAe1xB,EAAgB0xB,EAAA,GAChC9yB,EAAe,WAAQrG,GAAe,SAAA8G,GAAA,OAASA,EAAQ,CAAC,GAAE,EAC1DR,EAAkB,WAChB,IAAEQ,EAAc1G,EAAdwf,UACa7Y,EAAsBD,EAAnCye,YAAoBziB,EAAegE,EAAfzF,KAAM4F,EAASH,EAAT7E,KAC1B4G,EAAYrG,EAAZ+C,QACAmO,EAA8B7K,EAA9Bwc,aAAcrV,EAAgBnH,EAAhB0c,YAChBrV,EAAWzN,EAAauE,MAAK,SAAAuP,GAAA,OAAQxP,EAAM/D,SAASuT,EAAK,KAC/D6iB,EAAAA,EAAAA,kBAAiBlpB,GAEbA,IAAawD,IAEf7K,EAAQwc,aAAenV,IAEzBmpB,EAAAA,EAAAA,UAASrpB,EAAajJ,GAEtB,IAAM4M,EAAQvT,EAAOwf,UAAU4F,cAAc,CAACtV,IACxCoG,EAA8B,CAAC,EACrC,GAAIxT,GAAQmE,EAAM,CAChB,IAAMsP,EAAa5C,EAAM/K,QAAO,SAAA4N,GAC9B,IAAK8iB,EAAAA,EAAAA,oBAAmB9iB,GAAxB,CAEA,IAAQgJ,EAAmBhJ,EAAnBoH,SAAUhG,EAASpB,EAATnC,KACV4D,EAAqBuH,EAArB+Z,UAAWnhB,EAAUoH,EAAVwS,MACnB,OAAM/Z,GAAaG,GAASR,EAErBA,EAAK4hB,SAASC,EAAAA,0BAFrB,CAJqC,CAOvC,IASA,GAPAljB,EAAWpT,SAAQ,SAAAqT,GACjB,IAAQgJ,EAAoBhJ,EAApBoH,SAAUhG,EAAUpB,EAAV7T,MACVsV,EAAUuH,EAAVwS,OACR0H,EAAAA,EAAAA,iBAAgBzhB,GAChB3B,EAAS2B,IAAS0hB,EAAAA,EAAAA,WAAU/hB,EAC9B,IAEIrB,EAAWzN,OAAQ,CACrB,IAAQ0N,EAAmBvP,EAAnBulB,KAAMhN,EAAavY,EAAb2yB,SACRhiB,EAAY9U,EAAKktB,UAAUxQ,GACjC3W,EAAQ2jB,KAAOhW,EACf3N,EAAQmnB,UAAYpY,EAEd,IAAAK,EAAQL,EAAU0C,MAAQ5O,KAAKC,MAAMiM,EAAU2C,OAAS,GACxDnC,GAAWyhB,EAAAA,EAAAA,cAAa5hB,EAAOuH,GAAQsa,GACfC,EAAAA,EAAAA,mBAAkB3hB,EAAU5B,GAAIwjB,GAAA3xB,EAAAA,EAAAA,GAAAyxB,EAAA,GAAvDnd,EAAAqd,EAAA,GAASpd,EAAUod,EAAA,GAE1BnxB,EAAQknB,UAAYpT,EAAQrC,MAAQsC,EAAWtC,MAC/C,IAAMuC,EAAOhU,EAAQknB,UAAYnY,EAAU8Y,UAAY9Y,EAAUiZ,SAEjEhoB,EAAQinB,OAAStZ,EAAKyjB,WAAWpd,EAAI,EAIzChU,EAAQsc,aAAe7O,EAEvB7O,EAAiBkM,GACjBtN,GACF,EAEAiV,IAAAod,EAAA,IAAA9lB,EAAAA,EAAAA,GAAA8lB,EACGwB,EAAAA,UAAAA,OAAmB7zB,IAAAuM,EAAAA,EAAAA,GAAA8lB,EACnBwB,EAAAA,UAAAA,UAAsB5zB,GACzBoyB,IAEA,IAAMjyB,EAAiBmyB,EAAAA,aAAmB,SAAA9xB,IACxCsyB,EAAAA,EAAAA,kBAAiBtyB,GACjB1D,GAAgB,SAAA2D,GACd,IAAMjE,EAAQiE,EAASozB,QAAQrzB,IAC/BszB,EAAAA,EAAAA,gBAAet3B,GACf,IAAMmE,EAAQ,CAACH,GACf,OAAIhE,GAAOmE,EAAM8B,KAAA0I,MAANxK,GAAAmD,EAAAA,EAAAA,GAAcrD,EAASszB,MAAM,EAAGv3B,KACvCA,EAAQiE,EAAS+B,OAAS,GAAG7B,EAAM8B,KAAA0I,MAANxK,GAAAmD,EAAAA,EAAAA,GAAcrD,EAASszB,MAAMv3B,EAAQ,MACtEw3B,EAAAA,EAAAA,YAAWrzB,EAAM6B,SAAW/B,EAAS+B,OAAQ,uBAE7CuwB,EAAAA,EAAAA,UAAStyB,EAAUE,GACnBX,IACOS,CACT,IACAvE,EAAK+C,QAAQ8f,aAAeve,EAE5BW,EAAiBrH,EAAOwf,UAAU4F,cAAc,CAAC1e,IACnD,GAAG,IAMGD,GAAAxG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD2kB,IAAA,IACHC,YAAA7iB,EAAaojB,cAAAliB,EACbmiB,eAAAhf,EACAkf,eARqB,SAAC7e,EAAkBC,GACxCvE,EAAK+C,QAAQ6f,cAActe,GAASC,EACpCT,GACF,EAKkB4e,aAAc1iB,EAAK+C,UAGrC,OACEqzB,EAAAA,cAAChT,GAAiB1c,SAAjB,CAA0BvG,MAAOkE,GAChC+xB,EAAAA,cAAC34B,IAAAI,EAAAA,EAAAA,GAAA,GAASF,IAGhB,CC3HO,SAASo6B,GAAiBp6B,GAC/B,OAAOq6B,EAAAA,cAACv6B,IAAAI,EAAAA,EAAAA,GAAA,GAASF,GACnB,CCMO,SAASs6B,GAAgBt6B,GACxB,IAEEH,EAFiB06B,EAAAA,WAAiB9U,IAClCV,aACAG,aACA7iB,EAA0BrC,EAA1BW,KAAM2B,EAAoBtC,EAApBwU,MAAOvR,EAAajD,EAAbqJ,SACflG,EAAckR,GAAiBhS,EAAMC,GAG3C,OAFAk4B,EAAAA,EAAAA,sBAAqBr3B,GAEhBA,EAAYN,SAAShD,GAEnB06B,EAAAA,cAAAA,EAAAA,SAAA,KAAGt3B,GAFsC,IAGlD,CCTO,SAASw3B,GAAgBz6B,GAC9B,IAAQC,EAA4BD,EAA5ByG,GAAIxE,EAAwBjC,EAAxBqJ,SAAUxJ,EAAcG,EAAd4H,WACtB8yB,EAAAA,EAAAA,kBAAiBz6B,GAEX,IAAAoC,EAAmBs4B,EAAAA,WAAiBlV,IAClCnjB,EAAiCD,EAAjCijB,eAAgBriB,EAAiBZ,EAAjB0iB,aAChB5hB,EAA6BF,EAA7BmiB,YAAa9d,EAAgBrE,EAAhBiiB,aAErB,IAAK/hB,EAAYN,SAAS5C,GAAK,OAAO,KAEtC,IAEMkG,EAAoB,IACtBy0B,EAAAA,EAAAA,mBAAkB/6B,IAAYsG,EAAQyC,KAAK/I,GAC3CyH,IAAiBrH,GAAIkG,EAAQyC,KAAKiyB,EAAAA,eAEtC,IAAMv0B,EAAY,CAAE+C,SAAApH,EAAU2I,QANd,WAAQtI,EAAerC,EAAI,EAMJ2H,UAAWzB,EAAQ2C,KAAK,MAC/D,OAAO6xB,EAAAA,cAAC76B,IAAAI,EAAAA,EAAAA,GAAA,GAASoG,GACnB,CJ8BE6oB,GAAgBkJ,EAAAA,UAAAA,QAAoBf,EAAAA,cAACD,IAAAn3B,EAAAA,EAAAA,GAAA,GAAsBk4B,KK5CtD,IAAM0C,GAA4E,WAAsB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACvGl7B,EAAgBgM,GAD2EiC,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAQ,CAAC,GAElGjM,EAAUhC,EAAVyF,OACRq1B,EAAA96B,EAAc6L,OAAMrC,MAApBsxB,EAAoBtxB,IAAQ,cAC5BuxB,EAAA/6B,EAAc6L,OAAMlE,YAApBozB,EAAoBpzB,UAAc,oBAElCqzB,EAAAh7B,EAAc0M,QAAOhB,UAArBsvB,EAAqBtvB,QAAY,CAC/ByvB,EAAAA,cAACt7B,GAAA,CAAK2J,IAAI,aAAaJ,SAAUpH,EAAMo5B,YACvCD,EAAAA,cAACzY,GAAA,CAAiBlZ,IAAI,QACpB2xB,EAAAA,cAACpJ,GAAA,KAAQ/vB,EAAML,KAAMgB,GAAe,UAEtCw4B,EAAAA,cAAC7Z,GAAA,CAAiB9X,IAAI,QACpB2xB,EAAAA,cAACpJ,GAAA,KAAQ/vB,EAAMJ,KAAMe,GAAe,aAIxCs4B,EAAAj7B,EAAc2M,QAAOjB,UAArBuvB,EAAqBvvB,QAAY,CAC/ByvB,EAAAA,cAACX,GAAA,CAAgBhxB,IAAI,OAAO7B,UAAW0zB,EAAAA,YAAa70B,GAAG,QACpDxE,EAAMs5B,QAETH,EAAAA,cAACX,GAAA,CAAgBhxB,IAAI,OAAO7B,UAAW0zB,EAAAA,YAAa70B,GAAG,QACpDxE,EAAMf,MAETk6B,EAAAA,cAACX,GAAA,CAAgBhxB,IAAI,YAAY7B,UAAW0zB,EAAAA,YAAa70B,GAAG,aACzDxE,EAAMoX,WAET+hB,EAAAA,cAACX,GAAA,CAAgBhxB,IAAI,UAAU7B,UAAW0zB,EAAAA,YAAa70B,GAAG,WACvDxE,EAAM0J,WAIX,IAAM9L,EAAkB,CAACu7B,EAAAA,cAAC1J,GAAA,CAAoBjoB,IAAI,gBAC5CpH,EAAQ,CAACm5B,EAAAA,WAAAA,KAAiBA,EAAAA,WAAAA,OAEhC37B,EAAgB+I,KACdwyB,EAAAA,cAACd,GAAA,CAAgB35B,KAAK,OAAO8I,IAAI,kBAC/B2xB,EAAAA,cAACt7B,GAAA,KACCs7B,EAAAA,cAAClY,GAAA,CAAczZ,IAAI,kBACjB2xB,EAAAA,cAACpJ,GAAA,KACEpvB,GAAe,UACfX,EAAMnB,SAGXs6B,EAAAA,cAACpT,GAAA,CAAYve,IAAI,gBACf2xB,EAAAA,cAACpJ,GAAA,KACEpvB,GAAe,QACfX,EAAMP,UAOjBW,EAAMW,SAAQ,SAAAC,GACZpD,EAAgB+I,KACdwyB,EAAAA,cAACd,GAAA,CAAgB7wB,IAAA,GAAAvG,OAAQD,EAAA,WAAetC,KAAMsC,GAC5Cm4B,EAAAA,cAACtZ,GAAA,CAAmBnhB,KAAMsC,GACxBm4B,EAAAA,cAACpJ,GAAA,KACElvB,GAAiB,SAAU,CAAEnC,KAAAsC,IAC7BhB,EAAMyxB,UAKjB,KAEAyH,EAAAl7B,EAAc0L,SAAQtC,WAAtB8xB,EAAsB9xB,SAAa+xB,EAAAA,cAAAA,EAAAA,SAAA,KAAGv7B,IAEtC,IAAMyC,EAAW84B,EAAAA,cAAAA,EAAAA,SAAA,KACfA,EAAAA,cAAC3vB,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc0M,SACvByuB,EAAAA,cAAChB,IAAAl6B,EAAAA,EAAAA,GAAA,GAAqBD,EAAc0L,QAAQG,OACzC7L,EAAc0L,QAAQtC,UAEzB+xB,EAAAA,cAAC3vB,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc2M,UAEzB,OAAA1M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYD,EAAc6L,OAAA,IAAOzC,SAAA/G,GACnC,EChGam5B,GAAwB,SAACz7B,EAAiCC,GACrE,GAAMA,GAAQD,EAAd,CAGA,IAAQiC,EAAkBhC,EAAlB6c,MAAOjd,EAAWI,EAAX6d,OACf9d,EAAQ8f,MAAM4b,YAAY,qBAAAx4B,OAAsBjB,EAAA,OAChDjC,EAAQ8f,MAAM4b,YAAY,sBAAAx4B,OAAuBrD,EAAA,MAJzC,CAKV,ECmDO,SAAS87B,GAAO37B,GACrB,IAAA47B,EAOI57B,EANFunB,SAAAtnB,OAAA,IAAA27B,EAAWC,EAAAA,UAAAD,EAAAE,EAMT97B,EALF+7B,cAAA95B,OAAA,IAAA65B,EAAgBE,EAAAA,mBAAAF,EAChBj8B,EAIEG,EAJFi8B,YAAAC,EAIEl8B,EAHF0F,MAAArD,OAAA,IAAA65B,EAAQ,CAAC,EAAAA,EACT55B,EAEEtC,EAFF4d,UACG3a,GACL4E,EAAAA,EAAAA,GAAI7H,EAAAm8B,GAEJjrB,QAAQkrB,IAAI,SAAUn8B,EAAUJ,GAC1B,IAAAsD,EAAYk5B,EAAAA,QAAqBC,EAAAA,EAAAA,gBAAer6B,IAChDqF,EAAY+0B,EAAAA,QAAqBE,EAAAA,EAAAA,gBAAe,CAAEhV,SAAAtnB,KAClDiG,EAAiBm2B,EAAAA,OAA0B,CAAC,GAC5Cl2B,EAAak2B,EAAAA,OAA2B,CAAC,GACzC/1B,EAAS+1B,EAAAA,OAA4B,MACrC71B,EAAM61B,EAAAA,OAA6B,MAGnC31B,EAAa21B,EAAAA,WAAiB1X,IAAU6X,EAEZH,EAAAA,UAAe,GAAKI,GAAAv0B,EAAAA,EAAAA,GAAAs0B,EAAA,GAA/C71B,EAAA81B,EAAA,GAAW71B,EAAY61B,EAAA,GAAAC,EACIL,EAAAA,UAAe,GAAKM,GAAAz0B,EAAAA,EAAAA,GAAAw0B,EAAA,GAA/C/5B,EAAAg6B,EAAA,GAAW71B,EAAY61B,EAAA,GAEbj0B,EAAWvF,EAApBiC,QACSmO,EAAWjM,EAApBlC,QACSyK,EAAgB3J,EAAzBd,QACA2K,EAAY5J,EAAZf,QACAoO,EAA6B9M,EAA7Bge,gBAAiBvO,EAAYzP,EAAZ+d,QAEzB4X,EAAAA,WAAgB,WACdZ,GAAsBj1B,EAAIpB,QAASvF,EACrC,GAAG,CAACA,IAEJ,IAAMuW,EAAc,SAAAqG,GAClB,IAAMC,EAAaD,GAAUna,GAAa,CAAER,KAAM,CAAE2E,IAAIm2B,EAAAA,EAAAA,eAAeptB,MAAO,KAE9E0B,QAAQkrB,IAAI,oBAAqB3f,EAAQna,EAAWoa,GAEpD,IAAiBC,EAAQrW,EAAjBlB,SAERy3B,EAAAA,EAAAA,cAAalgB,EAAK,OAGlBpJ,EAAOupB,WAAangB,EACpB,IAAQI,EAASL,EAAT5a,KACRyR,EAAOhS,KAAKwb,EACd,EACAsf,EAAAA,WAAgB,WAGd,GAFAnrB,QAAQC,MAAM,mBAAoBxK,GAE7B+B,EAAOiI,QAAQosB,EAAAA,gBAIpB,IAAKp2B,EAAW,CACdC,GAAa,GAEb,IAAM6V,EAA8B,CAAC,EAErCvL,QAAQC,MAAM,qBAAsB6rB,EAAAA,UAAAA,KAAe/8B,GAAUg9B,QAASxgB,GAEtDjJ,EAAgBwpB,EAAAA,UAAAA,KAAe/8B,GAAUg9B,QAASxgB,GAC1DzL,MAAM,SAAA2L,GAAkC,IAAAugB,EAAAC,EAC9CjsB,QAAQC,MAAM,sBAAuB6rB,EAAAA,UAAAA,KAAe/8B,GAAUg9B,QAAStgB,GACrBA,EAA1Csf,YACR/qB,QAAQkrB,IAAI,6BAAsC,QAAtCc,EAA8B/mB,EAAQinB,YAAA,IAAAF,OAAA,EAARA,EAAcG,QAC5C,QAARF,EAAAhnB,EAAQinB,YAAA,IAAAD,GAARA,EAAcE,UAChBC,EAAAA,EAAAA,mBAAkB1R,OAAOzV,EAAQinB,KAAKC,SACtCnsB,QAAQkrB,IAAI,6BAA8BjmB,EAAQinB,KAAKC,SAEzDjnB,EAAWuG,EACb,GAAC,OApBDvG,GAsBJ,GAAG,CAACzP,IAEJ,IA+DMmR,EAAoB,SAAA2E,GAAoB1M,EAAQuI,QAAU,OAAAmE,QAAA,IAAAA,OAAA,EAAAA,EAAOhW,EAAG,EAEpEwR,EAAwC,CAC5C1X,OAAAmI,EAAQ3C,OAAAwN,EACRtO,UAAAtC,EAAWuC,aAAA4B,EACX1B,QAAA2K,EAAStK,YAAAoK,EAAavK,KAxCX,SAACmX,EAAsBC,GAAA,OAClCxL,QAAQkrB,IAAI,cAAe3f,EAAWC,GAGjCD,GACLvL,QAAQkrB,IAAI,6BAA8B1f,IAEtC6gB,EAAAA,EAAAA,QAAO9gB,IACTvL,QAAQkrB,IAAI,oBACL72B,QAAQC,QAAQ,MAErBg4B,EAAAA,EAAAA,UAAS/gB,IACXvL,QAAQkrB,IAAI,sBACL72B,QAAQC,QAAQ,MAGrBi4B,EAAAA,EAAAA,eAAchhB,IAChBvL,QAAQkrB,IAAI,gCAtBQ,SAAC3f,EAA+BC,GAAA,OAE/CnJ,EAAOmqB,SAASjhB,EAAkBC,EAAW,CAqB3C2C,CAAgB5C,EAAWC,KAGhCihB,EAAAA,EAAAA,sBAAqBlhB,IACvBvL,QAAQkrB,IAAI,kCACL72B,QAAQC,QAAQ,KAnDT,SAACiX,EAAiBC,GAClC,IAAMC,GAAYihB,EAAAA,EAAAA,mBAAkBnhB,EAAOtG,EAAQinB,MACnD,GAAIzgB,EAAUhU,OAAQ,CACd,IAAAoU,EAA0B,GAC1BgK,EAAqB,GACnB/I,EAAgBzK,EAAhBtN,YAaR,GAZA0W,EAAU3Z,SAAQ,SAAAkb,GACZA,aAAoB2f,KAAM9W,EAAWne,KAAKsV,GACzCnB,EAAOnU,KAAKsV,EACnB,IAEInB,EAAOpU,QACToU,EAAO/Z,SAAQ,SAAAkb,GAEb,IAAMwJ,GAAAxnB,EAAAA,EAAAA,GAAA,CAASuG,IADJq3B,EAAAA,EAAAA,YAAW,kBACHn9B,KAAMo9B,EAAAA,aAAAA,OAAuB7f,GAChDF,EAAYggB,KAAKC,EAAAA,UAAAA,OAAkBvW,EACrC,IAEEX,EAAWpe,OAAQ,OAAO4K,EAAO2qB,SAASnX,EAAYrK,EAAW,MAChExL,QAAQkrB,IAAI,4BACnB,OAAO72B,QAAQC,QAAQ,GACzB,CAgCS6Q,CAAUoG,EAAWC,GAAa1L,MAAK,SAAA2L,GAC5CzL,QAAQkrB,IAAI,mBAAoBzf,GAChC,IAAOI,GAAP7U,EAAAA,EAAAA,GAAqByU,EAAA,GAAJ,GACjB,OAAIwhB,EAAAA,EAAAA,SAAQphB,IAAajF,EAAiBiF,GACnCJ,CACT,KA1BuBpX,QAAQC,QAAQ,GAAE,EAqCzCH,iBAAAyS,EAAkBpS,MAAArD,GAEdma,GAAAtc,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAiB+C,GAAA,IAAMyQ,OAAQ0qB,EAAAA,UAAWj+B,IAAAqG,IAChD,OACE61B,EAAAA,cAAC12B,GAAcoD,SAAd,CAAuBvG,MAAOyV,GAC7BokB,EAAAA,cAACv8B,IAAAI,EAAAA,EAAAA,GAAA,GAAUsc,IACX6f,EAAAA,cAAC,OAAIvc,MAAO,CAAEue,QAAS,QAAUl+B,IAAKmG,IAG5C,CC3MO,IAAMg4B,GAA+C,CAC1DC,QAAQ,EACRC,aAAcC,EAAAA,YACdC,aAAcD,EAAAA,YACdE,OAAQ,GAGGC,GAAgBC,EAAAA,cAAoBP,ICE3CQ,GAAoB,GAKnB,SAASC,GAAc/+B,GAAwC,IAAAg/B,EAC5D/+B,EAAiCD,EAAjCqJ,SAAUpH,EAAuBjC,EAAvB4H,UAAc/H,GAAKgI,EAAAA,EAAAA,GAAI7H,EAAAi/B,GAEnC58B,EAASgO,KAAU6uB,EACDC,EAAAA,UAAqB,kBAAOC,EAAAA,EAAAA,UAAS/8B,EAAOqU,KAAM,IAAA2oB,GAAAn3B,EAAAA,EAAAA,GAAAg3B,EAAA,GAAnE58B,EAAA+8B,EAAA,GAAMp8B,EAAOo8B,EAAA,GACdl8B,EAASg8B,EAAAA,OAA6B,MACtC73B,EAAU63B,EAAAA,OAA6B,MACvCj5B,EAAgBi5B,EAAAA,WAAiBx5B,IAAa25B,EAC5BH,EAAAA,UAAe,GAAKI,GAAAr3B,EAAAA,EAAAA,GAAAo3B,EAAA,GAArCn5B,EAAAo5B,EAAA,GAAMj5B,EAAOi5B,EAAA,GAEZ74B,EADcy4B,EAAAA,WAAiBP,IAC/Btd,SACA3a,EAAST,EAATZ,KAES3C,EADGw8B,EAAAA,OAA4B,CAAC,GACzC/5B,QAWRo6B,EAEyBL,EAAAA,SAAe,IAAIM,gBAXvB,WACnB,IAAQxnB,EAAY3Q,EAAZlC,QACR,GAAK6S,EAAL,CAEA,IAAMuE,GAAOkjB,EAAAA,EAAAA,WAAUznB,EAAQV,yBAC/BtU,GAAQ,kBACNZ,EAAOqU,KAAO8F,GACP4iB,EAAAA,EAAAA,UAAS5iB,EAAI,GALF,CAOtB,KAEO9T,GAAiER,EAAAA,EAAAA,GAAAs3B,EAAA,GAAnD,GAErBL,EAAAA,WAAgB,WACd,IAAQlnB,EAAY3Q,EAAZlC,QACR,OAAI6S,GAASvP,EAAei3B,QAAQ1nB,GAC7B,WAAQvP,EAAek3B,YAAa,CAC7C,GAAG,IAEH,IAOM/vB,EAAsB,WAC1B,IAAQoI,EAAWtV,EAAXsa,OACR,cAAOta,EAASgb,eACThb,EAASsa,OAET5a,EAAOw9B,cAAcn5B,GAAUsK,MAAK,SAAAwL,IAZvB,SAAAvE,GACpB,IAAQuE,EAAYrZ,EAAZiC,QACHoX,GAELA,EAAQtF,gBAAA5F,MAARkL,GAAAvS,EAAAA,EAAAA,GAA2BgO,GAC7B,EASI1E,CAAaiJ,GACTvE,GAAQzE,GACd,GACF,EAEMzD,EAAe,WAAQF,IAAsBmB,KAAK8uB,EAAAA,YAAa,EAE/DtsB,EAAa,WACX,IAAEyE,EAAY9U,EAAZiC,QACAoX,EAASna,EAATqU,KACR,GAAMuB,IAAW8nB,EAAAA,EAAAA,eAAcvjB,GAE/B,IAAI7Z,EAASgb,QAEX,YADAhb,EAASsa,QAAS,GAGpBta,EAASgb,QAAU4B,WAAWxP,EAAc+uB,GAAiB,CAC/D,EAEA3jB,IAAA6jB,EAAA,IAAAvsB,EAAAA,EAAAA,GAAAusB,EAAgBgB,EAAAA,UAAAA,KAAiBxsB,IAAAf,EAAAA,EAAAA,GAAAusB,EAAagB,EAAAA,UAAAA,UAAsBxsB,GAAWwrB,IAE/E,IAAM7oB,EAAa,SAAA8B,GAAA,QACZA,OAESgoB,EAAAA,EAAAA,WAAUhoB,GACdpV,SAASq9B,EAAAA,qBAEZC,EAAAA,EAAAA,cAAYC,EAAAA,EAAAA,UAASnoB,IALF,EAQtB7B,EAAe,SAAA6B,IACnBooB,EAAAA,EAAAA,WAAUpoB,GACV3R,GAAQ,EACV,EA+BMmR,EAAoB,GACtBxV,GAAWwV,EAAQ7O,KAAK3G,GACxBkE,GAAMsR,EAAQ7O,KAAK03B,EAAAA,eAEvB,IAAMxoB,GAAA5X,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDL,GAAA,IAAMM,IAAKmH,EACdM,UAAW6P,EAAQ3O,KAAK,KACxBW,IAAK,iBACLoK,WAbkB,SAAAoE,IAClBooB,EAAAA,EAAAA,WAAUpoB,GACV3R,EAAQ6P,EAAU8B,EAAMtE,cAC1B,EAUcD,OArCE,SAAAuE,GACd7B,EAAY6B,GACZ,IAAQuE,EAAiBvE,EAAjBtE,aACR,GAAKwC,EAAUqG,GAAf,CAEA,IAAQC,EAAcpa,EAAdub,WACR2iB,EAAAA,EAAAA,cAAa9jB,EAAW,aACxB,IAAMC,EAA2B,CAC/Bxb,KAAMmB,EAAOgqB,KAAK7R,MAAMiC,EAAUgd,UAAUtf,MAC5C4B,OAAQ,GAGV,IADckkB,EAAAA,EAAAA,WAAUzjB,GACd3Z,SAASq9B,EAAAA,mBACjBv5B,EAAK6V,EAAa5I,MAAO8I,OACpB,CACL,IAAMK,GAAOqjB,EAAAA,EAAAA,UAAS5jB,IACtBgkB,EAAAA,EAAAA,iBAAgBzjB,GAChB,IAAMgK,GAAO0Z,EAAAA,EAAAA,UAASjkB,EAAcO,IACpC2jB,EAAAA,EAAAA,4BAA2B3Z,GAC3B,IAAQ/I,EAAgB+I,EAAhBnP,aACJ+oB,EAAAA,EAAAA,eAAc3iB,IAAcrX,EAAKqX,EAAatB,EAAW,CAjB3B,CAmBtC,EAesB5I,YAAAsC,EACpBiC,cAAe,WAAQhW,EAAOod,UAAUmhB,MAAMC,EAAAA,WAAAA,KAAiB,IAGjE,IAAId,EAAAA,EAAAA,eAAcz9B,GAAO,CAEvB,IAAMka,EAAQ,CAAC2iB,EAAAA,cAAC,OAAAj/B,EAAAA,EAAAA,GAAA,GADC,CAAEC,IAAKgD,EAAQsG,IAAK,MAAO7B,UAAW,WAEvD,GAAI3H,EAAU,CACZ,IAAMwc,EAAQ0iB,EAAAA,SAAAA,KAAoBl/B,GAC9Bk/B,EAAAA,eAAqB1iB,IAAQD,EAAM5T,KAAK6T,EAAK,CAEnD3E,EAAUzO,SAAWmT,CAAA,CAEvB,OAAO2iB,EAAAA,cAACr/B,IAAAI,EAAAA,EAAAA,GAAA,GAAU4X,GACpB,CCtJO,SAASgpB,GAAa9gC,GACrB,IAAAC,EAAgB8gC,EAAAA,WAAiBnC,IAC/B38B,EAAoChC,EAApCs+B,OAAsB1+B,EAAcI,EAA5Bu+B,aAIVl8B,GAAApC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDF,GAAA,IAAOyJ,IAAK,gBAAiBmB,QAHlB,WAAQ/K,GAAWoC,EAAQ,IAK3C,OAAO8+B,EAAAA,cAACjhC,IAAAI,EAAAA,EAAAA,GAAA,GAASoC,GACnB,CCTO,SAAS0+B,GAAkBhhC,GAA4C,IAAAihC,EACtEhhC,EAASoQ,KACTpO,EAAe,WAAf,OAAqBhC,EAAO4vB,UAAUA,SAAA,EAAAqR,EACVC,EAAAA,SAA0Bl/B,GAAYm/B,GAAAl5B,EAAAA,EAAAA,GAAAg5B,EAAA,GAAjErhC,EAAAuhC,EAAA,GAAW/+B,EAAY++B,EAAA,GAExB9+B,EAAS,WAAQD,EAAaJ,IAAe,EACnDkZ,IAAA8lB,EAAA,IAAAxuB,EAAAA,EAAAA,GAAAwuB,EACGI,EAAAA,UAAAA,KAAiB/+B,IAAAmQ,EAAAA,EAAAA,GAAAwuB,EACjBI,EAAAA,UAAAA,SAAqB/+B,GACxB2+B,IAEA,IAKM99B,GAAAjD,EAAAA,EAAAA,GAAA,CACJsC,MAAO3C,EAAUsa,MACjBmS,IAAK,EACLhhB,IAAKzL,EAAUua,OACfpP,KAAM,EACNoK,SAVoC,SAAC9N,EAAQpB,GAC7C,IAAMC,GAASm7B,EAAAA,EAAAA,SAAQp7B,GAAUA,EAAO,GAAKA,EAC7CjG,EAAOosB,MAAOkV,EAAAA,EAAAA,cAAap7B,EAAQtG,EAAU2hC,IAC/C,EAQE55B,UAAW,gBACR5H,GAEL,OAAOmhC,EAAAA,cAACrU,IAAA5sB,EAAAA,EAAAA,GAAA,GAAWiD,GACrB,CC3BO,SAASs+B,GAAczhC,GAE5B,OADsB0hC,EAAAA,WAAiB9C,IACrBL,OAAe,KAE1Bv+B,EAAMqJ,QACf,CCNO,SAASs4B,GAAiB3hC,GAE/B,OADsB4hC,EAAAA,WAAiBhD,IACpBL,OAEZv+B,EAAMqJ,SAFqB,IAGpC,CCAO,SAASw4B,GAAW7hC,GAAqC,IAAA8hC,EACxD7hC,EAASoQ,KACTpO,EAAe,WAAf,OAAqBhC,EAAO4vB,SAAA,EAAAkS,EACAC,EAAAA,SAAe//B,GAAYggC,GAAA/5B,EAAAA,EAAAA,GAAA65B,EAAA,GAAtDliC,EAAAoiC,EAAA,GAAW5/B,EAAY4/B,EAAA,GACxB3/B,EAAS,WAAQD,EAAaJ,IAAgB,EAEpDkZ,IAAA2mB,EAAA,IAAArvB,EAAAA,EAAAA,GAAAqvB,EACGI,EAAAA,UAAAA,KAAiB5/B,IAAAmQ,EAAAA,EAAAA,GAAAqvB,EAASI,EAAAA,UAAAA,SAAqB5/B,GAClDw/B,IAEA,IAAQ7+B,EAAgCpD,EAAhCsiC,QAASh/B,EAAuBtD,EAAvB2hC,IAAKl6B,EAAkBzH,EAAlBuiC,cAEhBl8B,EAAe,EACnBm8B,EAAAA,EAAAA,eAAcp/B,EAASE,EAAKmE,GAAgB,KAC5C+6B,EAAAA,EAAAA,eAAc/6B,EAAenE,EAAKmE,IAG9BnB,GAAAjG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAiBF,GAAA,IAAOyJ,IAAK,cAAeJ,SAAUnD,IAE5D,OAAO87B,EAAAA,cAACliC,IAAAI,EAAAA,EAAAA,GAAA,GAASiG,GACnB,CCVO,IAAMm8B,GAAmE,WAAsB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC9F1iC,EAAgBgM,GADkEiC,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAQ,CAAC,GAEzFjM,EAAUhC,EAAVyF,OACR68B,EAAAtiC,EAAc6L,OAAMrC,MAApB84B,EAAoB94B,IAAQ,WAC5B+4B,EAAAviC,EAAc6L,OAAMlE,YAApB46B,EAAoB56B,UAAc,iBAGlC66B,EAAAxiC,EAAc0L,SAAQtC,WAAtBo5B,EAAsBp5B,SACpBu5B,EAAAA,cAAC7D,IAAA7+B,EAAAA,EAAAA,GAAA,GAAkBD,EAAc0L,QAAQG,OACvC82B,EAAAA,cAAC9iC,GAAA,CAAK2J,IAAI,WAAW7B,UAAU,gBAGnC86B,EAAAziC,EAAc0M,QAAOhB,UAArB+2B,EAAqB/2B,QAAY,CAC/Bi3B,EAAAA,cAAC9iC,GAAA,CAAK2J,IAAI,aAAaJ,SAAUpH,EAAM4gC,MACvCD,EAAAA,cAACjd,GAAA,CAAoBlc,IAAI,mBAAmB7B,UAAU,MAAMyB,SAAUpH,EAAM6gC,WAC5EF,EAAAA,cAAC/e,GAAA,CAAYpa,IAAI,gBACfm5B,EAAAA,cAAC5Q,GAAA,CAAOvoB,IAAI,UACT7G,GAAe,UACfX,EAAM6gC,WAGXF,EAAAA,cAAC/hB,GAAA,CAAoBpX,IAAI,oBACvBm5B,EAAAA,cAAC5Q,GAAA,KACEpvB,GAAe,UACfX,EAAM6gC,cAMbH,EAAA1iC,EAAc2M,QAAOjB,UAArBg3B,EAAqBh3B,QAAY,CAC/Bi3B,EAAAA,cAAC9B,GAAA,CAAar3B,IAAI,cAAc7B,UAAWm7B,EAAAA,aACzCH,EAAAA,cAACnB,GAAA,CAAch4B,IAAI,WAAWxH,EAAM+gC,OACpCJ,EAAAA,cAACjB,GAAA,CAAiBl4B,IAAI,eAAexH,EAAMghC,OAE7CL,EAAAA,cAAC5B,GAAA,CAAkBv3B,IAAI,gBACvBm5B,EAAAA,cAACf,GAAA,CAAWp4B,IAAI,OAAO7B,UAAU,WAGnC,IAAM/H,EAAW+iC,EAAAA,cAAAA,EAAAA,SAAA,KACfA,EAAAA,cAACn3B,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc0M,SACtB1M,EAAc0L,QAAQtC,SACvBu5B,EAAAA,cAACn3B,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc2M,UAEzB,OAAA1M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYD,EAAc6L,OAAA,IAAOzC,SAAAxJ,GACnC,ECzDO,SAASqjC,GAAwBljC,GAChC,IAAAC,EAAkBkjC,EAAAA,WAAiBloB,IACjChZ,EAAiBhC,EAAjBua,MAAO3a,EAAUI,EAAVka,MAMT7X,EAAY6gC,EAAAA,SALS,WAArB,OAAAjjC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACmBF,GAAA,IAAO8f,MAAO,CAAEtI,MAAM4rB,EAAAA,EAAAA,gBAAevjC,EAAOoC,KAAS,GAI1B,CAACpC,EAAOoC,IAC5D,OAAOkhC,EAAAA,cAACrjC,IAAAI,EAAAA,EAAAA,GAAA,GAASoC,GACnB,CCAO,SAAS+gC,GAAcrjC,GACtB,IAEEH,EAFOwQ,KACPoP,UACA3d,KAEWO,EAAsCrC,EAAjD4H,UAA2BtF,EAAsBtC,EAAtBqJ,SAAapG,GAAK4E,EAAAA,EAAAA,GAAI7H,EAAAsjC,GACnDngC,EAAQogC,EAAAA,SAAAA,KAAoBjhC,IAClCkhC,EAAAA,EAAAA,YAAWD,EAAAA,eAAqBpgC,IAE1B,IAAAmE,EAAei8B,EAAAA,WAAiBxpB,IAChC7T,EAAkBq9B,EAAAA,WAAiBtoB,IACjC9U,EAAUmB,EAAVyU,MAINzV,EAEEJ,EAFFgU,cAAe1T,EAEbN,EAFa4N,YAAapN,EAE1BR,EAF0BwN,OAAQ/M,EAElCT,EAFkCu9B,cAAe78B,EAEjDV,EAFiD0U,iBACnDjY,EACEuD,EADF0V,iBAAkB9U,EAChBZ,EADgByU,oBAAqBjS,EACrCxC,EADqCwU,gBAAiBnH,EACtDrN,EADsDw9B,cAYpD3zB,EAAYwzB,EAAAA,SATU,WAC1B,IAAMzrB,EAAW3R,IAAUoN,EACrB0E,EAAoB,GAC1B,OAAI5V,GAAgB4V,EAAQrP,KAAKvG,GAC7ByV,GAAUG,EAAQrP,KAAK+6B,EAAAA,eACvBh9B,IAAkBR,GAAO8R,EAAQrP,MAAKg7B,EAAAA,EAAAA,uBAAsBjhC,IACzDsV,EAAQnP,KAAK,IACtB,GAGuB,CAACnG,EAAkBgE,EAAe4M,IAEzD,IAAM1T,IAAQsG,EAAQ,OAAO,KAK7B,IAAQqN,EAAwBrN,EAAxB09B,MAAO1tB,EAAiBhQ,EAAjB29B,MAAO1tB,EAAUjQ,EAAV0qB,MA2BhBpZ,GAAAvX,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACD+C,GAAA,IACH2E,UAAAmI,EACA1G,SA5BiB,WACjB,IAAIyO,EAAc3B,GAAS,EAAI,EACzB8B,EAAa9U,EAAM2I,MACzB,OAAO0H,EAAMhK,KAAI,SAAAgT,GACf,IAAMC,GAAAvc,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAkB+X,GAAA,IAAYxO,IAAK+S,EAAK/V,KAExCkW,EAAe,CAAEtT,SADNk6B,EAAAA,aAAmBpgC,EAAOsZ,GACVja,MAAO,CAAEtB,KAAAsb,EAAM7C,YAAA7B,GAAerO,IAAK+S,EAAK/V,IACnEsW,EAAUwmB,EAAAA,cAAC3pB,GAAY7Q,UAAA7I,EAAAA,EAAAA,GAAA,GAAcyc,IAC3C,OAAKxG,IAAO2B,EAAc0E,EAAKpC,OAASoC,EAAKrC,OACtC4C,CACT,GACF,CAiBY1G,GACVvC,YAAAtN,EAAaqN,WAhBK,SAAAiE,IAClBisB,EAAAA,EAAAA,WAAUjsB,GACV,IAAQG,EAAiBH,EAAjBnE,aACR,GAAKsE,EAAL,CAEA,IAAMuE,EAAiBlW,EAAc2R,GAC/BwE,EAAMD,EAAiBwnB,EAAAA,iBAAAA,GAAsBA,EAAAA,iBAAAA,KACnDt7B,IACA9B,EAAiB4V,EAAiBrW,OAAQ,GAC1CW,EAAoB2V,EANK,CAO3B,EAM2B/I,OAAAhN,EACzB+C,IAAA,SAAAvG,OAAckT,KAGhB,OAAOmtB,EAAAA,cAACzjC,IAAAI,EAAAA,EAAAA,GAAA,GAASuX,GACnB,CCpFO,SAASwsB,GAAcjkC,GACtB,IAAAC,EAAMikC,EAAAA,OAA6B,MACnCjiC,EAAkBiiC,EAAAA,WAAiBjpB,IAMzCkpB,EAEyBD,EAAAA,SAAe,IAAIzE,gBAPvB,YAInBx8B,EAHoBhB,EAAZ4Y,SACK5a,EAAImF,QAASmS,wBAG5B,KAEOlV,GAAiE6F,EAAAA,EAAAA,GAAAi8B,EAAA,GAAnD,GAErBD,EAAAA,WAAgB,WACd,IAAQjhC,EAAYhD,EAAZmF,QACR,OAAInC,GAASZ,EAAes9B,QAAQ18B,GAC7B,WAAQZ,EAAeu9B,YAAa,CAC7C,GAAG,CAAC3/B,EAAImF,UAER,IAAM9C,GAAApC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAiBF,GAAA,IAAOG,IAAAF,IAC9B,OAAOikC,EAAAA,cAACpkC,IAAAI,EAAAA,EAAAA,GAAA,GAASoC,GACnB,CCjBO,SAAS8hC,GAAepkC,GACvB,IAAAC,EAASoQ,KACTpO,EAAkBoiC,EAAAA,WAAiBppB,IACnCpb,EAAc,WAAd,OAAqBI,EAAOwf,UAAU3d,IAAA,EAAAwiC,EACZD,EAAAA,SAAexkC,GAAW0kC,GAAAr8B,EAAAA,EAAAA,GAAAo8B,EAAA,GAAnDjiC,EAAAkiC,EAAA,GAAUjiC,EAAWiiC,EAAA,GAE5BppB,IAAA1I,EAAAA,EAAAA,GAAA,GAAgB+xB,EAAAA,UAAAA,WADO,WAAQliC,EAAYzC,IAAc,KAGzD,IAMMyH,GAAApH,EAAAA,EAAAA,GAAA,CACJohB,SAAAjf,EACAoH,IAAK,cACLjH,MAAOP,EAAgB+Y,KACvBsR,IAAK,EACLhhB,IAAK,EACLN,KAAM,IACNoK,SAbyC,SAAClP,EAAQC,GAClD,IAAMG,GAASm+B,EAAAA,EAAAA,SAAQt+B,GAAUA,EAAO,GAAKA,EACzClE,EAAgB+Y,OAAS1U,GAAQrE,EAAgB8Y,QAAQzU,EAC/D,GAWKtG,GAEL,OAAOqkC,EAAAA,cAACvX,IAAA5sB,EAAAA,EAAAA,GAAA,CAAO0H,UAAU,eAAkBN,GAC7C,CCvBO,SAASo9B,GAAe1kC,GAAyC,IAAA2kC,EACtEC,EAAgCC,EAAAA,UAAe,kBAAM,CAAC,IAAAC,GAAA58B,EAAAA,EAAAA,GAAA08B,EAAA,GAA/C3kC,EAAA6kC,EAAA,GAAS7iC,EAAY6iC,EAAA,GACtBjlC,EAAkB,WAAQoC,GAAa,SAAAiE,GAAA,OAASA,EAAQ,CAAC,GAAE,EAC3D7D,EAASgO,KACf8K,IAAAwpB,EAAA,IAAAlyB,EAAAA,EAAAA,GAAAkyB,EACGI,EAAAA,UAAAA,OAAmBllC,IAAA4S,EAAAA,EAAAA,GAAAkyB,EAAkBI,EAAAA,UAAAA,MAAkBllC,GAC1D8kC,IAEM,IAAEriC,EAAatC,EAAbqJ,SA4BF/B,EAAgB,CACpBmC,IAAK,gBACLJ,SAJmBw7B,EAAAA,SAxBF,WACjB,IAAQ3+B,EAAS7D,EAAOod,UAAhB3d,KACR,IAAKoE,EAAM,MAAO,GAElB,IAAQC,EAAWD,EAAX8+B,OAER,OADuBC,EAAAA,EAAAA,eAAc9+B,GACfqD,KAAI,SAAChD,EAAOE,GAChC,IAAQC,EAAsBH,EAAtB0+B,WAAYt+B,EAAUJ,EAAVqqB,MAQd/pB,EAAe,CACnBuC,SARaw7B,EAAAA,SAAAA,IAAmBviC,GAAU,SAAAoG,GAC1C,IAAKm8B,EAAAA,eAAqBn8B,GAAQ,KAAM,iBAExC,OAAOm8B,EAAAA,aAAmBn8B,EAAO,CAC/Be,IAAA,eAAAvG,OAAoBwD,EAAA,KAAAxD,OAAK0D,EAAA,KAAA1D,OAASyD,IAEtC,IAGEnE,MAAO,CAAEuZ,MAAAvV,GACTiD,IAAA,iBAAAvG,OAAsBwD,EAAA,KAAAxD,OAAK0D,EAAA,KAAA1D,OAASyD,IAEtC,OAAOk+B,EAAAA,cAAC9qB,GAAahR,UAAA7I,EAAAA,EAAAA,GAAA,GAAa4G,GACpC,GACF,GAE+C,CAAC7G,KAMhD,OAAO4kC,EAAAA,cAACA,EAAAA,UAAM3kC,EAAAA,EAAAA,GAAA,GAAcoH,GAC9B,CChCO,SAAS69B,GAAiBnlC,GACzB,IAAAC,EAASoQ,KACTpO,EAAamjC,EAAAA,QAAsB,GACnCvlC,EAAMulC,EAAAA,OAA6B,MACnC/iC,EAAkB+iC,EAAAA,WAAiBnqB,IACjC3Y,EAAuBD,EAAvB+X,OAAOnX,EAAgBZ,EAAhBmY,MAAOrX,EAASd,EAATqU,KACdpP,EAA0DtH,EAA1D4H,UAAW1B,EAA+ClG,EAA/CqlC,SAAUl/B,EAAqCnG,EAArCslC,YAAah/B,EAAwBtG,EAAxBulC,WAAe/+B,GAAKqB,EAAAA,EAAAA,GAAI7H,EAAAwlC,GAE5D9+B,EAAc,WAAd,OAAqBzG,EAAOwf,UAAU3d,IAAA,EAAA2jC,EACZL,EAAAA,SAAe1+B,GAAWg/B,GAAAx9B,EAAAA,EAAAA,GAAAu9B,EAAA,GAAnD9+B,EAAA++B,EAAA,GAAU9+B,EAAW8+B,EAAA,GAE5BvqB,IAAA1I,EAAAA,EAAAA,GAAA,GAAgBkzB,EAAAA,UAAAA,WADO,WAAQ/+B,EAAYF,IAAc,KAGnD,IAwCEgC,EAAkBvF,EAAlB2Z,MAAOvJ,EAAWpQ,EAAX2a,OAsBT/N,EAAYq1B,EAAAA,SArBS,WACzB,IAAM5xB,EAAoB,GACtBlM,GAAWkM,EAAQ5K,KAAKtB,GACxBX,GAAU6M,EAAQ5K,KAAKg9B,EAAAA,eAC3B,IAAMzvB,GAAAjW,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDsG,GAAA,IAAMrG,IAAAN,EAAK+H,UAAW4L,EAAQ1K,KAAK,OAExC,GAAIxC,GAAcH,EAAa,CAC7B,IAAMiQ,EAAuB,CAAC,EAE9B,GADIjQ,IAAaiQ,EAAMyvB,UAAYtyB,GAC/BjN,EAAY,CACd,IAAM+P,GAAQyvB,EAAAA,EAAAA,gBAAexjC,EAAQW,EAAO,QAC5CmT,EAAM2vB,SAAWx6B,KAAKD,IAAI+K,EAAOA,EAAK,CAExCF,EAAU2J,MAAQ1J,CAAA,CAEpB,OAAMlQ,GAAYS,IAAWwP,EAAUkC,cAzDrB,WACZ,IAAE7E,EAAWwyB,WAAXld,OAEF3S,EAAuB,WAC3B3C,EAAOnM,oBAAoB,cAAe+O,GAC1C5C,EAAOnM,oBAAoB,YAAagP,EAC1C,EAEMD,EAAe,SAAAqB,IACnBwuB,EAAAA,EAAAA,WAAUxuB,GAEV,IAAQK,EAAYjY,EAAZuF,QACR,GAAM0S,GAAW7X,EAAOwf,UAAU3d,KAAlC,CAEA,IAAQmW,EAAYR,EAAZE,QACR,GAAI1V,EAAWmD,UAAY6S,EAA3B,CAEAhW,EAAWmD,QAAU6S,EAErB,IAAMuE,EAAO1E,EAAQP,wBACfkF,EAAQlR,KAAKD,IAAI,EAAGC,KAAK+gB,IAAI9P,EAAKM,MAAO7E,EAAUuE,EAAK9V,IACxDgW,GAAQwpB,EAAAA,EAAAA,cAAazpB,EAAOxZ,EAAO,SACzChD,EAAOosB,MAAO8Z,EAAAA,EAAAA,cAAazpB,EAAOzc,EAAOwf,UAAU3d,KAAM23B,SAPf,CAHK,CAWjD,EAEMpjB,EAAa,SAAAoB,GACjBrB,EAAYqB,GACZtB,GACF,EASA,OAPqB,SAAAsB,GACnBA,EAAML,kBACNnV,EAAWmD,SAAW,EACtBoO,EAAOrM,iBAAiB,cAAeiP,GACvC5C,EAAOrM,iBAAiB,YAAakP,GACrCD,EAAYqB,EACd,CAEF,CAmByD3Q,IAEhDqP,CACT,GAEoD,CAAC7T,EAAQW,EAAOyF,EAAO6K,EAAQ5M,IACnF,OAAOy+B,EAAAA,cAACtlC,IAAAI,EAAAA,EAAAA,GAAA,GAAS6P,GACnB,CCtFO,SAASq2B,GAAgBpmC,GAC9B,IAAQC,EAAuBD,EAAvB4H,UAAc3F,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAAqmC,GAEzBxmC,EAAkBymC,EAAAA,WAAiBrrB,IAGvC5Y,EAEExC,EAFFqa,cAAuB5X,EAErBzC,EAFa6T,OACfzQ,EACEpD,EADFib,UAAW3X,EACTtD,EADS6a,gBAAiBpT,EAC1BzH,EAD0B+a,iBAAkB1U,EAC5CrG,EAD4C8a,oBAE1CxU,EAAMmgC,EAAAA,OAA6B,MAAIC,EACrBD,EAAAA,UAAe,GAAKE,GAAAt+B,EAAAA,EAAAA,GAAAq+B,EAAA,GAArCjgC,EAAAkgC,EAAA,GAAMhgC,EAAOggC,EAAA,GAEd9/B,EAAS2J,KAEf8K,IAAA1I,EAAAA,EAAAA,GAAA,GAAgBg0B,EAAAA,UAAAA,QADI,WAAM,IAAAC,EAAM,QAAJA,EAAAvgC,EAAIf,eAAA,IAAAshC,GAAJA,EAAaC,SAAS,EAAG,EAAG,KAGxD,IAYM7/B,EAAe,SAAA0M,IACnBozB,EAAAA,EAAAA,WAAUpzB,GACVhN,GAAQ,EACV,EAsBMqJ,EAAoB,GACtB5P,GAAW4P,EAAQjH,KAAK3I,GACxBqG,GAAMuJ,EAAQjH,KAAKi+B,EAAAA,eAGvB,IAAM92B,GAAA7P,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACJ0H,UAAWiI,EAAQ/G,KAAK,MACrB7G,GAAA,IAAMoW,cA5CW,WACpB3R,EAAO+Y,UAAUmhB,MAAMkG,EAAAA,WAAAA,MACzB,EA0C0BC,SAxCT,WACf,IAAQvzB,EAAYrN,EAAZf,QACR,GAAKoO,EAAL,CAEA,IAAoB2C,EAAoB3C,EAAhCwzB,WAA0B5wB,EAAM5C,EAAjByzB,UACvBhkC,EAAU,CAAEyD,EAAAyP,EAAGvP,EAAAwP,GAHK,CAItB,EAkCoCvC,WArBhB,SAAAL,IAClBozB,EAAAA,EAAAA,WAAUpzB,GAEV,IAAQ2C,EAAiB3C,EAAjBG,aACR,GAAKwC,EAAL,CAEA,IAAMC,EAAQ/T,EAAc8T,GACtBE,EAAMD,EAAQ8wB,EAAAA,iBAAAA,GAAsBA,EAAAA,iBAAAA,KAC1C/jC,IACAmE,IACApB,EAAoBmQ,GACpB7P,EAAQ4P,EAPiB,CAQ3B,EASgDtC,YAAAhN,EAAa4M,OA1B7C,SAAAF,GACd1M,EAAY0M,GACZlR,EAAYkR,EACd,EAuBqErT,IAAAgG,IAErE,OAAOmgC,EAAAA,cAACxmC,IAAAI,EAAAA,EAAAA,GAAA,GAAS6P,GACnB,CCpEO,SAASo3B,GAAwBnnC,GAChC,IAAAC,EAASoQ,KACTpO,EAAc,WAAd,OAAqBhC,EAAOwf,UAAU3d,IAAA,EAAAslC,EACZC,EAAAA,SAAeplC,GAAWqlC,GAAAp/B,EAAAA,EAAAA,GAAAk/B,EAAA,GAAnDvnC,EAAAynC,EAAA,GAAUjlC,EAAWilC,EAAA,GAE5BnsB,IAAA1I,EAAAA,EAAAA,GAAA,GAAgB80B,EAAAA,UAAAA,WADO,WAAQllC,EAAYJ,IAAc,KAGzD,IAAQgB,EAAsBjD,EAAtBqJ,SAAalG,GAAK0E,EAAAA,EAAAA,GAAI7H,EAAAwnC,GACxBlgC,GAAApH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDiD,GAAA,IACHme,SAAAzhB,IAEF,OAAAyH,EAAWsD,QAAU,WAAQ3K,EAAOwnC,UAAW,EACxCJ,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBpkC,GAAWqE,EAC3D,CCLO,SAASogC,GAAkB1nC,GAChC,IAAmBC,EAAmCD,EAA9C4H,UAA2B3F,EAAmBjC,EAAnB0F,MAAU7F,GAAKgI,EAAAA,EAAAA,GAAI7H,EAAA2nC,IAChDtlC,EAAkBulC,EAAAA,WAAiB3sB,IACnC3Y,EAAeslC,EAAAA,WAAiB7tB,IAG9B9W,EAAmDZ,EAAnDohC,cAAetgC,EAAoCd,EAApCuZ,iBAAkBtU,EAAkBjF,EAAlBqhC,cACjCx9B,EAAU5D,EAAVyZ,MAUFzV,EAAYshC,EAAAA,SARU,WAC1B,IAAMjlC,EAAoB,GAC1B,OAAI1C,GAAgB0C,EAAQiG,KAAK3I,GAC7BiG,IAAUoB,GAAe3E,EAAQiG,KAAKi/B,EAAAA,eACtC3hC,IAAUjD,GAAeN,EAAQiG,MAAKk/B,EAAAA,EAAAA,uBAAsB3kC,IACzDR,EAAQmG,KAAK,IACtB,GAGuB,CAAC3F,EAAkBF,EAAeqE,IAGzD,IAAKpB,EAAO,OAAO,KAEnB,IAAQM,EAAiBN,EAAjB49B,MAAOp9B,EAAUR,EAAV2qB,MAETlqB,EAAWH,EAAQvE,EAAM8lC,WAAa9lC,EAAM8Z,MAE5CnV,GAAA1G,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDL,GAAA,IAAM+H,UAAAtB,EAAW+C,SAAA1C,EAAU8C,IAAA,cAAAvG,OAAmBwD,KAEnD,OAAOkhC,EAAAA,cAAC9nC,IAAAI,EAAAA,EAAAA,GAAA,GAAS0G,GACnB,CClCO,SAASohC,GAAahoC,GACrB,IAAAC,EAASoQ,KACPpO,EAA4BjC,EAA5Bgb,KAAMnb,EAAsBG,EAAtBqJ,SAAahH,GAAKwF,EAAAA,EAAAA,GAAI7H,EAAAioC,IAC9B3lC,EAAkB4lC,EAAAA,WAAiBjtB,IACnChY,EAAc,WAAd,OAAqBhD,EAAOwf,UAAU3d,IAAA,EAAAqmC,EACZD,EAAAA,SAAejlC,GAAWmlC,GAAAlgC,EAAAA,EAAAA,GAAAigC,EAAA,GAAnDhlC,EAAAilC,EAAA,GAAU9gC,EAAW8gC,EAAA,GAE5BjtB,IAAA1I,EAAAA,EAAAA,GAAA,GAAgB41B,EAAAA,UAAAA,WADO,WAAQ/gC,EAAYrE,IAAc,KAKzD,IAAMqD,GAAApG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAqBmC,GAAA,IAAMuI,QAFjB,WAAQtI,EAAgByY,QAAQ9Y,EAAM,EAEZqf,SAAAne,IAE1C,OAAO+kC,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBroC,GAAWyG,EAC3D,CCnBO,SAASgiC,GAAuBtoC,GAC/B,IAAAC,EAASoQ,KACTpO,EAAgBsmC,EAAAA,WAAiB5iC,IAC/B9F,EAAkBoC,EAAlBmD,QAAS/C,EAASJ,EAATqD,KACXhD,EAAc,WAAd,OAAqBrC,EAAOwf,UAAU3d,IAAA,EAAA0mC,EACZD,EAAAA,SAAejmC,GAAWmmC,GAAAvgC,EAAAA,EAAAA,GAAAsgC,EAAA,GAAnDvlC,EAAAwlC,EAAA,GAAUtlC,EAAWslC,EAAA,GAE5BttB,IAAA1I,EAAAA,EAAAA,GAAA,GAAgBi2B,EAAAA,UAAAA,WADO,WAAQvlC,EAAYb,IAAc,KAGzD,IAAQ4D,EAAsBlG,EAAtBqJ,SAAalD,GAAK0B,EAAAA,EAAAA,GAAI7H,EAAA2oC,IACxBriC,GAAApG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACDiG,GAAA,IACHmb,SAAAre,IAEF,OAAAqD,EAAWsE,QAAU,WACnB,IAAQpE,EAAyBvG,EAAzBwf,UAAW/Y,EAAczG,EAAd2d,UACXjX,EAAgBH,EAAhBtF,KAAM0F,EAAUJ,EAAVuV,MACRpZ,EAAK9C,EAAQyY,SAAWswB,EAAAA,kBAC9BC,EAAAA,EAAAA,uBAAsBlmC,GACtB,IAAMmE,EAAS,CAAEL,GAAA9D,GACX+F,EAA2B,CAC/BxH,KAAM,EAAG6a,OAAQ,GAEfpV,GAAQC,GACV8B,EAAYxH,KAAO0F,EAAMk9B,MAAQl9B,EAAMi9B,MAAM7J,QAAQrzB,GAAQA,EAAKmiC,SAClEpgC,EAAYqT,MAAQnV,EAAMiqB,OAE1BnoB,EAAYxH,KAAOjB,EAAOosB,KAAK7R,MAAM9T,EAAW+yB,UAAUtf,MAE5D9X,EAAKyE,EAAQ4B,EACf,EACO6/B,EAAAA,aAAmBA,EAAAA,SAAAA,KAAoBriC,GAAWI,EAC3D,CChBO,IAAMyiC,GAAyE,WAAqB,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACnGnpC,EAAgBgM,GADuEiC,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAQ,CAAC,GAE9FjM,EAAUhC,EAAVyF,OACRsjC,EAAA/oC,EAAc6L,OAAMrC,MAApBu/B,EAAoBv/B,IAAQ,aAC5Bw/B,EAAAhpC,EAAc6L,OAAMlE,YAApBqhC,EAAoBrhC,UAAc,mBAElCshC,EAAAjpC,EAAc0M,QAAOhB,UAArBu9B,EAAqBv9B,QAAY,CAC/B09B,EAAAA,cAACvpC,GAAA,CAAK2J,IAAI,aAAaJ,SAAUpH,EAAMqnC,cAGzCH,EAAAlpC,EAAc2M,QAAOjB,UAArBw9B,EAAqBx9B,QAAY,CAC/B09B,EAAAA,cAACf,GAAA,CAAuB7+B,IAAI,YAC1B4/B,EAAAA,cAACrX,GAAA,CAAO3oB,SAAUpH,EAAM0xB,OAE1B0V,EAAAA,cAAClC,GAAA,CAAwB19B,IAAI,aAC3B4/B,EAAAA,cAACrX,GAAA,CAAO3oB,SAAU,CAACpH,EAAM0xB,IAAK1xB,EAAM8lC,eAEtCsB,EAAAA,cAACrB,GAAA,CAAav+B,IAAI,WAAWuR,KAAM,GACjCquB,EAAAA,cAACrX,GAAA,CAAOC,SAAS,GAAOhwB,EAAMsnC,WAEhCF,EAAAA,cAACjF,GAAA,CAAe36B,IAAI,WACpB4/B,EAAAA,cAACrB,GAAA,CAAav+B,IAAI,UAAUuR,KAAM,GAChCquB,EAAAA,cAACrX,GAAA,CAAOC,SAAS,GAAOhwB,EAAMunC,cAIlCJ,EAAAnpC,EAAc0L,SAAQtC,WAAtB+/B,EAAsB//B,SAAaggC,EAAAA,cAAAA,EAAAA,SAAA,KACjCA,EAAAA,cAAClE,GAAA,CAAiBI,YAAY,EAAMF,UAAU,EAAMC,aAAa,EAAM19B,UAAU,gBAC/EyhC,EAAAA,cAACnG,GAAA,CAAwBt7B,UAAU,0BAErCyhC,EAAAA,cAAClE,GAAA,CAAiBI,YAAY,EAAM39B,UAAU,iBAC5CyhC,EAAAA,cAACnG,GAAA,CAAwBt7B,UAAU,2BAErCyhC,EAAAA,cAAC3E,GAAA,KACC2E,EAAAA,cAAC3B,GAAA,CAAkB9/B,UAAU,aAAalC,MAAOzD,IACjDonC,EAAAA,cAAChG,GAAA,CAAcz7B,UAAU,SACvByhC,EAAAA,cAAC/tB,GAAA,CAAS1T,UAAU,mBAGxByhC,EAAAA,cAACpF,GAAA,CAAcr8B,UAAU,eAG3B,IAAM/H,EAAWwpC,EAAAA,cAAAA,EAAAA,SAAA,KACfA,EAAAA,cAAC59B,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc0M,SACvB08B,EAAAA,cAACjD,IAAAlmC,EAAAA,EAAAA,GAAA,GAAoBD,EAAc0L,QAAQG,OACxC7L,EAAc0L,QAAQtC,UAEzBggC,EAAAA,cAAC59B,IAAAvL,EAAAA,EAAAA,GAAA,GAAQD,EAAc2M,UAGzB,OAAA1M,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYD,EAAc6L,OAAA,IAAOzC,SAAAxJ,GACnC,EC5DO,SAAS4pC,GAAOzpC,GAAiC,IAAA0pC,EAC9CzpC,EAAsBD,EAAtBshB,SAAarf,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAA2pC,IACxB9pC,EAASwQ,KAAUu5B,EACGC,EAAAA,SAAehqC,EAAO0+B,QAAMuL,GAAA5hC,EAAAA,EAAAA,GAAA0hC,EAAA,GAAjDvnC,EAAAynC,EAAA,GAAQxnC,EAASwnC,EAAA,GAAAC,EACIF,EAAAA,SAAehqC,EAAO8+B,QAAMqL,GAAA9hC,EAAAA,EAAAA,GAAA6hC,EAAA,GAAjD9mC,EAAA+mC,EAAA,GAAQ7mC,EAAS6mC,EAAA,GAClB1iC,EAAe,WAAQhF,EAAUzC,EAAO0+B,OAAQ,EACtDpjB,IAAAuuB,EAAA,IAAAj3B,EAAAA,EAAAA,GAAAi3B,EACGO,EAAAA,UAAAA,MAAkB3iC,IAAAmL,EAAAA,EAAAA,GAAAi3B,EAAeO,EAAAA,UAAAA,KAAiB3iC,IAAAmL,EAAAA,EAAAA,GAAAi3B,EAClDO,EAAAA,UAAAA,QAAmB,WAAQ9mC,EAAUtD,EAAO8+B,OAAQ,IACvD+K,IAQA,IAAMljC,EAAe,CACnBhE,MAJ4C,CAC5C+7B,OAAAl8B,EAAQif,SAAArhB,EAAU0+B,OAAA17B,EAAQu7B,aAJN,SAAA93B,GAAqB7G,EAAO0+B,OAAS73B,CAAM,EAIvBg4B,aAHpB,SAAAh4B,GAAoB7G,EAAO8+B,OAASj4B,CAAM,GAMxC2C,SAAUwgC,EAAAA,cAAC/pC,IAAAI,EAAAA,EAAAA,GAAA,GAAU+B,KAE7C,OACE4nC,EAAAA,cAACjL,GAAc71B,UAAA7I,EAAAA,EAAAA,GAAA,GAAcsG,GAEjC,CCnBO,IAAM0jC,GAAsB,EAK5B,SAASC,GAASnqC,GAAmC,IAAAoqC,EACpDnqC,EAASoQ,KAEPxQ,EADcwqC,EAAAA,WAAiB1kC,IAC/BL,KACFjD,EAAe,WAAf,IAAAioC,EAAA,OAA+C,QAAjBA,EAAArqC,EAAOwf,UAAU3d,YAAA,IAAAwoC,OAAA,EAAjBA,EAAuBnwB,QAAS,GAC9D7X,EAAgB,WAAhB,IAAAioC,EAAA,OAAgD,QAAjBA,EAAAtqC,EAAOwf,UAAU3d,YAAA,IAAAyoC,OAAA,EAAjBA,EAAuBnwB,SAAU,GAAAowB,EAC1CH,EAAAA,SAAe/nC,GAAamoC,GAAAviC,EAAAA,EAAAA,GAAAsiC,EAAA,GAAjDvnC,EAAAwnC,EAAA,GAAQtnC,EAASsnC,EAAA,GAAAC,EACEL,EAAAA,SAAehoC,GAAYsoC,GAAAziC,EAAAA,EAAAA,GAAAwiC,EAAA,GAA9CpjC,EAAAqjC,EAAA,GAAOzkC,EAAQykC,EAAA,GAE+BC,EAELP,EAAAA,SAA0CQ,EAAAA,iBAAAA,MAAqBC,GAAA5iC,EAAAA,EAAAA,GAAA0iC,EAAA,GAAxGpkC,EAAAskC,EAAA,GAAkBpkC,EAAmBokC,EAAA,GAAAC,EACFV,EAAAA,WAAkCW,GAAA9iC,EAAAA,EAAAA,GAAA6iC,EAAA,GAArEpkC,EAAAqkC,EAAA,GAAepkC,EAAgBokC,EAAA,GAAAC,EACEZ,EAAAA,WAAiCa,GAAAhjC,EAAAA,EAAAA,GAAA+iC,EAAA,GAAlEtoC,EAAAuoC,EAAA,GAAcpkC,EAAeokC,EAAA,GAAAC,EACMd,EAAAA,WAAkCe,GAAAljC,EAAAA,EAAAA,GAAAijC,EAAA,GAArEziC,EAAA0iC,EAAA,GAAe73B,EAAgB63B,EAAA,GAAAC,EACJhB,EAAAA,SAAe,GAACiB,GAAApjC,EAAAA,EAAAA,GAAAmjC,EAAA,GAA3Cx7B,EAAAy7B,EAAA,GAAWv7B,EAAYu7B,EAAA,GAAAC,EACUlB,EAAAA,WAAiCmB,GAAAtjC,EAAAA,EAAAA,GAAAqjC,EAAA,GAAlE/3B,EAAAg4B,EAAA,GAAcr1B,EAAeq1B,EAAA,GAAAC,EACZpB,EAAAA,SAAeH,IAAmBwB,GAAAxjC,EAAAA,EAAAA,GAAAujC,EAAA,GAAnDr1B,EAAAs1B,EAAA,GAAMr1B,EAAOq1B,EAAA,GAAAC,EACItB,EAAAA,SAAqBuB,EAAAA,UAAQC,GAAA3jC,EAAAA,EAAAA,GAAAyjC,EAAA,GAA9CtsB,EAAAwsB,EAAA,GAAMp0B,EAAOo0B,EAAA,GAAAC,EACQzB,EAAAA,SAAsBuB,EAAAA,UAAQG,GAAA7jC,EAAAA,EAAAA,GAAA4jC,EAAA,GAAnDh0B,GAAAi0B,EAAA,GAAQ9zB,GAAS8zB,EAAA,GAClBvvB,GAAU,WAAQzM,GAAa,SAAA4X,GAAA,OAASA,EAAQ,CAAC,GAAE,EAEzDxM,IAAAivB,EAAA,IAAA33B,EAAAA,EAAAA,GAAA23B,EACG4B,EAAAA,UAAAA,QAAmB,WAAQ31B,EAAQ6zB,GAAqB,KAAAz3B,EAAAA,EAAAA,GAAA23B,EACxD4B,EAAAA,UAAAA,OAAmBxvB,KAAA/J,EAAAA,EAAAA,GAAA23B,EACnB4B,EAAAA,UAAAA,WAAsB,WACrB71B,EAAgBlW,EAAOwf,UAAUve,MACjCqS,EAAiBtT,EAAOwf,UAAU1D,MACpC,KAAAtJ,EAAAA,EAAAA,GAAA23B,EACC4B,EAAAA,UAAAA,MApBiB,WAAQ9lC,EAAS7D,IAAgB,KAoBjCoQ,EAAAA,EAAAA,GAAA23B,EACjB4B,EAAAA,UAAAA,UAtBkB,WAAQ7oC,EAAUb,IAAiB,IAuBxD8nC,IAEM,IAAA3tB,GAAgB,SAACkL,EAA4BiO,GACjD,IAAME,GAAQmW,EAAAA,EAAAA,WAAUtkB,GAExB,GAAImO,EAAMjzB,SAASqpC,EAAAA,mBAAoB,OAAO,EAE9C,IAAMjsB,EAAO6V,EAAMjvB,KAAKslC,EAAAA,gBACxB,QAAKlsB,OAGD2V,IAAQ3V,EAAKqT,WAAW,WAGL8Y,EAAAA,EAAAA,eAAcnsB,KACXosB,EAAAA,WAC5B,EAEM3vB,GAAe,SAAAiL,IACnB2kB,EAAAA,EAAAA,WAAU3kB,GACVjhB,EAAoBmkC,EAAAA,iBAAAA,MACpBjkC,OAAiB,GACjBE,OAAgB,EAClB,EAuEQkX,GAAUqB,EAAVvC,MAQFY,GAAQ2sB,EAAAA,SANU,WAAlB,OACUrsB,IAAQuuB,EAAAA,EAAAA,eAActpC,EAAQ+a,GAAO5H,GAAQ,IAKhB,CAACA,EAAM4H,GAAO/a,IAErDykB,GAA4C,CAChDjN,OAAA3C,GAAQgD,UAAA7C,GACRuC,MAAAkD,GAAOnD,UAAA1K,EAAWhB,QAAA2N,GAClBxB,KAAA5E,EAAM2E,QAAA1E,EACNK,KAAA2I,EAAMxE,QAAApD,EACNgsB,cAAA98B,EAAeiU,iBAAAhU,EACfiV,aAAAlZ,EAAc+X,gBAAA5T,EACd8U,iBAAApV,EAAkBmU,oBAAAjU,EAClBoN,YAAA4I,GAAahJ,OApEC,SAAAiU,IACd2kB,EAAAA,EAAAA,WAAU3kB,GACV,IAAQiO,EAA0BjO,EAA1BhU,aAAcmiB,EAAYnO,EAAZhQ,QAGtB,GAFAzG,QAAQkrB,IAAI,kBAAmB,OAAAxG,QAAA,IAAAA,OAAA,EAAAA,EAAcphB,OAEvCohB,GAAgBnZ,GAAcmZ,EAAcjzB,GAAlD,CAIAuO,QAAQkrB,IAAI,kBAAmBxG,EAAaphB,MAAO7R,GAGnD,IAAM+d,GADQurB,EAAAA,EAAAA,WAAUrW,GACI/yB,SAASqpC,EAAAA,mBAE/BvsB,IAAU,OAAAhZ,QAAA,IAAAA,IAAAA,EAAem9B,OACzBjkB,EAAQlZ,EAAgBA,EAAckqB,OAAS,EAC/C5U,GAAQ,OAAAtV,QAAA,IAAAA,OAAA,EAAAA,EAAek9B,QAAS,GAEhC3nB,EAAOwE,EAAgB,CAAC,GAAI8rB,EAAAA,EAAAA,UAAS5W,GACrCzY,GAAgBuD,IAAiB+rB,EAAAA,EAAAA,oBAAmBvwB,GACpDkB,EAASD,EAAejB,EAAKxE,OAAS,EAExC4F,EA/BY,SAACqK,EAAgBiO,GACjC,IAAKjO,EAAO,OAAQ,EACpB,IAAKhlB,EAAc,OAAO,EAE1B,IAAMmzB,EAAYF,EAAMoE,QAAQr3B,GAChC,OAAI6D,IAAqBqkC,EAAAA,iBAAAA,MAA+B/U,EAAY,EAC7DA,CACT,CAwBkB/Y,CAAU4C,EAAO1D,GACjC,KAAKywB,EAAAA,EAAAA,YAAWpvB,GAAY,CAC1B,IAAMW,EAAa6X,EAAUzW,EAAK3Y,EAC5ByX,GAAQwuB,EAAAA,EAAAA,cAAaphC,KAAKD,IAAI,EAAGwM,GAAOpR,GAAKuX,EAAab,IAAUM,IAC1EJ,EAAYqC,EA7CK,SAACgI,EAAeiO,GACnC,IAAQE,EAAWF,EAAXjtB,OACR,IAAKmtB,EAAQ,OAAO,EAEpB,IAAM7V,EAAa2V,EAAM3O,WAAU,SAAAvG,GAAA,OAAQiH,EAAQjH,EAAKvG,MAAQuG,EAAKtG,MAAM,IAC3E,OAAI6F,GAAc,EAAUA,EAErB6V,CACT,CAqCwBnZ,CAAawB,EAAOlC,GAASkC,CAAA,CAEnD,IAAMN,EAA2B,CAAE3c,KAAMoc,EAAWvB,MAAO8D,GAE3D,GAAIa,EACF7gB,EAAK+1B,EAAahiB,MAAOiK,QAAW,GAC3BV,EAET,GADAjM,QAAQkrB,IAAI,SAAUlgB,IAClB0wB,EAAAA,EAAAA,wBAAuB1wB,GAAO,CAChC,IAAQ+B,EAAgB/B,EAAhBtE,aACJi1B,EAAAA,EAAAA,eAAc5uB,IAAcpe,EAAKoe,EAAaJ,EAAW,KAGxD,CACL,IAAQI,EAAShe,EAAOwf,UAAhBve,MACR4rC,EAAAA,EAAAA,YAAW7uB,GAGXhe,EAAO8sC,SAAS9uB,EAAMJ,EAAW,CAGrCnB,GAAYiL,EAxCV,MADAzW,QAAQkrB,IAAI,0BAA2B,OAAAxG,QAAA,IAAAA,OAAA,EAAAA,EAAcphB,QAAS7R,EA0ClE,EAoBuBuX,cAAAuC,GACrBX,aAAAtI,EAAckwB,cAAAh7B,EACdyR,MAAA7S,EAAO8S,OAAAnX,GAGHuc,GAAe,CACnBnW,SAAUghC,EAAAA,cAACvqC,IAAAI,EAAAA,EAAAA,GAAA,GAASF,IACpBwC,MAAOklB,IAET,OAAO2iB,EAAAA,cAACpvB,GAAgBlS,UAAA7I,EAAAA,EAAAA,GAAA,GAAcsf,IACxC,CC5KO,SAASwtB,GAAOhtC,GACrB,OAAOitC,EAAAA,cAACntC,IAAAI,EAAAA,EAAAA,GAAA,GAAUF,GACpB,CCSO,IAAMktC,GAA4D,WAAuB,IAAdltC,EAAAkO,UAAAvF,OAAA,QAAAwF,IAAAD,UAAA,GAAAA,UAAA,GAAU,CAAC,EAC3FlO,EAAQ4H,YAAR5H,EAAQ4H,UAAc,iBACtB5H,EAAQ0F,QAAR1F,EAAQ0F,MAAUynC,EAAAA,OAClB,IAAAC,EAAiCptC,EAAzBqtC,OAAAptC,OAAA,IAAAmtC,EAAS,CAAC,EAAAA,EAAMnrC,GAAK4F,EAAAA,EAAAA,GAAI7H,EAAAstC,IAAAC,EAO7BttC,EALFutC,OAAA3tC,OAAA,IAAA0tC,EAAS,CAAC,EAAAA,EAAAE,EAKRxtC,EAJFiZ,QAAA7W,OAAA,IAAAorC,EAAU,CAAC,EAAAA,EAAAC,EAITztC,EAHFqpC,SAAAhnC,OAAA,IAAAorC,EAAW,CAAC,EAAAA,EAAAC,EAGV1tC,EAFFo7B,UAAAp4B,OAAA,IAAA0qC,EAAY,CAAC,EAAAA,EAAAC,EAEX3tC,EADFqO,SAAAnL,OAAA,IAAAyqC,EAAW,CAAC,EACdA,EACMtmC,EAAgC,GAUtC,GARIzH,IACFA,EAAO6F,QAAP7F,EAAO6F,MAAU1F,EAAQ0F,OACzB4B,EAAesB,KAAKilC,EAAAA,cAACpE,IAAAvpC,EAAAA,EAAAA,GAAA,GAAYoiC,GAAmBziC,OAElDwC,IACFA,EAAQqD,QAARrD,EAAQqD,MAAU1F,EAAQ0F,OAC1B4B,EAAesB,KAAKilC,EAAAA,cAAC97B,IAAA7R,EAAAA,EAAAA,GAAA,GAAasY,GAAoBnW,OAEpDY,GAAaE,EAAU,CACzB,IAAM+C,EAAgC,GAClC/C,IACFA,EAASuC,QAATvC,EAASuC,MAAU1F,EAAQ0F,OAC3BQ,EAAe0C,KAAKilC,EAAAA,cAACtmC,IAAArH,EAAAA,EAAAA,GAAA,GAAcyN,GAAqBxK,OAEtDF,IACFA,EAAUyC,QAAVzC,EAAUyC,MAAU1F,EAAQ0F,OAC5BQ,EAAe0C,KAAKilC,EAAAA,cAACvV,IAAAp4B,EAAAA,EAAAA,GAAA,GAAe46B,GAAsB73B,OAE5D,IAAMkD,EAAc,CAClBkD,SAAUnD,EAAgBuD,IAAK,SAAU7B,UAAW,UAEtDN,EAAesB,KAAKilC,EAAAA,cAACb,IAAA9sC,EAAAA,EAAAA,GAAA,GAAYiG,IAAgB,CAEnD,OAAI7D,IACFA,EAASoD,QAATpD,EAASoD,MAAU1F,EAAQ0F,OAC3B4B,EAAesB,KAAKilC,EAAAA,cAAC1D,IAAAjqC,EAAAA,EAAAA,GAAA,GAAc6oC,GAAqBzmC,QAAcpC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CAKtE0H,UAAW,iBACR3F,GAAA,IACHslB,SAAUumB,EAAAA,UACVzkC,SAAU/B,GAEd,ECnDO,SAASymC,GAAQ/tC,GACtB,IAAQC,EAA0BD,EAA1BW,KAAMsB,EAAoBjC,EAApBwU,MAAO3U,EAAaG,EAAbqJ,SACfhH,EAAa8R,GAAgBlU,EAAMgC,GACnCK,EAAS+N,KACf,OAAOhO,EAAWQ,SAASP,EAAOilB,UAAyBymB,EAAAA,cAAAA,EAAAA,SAAA,KAAGnuC,GAAe,IAC/E,CCbO,SAASouC,GAAajuC,GAC3B,IAAQC,EAAwBD,EAAxBqJ,SAAUpH,EAAcjC,EAAd4H,UAClB,OAAK3H,EAGEiuC,EAAAA,cAACpuC,IAAAI,EAAAA,EAAAA,GAAA,GADU,CAAE0H,UAAA3F,EAAWoH,SAAApJ,KAFT,IAIxB,CCNO,SAASkuC,GAAUnuC,GACxB,IAAQC,EAAwBD,EAAxBqJ,SAAUpH,EAAcjC,EAAd4H,UAClB,OAAK3H,EAEEmuC,EAAAA,cAACtuC,IAAAI,EAAAA,EAAAA,GAAA,GADU,CAAE0H,UAAA3F,EAAWoH,SAAApJ,KADT,IAGxB,CCXO,IAAMouC,GAAc,SAAAruC,GAAA,OAClBgmC,WAAWld,OAAOwlB,eAAeC,QAAQvuC,IAAQ,IAG7CwuC,GAAa,SAACxuC,EAAaC,GACtC+lC,WAAWld,OAAOwlB,eAAeG,QAAQzuC,EAAK4rB,OAAO3rB,GACvD,ECHayuC,GAAYC,EAAAA,YAAsD,SAAC3uC,EAAOC,GAAA,OACrF0uC,EAAAA,cAAC,SAAAzuC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWF,GAAA,IAAQG,IAAKF,IAC3B,G","sources":["../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityContext.ts","../node_modules/@moviemasher/client-react/src/Utilities/View.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Label.ts","../node_modules/@moviemasher/client-react/src/Components/Collapse/CollapseContext.ts","../node_modules/@moviemasher/client-react/src/Components/Masher/MasherContext.ts","../node_modules/@moviemasher/client-react/src/Hooks/useEditorActivity.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/Activity.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityContentContext.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityItem.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityLabel.tsx","../node_modules/@moviemasher/client-react/src/Setup/Problems.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityPicked.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityPicker.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityProgress.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Bar.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/Panel.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/PanelFoot.tsx","../node_modules/@moviemasher/client-react/src/Components/Collapse/CollapseControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Collapse/NotCollapsed.tsx","../node_modules/@moviemasher/client-react/src/Components/Collapse/Collapsed.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserContext.ts","../node_modules/@moviemasher/client-react/src/Hooks/useEditorDefinitions.ts","../node_modules/@moviemasher/client-react/src/Hooks/useClient.ts","../node_modules/@moviemasher/client-react/src/Hooks/useEditor.ts","../node_modules/@moviemasher/client-react/src/Hooks/useApiDefinitions.ts","../node_modules/@moviemasher/client-react/src/Hooks/useDefinitions.ts","../node_modules/@moviemasher/client-react/src/Hooks/useRefresh.ts","../node_modules/@moviemasher/client-react/src/Components/Browser/Browser.tsx","../node_modules/@moviemasher/client-react/src/Contexts/DefinitionContext.ts","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserContent.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Props.ts","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserPicker.tsx","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserControl.tsx","../node_modules/@moviemasher/client-react/src/Components/DefinitionItem/useDefinition.ts","../node_modules/@moviemasher/client-react/src/Components/DefinitionItem/DefinitionItem.tsx","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/ClipItem/ClipContext.ts","../node_modules/@moviemasher/client-react/src/Contexts/TrackContext.ts","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineContext.ts","../node_modules/@moviemasher/client-react/src/Hooks/useListeners.ts","../node_modules/@moviemasher/client-react/src/Components/ClipItem/ClipItem.tsx","../node_modules/@moviemasher/client-react/src/Components/ClipItem/useClip.ts","../node_modules/@moviemasher/client-react/src/Components/Controls/CreateEditedControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EditorRedoButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EditorRemoveButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EditorUndoButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EncodeControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/SaveControl.tsx","../node_modules/@moviemasher/client-react/client-react-deleted/ApiClient/ApiContext.ts","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorContext.ts","../node_modules/@moviemasher/client-react/src/Components/Controls/SelectEditedControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/ViewControl.tsx","../node_modules/@moviemasher/client-react/src/Setup/Constants.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/DataTypeInputs.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/InputContext.ts","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/BooleanTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/DefinitionDrop.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/DefinitionSelect.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/IconTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/NumericTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Slider.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/PercentTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/RgbTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/TextTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/OptionTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/DataGroupInputs.ts","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/ColorGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorMovable.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorProperty.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorProperties.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Button.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/MovablesGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/OpacityGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/PointGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/SizeGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/OptionGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inspector.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorPicked.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorPicker.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Element.ts","../node_modules/@moviemasher/client-react/src/Components/Masher/Masher.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerContext.ts","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerTimeControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerPlaying.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerNotPlaying.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerTime.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineScrubberElement.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineTrack.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineSizer.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineZoomer.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineTracks.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineScrubber.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineAddTrackControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineTrackIcon.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineZoom.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineAddClipControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/Player.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/Timeline.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/Panels.tsx","../node_modules/@moviemasher/client-react/src/Components/Masher/MasherDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Masher/Mashing.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/PanelContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/PanelHead.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Session.ts","../node_modules/@moviemasher/client-react/src/Utilities/VideoView.tsx"],"sourcesContent":["import React from 'react'\nimport { \n  EmptyMethod, isObject, isPopulatedString, errorThrow, Identified,\n} from '@moviemasher/moviemasher.js'\nimport { ActivityInfo } from \"@moviemasher/client-core\"\n\nimport { labelInterpolate, labelTranslate } from '../../Utilities/Label'\n\nexport const activityLabel = (info: any): string => {\n  if (!isObject(info)) return ''\n\n  const { label, error, type, value } = info as ActivityInfo\n  if (error) {\n    if (value) return labelInterpolate(error, { value })\n    return labelTranslate(error)\n  }\n\n  // switch(type) {\n  //   case ActivityType.Complete:\n  //   case ActivityType.Analyze:\n  //   case ActivityType.Render:\n  //   case ActivityType.Load: return labelTranslate(type)\n    \n  // }\n\n  // if (label) return label\n  return labelTranslate(type)\n}\n\nexport enum ActivityGroup {\n  Active = 'active',\n  Error = 'error',\n  Complete = 'complete',\n}\nexport const ActivityGroups = Object.values(ActivityGroup)\nexport const isActivityGroup = (type?: any): type is ActivityGroup => {\n  return isPopulatedString(type) && ActivityGroups.includes(type as ActivityGroup)\n}\nexport function assertActivityGroup(value: any, name?: string): asserts value is ActivityGroup {\n  if (!isActivityGroup(value)) errorThrow(value, \"ActivityGroup\", name)\n}\n\nexport interface ActivityObject extends Identified {\n  infos: ActivityInfo[]\n  activityGroup: ActivityGroup\n}\nexport type ActivityObjects = ActivityObject[]\n\nexport interface ActivityContextInterface {\n  label: string\n  activities: ActivityObjects\n  allActivities: ActivityObjects\n  picked: ActivityGroup\n  pick: (activityGroup: ActivityGroup) => void\n}\n\nexport const ActivityContextDefault: ActivityContextInterface = {\n  label: '',\n  activities: [],\n  allActivities: [],\n  picked: ActivityGroup.Active,\n  pick: EmptyMethod\n}\n\nexport const ActivityContext = React.createContext(ActivityContextDefault)\n","import React from 'react'\nimport { UnknownRecord } from '@moviemasher/moviemasher.js'\n\nexport const View = React.forwardRef<HTMLDivElement, UnknownRecord>((props, ref) =>\n  <div ref={ref} {...props} />\n)\n","import { isString, NestedStringRecord, StringRecord } from \"@moviemasher/moviemasher.js\"\n\nconst LabelRegex = /{{([a-z0-9_]*)}}/\n\n\nexport const labelObjects: NestedStringRecord = {\n  internal: 'Internal Error',\n  client: { internal: 'Internal Client Error' },\n  import: {\n    bytes: 'Size above {{value}}',\n    extension: 'Extension {{value}}',\n    type: 'Type {{value}}',\n    size: 'Dimensions {{value}}',\n    duration: 'Duration {{value}}',\n    render: '{{value}}',\n    displaySize: '{{width}}x{{height}}',\n  }\n}\nexport const labels: StringRecord = {\n  audible: 'Audible',\n  clip: 'Clip',\n  update: 'Save',\n  delete: 'Remove {{type}}',\n  unlabeled: 'Unlabeled {{type}}',\n  analyze: 'Analyzing...',\n  load: 'Loading...',\n  complete: 'Completed',\n  create: 'New',\n  render: 'Render',\n  view: 'View',\n  open: 'Open...',\n  undo: 'Undo',\n  redo: 'Redo',\n  mash: 'Mash',\n}\n\nexport const labelLookup = (id: string): string => {\n  let object: any = labelObjects\n  const components = id.split('.') \n  for (const component of components) {\n    const child = object[component]\n    if (isString(child)) return child\n\n    object = child\n  }\n  return ''\n}\n\nexport const labelTranslate = (id: string): string => {\n  if (id.includes('.')) return labelLookup(id)\n\n  return labels[id] || id\n}\n\nexport const labelInterpolate = (id: string, context: StringRecord): string => {\n  let translated = labelTranslate(id)\n  \n  const matches = translated.match(LabelRegex)\n  if (!matches) return translated\n\n  matches.forEach((match, index) => {\n    if (!index) return\n    const search = `{{${match}}}`\n    const replace = labelTranslate(context[match])\n    \n    translated = translated.replace(search, replace)\n  })\n\n  return translated\n}\n","import React from 'react'\nimport { BooleanSetter } from '@moviemasher/moviemasher.js'\n\nexport interface CollapseContextInterface {\n  collapsed: boolean,\n  changeCollapsed: BooleanSetter\n}\n\nexport const CollapseContextDefault: CollapseContextInterface = {\n  collapsed: false,\n  changeCollapsed: () => {},\n}\n\nexport const CollapseContext = React.createContext(CollapseContextDefault)\n","import React from 'react'\nimport { \n  BooleanSetter,\n  Editor, EditorIndex, EmptyMethod, Media, ScalarRecord\n} from '@moviemasher/moviemasher.js'\n\nimport { Client, Draggable } from '@moviemasher/client-core'\nimport { ThemeIcons } from '../../declarations'\n\nexport interface MasherContextInterface {\n  client?: Client\n  streaming: boolean\n  setStreaming: BooleanSetter\n  current: ScalarRecord\n  changeDefinition: (definition?: Media) => void\n  drop: (draggable: Draggable, editorIndex?: EditorIndex) => Promise<Media[]>\n  editor?: Editor\n  editorIndex: EditorIndex\n  icons: ThemeIcons\n}\n\nexport const MasherContextDefault: MasherContextInterface = {\n  streaming: false,\n  setStreaming: EmptyMethod,\n  current: {},\n  changeDefinition: EmptyMethod,\n  drop: () => Promise.resolve([]),\n  editorIndex: {},\n  icons: {},\n}\n\nexport const MasherContext = React.createContext(MasherContextDefault)\n","import React from \"react\"\nimport { assertDefined, EventType, isEventType,  Editor } from \"@moviemasher/moviemasher.js\"\n\nimport { ActivityInfo, ActivityType } from \"@moviemasher/client-core\"\n\n\nimport { ActivityGroup, ActivityObject, ActivityObjects } from \"../Components/Activity/ActivityContext\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useEditorActivity = (): [Editor, ActivityObjects] => {\n  // console.log(\"useEditorActivity\")\n  const masherContext = React.useContext(MasherContext)\n  const { editor } = masherContext\n  assertDefined(editor)\n\n  const allActivitiesRef = React.useRef<ActivityObjects>([])\n  const { eventTarget } = editor\n  \n  const getSnapshot = () => {\n    return allActivitiesRef.current\n  }\n\n  const handleEvent = (event: Event) => {\n    const { type } = event\n    if (isEventType(type) && (event instanceof CustomEvent)) {\n      const info: ActivityInfo = event.detail\n      const { id, type } = info\n      const { current: allActivities } = allActivitiesRef\n      const existing = allActivities.find(activity => activity.id === id)\n\n      const activity: ActivityObject = existing || { id, activityGroup: ActivityGroup.Active, infos: [] }\n      activity.infos.unshift(info)\n      if (type === ActivityType.Complete) activity.activityGroup = ActivityGroup.Complete\n      else if (type === ActivityType.Error) {\n        activity.activityGroup = ActivityGroup.Error\n      }\n      if (!existing) allActivities.unshift(activity)\n    }\n  }\n  const externalStore = React.useSyncExternalStore<ActivityObjects>((callback) => {\n    eventTarget.addEventListener(EventType.Active, callback)\n    return () => {\n      eventTarget.removeEventListener(EventType.Active, callback)\n    }\n  }, getSnapshot)\n\n  const removeListener = () => {\n    eventTarget.removeEventListener(EventType.Active, handleEvent)\n  }\n\n  const addListener = () => {\n    eventTarget.addEventListener(EventType.Active, handleEvent)\n\n    return () => { removeListener() }\n  }\n\n  React.useEffect(() => addListener(), [])\n  \n  return [editor, externalStore]\n}","import React from \"react\"\nimport { ClassCollapsed } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContext, ActivityContextInterface, ActivityGroup, \n  assertActivityGroup \n} from \"./ActivityContext\"\nimport { CollapseContext, CollapseContextInterface } from \"../Collapse/CollapseContext\"\nimport { useEditorActivity } from \"../../Hooks/useEditorActivity\"\n\nexport interface ActivityProps extends PropsWithChildren, WithClassName {\n  initialPicked?: string\n  initialCollapsed?: boolean\n}\n\n/**\n * @parents Masher\n * @children ActivityContent\n */\nexport function Activity(props: ActivityProps): ReactResult {\n  const { \n    initialPicked = ActivityGroup.Active, \n    initialCollapsed = false, \n    className,\n    ...rest \n  } = props\n  assertActivityGroup(initialPicked)\n\n  const [collapsed, setCollapsed] = React.useState(initialCollapsed)\n  const [label, setLabel] = React.useState('')\n\n  const [editor, activity] = useEditorActivity() \n  const [picked, setPicked] = React.useState(initialPicked)\n\n  const filteredActivities = React.useMemo(() => {\n    // console.log(\"filteredActivities\", picked, allActivities.length)\n    return activity.filter(activity => activity.activityGroup === picked)\n  }, [picked, activity.length])\n\n  const activityContext: ActivityContextInterface = { \n    activities: filteredActivities, \n    allActivities: activity, \n    picked, pick: setPicked, label\n  }\n\n\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed: setCollapsed }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (collapsed) classes.push(ClassCollapsed)\n\n  const viewProps = { ...rest, className: classes.join(' ') }\n\n  return (\n    <ActivityContext.Provider value={activityContext}>\n      <CollapseContext.Provider value={collapseContext}>\n        <View { ...viewProps } />\n      </CollapseContext.Provider>\n    </ActivityContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { ActivityGroup, ActivityObject } from './ActivityContext'\n\nexport const ActivityContentContextDefault: ActivityObject = {\n  infos: [],\n  activityGroup: ActivityGroup.Active,\n  id: '',\n}\n\nexport const ActivityContentContext = React.createContext(ActivityContentContextDefault)\n","import React from \"react\"\nimport { assertTrue } from \"@moviemasher/moviemasher.js\"\n\nimport { WithClassName, ReactResult, PropsAndChild } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContext } from \"./ActivityContext\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\nimport { CollapseContext } from \"../Collapse/CollapseContext\"\n\nexport interface ActivityContentProps extends WithClassName, PropsAndChild {}\n\n/**\n * @parents Activity\n * @children ActivityItem\n */\nexport function ActivityContent(props: ActivityContentProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed } = collapseContext\n  const { activities } = activityContext\n  if (collapsed) return null\n\n  const { children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const viewChildren = activities.map(activity => {\n    const children = React.cloneElement(child)\n    const contextProps = { children, value: activity, key: activity.id }\n    const context = <ActivityContentContext.Provider { ...contextProps } />\n    return context\n  })\n  const viewProps = { ...rest, children: viewChildren }\n  return <View {...viewProps} />\n}\n","import React from \"react\"\n\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { CollapseContext, CollapseContextInterface } from \"../Collapse/CollapseContext\"\n\nexport interface ActivityItemProps extends PropsWithChildren, WithClassName {\n  collapsed?: boolean\n}\n\n/**\n * @parents ActivityContent\n * @children ActivityLabel, ActivityPicked, CollapseControl\n */\nexport function ActivityItem(props: ActivityItemProps): ReactResult {\n  const { collapsed: collapsedProp, ...rest } = props\n\n  const [collapsed, changeCollapsed] = React.useState(!!collapsedProp)\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed }\n\n  return (\n    <CollapseContext.Provider value={collapseContext}>\n      <View { ...rest } />\n    </CollapseContext.Provider>\n  )\n}\n","import React from \"react\"\nimport { UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { ReactResult, WithClassName } from \"../../declarations\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\nimport { activityLabel } from \"./ActivityContext\"\nimport { CollapseContext } from \"../Collapse/CollapseContext\"\nimport { View } from \"../../Utilities/View\"\n\n/**\n * @parents ActivityItem\n */\n export function ActivityLabel(props: WithClassName): ReactResult {\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed } = collapseContext\n  \n  const activityContentContext = React.useContext(ActivityContentContext)\n  const { infos } = activityContentContext\n  const [firstInfo] = infos\n  const labeledInfo = infos.find(info => info.label) || { label: '' }\n  const label = labeledInfo.label || firstInfo.type \n  const viewProps: UnknownRecord = { ...props }\n  if (collapsed) viewProps.children = label\n  else {\n    const labels = [ label, ...infos.map(info => activityLabel(info))]\n    viewProps.children = labels.map((label, i) => <View key={i} children={label} />)\n  }\n  return <View { ...viewProps } />\n }","\nexport const Problems = {\n  child: 'single child element expected',\n}\n","import React from 'react'\nimport { Identified, assertTrue } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult } from '../../declarations'\nimport { Problems } from '../../Setup/Problems'\nimport { ActivityContext, assertActivityGroup } from './ActivityContext'\n\nexport interface ActivityPickedProps extends Identified, PropsAndChild {}\n\n/**\n * @parents ActivityContent\n */\nexport function ActivityPicked(props: ActivityPickedProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const { id, children } = props\n  assertActivityGroup(id)\n\n  const { picked } = activityContext\n  if (id !== picked) return null\n\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n\n  return child\n  // return React.cloneElement(child, { key: id })\n}\n","import React from \"react\"\nimport { Identified, assertTrue, ClassSelected } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { Problems } from \"../../Setup/Problems\"\nimport { ActivityContext, assertActivityGroup } from \"./ActivityContext\"\n\nexport interface ActivityPickerProps extends PropsAndChild, WithClassName, Identified {}\n/**\n * @parents ActivityContent\n */\n export function ActivityPicker(props: ActivityPickerProps): ReactResult {\n  const { id, className, children, ...rest } = props\n  assertActivityGroup(id)\n\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n\n  const activityContext = React.useContext(ActivityContext)\n  const { picked, pick } = activityContext\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (id === picked) classes.push(ClassSelected)\n\n  const viewProps = {\n    ...rest,\n    className: classes.join(' '),\n    key: `activity-picker-${id}`,\n    onClick: () => pick(id)\n  }\n\n  return React.cloneElement(child, viewProps)\n }","import React from \"react\"\nimport { \n  assertObject, isAboveZero, isPopulatedArray, isPopulatedString, isPositive \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from \"../../declarations\"\nimport { ActivityContext, ActivityGroup } from \"./ActivityContext\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\n\nexport interface ActivityProgressProps extends PropsWithoutChild, WithClassName {}\n/**\n * @parents Activity\n */\n export function ActivityProgress(props: ActivityProgressProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const activityContentContext = React.useContext(ActivityContentContext)\n  const { infos, id } = activityContentContext\n  const elements: React.ReactChild[] = []\n  let totalSteps = 0\n  let totalStep = 0\n  if (isPopulatedArray(infos)) {\n    const [info] = infos\n    const { step, steps } = info\n    if (isPositive(step) && isAboveZero(steps)) {\n      totalStep = step\n      totalSteps = steps\n    }\n  } else {\n    const { allActivities, label } = activityContext\n    if (isPopulatedString(label)) {\n      elements.push(<label key=\"label\">{label}</label>)\n    }\n    const active = allActivities.filter(activityObject => (\n      activityObject.activityGroup === ActivityGroup.Active\n    ))\n    if (active.length) {\n      active.forEach(activityObject => {\n        const { infos } = activityObject\n        const [info] = infos\n        assertObject(info, 'info')\n\n        const { step, steps } = info\n        if (isPositive(steps)) totalSteps += steps\n        if (isPositive(step)) totalStep += step\n      })\n    }\n  }\n  \n  if (totalSteps) {\n    const progress = totalStep / totalSteps\n    const progressProps = {\n      value: progress, max: 1.0, \n      children: `${Math.round(100.0 * progress)}%`,\n      key: \"progress\",\n    }\n    elements.push(<progress {...progressProps} />)\n  }\n  const viewProps = {\n    ...props, key: 'activity-progress', children: elements\n  }\n  return <View { ...viewProps } />\n }","import React from \"react\"\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../declarations\"\nimport { View } from \"./View\"\n\nexport interface BarOptions {\n  props?: WithClassName\n  before?: React.ReactChild[]\n  after?: React.ReactChild[]\n  content?: React.ReactChild | React.ReactChild[]\n}\n\nexport interface BarProps extends BarOptions, PropsWithoutChild {}\n\nexport function Bar(props: BarProps): ReactResult {\n  const { before, content, after, props: viewProps = {} } = props\n  if (!(before || content || after)) return null\n\n  const children = [before, content, after].filter(Boolean)\n\n  viewProps.children = children\n  return <View {...viewProps}/>\n}\n","import React from 'react'\nimport { CollapseContext, CollapseContextInterface } from '../Collapse/CollapseContext'\n\nimport { PropsAndChildren, ReactResult, ThemeIcons, WithClassName } from \"../../declarations\"\nimport { BarOptions } from '../../Utilities/Bar'\nimport { View } from '../../Utilities/View'\nimport { assertPopulatedObject } from '@moviemasher/moviemasher.js'\n\nexport interface ContentOptions {\n  props?: WithClassName\n  children?: React.ReactElement<WithClassName>\n}\n\nexport interface PanelOptionsStrict {\n  icons: ThemeIcons\n  props: WithClassName\n  header: BarOptions\n  content: ContentOptions\n  footer: BarOptions\n}\n\nexport type PanelOptions = Partial<PanelOptionsStrict>\n\nexport const panelOptionsStrict = (options: PanelOptions): PanelOptionsStrict => {\n  options.header ||= {}\n  options.header.props ||= {}\n  options.header.props.key ||= 'header'\n  options.header.props.className ||= 'head'\n\n  options.content ||= {}\n  options.content.props ||= {}\n  options.content.props.key ||= 'content'\n  options.content.props.className ||= 'content'\n\n  options.footer ||= {}\n  options.footer.props ||= {}\n  options.footer.props.key ||= 'footer'\n  options.footer.props.className ||= 'foot'\n\n  options.props ||= {}\n\n  assertPopulatedObject(options.icons)\n\n  return options as PanelOptionsStrict\n}\n\nexport interface PanelProps extends PropsAndChildren, WithClassName {\n  collapsed?: boolean\n}\n\nexport function Panel(props: PanelProps): ReactResult {\n  const { children, className, collapsed: collapsedProp } = props\n  const [collapsed, changeCollapsed] = React.useState(!!collapsedProp)\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (collapsed) classes.push('collapsed')\n\n  const viewProps = { children, className: classes.join(' ') }\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed }\n  return <CollapseContext.Provider value={collapseContext}>\n    <View {...viewProps} />\n  </CollapseContext.Provider>\n}\n","import React from 'react'\nimport { CollapseContext } from '../Collapse/CollapseContext'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { BarProps } from '../../Utilities/Bar'\nimport { View } from '../../Utilities/View'\n\nexport interface PanelFootProps extends PropsAndChildren, WithClassName {}\n\nexport function PanelFoot(props: BarProps): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  const { collapsed } = panelContext\n  if (collapsed) return null\n\n  const { before, content, after, props: viewProps = {} } = props\n\n  if (!(before || content || after)) return null\n\n  const children = [before, content, after].filter(Boolean)\n\n  viewProps.children = children\n  return <View {...viewProps}/>\n}\n\n","import React from \"react\"\nimport { CollapseContext } from \"./CollapseContext\"\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\n\nexport interface CollapseControlProps extends PropsWithChildren, WithClassName {}\n\nexport function CollapseControl(props: CollapseControlProps): ReactResult {\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed, changeCollapsed: setCollapsed } = collapseContext\n  const viewProps = { \n    ...props, \n    onClick: () => { setCollapsed(!collapsed) },\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { CollapseContext } from './CollapseContext'\n\nexport function NotCollapsed(props: PropsAndChildren): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  if (panelContext.collapsed) return null\n\n  return <>{props.children}</>\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { CollapseContext } from './CollapseContext'\n\nexport function Collapsed(props: PropsAndChildren): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  if (!panelContext.collapsed) return null\n\n  return <>{props.children}</>\n}\n","import React from 'react'\nimport { ClassButton, isUndefined } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { ActivityContent } from './ActivityContent'\nimport { ActivityProps } from './Activity'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { ActivityGroup } from './ActivityContext'\nimport { ActivityPicker } from './ActivityPicker'\nimport { ActivityLabel } from './ActivityLabel'\nimport { PanelFoot } from '../Panel/PanelFoot'\nimport { CollapseControl } from '../Collapse/CollapseControl'\nimport { NotCollapsed } from '../Collapse/NotCollapsed'\nimport { Collapsed } from '../Collapse/Collapsed'\nimport { View } from '../../Utilities/View'\nimport { ActivityProgress } from './ActivityProgress'\nimport { ActivityPicked } from './ActivityPicked'\nimport { ActivityItem } from './ActivityItem'\n\nexport interface ActivityPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const ActivityDefaultProps: PropsMethod<ActivityPropsDefault, ActivityProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'activity'\n  optionsStrict.props.className ||= 'panel activity'\n  optionsStrict.props.initialPicked ||= ActivityGroup.Active\n  if (isUndefined(optionsStrict.props.initialCollapsed)) optionsStrict.props.initialCollapsed = true\n  \n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.activity} />,\n    <NotCollapsed key=\"not-collapsed\"><View key=\"view\" /></NotCollapsed>,\n    <Collapsed key=\"collapsed\">\n      <ActivityProgress key=\"progress\" className='progress' />\n    </Collapsed>,\n    <CollapseControl key=\"collapse-control\">\n      <NotCollapsed key=\"not-collapsed\" children={icons.collapse}/>\n      <Collapsed key=\"collapsed\" children={icons.collapsed}/>\n    </CollapseControl>\n  ]\n\n  optionsStrict.content.children ||= <ActivityItem className='item' collapsed={true}>\n    <CollapseControl key=\"collapse-control\">\n      <NotCollapsed key=\"not-collapsed\" children={icons.collapse}/>\n      <Collapsed key=\"collapsed\" children={icons.collapsed}/>\n    </CollapseControl>\n    <ActivityLabel key=\"label\" className=\"label\" />\n    <ActivityPicked key=\"active\" id=\"active\">\n      <ActivityProgress key=\"progress\" />\n    </ActivityPicked>\n    <ActivityPicked key=\"error\" id=\"error\" children={icons.error} />\n    <ActivityPicked key=\"complete\" id=\"complete\" children={icons.complete} />\n  </ActivityItem>\n  \n  optionsStrict.footer.content ||= [\n    <ActivityPicker key='active' id='active' className={ClassButton} children={icons.active} />,\n    <ActivityPicker key='error' id='error' className={ClassButton} children={icons.error} />,\n    <ActivityPicker key='complete' id='complete' className={ClassButton} children={icons.complete} />,\n  ]\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <ActivityContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </ActivityContent>\n    <PanelFoot {...optionsStrict.footer} />\n  </>\n\n  return { ...optionsStrict.props, children }\n}\n","import React from 'react'\nimport { \n  EmptyMethod, MediaType, MediaArray, StringSetter, VoidMethod \n} from '@moviemasher/moviemasher.js'\n\nexport interface BrowserContextInterface {\n  refresh: VoidMethod\n  addPicker:(id: string, types: MediaType[]) => void\n  definitions: MediaArray\n  pick: StringSetter\n  picked: string,\n  removePicker:(id: string) => void\n}\n\nexport const BrowserContextDefault: BrowserContextInterface = {\n  addPicker: EmptyMethod,\n  refresh: EmptyMethod,\n  definitions: [],\n  pick: EmptyMethod,\n  picked: '',\n  removePicker: EmptyMethod,\n}\n\nexport const BrowserContext = React.createContext(BrowserContextDefault)\n","import React from \"react\"\nimport { \n  assertDefined, EventType, isEventType, Editor, MediaArray, \n  MediaType, isPopulatedArray \n} from \"@moviemasher/moviemasher.js\"\n\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nconst EditorDefinitionsEventAdded = EventType.Added\nconst EditorDefinitionsEventResize = EventType.Resize\nexport const useEditorDefinitions = (types: MediaType[] = []): MediaArray => {\n  const masherContext = React.useContext(MasherContext)\n  const { editor } = masherContext\n  assertDefined(editor)\n\n  const { media } = editor\n\n  const storeRef = React.useRef<Record<string, MediaArray>>({})\n  const { eventTarget } = editor\n  \n  const snapshotInitialize = (): MediaArray => {\n    const lists = types.map(type => media.byType(type))\n    return lists.length === 1 ? lists[0] : lists.flat()\n  }\n\n  const snapshotGet = () => {\n    const key = types.join('-') || 'empty'\n    return storeRef.current[key] ||= snapshotInitialize()\n  }\n\n  const handleEvent = (event: Event) => {\n    const { type } = event\n    if (isEventType(type) && (event instanceof CustomEvent)) {\n      const { detail } = event\n      const { definitionTypes } = detail\n      if (isPopulatedArray(definitionTypes)) {\n        const types = definitionTypes as MediaType[]\n\n        const { current} = storeRef\n        const allIds = Object.keys(current)\n        const ids = allIds.filter(id => types.some(type => id.includes(type)))\n        ids.forEach(id => delete current[id])\n      }\n    }\n  }\n  const externalStore = React.useSyncExternalStore<MediaArray>((callback) => {\n    eventTarget.addEventListener(EditorDefinitionsEventAdded, callback)\n    eventTarget.addEventListener(EditorDefinitionsEventResize, callback)\n    return () => {\n      eventTarget.removeEventListener(EditorDefinitionsEventAdded, callback)\n      eventTarget.removeEventListener(EditorDefinitionsEventResize, callback)\n    }\n  }, snapshotGet)\n\n  const removeListener = () => {\n    eventTarget.removeEventListener(EditorDefinitionsEventAdded, handleEvent)\n  }\n\n  const addListener = () => {\n    eventTarget.addEventListener(EditorDefinitionsEventAdded, handleEvent)\n    return () => { removeListener() }\n  }\n\n  React.useEffect(() => addListener(), [])\n  \n  return externalStore\n}","import React from \"react\"\nimport { Client } from \"@moviemasher/client-core\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useClient = (): Client => React.useContext(MasherContext).client!\n","import React from \"react\"\nimport { Editor } from \"@moviemasher/moviemasher.js\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useEditor = (): Editor => React.useContext(MasherContext).editor!\n","import React from \"react\"\nimport { \n  assertDefined, MediaArray, Endpoints, MediaTypes, \n} from \"@moviemasher/moviemasher.js\"\nimport { \n  ClientArrayResponse, ClientReadOptions, ReadOperation \n} from \"@moviemasher/client-core\"\n\nimport { useClient } from \"./useClient\"\nimport { useEditor } from \"./useEditor\"\n\nconst ApiDefinitionsEvent = 'api-definitions'\nconst ApiDefinitionsDisabled = 'disabled'\nconst ApiDefinitionsEmpty = 'empty'\n\nexport const useApiDefinitions = (types: MediaTypes = []): MediaArray => {\n\n  const client = useClient()\n  if (!client.enabled(ReadOperation)) return []\n\n  const editor = useEditor()\n  assertDefined(editor)\n  \n  const storeRef = React.useRef<Record<string, MediaArray>>({})\n\n  const { eventTarget } = editor\n\n  const definitionsPromise = (key: string) => {\n\n    const options: ClientReadOptions = { type: types }\n    return client.list(options).then((response: ClientArrayResponse) => {\n      console.debug(\"DataDefinitionRetrieveResponse\", Endpoints.data.definition.retrieve, response)\n      const { error, data } = response\n      if (!data) return\n      const array = storeRef.current[key]\n      array.push(...data)\n      eventTarget.dispatchEvent(new CustomEvent(ApiDefinitionsEvent))\n    })\n  }\n  \n  const snapshotInitialize = (key: string): MediaArray => {\n    switch(key) {\n      case ApiDefinitionsEmpty:\n      case ApiDefinitionsDisabled: break\n      default: definitionsPromise(key) \n    }\n    return []\n  }\n\n  const currentKey = () => {\n    if (!types.length) return ApiDefinitionsEmpty\n\n    return types.join('-')\n  }\n\n  const snapshotGet = () => {\n    const key = currentKey()\n    const array = storeRef.current[key]\n    if (array) return array\n    \n    // console.log(\"useApiDefinitions defining\", key)\n    return storeRef.current[key] = snapshotInitialize(key)\n  }\n\n  const externalStore = React.useSyncExternalStore<MediaArray>((callback) => {\n    eventTarget.addEventListener(ApiDefinitionsEvent, callback)\n    return () => {\n      eventTarget.removeEventListener(ApiDefinitionsEvent, callback)\n    }\n  }, snapshotGet)\n  \n  return externalStore\n}","import { \n  Editor, MediaArray, MediaType\n} from \"@moviemasher/moviemasher.js\"\n\nimport { useEditorDefinitions } from \"./useEditorDefinitions\"\nimport { useApiDefinitions } from \"./useApiDefinitions\"\n\nexport const useDefinitions = (types: MediaType[] = []): MediaArray => {\n  const editorDefinitions = useEditorDefinitions(types)\n  const apiDefinitions = useApiDefinitions(types)\n  const definitions = apiDefinitions.filter(apiDefinition => \n    !editorDefinitions.some(editorDefinition => editorDefinition.id === apiDefinition.id)\n  )\n  const combined = [...editorDefinitions, ...definitions]\n  // console.log(\"useDefinitions\", combined.length, types.join(', '))\n  return combined\n}","import React from \"react\"\n\n\nexport const useRefresh = (): [(...args: any[]) => void, number] => {\n  const [nonce, setNonce] = React.useState(0)\n  const updateNonce = () => { setNonce(new Date().valueOf()) }\n  return [updateNonce, nonce]\n}","import React from \"react\"\nimport { \n  assertPopulatedString, MediaType, MediaTypesRecord\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { BrowserContext, BrowserContextInterface } from \"./BrowserContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { useDefinitions } from \"../../Hooks/useDefinitions\"\nimport { useRefresh } from \"../../Hooks/useRefresh\"\n\n\nexport interface BrowserProps extends PropsWithChildren {\n  initialPicked?: string\n}\n\n/**\n * @parents Masher\n * @children BrowserContent, BrowserPicker\n */\nexport function Browser(props: BrowserProps): ReactResult {\n  const { initialPicked = 'container', ...rest } = props\n\n  const [typesObject, setTypesObject] = React.useState<MediaTypesRecord>({})\n  const editorContext = React.useContext(MasherContext)\n  const { changeDefinition } = editorContext\n  const [refresh] = useRefresh()\n  const [ picked, setPicked] = React.useState(initialPicked) \n  const pick = (id: string) => {\n    assertPopulatedString(id)\n    changeDefinition()\n    setPicked(id)\n  }\n\n  const definitions = useDefinitions(typesObject[picked])\n\n  const addPicker = (id: string, types: MediaType[]) => {\n    setTypesObject(original => ({ ...original, [id]: types }))\n  }\n\n  const removePicker = (id: string): void => {\n    setTypesObject(original => ({ ...original, [id]: [] }))\n  }\n\n  const browserContext: BrowserContextInterface = {\n    refresh,\n    definitions,\n    picked,\n    pick, \n    addPicker, \n    removePicker,\n  }\n\n  const contextProps = {\n    value: browserContext,\n    children: <View {...rest} />\n  }\n  return (\n    <BrowserContext.Provider { ...contextProps } />\n  )\n}\n","import React from 'react'\nimport { Media } from '@moviemasher/moviemasher.js'\n\nexport interface DefinitionContextInterface {\n  definition?: Media\n}\n\nexport const DefinitionContextDefault: DefinitionContextInterface = {\n}\n\nexport const DefinitionContext = React.createContext(DefinitionContextDefault)\n","import React from \"react\"\nimport { \n  assertTrue, ClassDropping, eventStop\n} from \"@moviemasher/moviemasher.js\"\n\nimport { WithClassName, ReactResult, PropsAndChild } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { BrowserContext } from \"./BrowserContext\"\nimport { DefinitionContext } from \"../../Contexts/DefinitionContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { dragTypes, TransferTypeFiles } from \"@moviemasher/client-core\"\n\nexport interface BrowserContentProps extends WithClassName, PropsAndChild {}\n\n/**\n * @parents Browser\n * @children BrowserSource\n */\nexport function BrowserContent(props: BrowserContentProps): ReactResult {\n  const [over, setOver] = React.useState(false)\n  const { className, children, ...rest } = props\n\n  const editorContext = React.useContext(MasherContext)\n  const browserContext = React.useContext(BrowserContext)\n  const definitions = browserContext.definitions || []\n  const { drop } = editorContext\n\n  const dragValid = (dataTransfer?: DataTransfer | null): dataTransfer is DataTransfer => {\n    if (!dataTransfer) return false\n\n    return dragTypes(dataTransfer).includes(TransferTypeFiles)\n  }\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    const { dataTransfer } = event\n    if (dragValid(dataTransfer)) drop(dataTransfer.files)\n  } \n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    setOver(dragValid(event.dataTransfer))\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n  \n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n  \n  const childNodes = () => {\n    const childProps = child.props\n    return definitions.map(definition => {\n      const cloneProps = { ...childProps, key: definition.id }\n      const children = React.cloneElement(child, cloneProps)\n      const contextProps = { children, value: { definition }, key: definition.id }\n      const context = <DefinitionContext.Provider { ...contextProps } />\n      return context\n    })\n  }\n\n  const viewProps = {\n    ...rest, \n    className: classes.join(' '),\n    key: `browser-content`,\n    children: childNodes(), \n    onDrop, onDragOver, onDragLeave,\n\n  }\n  return <View {...viewProps} />\n}\n","import { MediaType, isMediaType, isSelectType, isString, Property, SelectType } from \"@moviemasher/moviemasher.js\"\n\nconst propsStringArray = (string?: string, array?: string | string[], properties?: Property[]): string[] => {\n  if (string) return [string]\n\n  if (!array) return properties ? properties.map(property => property.name) : []\n\n  if (isString(array)) return array.split(',').map(string => string.trim())\n\n  return array\n}\n\nexport const propsMediaTypes = (type?: string, types?: string | string[], id?: string): MediaType[] => {\n  const strings = propsStringArray(type, types)\n  if (id && !strings.length) strings.push(id)\n  const validStrings = strings.filter(string => isMediaType(string))\n  return validStrings.map(string => string as MediaType)\n}\n\n\nexport const propsSelectTypes = (type?: string, types?: string | string[], id?: string): SelectType[] => {\n  const strings = propsStringArray(type, types)\n  if (id && !strings.length) strings.push(id)\n  const validStrings = strings.filter(string => isSelectType(string))\n  return validStrings.map(string => string as SelectType)\n}\n","import React from \"react\"\nimport { \n  ClassSelected, Identified, assertPopulatedString, assertTrue \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsAndChild, ReactResult, WithClassName\n } from \"../../declarations\"\nimport { propsMediaTypes } from \"../../Utilities/Props\"\nimport { BrowserContext } from \"./BrowserContext\"\nimport { Problems } from \"../../Setup/Problems\"\n\nexport interface BrowserPickerProps extends PropsAndChild, Identified, WithClassName {\n  type?: string\n  types?: string | string[]\n}\n\n/**\n * @parents Browser\n */\nexport function BrowserPicker(props: BrowserPickerProps): ReactResult {\n  const { children, type, types, className, id, ...rest } = props\n  assertPopulatedString(id)\n\n  const browserContext = React.useContext(BrowserContext)\n  const { pick, picked, addPicker, removePicker } = browserContext\n\n  const classes = []\n  if (className) classes.push(className)\n  if (picked === id) classes.push(ClassSelected)\n\n  React.useEffect(() => {\n    addPicker(id, propsMediaTypes(type, types, id))\n    return () => { removePicker(id) }\n  }, [])\n\n  const viewProps = { \n    ...rest, \n    className: classes.join(' '),\n    key: `browser-picker-${id}`,\n    onClick: () => { pick(id) }, \n  }\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n   \n  return React.cloneElement(child, viewProps)\n}\n","import React from \"react\"\nimport { assertObject, RawTypes } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { useClient } from \"../../Hooks/useClient\"\n\nconst BrowserControlId = 'upload-control-id'\n\nexport function BrowserControl(props: PropsAndChild): ReactResult {\n  const { children, ...rest } = props\n  const fileInput = React.useRef<HTMLInputElement>(null)\n  const client = useClient()\n  const editorContext = React.useContext(MasherContext)\n  const { drop } = editorContext\n\n\n  const onChange = (event: React.FormEvent<HTMLInputElement>) => {\n    const { files } = event.currentTarget\n    if (files) drop(files)\n  }\n\n  const accept = client.accept()\n  \n  const inputProps = {\n    accept,\n    multiple: true,\n    id: BrowserControlId,\n    onChange,\n    type: 'file',\n    key: 'browser-control-input',\n    ref: fileInput,\n    ...rest,\n  }\n  const input = <input {...inputProps}/>\n\n  if (!React.isValidElement(children)) return input\n\n  const kids = [React.Children.only(children), input]\n\n  const labelProps = {\n    children: kids,\n    key: 'browser-control',\n    htmlFor: BrowserControlId\n  }\n  return <label {...labelProps} />\n}\n","import React from \"react\"\nimport { Media } from \"@moviemasher/moviemasher.js\"\nimport { DefinitionContext } from \"../../Contexts/DefinitionContext\"\n\nexport const useDefinition = (): Media => React.useContext(DefinitionContext).definition!\n","import React from 'react'\nimport { \n  assertTrue,\n  ClassSelected, MediaObject, sizeAboveZero, sizeCopy, sizeScale, Strings, UnknownRecord} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from '../../declarations'\nimport { DragDefinitionObject, DragSuffix } from '@moviemasher/client-core'\nimport { useDefinition } from './useDefinition'\nimport { View } from '../../Utilities/View'\nimport { sizeCeil } from '@moviemasher/moviemasher.js'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { BrowserContext } from '../Browser/BrowserContext'\n\nexport interface DefinitionItemProps extends WithClassName, PropsWithoutChild {\n  draggable?: boolean\n  iconRatio?: number\n}\n\n/**\n * @parents BrowserContent, DefinitionDrop\n */\nexport function DefinitionItem(props: DefinitionItemProps): ReactResult {\n  const { className, iconRatio, ...rest } = props\n  const ratio = iconRatio || 0.25\n  \n  const svgRef = React.useRef<HTMLDivElement>(null)\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const browserContext = React.useContext(BrowserContext)\n  const { refresh } = browserContext\n  const masherContext = React.useContext(MasherContext)\n  const { editor, changeDefinition, current } = masherContext\n  \n  assertTrue(editor)\n\n  const media = useDefinition()\n\n  const { id, label } = media\n \n  const updateRef = async () => {\n    const { rect } = editor\n    const { current } = svgRef\n    if (!(current && sizeAboveZero(rect))) return \n\n    const scaled = sizeCeil(sizeScale(sizeCopy(rect), ratio, ratio))\n    const element = await media.definitionIcon(scaled)\n    if (element) current.replaceChildren(element)\n  }\n\n  React.useEffect(() => { updateRef() }, [])\n  if (svgRef.current) updateRef()\n\n  const childNodes = () => {\n    const nodes = [<View key=\"icon\" ref={svgRef} />]\n    if (label) nodes.unshift(<label key='label'>{label}</label>)\n    return nodes\n  }\n\n  const onPointerDown = (event: Event) => { \n    event.stopPropagation()\n    \n    changeDefinition(media) \n    refresh()\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    onPointerDown(event)\n    const rect = viewRef.current!.getBoundingClientRect()\n    const { left } = rect\n    const { clientX } = event\n    const mediaObject = media.toJSON()\n    const data: DragDefinitionObject = { offset: clientX - left, mediaObject }\n    const json = JSON.stringify(data)\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    dataTransfer.effectAllowed = 'copy'\n    // console.log(\"DefinitionItem.onDragStart\", definition.type + DragSuffix, json)\n    dataTransfer.setData(media.type + DragSuffix, json)\n  }\n\n  const calculateClassName = () => {\n    const classes: Strings = []\n    if (className) classes.push(className)\n    if (current.mediaId === id) classes.push(ClassSelected)\n    return classes.join(' ')\n  }\n\n  const viewProps: UnknownRecord = {\n    ...rest,\n    className,\n    children: childNodes(),\n    ref: viewRef, key: id,\n  }\n  if (props.draggable) {\n    viewProps.onDragStart = onDragStart\n    viewProps.onPointerDown = onPointerDown\n    viewProps.className = calculateClassName()\n  }\n  return <View {...viewProps}/>\n}\n","import React from 'react'\nimport { ClassButton } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { BrowserContent } from './BrowserContent'\nimport { BrowserPicker } from './BrowserPicker'\nimport { BrowserProps } from './Browser'\nimport { BrowserControl } from './BrowserControl'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { DefinitionItem } from '../DefinitionItem/DefinitionItem'\nimport { View } from '../../Utilities/View'\n\nexport interface BrowserPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const BrowserDefaultProps: PropsMethod<BrowserPropsDefault, BrowserProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'browser'\n  optionsStrict.props.className ||= 'panel browser'\n  optionsStrict.props.initialPicked ||= 'container'\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.browser} />\n  ]\n\n  optionsStrict.footer.content ||= [\n    <BrowserPicker key='effect' id='effect' className={ClassButton} children={icons.effect} />,\n    <BrowserPicker key='container' id='container' className={ClassButton} children={icons.container} />,\n    <BrowserPicker key='content' id='content' className={ClassButton} children={icons.content} />,\n  ]\n  optionsStrict.footer.before ||= [\n    <BrowserPicker key='video' id='video' types='video,videosequence' className={ClassButton} children={icons.browserVideo} />,\n    <BrowserPicker key='audio' id='audio' className={ClassButton} children={icons.browserAudio} />,\n    <BrowserPicker key='image' id='image' className={ClassButton} children={icons.browserImage} />,\n    <BrowserPicker key='font' id='font' className={ClassButton} children={icons.browserText} />,\n  ]\n\n  optionsStrict.footer.after ||= [\n    <BrowserControl key='import' children={icons.import} />\n  ]\n\n  optionsStrict.content.children ||= (\n    <DefinitionItem draggable={true} className='definition preview' />\n  )\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <BrowserContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </BrowserContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n  \n  return { ...optionsStrict.props, children }\n}\n","import React from 'react'\nimport { Clip } from '@moviemasher/moviemasher.js'\n\nexport interface ClipContextInterface {\n  prevClipEnd: number\n  clip?: Clip\n}\n\nexport const ClipContextDefault: ClipContextInterface = {\n  prevClipEnd: 0\n}\n\nexport const ClipContext = React.createContext(ClipContextDefault)\n","import React from 'react'\nimport { Track } from '@moviemasher/moviemasher.js'\n\nexport interface TrackContextInterface {\n  track?: Track\n}\n\nexport const TrackContextDefault: TrackContextInterface = {}\n\nexport const TrackContext = React.createContext(TrackContextDefault)\n","import React from 'react'\nimport {\n  EmptyMethod,RectZero,\n  Clip, DroppingPosition, NumberSetter, Rect, Track, VoidMethod, Point\n} from '@moviemasher/moviemasher.js'\n\nexport interface TimelineContextInterface {\n  dragTypeValid(dataTransfer: DataTransfer, clip?: Clip): boolean\n  droppingClip?: Clip\n  droppingPosition?: DroppingPosition | number\n  droppingTrack?: Track\n  frame: number\n  frames: number\n  onDragLeave: (event: DragEvent) => void\n  onDrop: (event: DragEvent) => void\n  rect: Rect\n  refresh: VoidMethod\n  refreshed: number\n  scale: number\n  scroll: Point\n  selectedClip?: Clip\n  selectedTrack?: Track\n  setDroppingClip(_?: Clip): void\n  setDroppingPosition(_: DroppingPosition | number): void\n  setDroppingTrack(_?: Track): void\n  setRect(_:Rect): void\n  setScroll(_:Point): void\n  setZoom: NumberSetter\n  zoom: number\n}\n\nexport const TimelineContextDefault: TimelineContextInterface = {\n  dragTypeValid(): boolean { return false },\n  frame: 0,\n  frames: 0,\n  onDragLeave: EmptyMethod,\n  onDrop: EmptyMethod,\n  rect: RectZero,\n  refreshed: 0, refresh: EmptyMethod,\n  scale: 0,\n  scroll: { x: 0, y: 0 },\n  setDroppingClip: EmptyMethod,\n  setDroppingPosition: EmptyMethod,\n  setDroppingTrack: EmptyMethod,\n  setRect: EmptyMethod,\n  setScroll: EmptyMethod,\n  setZoom: EmptyMethod,\n  zoom: 1,\n}\n\nexport const TimelineContext = React.createContext(TimelineContextDefault)\n","import React from \"react\"\nimport { EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { ListenerCallback } from \"../declarations\"\nimport { useEditor } from \"./useEditor\"\n\nexport interface ListenerEvents extends Partial<Record<EventType, ListenerCallback>> {}\n\nexport const useListeners = (events: ListenerEvents): void => {\n  const editor = useEditor()\n  const { eventTarget } = editor\n\n  const handleEvent = (event : Event) => {\n    const { type } = event\n    const handler = events[type as EventType]\n    if (handler) handler(event)\n  }\n\n  const removeListeners = () => {\n    const keys = Object.keys(events)\n    keys.forEach(eventType => {\n      eventTarget.removeEventListener(eventType, handleEvent)\n    })\n  }\n\n  const addListeners = () => {\n    Object.keys(events).forEach(eventType => {\n      eventTarget.addEventListener(eventType, handleEvent)\n    })\n    return () => { removeListeners() }\n  }\n\n  React.useEffect(() => addListeners(), [])\n}\n","import React from 'react'\nimport {\n  UnknownRecord, DroppingPosition, ClassSelected, eventStop, \n  assertTrue,\n  sizeAboveZero, svgPolygonElement,\n  Size, EventType, isAboveZero, colorToRgb, colorRgbDifference, colorFromRgb, svgPatternElement, idGenerate, svgDefsElement, svgUrl, svgSvgElement, sizeCeil, isEventType, isObject\n} from '@moviemasher/moviemasher.js'\nimport { \n  pixelFromFrame, DragSuffix, droppingPositionClass \n} from '@moviemasher/client-core'\n\nimport { PropsWithoutChild, ReactResult, WithClassName } from '../../declarations'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { TimelineContext } from '../Timeline/TimelineContext'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { ClipContext } from './ClipContext'\nimport { View } from '../../Utilities/View'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { useRefresh } from '../../Hooks/useRefresh'\n\nconst ClipItemRefreshRate = 500\n\nexport interface ClipItemProps extends WithClassName, PropsWithoutChild {}\n/**\n * @parents TimelineTrack\n */\nexport function ClipItem(props: ClipItemProps): ReactResult {\n  const { className, ...rest } = props\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const editor = useEditor()\n  const trackContext = React.useContext(TrackContext)\n  const timelineContext = React.useContext(TimelineContext)\n  \n  const [refresh, nonce] = useRefresh()\n\n  const watchingRef = React.useRef<UnknownRecord>({})\n  const { current: watching } = watchingRef\n  const clipContext = React.useContext(ClipContext)\n  const {\n    droppingPosition, droppingClip, scale, selectedClip, onDrop,\n    dragTypeValid, setDroppingPosition, setDroppingClip, setDroppingTrack, \n    onDragLeave,\n  } = timelineContext\n  const { track } = trackContext\n  const { clip, prevClipEnd} = clipContext\n  assertTrue(clip)\n\n  const backgroundNode = (fill: string, size: Size, spacing: number) => {\n    const rgb = colorToRgb(fill)\n    const differenceRgb = colorRgbDifference(rgb)\n    const forecolor = colorFromRgb(differenceRgb)\n    const framePolygon = svgPolygonElement(size, '', fill)\n    const spaceRect = { \n      x: size.width, y: 0,\n      width: spacing, height: size.height, \n    }\n    const spacePolygon = svgPolygonElement(spaceRect, '', forecolor)\n\n    const patternSize = { \n      width: size.width + spacing, height: size.height\n    }\n    const patternId = idGenerate('pattern')\n    const patternItems = [framePolygon, spacePolygon]\n    const pattern = svgPatternElement(patternSize, patternId, patternItems)\n    const defsElement = svgDefsElement([pattern])\n    const patternedSize = { width: timelineContext.rect.width, height: parentHeight }\n    const patternedPolygon = svgPolygonElement(patternedSize, '', svgUrl(patternId))\n    return svgSvgElement(patternedSize, [defsElement, patternedPolygon])\n  }\n  const getParentHeight = () => {\n    const { current } = svgRef\n    const parent = current?.parentNode\n    if (parent instanceof HTMLDivElement) {\n\n      return parent.offsetHeight // .getBoundingClientRect().height\n    }\n  \n    // console.log(\"ClipItem.getParentHeight NO HEIGHT\", !!current)\n    return 0\n  }\n\n  const [parentHeight, setParentHeight] = React.useState(getParentHeight)\n\n  const { label, frame, frames } = clip\n\n  const getCurrentWidth = () => {\n    if (!(isAboveZero(scale) && isAboveZero(frames))) {\n      // console.log(\"ClipItem getCurrentWidth returing 0\", scale, frames)\n      return 0\n    }\n\n    const currentWidth = pixelFromFrame(frames, scale, 'floor')\n    const { width } = watching\n    if (currentWidth && currentWidth !== width) {\n      watching.width = currentWidth\n      refresh()\n    }\n    return currentWidth\n  }\n\n  const currentWidth = getCurrentWidth()\n\n  const actionCallback = (event: Event) => { \n    // console.log(\"ClipItem actionCallback\", event)\n    if (watching.redraw) return\n    \n    const { type } = event\n    if (!isEventType(type)) return\n    if (!(event instanceof CustomEvent)) return\n    if (type !== EventType.Action) return\n    \n    const { detail } = event\n    if (!detail) return \n    \n    const { action } = detail\n    if (!action) return\n\n    const { target } = action\n    if (!isObject(target)) return\n\n    switch(target) {\n      case clip:\n      case clip.container:\n      case clip.content: break\n      default: {\n        if (action.property === 'color') break\n        return\n      }\n    }    \n    refresh()\n  }\n\n  useListeners({ [EventType.Action]: actionCallback, [EventType.Save]: refresh })\n\n  const frameSize = () => {\n    const { rect } = editor\n    const size = { \n      width: parentHeight * (rect.width / rect.height), height: parentHeight\n    }\n    return sizeCeil(size)\n  }\n\n  const clipSize = (size: Size) => {\n    const { width, height } = size\n    return { width: Math.max(width, currentWidth), height }\n  }\n\n  const populateSvg = (): Promise<void> => {\n    const { width, redraw } = watching\n    delete watching.timeout \n    delete watching.redraw \n    \n    const { current } = svgRef\n    const { mashMedia } = editor\n\n    const allOk = current && mashMedia && width && width === getCurrentWidth()\n    if (redraw || !allOk) {\n      refresh()\n      if (!allOk) return Promise.resolve()\n    }\n    const currentSize = frameSize()\n    const fullSize = clipSize(currentSize)\n    \n    // return Promise.resolve()\n    \n    const promise = clip.clipIcon(fullSize, timelineContext.scale, 2)\n    if (!promise) return Promise.resolve()\n    \n    return promise.then(element => {\n      const latestWidth = getCurrentWidth()\n      if (element && width >= latestWidth) {\n        // console.log(\"ClipItem.populateSvg replacing children\", fullSize)\n        current.replaceChildren(backgroundNode(mashMedia.color, currentSize, 2), element)\n      } //else console.log(\"ClipItem.populateSvg\", !!element, width, \">= ?\", latestWidth)\n    })\n  }\n  \n  const handleChange = () => {\n    if (!parentHeight) {\n      // console.log(\"ClipItem.handleChange no parentHeight\")\n      return setParentHeight(getParentHeight)\n    }\n     \n    const { current } = svgRef\n    const { mashMedia } = editor\n    if (!(current && mashMedia)) return\n\n    if (watching.timeout) {\n      if (!watching.redraw) {\n        // console.log(\"ClipItem.handleChange setting redraw\", nonce, scale, parentHeight)\n        watching.redraw = true\n      }\n      return\n    }\n    // // console.log(\"ClipItem.handleChange setting timeout\", nonce, scale)\n    watching.timeout = setTimeout(populateSvg, ClipItemRefreshRate)\n  }\n\n  React.useEffect(handleChange, [nonce, scale, parentHeight])\n  \n  const onPointerDown = (event: MouseEvent) => { \n    event.stopPropagation()\n    editor.selection.set(clip) \n  }\n\n  const onDragEnd = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n    \n    const { dropEffect } = dataTransfer\n    if (dropEffect === 'none') {\n      editor.removeClip(clip)\n    }\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    onPointerDown(event)\n\n    const { dataTransfer, clientX } = event\n    const { current } = viewRef\n    if (!(dataTransfer && current)) return\n\n    const rect = current.getBoundingClientRect()\n    const { left } = rect\n\n    const data = { offset: clientX - left }\n    const json = JSON.stringify(data)\n    dataTransfer.effectAllowed = 'move'\n    dataTransfer.setData('clip' + DragSuffix, json)\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const definitionType = dragTypeValid(dataTransfer, clip)\n    const pos = definitionType ? DroppingPosition.At : DroppingPosition.None\n    setDroppingTrack(definitionType ? track : undefined)\n    setDroppingClip(definitionType ? clip : undefined)\n    setDroppingPosition(pos)\n  }\n\n  const calculateClassName = (): string => {\n    const selected = clip === selectedClip\n    const classes: string[] = []\n    if (className) classes.push(className)\n    if (selected) classes.push(ClassSelected)\n    if (droppingClip === clip) classes.push(droppingPositionClass(droppingPosition))\n\n    // console.log(\"TimelineClip calculatedClassName\", classes.join(' '))\n    return classes.join(' ')\n  }\n\n  const childNodes = () => {\n    const svgProps: UnknownRecord = {\n      key: \"clip-previews\", ref: svgRef\n    }\n    const size = { width: currentWidth, height: parentHeight }\n    if (sizeAboveZero(size)) {\n      const { width, height } = size\n      svgProps.width = width\n      svgProps.height = height\n      svgProps.viewBox = `0 0 ${width} ${height}`\n    }\n    const nodes = [<svg { ...svgProps } />]\n    if (label) nodes.unshift(<label key='label'>{label}</label>)\n    return nodes\n  }\n\n  const style: UnknownRecord = { width: currentWidth }\n  if (prevClipEnd > -1) {\n    style.marginLeft = pixelFromFrame(frame - prevClipEnd, scale, 'floor')\n  }\n\n  const clipProps = {\n    ...rest,\n    style,\n    className: calculateClassName(),\n    onPointerDown, onDragStart, onDragEnd,\n    onDragOver, onDragLeave, onDrop,\n    onClick: (event: React.MouseEvent) => event.stopPropagation(),\n    draggable: true,\n    ref: viewRef,\n    children: childNodes()\n  }\n\n  return <View { ...clipProps } />\n}\n","import React from \"react\"\nimport { Clip } from \"@moviemasher/moviemasher.js\"\n\nimport { ClipContext } from \"./ClipContext\"\n\nexport const useClip = (): Clip => React.useContext(ClipContext).clip!\n","import React from \"react\"\nimport {\n  EventType, MasherAction} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport function CreateEditedControl(props: PropsAndChild): ReactResult {\n  const { children, ...rest } = props\n  const editor = useEditor()\n  const getDisabled = () => editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n\n  useListeners({\n    [EventType.Action]: updateDisabled,\n    [EventType.Loaded]: updateDisabled,\n    [EventType.Save]: updateDisabled,\n  })\n\n  const onClick = () => {\n    if (disabled) return\n\n    editor.create()\n  }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n\n\n}\n","import React from \"react\"\nimport { MasherAction, EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorRedoButtonProps extends PropsAndChild {}\n\nexport function EditorRedoButton(props: EditorRedoButtonProps): ReactResult {\n\n  const [disabled, setDisabled] = React.useState(true)\n  const editor = useEditor()\n  useListeners({\n    [EventType.Action]: () => { setDisabled(!editor.can(MasherAction.Redo)) }\n  })\n  const { children, ...rest } = props\n  const onClick = () => { editor.redo() }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport { EventType, SelectType, assertSelectType, isEffect, isClip, isTrack } from \"@moviemasher/moviemasher.js\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorRemoveButtonProps extends PropsAndChild {\n  type: string\n}\n\nexport function EditorRemoveButton(props: EditorRemoveButtonProps): ReactResult {\n  const { children, type, ...rest } = props\n  const selectType = type || SelectType.Clip\n  assertSelectType(selectType)\n\n  const editor = useEditor()\n  const [disabled, setDisabled] = React.useState(!editor.selection[selectType])\n  useListeners({\n    [EventType.Selection]: () => { setDisabled(!editor.selection[selectType]) }\n  })\n\n  const onClick = () => {\n    if (disabled) return\n\n    const selectable = editor.selection[selectType]\n    if (isEffect(selectable)) editor.removeEffect(selectable)\n    else if (isClip(selectable)) editor.removeClip(selectable)\n    else if (isTrack(selectable)) editor.removeTrack(selectable)\n  }\n\n  const child = React.Children.only(children)\n\n  const cloneProps = { ...rest, ...child.props, onClick, disabled }\n  return React.cloneElement(child, cloneProps)\n}\n","import React from \"react\"\nimport { MasherAction, EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorUndoButtonProps extends PropsAndChild {}\n\nexport function EditorUndoButton(props: EditorUndoButtonProps): ReactResult {\n  const editor = useEditor()\n  const [disabled, setDisabled] = React.useState(true)\n  useListeners({\n    [EventType.Action]: () => { setDisabled(!editor.can(MasherAction.Undo)) }\n  })\n  const { children, ...rest } = props\n\n  const onClick = () => { editor.undo() }\n\n  const buttonOptions = { ...rest, onClick, disabled: disabled }\n  return  React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport {\n  EventType, MasherAction, assertMashMedia\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { EncodeOperation } from \"@moviemasher/client-core\"\nimport { useClient } from \"../../Hooks/useClient\"\n\nexport function EncodeControl(props: PropsAndChild): ReactResult {\n  const client = useClient()\n  const { children, ...rest } = props\n  const editor = useEditor()\n\n  const getDisabled = () => !editor.can(MasherAction.Render)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => setDisabled(getDisabled())\n  useListeners({\n    [EventType.Save]: updateDisabled,\n    [EventType.Loaded]: updateDisabled,\n    [EventType.Action]: updateDisabled\n  })\n\n  if (!client.enabled(EncodeOperation)) return null\n\n  const onClick = () => {\n    if (disabled) return\n\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n\n    setDisabled(true)\n    client.encode(mashMedia)\n  }\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport {\n  MasherAction, EventType, assertMashMedia,\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useClient } from \"../../Hooks/useClient\"\nimport { WriteOperation } from \"@moviemasher/client-core\"\n\nexport function SaveControl(props:PropsAndChild): ReactResult {\n  const editor = useEditor()\n  const client = useClient()\n\n  const getDisabled = () => !editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n  useListeners({\n    [EventType.Action]: updateDisabled, \n    [EventType.Save]: updateDisabled,\n  })\n\n  if (!client.enabled(WriteOperation)) return null\n\n  const { children, ...rest } = props\n  \n  const onClick = () => {\n    if (disabled) return\n\n    setDisabled(true)\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n    \n    client.save(mashMedia)\n  }\n  \n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from 'react'\nimport { ApiServersResponse, JsonRecord, ServerType, StringSetter } from '@moviemasher/moviemasher.js'\n\nexport interface ApiContextInterface {\n  enabled: boolean\n  servers: ApiServersResponse\n  endpointPromise: (id: string, body?: JsonRecord) => Promise<any>\n}\n\nexport const ApiContextDefault: ApiContextInterface = {\n  enabled: false,\n  servers: {},\n  endpointPromise: () => Promise.resolve({})\n}\n\nexport const ApiContext = React.createContext(ApiContextDefault)\n","import React from 'react'\nimport { \n  EmptyMethod, SelectedItems, SelectType, \n  StringSetter, DataGroup, TimeRange, Time\n} from '@moviemasher/moviemasher.js'\n\nexport type DataGroupBooleans = {\n  [index in DataGroup]?: boolean\n} \n\nexport interface SelectedInfo {\n  tweenDefined: DataGroupBooleans\n  tweenSelected: DataGroupBooleans\n  selectedType: SelectType\n  selectTypes: SelectType[]\n  timeRange?: TimeRange\n  onEdge?: boolean\n  nearStart?: boolean\n  time?: Time\n}\n\nexport type TweenSetter = (group: DataGroup, tweening: boolean) => void\nexport interface InspectorContextInterface {\n  actionCount: number\n  selectedInfo: SelectedInfo\n  selectedItems: SelectedItems\n  changeSelected: StringSetter\n  changeTweening: TweenSetter\n}\n\nexport const InspectorContextDefault: InspectorContextInterface = {\n  actionCount: 0,\n  selectedInfo: {\n    tweenDefined: {},\n    tweenSelected: {},\n    selectedType: SelectType.None,\n    selectTypes: [],\n  },\n  selectedItems: [],\n  changeSelected: EmptyMethod,\n  changeTweening: EmptyMethod,\n}\n\nexport const InspectorContext = React.createContext(InspectorContextDefault)\n","import React from \"react\"\nimport {\n  DataMashRetrieveRequest, DataRetrieveResponse, DataGetRequest,\n  Endpoints, EventType, MasherAction, ServerType, \n  DataMashGetResponse, isEventType, isSelectType, assertObject, \n  isPopulatedString, isPositive, assertTrue, Identified,\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { ApiContext } from \"../../../client-react-deleted/ApiClient/ApiContext\"\nimport { InspectorContext } from \"../Inspector/InspectorContext\"\nimport { labelInterpolate, labelTranslate } from \"../../Utilities/Label\"\nimport { View } from \"../../Utilities/View\"\n\n\ninterface AndLabel {\n  label: string\n}\n\ninterface LabelAndId extends Identified, AndLabel {}\n\nexport interface SelectEditedControlProps extends PropsAndChild, WithClassName {}\n\nexport function SelectEditedControl(props: SelectEditedControlProps): ReactResult {\n  const editor = useEditor()\n  const [requested, setRequested] = React.useState(false)\n  const [described, setDescribed] = React.useState<LabelAndId[]>(() => [])\n\n  const [editedId, setEditedId] = React.useState(editor.mashMedia?.id || '')\n  const apiContext = React.useContext(ApiContext)\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedInfo } = inspectorContext\n  const { selectedType } = selectedInfo\n\n  const [editedLabel, setEditedLabel] = React.useState(editor.mashMedia?.label || '')\n  const getDisabled = () => editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const { enabled, servers, endpointPromise } = apiContext\n\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n\n  const handleEdited = (event: Event) => {\n    const { type } = event\n    if (!(isEventType(type) && isSelectType(type))) return\n    \n    if (type !== selectedType) return\n\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n\n    const { id, label } = mashMedia\n    setDescribed(original => {\n      const copy = original.filter(object => isPopulatedString(object.label))\n      const index = copy.findIndex(object => object.id === id)\n      if (isPositive(index)) copy.splice(index, 1, mashMedia)\n      else copy.push(mashMedia)\n      setEditedId(id)\n      setEditedLabel(label)\n      return copy\n    })\n  }\n\n  const handleAction = () => {\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n\n    const { label } = mashMedia\n    if (editedLabel !== label) {\n      setDescribed(original => [...original])\n      setEditedLabel(label)\n    }\n    updateDisabled()\n  }\n\n  useListeners({\n    [EventType.Action]: handleAction,\n    [EventType.Loaded]: handleEdited,\n    [EventType.Save]: updateDisabled,\n  })\n\n  const onChange: React.ChangeEventHandler<HTMLSelectElement> = (event) => {\n    if (disabled) return\n\n    const { selectedIndex } = event.target\n    const object = described[selectedIndex]\n    assertObject(object, 'described[selectedIndex]')\n\n    const { id } = object\n    const request: DataGetRequest = { id }\n    const { editType } = editor\n    const endpoint = Endpoints.data[editType].get\n    console.debug(\"GetRequest\", endpoint, request)\n    endpointPromise(endpoint, request).then((response: DataMashGetResponse) => {\n      console.debug(\"GetResponse\", endpoint, response)\n      const { error, mash } = response\n      if (error) console.error(\"GetResponse\", endpoint, error)\n      else return editor.load(mash)\n    })\n  }\n\n  React.useEffect(() => {\n    if (!(enabled && servers[ServerType.Data])) return\n    if (requested) return\n\n    setRequested(true)\n    const request: DataMashRetrieveRequest = { partial: true }\n    const endpoint = Endpoints.data[editor.editType].retrieve\n    console.debug(\"RetrieveRequest\", endpoint, request)\n    endpointPromise(endpoint, request).then((response: DataRetrieveResponse) => {\n      console.debug(\"RetrieveResponse\", endpoint, response)\n      const { described, error } = response\n      if (error) console.error(\"RetrieveResponse\", endpoint, error)\n      else setDescribed(original => {\n        const copy = [...original]\n        described.forEach(object => {\n          const { id, label } = object\n          const found = copy.find(object => object.id === id)\n          if (found || !isPopulatedString(label)) return\n          \n          copy.push(object as LabelAndId)\n        })\n        return copy\n      })\n    })\n  }, [servers, enabled])\n\n  if (described.length < 2) return null\n\n  const describedOptions = () => {\n    const { editType, mashMedia } = editor\n    const elements = [<optgroup key=\"group\" label={labelTranslate('open')}/>]\n    if (!mashMedia) return elements\n\n    const { id: editedId, label: editedLabel } = mashMedia\n    elements.push(...described.map(object => {\n      const { label: objectLabel, id } = object\n      const label = (id === editedId) ? editedLabel : objectLabel\n      const children = isPopulatedString(label) ? label : labelInterpolate('unlabeled', { type: editType }) \n      const optionProps = { children, value: id, key: id }\n      const option = <option {...optionProps} />\n      return option\n    }))\n\n    return elements\n  }\n\n  const { children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const selectOptions = {\n    key: \"mashMedia-select\",\n    onChange, disabled, children: describedOptions(), value: editedId\n  }\n  const viewProps = { ...rest, children: [child, <select {...selectOptions} />] }\n  return <View { ...viewProps } />\n}\n","import React from \"react\"\nimport { assertEndpoint, assertMashMedia, endpointFromUrl, endpointUrl, EventType, isMashMedia, urlForEndpoint } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\n\nexport function ViewControl(props: PropsAndChild): ReactResult {\n  const editor = useEditor()\n\n  const getDisabled = () => {\n    const { mashMedia } = editor\n    if (!isMashMedia(mashMedia)) return true\n\n    const { encodings } = mashMedia\n  \n    return !encodings.length\n  }\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => setDisabled(getDisabled())\n  useListeners({\n    [EventType.Render]: updateDisabled,\n    [EventType.Loaded]: updateDisabled\n  })\n\n  const { children, ...rest } = props\n\n  const onClick = () => {\n    if (disabled) return\n\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n    \n    const { encodings } = mashMedia\n    const [encoding] = encodings\n    const {endpoint} = encoding.request\n    assertEndpoint(endpoint)\n    \n    const url = endpointUrl(endpoint)\n    window.open(url)\n  }\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from 'react'\nimport { UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { UnknownElement, ReactResult } from \"../declarations\"\n\nfunction ConstEmptyElementFunction(props: UnknownRecord): ReactResult { return null }\n\nexport const EmptyElement: UnknownElement = <ConstEmptyElementFunction key=\"empty\" />\n\n\nexport const TweenInputKey = 'tween-input-key'\n","import { DataType } from '@moviemasher/moviemasher.js'\n\nimport { UnknownElement } from '../../../../declarations'\nimport { EmptyElement } from '../../../../Setup/Constants'\n\nexport type DataTypeElements = {\n  [key in DataType]: UnknownElement\n}\n\nexport const DataTypeInputs: DataTypeElements = {\n  [DataType.Boolean]: EmptyElement,\n  [DataType.ContainerId]: EmptyElement,\n  [DataType.ContentId]: EmptyElement,\n  [DataType.DefinitionId]: EmptyElement,\n  [DataType.FontId]: EmptyElement,\n  [DataType.Frame]: EmptyElement,\n  [DataType.Icon]: EmptyElement,\n  [DataType.Number]: EmptyElement,\n  [DataType.Percent]: EmptyElement,\n  [DataType.Rgb]: EmptyElement,\n  [DataType.String]: EmptyElement,\n  [DataType.Option]: EmptyElement,\n}\n","import React from 'react'\nimport { \n  Scalar, PropertiedChangeHandler, Property, DataType, Time \n} from \"@moviemasher/moviemasher.js\"\n\nexport interface InputContextInterface {\n  property: Property\n  name: string\n  value: Scalar\n  defaultValue?: Scalar\n  changeHandler?: PropertiedChangeHandler\n  time?: Time\n}\n\nexport const InputContextDefault: InputContextInterface = {\n  value: '',\n  name: '',\n  property: { type: DataType.String, name: '', defaultValue: '' }\n}\n\nexport const InputContext = React.createContext(InputContextDefault)\n","import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from './DataTypeInputs'\n\nexport function BooleanTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n  const inputProps: UnknownRecord = {\n    type: 'checkbox',\n    name,\n    checked: !!value,\n  }\n  if (changeHandler) {\n    inputProps.onChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n      changeHandler(name, event.target.checked)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n}\n\nDataTypeInputs[DataType.Boolean] = <BooleanTypeInput />\n","import React from 'react'\nimport {\n  assertMedia, isMediaType, assertPopulatedString, ClassDropping, DataType, \n  ContainerTypes, ContentTypes, assertTrue, eventStop, isContainerDefinition, MediaObject, isMediaObject, assertDefined\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../../../declarations'\nimport { View } from '../../../../Utilities/View'\nimport { InputContext } from '../InputContext'\nimport { DefinitionContext } from '../../../../Contexts/DefinitionContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { DragDefinitionObject, dragType, dragTypes, dropType, TransferTypeFiles } from '@moviemasher/client-core'\nimport { DefinitionItem } from '../../../DefinitionItem/DefinitionItem'\nimport { propsMediaTypes } from '../../../../Utilities/Props'\nimport { MasherContext } from '../../../Masher/MasherContext'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport interface DefinitionDropProps extends WithClassName, PropsAndChild {\n  type?: string\n  types?: string | string[]\n}\n\nexport function DefinitionDrop(props: DefinitionDropProps): ReactResult {\n  const { type, types, children, className, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const [isOver, setIsOver] = React.useState(false)\n  const inputContext = React.useContext(InputContext)\n  const editorContext = React.useContext(MasherContext)\n  const { drop, editor } = editorContext\n  assertDefined(editor)\n  const { changeHandler, value, name } = inputContext\n  assertTrue(changeHandler)\n  \n  const { media } = editor\n  const mediaTypes = propsMediaTypes(type, types)\n\n  const childNodes = (): React.ReactElement | null => {\n    if (!value) return null\n\n    assertPopulatedString(value)\n    const definition = media.fromId(value)\n    assertMedia(definition)\n\n    const definitionProps = { definition, key: definition.id }\n    const children = React.cloneElement(child, definitionProps)\n    const contextProps = { children, value: { definition } }\n    return <DefinitionContext.Provider {...contextProps} />\n  }\n\n  const dropAllowed = (event: DragEvent): boolean => {\n    const { dataTransfer } = event\n    assertTrue(dataTransfer)\n    \n    const types = dragTypes(dataTransfer)\n    // any file can be dropped - we filter out invalid ones later\n    if (types.includes(TransferTypeFiles)) return true\n\n    const draggingType = dragType(dataTransfer)\n    if (!isMediaType(draggingType)) return false\n\n    return mediaTypes.includes(draggingType)\n  }\n\n  const onDragLeave = () => { setIsOver(false) }\n\n  const onDragOver = (event: DragEvent) => {\n    const allowed = dropAllowed(event)\n    setIsOver(allowed)\n    if (allowed) event.preventDefault()\n  }\n\n  const onDrop = async (event: DragEvent) => {\n    eventStop(event)\n    setIsOver(false)\n    if (!dropAllowed(event)) return\n\n    const { dataTransfer } = event\n    assertTrue(dataTransfer)\n    \n    const types = dragTypes(dataTransfer)\n    // any file can be dropped\n    if (types.includes(TransferTypeFiles)) {\n      await drop(dataTransfer.files).then(definitions => {\n        if (!definitions.length) return\n\n        const container = name === \"containerId\"\n        const valid = container ? definitions.filter(isContainerDefinition) : definitions\n        const [definition] = valid\n        if (definition) {\n          assertTrue(media.installed(definition.id), `${definition.type} installed`)\n          // console.log(\"DefinitionDrop onDrop\", definition.type, definition.label)\n          changeHandler(name, definition.id)\n        }\n      })\n      return\n    }\n    const type = dropType(dataTransfer)!\n    const json = dataTransfer.getData(type)\n    const data: DragDefinitionObject = JSON.parse(json)\n    const { mediaObject } = data\n    if (isMediaObject(mediaObject)) {\n      const [definition] = media.define(mediaObject)\n      if (name === \"containerId\" && !isContainerDefinition(definition)) return\n\n      changeHandler(name, mediaObject.id!)\n    }\n  }\n\n  const calculateClassName = (): string => {\n    const classes = []\n    if (className) classes.push(className)\n    if (isOver) classes.push(ClassDropping)\n    return classes.join(' ')\n  }\n\n  const memoClassName = React.useMemo(calculateClassName, [isOver])\n\n  const viewProps = {\n    ...rest,\n    className: memoClassName,\n    children: childNodes(),\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    value: String(value),\n    key: `${name}-drop`,\n  }\n  return <View {...viewProps} />\n}\n\nDataTypeInputs[DataType.ContainerId] = (\n  <DefinitionDrop types={ContainerTypes} className='definition-drop'>\n    <DefinitionItem className='definition preview'/>\n  </DefinitionDrop>\n)\n\nDataTypeInputs[DataType.ContentId] = (\n  <DefinitionDrop types={ContentTypes} className='definition-drop'>\n    <DefinitionItem className='definition preview' />\n  </DefinitionDrop>\n)\n","import React from 'react'\nimport { assertTrue, DataType, FontType } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function DefinitionSelect(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, value, name } = inputContext\n  const editor = useEditor()\n  const { media } = editor\n  assertTrue(changeHandler)\n  \n  const onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n\n  const options = media.byType(FontType).map(object => {\n    const { id, label } = object\n    const optionProps = { value: id, children: label, key: id }\n    return <option {...optionProps}/>\n  })\n\n  const selectProps = {\n    children: options,\n    name,\n    onChange,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.FontId] = <DefinitionSelect />\n","import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { DataTypeInputs } from './DataTypeInputs'\nimport { InputContext } from '../InputContext'\nimport { MasherContext } from '../../../Masher/MasherContext'\n\nexport function IconTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const names = Object.keys(icons)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n\n  const options = names.map(id => {\n    const optionProps = { value: id, children: id, key: id }\n    return <option {...optionProps} />\n  })\n\n  const selectProps: UnknownRecord = {\n    children: options,\n    name,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  if (changeHandler) {\n    selectProps.onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n  } else selectProps.disabled = true\n\n  \n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.Icon] = <IconTypeInput />\n","import React from 'react'\nimport { DataType, isDefined, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function NumericTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const editor = useEditor()\n  const { changeHandler, property, value, name, time } = inputContext\n  if (!property) return null\n\n  const { min, max, step } = property\n\n\n  const inputProps: UnknownRecord = {\n    type: 'number',\n    name,\n    value: String(value),\n  }\n  if (isDefined(min)) inputProps.min = min\n  if (isDefined(max)) inputProps.max = max\n  if (isDefined(step)) inputProps.step = step\n\n  if (changeHandler) {\n    inputProps.onChange = async (event:React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = event.target\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n\n}\n\nDataTypeInputs[DataType.Number] = <NumericTypeInput />\nDataTypeInputs[DataType.Frame] = <NumericTypeInput />\n","import React from \"react\"\nimport { WithClassName, ReactResult, SliderChangeHandler } from \"../declarations\";\n\nexport interface SliderProps extends WithClassName {\n  value? : number\n  step? : number\n  max? : number\n  min? : number\n  onChange? : SliderChangeHandler\n}\n\nexport function Slider(props: SliderProps): ReactResult {\n  const { className, onChange } = props\n  const options : WithClassName = { ...props }\n  const classes = ['slider']\n  if (className) classes.push(className)\n  options.className = classes.join(' ')\n  if (onChange) {\n    const handleChange = (event : React.ChangeEvent<HTMLInputElement>) => {\n      onChange(event, event.currentTarget.valueAsNumber)\n    }\n    options.onChange = handleChange\n  }\n\n  const input = <input type='range' { ...options } />\n  return input\n}\n","import React from 'react'\nimport { DataType, isArray, isDefined, isNumber, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, SliderChangeHandler } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { Slider } from '../../../../Utilities/Slider'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function PercentTypeInput(): ReactResult {\n  const editor = useEditor()\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value: contextValue, name, time, defaultValue: contextDefault  } = inputContext\n  if (!property) return null\n\n  const { max, min, step, defaultValue: propertyDefault } = property\n  const value = isDefined(contextValue) ? contextValue : (isDefined(contextDefault) ? contextDefault : propertyDefault)\n  const sliderProps: UnknownRecord = {\n    value,\n    min: isNumber(min) ? min : 0.0,\n    max: isNumber(max) ? max : 1.0,\n    step: isNumber(step) ? step : 0.01,\n    name,\n  }\n  if (changeHandler) {\n    const onChange: SliderChangeHandler = async (_event, values) => {\n      const value = isArray(values) ? values[0] : values\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n    sliderProps.onChange = onChange\n  } else sliderProps.disabled = true\n\n  return <Slider className='slider' {...sliderProps} />\n}\n\nDataTypeInputs[DataType.Percent] = <PercentTypeInput />\n","import React from 'react'\nimport { DataType, isDefined, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\nimport { MasherContext } from '../../../Masher/MasherContext'\n\nexport function RgbTypeInput(): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const inputContext = React.useContext(InputContext)\n  const editor = useEditor()\n  const { changeHandler, property, value: contextValue, name, time, defaultValue: contextDefault } = inputContext\n  if (!property) return null\n\n  const { defaultValue: propertyDefault } = property\n\n  const value = isDefined(contextValue) ? contextValue : (isDefined(contextDefault) ? contextDefault : propertyDefault)\n  const colorProps: UnknownRecord = {\n    type: 'color', name, value: String(value),\n  }\n  if (changeHandler) {\n\n    colorProps.onChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = event.target\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n  } else colorProps.disabled = true\n  return <input {...colorProps} />\n}\n\nDataTypeInputs[DataType.Rgb] = <RgbTypeInput />\n","import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\n\nexport function TextTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n  const inputProps: UnknownRecord = {\n    name, type: 'text', value: String(value)\n  }\n  if (changeHandler) {\n    inputProps.onChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n      changeHandler(name, event.target.value)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n}\n\nDataTypeInputs[DataType.String] = <TextTypeInput />\n","import React from 'react'\nimport { DataType, UnknownRecord, assertPopulatedArray } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { DataTypeInputs } from './DataTypeInputs'\nimport { InputContext } from '../InputContext'\n\nexport function OptionTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  const { options } = property\n  assertPopulatedArray(options)\n\n  const ids = options.map(String)\n  const selectProps: UnknownRecord = {\n    children: ids.map(id => {\n    const optionProps = { value: id, children: id, key: id }\n    return <option {...optionProps} />\n  }),\n    name,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  if (changeHandler) {\n    selectProps.onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n  } else selectProps.disabled = true\n\n  \n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.Option] = <OptionTypeInput />\n","import { DataGroup, SelectedItems, SelectType } from \"@moviemasher/moviemasher.js\";\nimport { PropsWithoutChild, UnknownElement, WithClassName } from \"../../../../declarations\"\nimport { EmptyElement } from '../../../../Setup/Constants'\nexport type DataGroupElements = {\n  [key in DataGroup]: UnknownElement\n}\n\nexport interface DataGroupProps extends PropsWithoutChild, WithClassName {\n  selectType?: SelectType\n  selectedItems?: SelectedItems\n}\n\nexport const DataGroupInputs: DataGroupElements = {\n  [DataGroup.Size]: EmptyElement,\n  [DataGroup.Point]: EmptyElement,\n  [DataGroup.Opacity]: EmptyElement,\n  [DataGroup.Color]: EmptyElement,\n  [DataGroup.Effects]: EmptyElement,\n  // [DataGroup.Controls]: EmptyElement,\n  [DataGroup.Timing]: EmptyElement,\n  // [DataGroup.Clicking]: EmptyElement,\n}","import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, \n  DataGroup, selectedPropertyObject, PropertyTweenSuffix,\n  assertTimeRange, tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nexport function ColorGroupInput(props: DataGroupProps): ReactResult {  \n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const editor = useEditor()\n\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  \n  const { changeTweening, selectedInfo } = inspectorContext\n\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Color]\n  const endSelected = tweenSelected[DataGroup.Color]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Color, selectType)\n  const { color, [`color${PropertyTweenSuffix}`]: colorEnd } = byName \n  const colorProperty = endSelected ? colorEnd : color\n\n\n  const { property, changeHandler, value, name: nameOveride } = colorProperty\n  const { type, name: propertyName } = property\n  const name = nameOveride || propertyName\n  const input = DataTypeInputs[type] \n  const inputContext: InputContextInterface = { \n    property, value, name, changeHandler\n  }\n\n  // go to first/last frame if needed and tween value defined...\n  inputContext.time = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  // if we're editing tween value, but it's not defined yet...\n  if (endSelected) {\n    // tell input to use start value as default, rather than the property's...\n    inputContext.defaultValue = color.value\n  }\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Color, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {      \n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Color, true)\n    }\n  }\n  \n  const providerProps = { key: 'context', value: inputContext, children: input }\n\n  const viewProps = {\n    ...rest,\n    key: `inspector-${selectType}-${name}`,\n    children: [\n      icons.color, \n      <InputContext.Provider { ...providerProps } />, \n      <View className=\"start-end\" key='start-end'>\n        <View { ...startProps } />\n        <View { ...endProps } />\n      </View>\n    ]\n  }\n  return <View { ...viewProps } />\n}\n\nDataGroupInputs[DataGroup.Color] = <ColorGroupInput className=\"color tween row\" key=\"color-group-input\" />\n","import React from 'react'\nimport { ClassSelected, IndexHandler, isPopulatedString, Movable } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, WithClassName } from '../../declarations'\nimport { DragSuffix } from '@moviemasher/client-core'\nimport { View } from '../../Utilities/View'\nimport { MasherContext } from '../Masher/MasherContext'\n\nexport interface InspectorMovableProps extends WithClassName {\n  movable: Movable\n  selected: Movable | null\n  select: (movable: Movable | null) => void\n  index: number \n  removeHandler: IndexHandler<Movable>\n  property: string\n}\n\n/**\n * @parents MovablesGroupInput\n */\nexport function InspectorMovable(props: InspectorMovableProps): ReactResult {\n  const { \n    property, className, removeHandler, index, movable, selected, select, ...rest \n  } = props\n  const isSelected = selected === movable\n\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const onMouseDown = () => { if (!isSelected) select(movable) }\n\n  const onDragEnd = (event: DragEvent) => {\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    const { dropEffect } = dataTransfer\n    if (dropEffect === 'none') removeHandler(movable)\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    if (!isSelected) onMouseDown()\n    const data = { index }\n    const json = JSON.stringify(data)\n    const { dataTransfer } = event\n\n    if (!dataTransfer) return \n\n    dataTransfer.effectAllowed = 'move'\n    dataTransfer.setData(`${property}${DragSuffix}`, json)\n  }\n\n  const classes = [className || 'movable']\n  if (isSelected) classes.push(ClassSelected)\n  const viewChildren = []\n\n\n  const label = movable.value('label')\n  const icon = movable.value('icon')\n  if (isPopulatedString(icon)) {\n    const iconElement = icons[icon]\n    if (iconElement) viewChildren.push(iconElement)\n  }\n  if (isPopulatedString(label)) viewChildren.push(label)\n  \n  const viewProps = {\n    ...rest,\n    children: viewChildren,\n    className: classes.join(' '),\n    onMouseDown, onDragStart, onDragEnd,\n    onClick: (event: React.MouseEvent) => event.stopPropagation(),\n    draggable: true,\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { \n  isDefined, PropertiedChangeHandler, Property, Scalar, Time \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from '../../declarations'\nimport { InputContext } from './Inputs/InputContext'\nimport { DataTypeInputs } from './Inputs/DataTypeInputs/DataTypeInputs'\n\nexport interface InspectorPropertyProps extends PropsWithoutChild, WithClassName {\n  property: Property\n  value: Scalar\n  defaultValue?: Scalar\n  changeHandler: PropertiedChangeHandler\n  name: string\n  time?: Time\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorProperty(props: InspectorPropertyProps): ReactResult {\n  const { \n    defaultValue: propsDefault, changeHandler, time, property, value, name\n  } = props\n  \n  const { type, defaultValue: propertyDefault } = property\n  const defaultValue = isDefined(propsDefault) ? propsDefault : propertyDefault\n  const inputContext = { \n    property, value, changeHandler, name, time, defaultValue\n  }\n  const contextProps = {\n    key: 'context', value: inputContext, children: DataTypeInputs[type] \n  }\n  return <InputContext.Provider {...contextProps} />\n}\n","import React from \"react\"\nimport { \n  SelectType, UnknownRecord, isSelectedProperty, SelectedItems, Time,\n  assertDataGroup\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { InspectorProperty, InspectorPropertyProps } from \"./InspectorProperty\"\nimport { InspectorContext } from \"./InspectorContext\"\nimport { DataGroupInputs } from \"./Inputs/DataGroupInputs/DataGroupInputs\"\nimport { View } from \"../../Utilities/View\"\nimport { MasherContext } from \"../Masher/MasherContext\"\n\nexport interface InspectorPropertiesProps extends PropsWithoutChild, WithClassName {\n  selectedItems?: SelectedItems\n  time?: Time\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorProperties(props: InspectorPropertiesProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedItems: propsItems } = props\n  const { selectedItems: inspectorItems } = inspectorContext\n  const selectedItems = propsItems || inspectorItems\n\n  const ungroupedInputs: React.ReactChild[] = []\n  const groupedInputs: React.ReactChild[] = []\n  const groups: UnknownRecord = {} \n  selectedItems.forEach(selectedItem => {\n    if (isSelectedProperty(selectedItem)) {\n      const { property, changeHandler, selectType, value, name: nameOveride } = selectedItem\n      const { name: propertyName, group } = property\n      // console.log(\"InspectorProperties\", selectType, nameOveride, propertyName, group)\n      if (group) {\n        const key = [group, selectType].join('-')\n        if (!groups[key]) {\n          groups[key] = true\n          groupedInputs.push(React.cloneElement(DataGroupInputs[group], { selectType, selectedItems }))\n        }\n        return\n      } \n      \n      const name = nameOveride || propertyName\n\n      const propertyProps: InspectorPropertyProps = {\n        key: `inspector-${selectType}-${name}`,\n        property, value, changeHandler, name, \n        ...props\n      }\n      const icon = icons[name]\n      const inspectorProperty = <InspectorProperty {...propertyProps} />\n      if (icon) {\n        const viewChildren = [inspectorProperty]\n        viewChildren.unshift(icon)\n        const viewProps = {\n          children: viewChildren,\n          className: \"row\",\n          key: `icon-${selectType}-${name}`,\n        }\n\n        ungroupedInputs.push(<View { ...viewProps } />)    \n      } else ungroupedInputs.push(inspectorProperty)    \n      \n    } else {\n      const { name } = selectedItem\n      assertDataGroup(name)\n\n      const groupProps = {\n        key: `inspector-${name}`,\n        selectedMovable: selectedItem,\n      }\n      groupedInputs.push(React.cloneElement(DataGroupInputs[name], groupProps))\n    }\n  })\n  return <>{ungroupedInputs}{groupedInputs}</>\n}\n","import { ClassButton, ClassDisabled, ClassSelected } from \"@moviemasher/moviemasher.js\"\nimport React from \"react\"\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../declarations\"\nimport { View } from \"./View\"\n\nexport interface ButtonProps extends PropsAndChildren, WithClassName {\n  onClick? : (event : React.MouseEvent ) => void\n  useView?: boolean\n  disabled?: boolean\n  selected?: boolean\n}\n\nexport function Button(props: ButtonProps): ReactResult {\n  const { useView, selected, ...rest } = props\n  if (!useView) return <button { ...rest } />\n\n  const { disabled, className, ...pruned } = rest\n  const classes = [ClassButton]\n  if (className) classes.push(className)\n  if (disabled) classes.push(ClassDisabled)\n  else if (selected) classes.push(ClassSelected)\n  const viewProps = {\n    ...pruned,\n    className: classes.join(' ')\n  }\n  return <View { ...viewProps } />\n}\n","import { \n  ClassDropping, SelectedMovable, DataGroup, Movable, \n  assertPopulatedObject, assertDefined, ScalarRecord\n} from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport { PropsWithoutChild, ReactResult } from \"../../../../declarations\"\nimport { dropType } from '@moviemasher/client-core'\nimport { useEditor } from '../../../../Hooks/useEditor'\nimport { View } from '../../../../Utilities/View'\nimport { InspectorMovable, InspectorMovableProps } from '../../InspectorMovable'\nimport { InspectorProperties, InspectorPropertiesProps } from '../../InspectorProperties'\nimport { MasherContext } from '../../../Masher/MasherContext'\nimport { DataGroupInputs } from './DataGroupInputs'\nimport { Button } from '../../../../Utilities/Button'\n\nexport interface MovablesGroupInputProps extends PropsWithoutChild {\n  selectedMovable?: SelectedMovable\n  movableGenerator?: (object: ScalarRecord) => Movable\n  property: string\n}\n/**\n *\n * @children InspectorEffect\n */\nexport function MovablesGroupInput(props: MovablesGroupInputProps): ReactResult {\n  const { movableGenerator, selectedMovable, property, ...rest } = props\n  assertPopulatedObject(selectedMovable)\n\n  const editor = useEditor()\n  const masherContext = React.useContext(MasherContext)\n  const [isOver, setIsOver] = React.useState(false)\n  const [selected, setSelected] = React.useState<Movable | null>(null)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  const memoClassName = React.useMemo((): string => {\n    const classes = ['list']\n    if (isOver) classes.push(ClassDropping)\n    return classes.join(' ')\n  }, [isOver])\n\n  const { icons } = masherContext\n  const { value, addHandler, removeHandler, moveHandler } = selectedMovable\n  const includedMovable = (selected && value.includes(selected)) ? selected : null\n  if (includedMovable !== selected) setSelected(includedMovable)\n\n  const dropIndex = (event: DragEvent): number => {\n    const { target } = event\n    if (target && target instanceof HTMLDivElement) {\n      const index = target.getAttribute('index')\n      if (index) return Number(index)\n    }\n    return value.length\n  }\n\n  const dropAllowed = (event: DragEvent): boolean => (\n    !!dropType(event.dataTransfer)?.startsWith(property)\n  )\n\n  const onDragLeave = () => { setIsOver(false) }\n\n  const onDragOver = (event: DragEvent) => {\n    const allowed = dropAllowed(event)\n    setIsOver(allowed)\n    if (allowed) event.preventDefault()\n  }\n\n  const onDrop = (event: DragEvent) => {\n    setIsOver(false)\n    if (!dropAllowed(event)) return\n\n    event.preventDefault()\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    const type = dropType(dataTransfer)!\n    const json = dataTransfer.getData(type)\n    const data = JSON.parse(json)\n    const { index } = data\n    const droppedIndex = dropIndex(event)\n\n    if (droppedIndex === index) return\n\n    assertDefined(includedMovable)\n    moveHandler(includedMovable, droppedIndex)\n  }\n\n  const onClick: React.MouseEventHandler = () => { setSelected(null) }\n\n  const childNodes = (): React.ReactElement[] => {\n    return value.map((movable, index) => {\n      const clipProps: InspectorMovableProps = {\n        key: movable.id,\n        selected: includedMovable, \n        select: setSelected,\n        movable,\n        index, removeHandler, property\n      }\n      return <InspectorMovable {...clipProps} />\n    })\n  }\n\n  const listViewProps = {\n    children: childNodes(),\n    ref,\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    onClick,\n    key: 'view',\n    className: memoClassName,\n  }\n\n  const removeProps = {\n    disabled: !includedMovable,\n    onClick: () => { removeHandler(includedMovable!) },\n    key: \"remove-button\",\n    children: icons.remove,\n  }\n  const viewChildren = [\n    icons[property],\n    <Button { ...removeProps } />,\n  ]\n  if (movableGenerator) {\n    const addProps = {\n      key: \"add-button\",\n      children: icons.add,\n      onClick: () => { addHandler(movableGenerator({})) }\n    }\n    viewChildren.push(<Button { ...addProps } />)\n  }\n\n  const iconsViewProps = {\n    className: 'icons',\n    children: viewChildren,\n    key: 'icons',\n  }\n\n  const viewProps = {\n    ...rest,\n    key: `${property}s-view`,\n    className: \"row\",\n    children: [\n    <View { ...iconsViewProps } />, \n    <View { ...listViewProps } />, \n  ],\n  }\n  const listView = <View { ...viewProps } />\n  if (!includedMovable) return listView\n\n  const inspectorProps: InspectorPropertiesProps = {\n    selectedItems: includedMovable.selectedItems(editor.actions),\n    key: 'movable-properties',\n  }\n  return <>\n    {listView}\n    <InspectorProperties { ...inspectorProps }/>\n  </>\n}\n\nDataGroupInputs[DataGroup.Effects] = <MovablesGroupInput property=\"effect\" key=\"effects-group-input\" />\n// DataGroupInputs[DataGroup.Controls] = <MovablesGroupInput movableGenerator={controlInstance} property=\"control\" key=\"controls-group-input\" />","import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, DataGroup, \n  selectedPropertyObject, PropertyTweenSuffix, assertTimeRange,\n  tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\n\nexport function OpacityGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const { changeTweening, selectedInfo } = inspectorContext\n\n\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Opacity]\n  const endSelected = tweenSelected[DataGroup.Opacity]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Opacity, selectType)\n  const { opacity, [`opacity${PropertyTweenSuffix}`]: opacityEnd } = byName \n  const opacityProperty = endSelected ? opacityEnd : opacity\n\n  const { property, changeHandler, value, name: nameOveride } = opacityProperty\n\n  const { type, name: propertyName } = property\n  const name = nameOveride || propertyName\n  const input = DataTypeInputs[type] \n  const inputContext: InputContextInterface = { \n    property, value, name, changeHandler\n  }\n  // go to first/last frame if needed and tween value defined...\n  inputContext.time = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  // if we're editing tween value, but it's not defined yet...\n  if (endSelected) {\n    // tell input to use start value as default, rather than the property's...\n    inputContext.defaultValue = opacity.value\n  }\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Opacity, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Opacity, true)\n    }\n  }\n\n  const providerProps = { key: 'context', value: inputContext, children: input }\n\n  const viewProps = {\n    ...rest,\n    key: `inspector-${selectType}-${name}`, \n    children: [\n      icons.opacity, \n      <InputContext.Provider { ...providerProps } />, \n      <View className=\"start-end\" key='start-end'>\n        <View { ...startProps } />\n        <View { ...endProps } />\n      </View>\n    ]\n  }\n  return <View { ...viewProps } />\n}\n\nDataGroupInputs[DataGroup.Opacity] = <OpacityGroupInput className=\"opacity tween row\" key=\"opacity-group-input\" />\n","import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, DataGroup, \n  isDefined, selectedPropertyObject, selectedPropertiesScalarObject, \n  PropertyTweenSuffix, ScalarRecord, assertTimeRange, tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, UnknownElement } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\n\nexport function PointGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n\n \n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n\n  const { changeTweening, selectedInfo } = inspectorContext\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Point]\n  const endSelected = tweenSelected[DataGroup.Point]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Point, selectType)\n  const values: ScalarRecord = selectedPropertiesScalarObject(byName) \n  const { \n    offE, offW, offN, offS, x, y, \n    [`x${PropertyTweenSuffix}`]: xEnd,\n    [`y${PropertyTweenSuffix}`]: yEnd\n  } = byName \n\n  const xProperty = endSelected ? xEnd : x\n  const yProperty = endSelected ? yEnd : y\n\n  const { \n    offE: offEValue, offW: offWValue, offN: offNValue, offS: offSValue\n  } = values\n\n  const elementsByName: Record<string, UnknownElement> = {}\n  const inspectingProperties = [xProperty, yProperty]\n\n  \n  // go to first/last frame if needed and tween value defined...\n  const goTime = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  inspectingProperties.forEach(selectedProperty => {\n    if (!selectedProperty) {\n      console.error(\"PointInput\", xProperty, yProperty)\n      return\n    }\n    const { property, changeHandler, value, name: nameOveride } = selectedProperty\n    const { type, name: propertyName } = property\n    const name = nameOveride || propertyName\n    const baseName = name.replace(PropertyTweenSuffix, '')\n    const input = DataTypeInputs[type] \n    const key = `inspector-${selectType}-${name}`\n    const inputContext: InputContextInterface = { \n      property, value, name, changeHandler, time: goTime\n    }\n \n    // if we're editing tween value, but it's not defined yet...\n    if (endSelected) {\n      // tell input to use start value as default, rather than the property's...\n      inputContext.defaultValue = values[baseName] \n    }\n\n    const providerProps = { key, value: inputContext, children: input }\n    elementsByName[baseName] = <InputContext.Provider { ...providerProps } />  \n  })\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Point, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Point, true)\n    }\n  }\n\n  const legendElements = [\n    icons.point, \n    <View className=\"start-end\" key={`${selectType}-point-start-end`}>\n      <View { ...startProps } />\n      <View { ...endProps } />\n    </View>\n  ]\n\n\n  const xElements = [<View key=\"horz-icon\" children={icons.horz} className={ClassButton} />]\n  const yElements = [<View key=\"vert-icon\" children={icons.vert} className={ClassButton} />]\n\n  if (offE) {\n    const lockOffEProps = { \n      key: \"lock-east\",\n      className: ClassButton,\n      children: offEValue ? icons.unlock : icons.lock, \n      onClick: () => { offE.changeHandler('offE', !offEValue) }\n    }\n    const lockOffE = <View { ...lockOffEProps } />\n\n    xElements.push(lockOffE)\n  }\n  xElements.push( elementsByName.x)\n  if (offW) {\n    const lockOffWProps = { \n      key: \"lock-west\",\n      className: ClassButton,\n      children: offWValue ? icons.unlock : icons.lock, \n      onClick: () => { offW.changeHandler('offW', !offWValue) }\n    }\n    const lockOffW = <View { ...lockOffWProps } />\n    xElements.push(lockOffW)\n  }\n  if (offN) {\n    const lockOffNProps = { \n      key: \"lock-north\",\n      className: ClassButton,\n      children: offNValue ? icons.unlock : icons.lock, \n      onClick: () => { offN.changeHandler('offN', !offNValue) }\n    }\n    const lockOffN = <View { ...lockOffNProps } />\n\n    yElements.push(lockOffN)\n  }\n  yElements.push(elementsByName.y)\n  if (offS) {\n    const lockOffSProps = { \n      key: \"lock-south\",\n      className: ClassButton,\n      children: offSValue ? icons.unlock : icons.lock, \n      onClick: () => { offS.changeHandler('offS', !offSValue) }\n    }\n    const lockOffS = <View { ...lockOffSProps } />\n    yElements.push(lockOffS)\n  }\n  const elements = [\n    <View key=\"x\" children={xElements} />, \n    <View key=\"y\" children={yElements} />\n  ]\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n\n}\n\nDataGroupInputs[DataGroup.Point] = <PointGroupInput key=\"point-input\" />\n","import React from \"react\"\nimport { \n  selectedPropertiesScalarObject, ClassButton, assertString, ClassSelected, \n  DataGroup, Orientation, PropertyTweenSuffix, isOrientation, \n  selectedPropertyObject, ScalarRecord, assertSelectType, assertTime, assertTimeRange, tweenInputTime \n} from \"@moviemasher/moviemasher.js\"\n\n\nimport { PropsAndChild, ReactResult, UnknownElement } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nconst SizeInputOrientations: Record<Orientation, string> = {\n  [Orientation.H]: 'width', [Orientation.V]: 'height'\n}\n\nexport function SizeGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType, 'selectType')\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const { selectedInfo, changeTweening } = inspectorContext\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Size]\n  const endSelected = tweenSelected[DataGroup.Size]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Size, selectType)\n  \n  const { \n    lock, width, height, \n    [`width${PropertyTweenSuffix}`]: widthEnd,\n    [`height${PropertyTweenSuffix}`]: heightEnd\n  } = byName \n  \n  const widthProperty = endSelected ? widthEnd : width\n  const heightProperty = endSelected ? heightEnd : height\n  const values: ScalarRecord = selectedPropertiesScalarObject(byName) \n\n  const { lock: lockValue } = values\n  assertString(lockValue, 'lockValue')\n    \n  const orientation = isOrientation(lockValue) ? lockValue as Orientation : undefined\n  \n  const elementsByName: Record<string, UnknownElement> = {}\n  const inspectingProperties = [widthProperty, heightProperty]\n\n  // go to first/last frame if needed and tween value defined...\n  const goTime = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  inspectingProperties.forEach(selectedProperty => {\n    \n    const { property, changeHandler, value, name: nameOveride } = selectedProperty\n    const { type, name: propertyName } = property\n    const name = nameOveride || propertyName\n    const baseName = name.replace(PropertyTweenSuffix, '')\n    const input = DataTypeInputs[type] \n    const key = `inspector-${selectType}-${name}`\n    const inputContext: InputContextInterface = { \n      property, value, name, time: goTime\n    }\n\n    // if we're editing tween value, but it's not defined yet...\n    if (endSelected) {\n      // tell input to use start value as default, rather than the property's...\n      inputContext.defaultValue = values[baseName] \n    }\n\n    if (!(orientation && baseName === SizeInputOrientations[orientation])) {\n      inputContext.changeHandler = changeHandler\n    }\n    const providerProps = { \n      key, value: inputContext, children: input\n    }\n    elementsByName[baseName] = <InputContext.Provider { ...providerProps } />  \n  })\n  const lockWidthProps = { \n    key: \"lock-width\",\n    className: ClassButton,\n    children: orientation === Orientation.H ? icons.lock : icons.unlock, \n    onClick: () => {\n      const value = orientation === Orientation.H ? \"\" : Orientation.H\n      lock.changeHandler('lock', value)\n    }\n  }\n  const lockWidth = <View { ...lockWidthProps } />\n  const lockHeightProps = { \n    key: \"lock-height\",\n    className: ClassButton,\n    children: orientation === Orientation.V ? icons.lock : icons.unlock, \n    onClick: () => {\n      const value = orientation === Orientation.V ? \"\" : Orientation.V\n      lock.changeHandler('lock', value)\n    }\n  }\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const lockHeight = <View { ...lockHeightProps } />\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Size, false)\n    }\n  }\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Size, true)\n    }\n  }\n  const legendElements = [\n    icons.size,\n    <View className=\"start-end\" key={`${selectType}-size-start-end`}>\n      <View { ...startProps } />\n      <View { ...endProps } />\n    </View>\n  ]\n  const widthElements = [\n    <View key=\"width-icon\" children={icons.width} className={ClassButton} />, \n    elementsByName.width, \n    lockWidth\n  ]\n  const heightElements = [\n    <View key=\"height-icon\" children={icons.height} className={ClassButton} />, \n    elementsByName.height, \n    lockHeight\n  ]\n  const elements = [\n    <View key=\"width\" children={widthElements} />, \n    <View key=\"height\" children={heightElements} />\n  ]\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n}\n\nDataGroupInputs[DataGroup.Size] = <SizeGroupInput key=\"size-group-input\" />\n","import React from \"react\"\nimport { \n  assertSelectType, ClassButton, DataGroup, isPopulatedObject, selectedPropertyObject \n} from \"@moviemasher/moviemasher.js\"\n\nimport { ElementRecord, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { View } from \"../../../../Utilities/View\"\nimport { InspectorProperty, InspectorPropertyProps } from \"../../InspectorProperty\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nexport interface OptionGroupInputProps extends DataGroupProps {\n  dataGroup: DataGroup\n}\n\nexport function OptionGroupInput(props: OptionGroupInputProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const { selectType, selectedItems: propsItems, dataGroup, ...rest } = props\n  assertSelectType(selectType)\n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const byName = selectedPropertyObject(selectedItems, dataGroup, selectType)\n  const elementsByName: ElementRecord = Object.fromEntries(Object.entries(byName).map(([key, selectedProperty]) => {\n    const { property, changeHandler, selectType, value, name: nameOveride } = selectedProperty\n    const { name: propertyName } = property\n    const name = nameOveride || propertyName\n    const propertyProps: InspectorPropertyProps = {\n      key: `inspector-${selectType}-group-${name}`,\n      property, value, changeHandler, name,\n      ...props\n    }\n    return [key, <InspectorProperty {...propertyProps} />]\n  }))\n\n  const { [dataGroup]: input, ...otherElements } = elementsByName\n  const iconElement = icons[dataGroup]\n  if (!isPopulatedObject(otherElements)) {\n    const viewProps = {\n      key: dataGroup, children: [iconElement, input], className: 'row'\n    }\n    return <View { ...viewProps} />\n  }\n\n  const legendElements = [iconElement]\n  if (input) legendElements.push(input)\n  const elements = Object.entries(otherElements).map(([key, value]) => {\n    const icon = icons[key]\n    const children = [value]\n    if (icon) children.unshift(<View key={`${key}-icon`} children={icon} className={ClassButton} />)\n    const frameProps = { key: `${key}-view`, children }\n    return <View { ...frameProps } />\n  })\n\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n}\n\n// [DataGroup.Timing, DataGroup.Clicking].forEach(dataGroup => {\n  const timingProps = { dataGroup: DataGroup.Timing, key: `${DataGroup.Timing}-group-input` }\n  DataGroupInputs[DataGroup.Timing] = <OptionGroupInput { ...timingProps } />\n// })\n","import React from 'react'\nimport { \n  arraySet, assertSelectType, EventType, SelectedItems, SelectType, SelectTypes, \n  assertPositive, assertTrue, timeFromArgs, timeEqualizeRates, assertDataGroup,\n  isSelectedProperty, isDefined, PropertyTweenSuffix, DataGroup, \n  SelectedProperties \n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport {\n  DataGroupBooleans,\n  InspectorContext, InspectorContextDefault, InspectorContextInterface, \n  SelectedInfo\n} from './InspectorContext'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface InspectorProps extends PropsAndChildren, WithClassName {}\n\n/**\n * @parents Masher\n * @children InspectorContent\n */\nexport function Inspector(props: InspectorProps): ReactResult {\n  const editor = useEditor()\n  const [actionCount, setActionCount] = React.useState(() => 0)\n  const info = React.useRef<SelectedInfo>({ \n    tweenDefined: {}, tweenSelected: {}, \n    selectedType: SelectType.None, selectTypes: []\n  })\n  const [orderedTypes, setOrderedTypes] = React.useState<SelectType[]>(() => SelectTypes)\n  const [selectedItems, setSelectedItems] = React.useState<SelectedItems>(() => [])\n  const handleAction = () => { setActionCount(value => value + 1) }\n  const handleSelection = () => {\n    const { selection } = editor\n    const { selectTypes: types, clip, mash } = selection\n    const { current } = info\n    const { selectedType, selectTypes } = current\n    const bestType = orderedTypes.find(type => types.includes(type))\n    assertSelectType(bestType)\n\n    if (bestType !== selectedType) {\n      // console.log(\"setInfo selectedType\", selectedType, \"=>\", bestType, types)\n      current.selectedType = bestType\n    }\n    arraySet(selectTypes, types)\n    \n    const items = editor.selection.selectedItems([bestType])\n    const tweening: DataGroupBooleans = {}\n    if (clip && mash) {\n      const tweenItems = items.filter(item => {\n        if (!isSelectedProperty(item)) return \n\n        const { property, name } = item\n        const { tweenable, group } = property\n        if (!(tweenable && group && name)) return\n\n        return name.endsWith(PropertyTweenSuffix)\n      }) as SelectedProperties\n      // console.log(\"Inspector handleSelection\", tweenItems.length, \"tweenItem(s)\")\n      tweenItems.forEach(item => {\n        const { property, value } = item\n        const { group } = property\n        assertDataGroup(group)\n        tweening[group] = isDefined(value) \n      })  \n\n      if (tweenItems.length) {\n        const { time, quantize } = mash\n        const timeRange = clip.timeRange(quantize)\n        current.time = time\n        current.timeRange = timeRange\n        // console.log(\"Inspector tweening\", time, timeRange)\n        const frame = timeRange.frame + Math.round(timeRange.frames / 2)\n        const halfTime = timeFromArgs(frame, quantize)\n        const [midTime, timeScaled] = timeEqualizeRates(halfTime, time)\n        \n        current.nearStart = midTime.frame > timeScaled.frame\n        const edge = current.nearStart ? timeRange.startTime : timeRange.lastTime\n\n        current.onEdge = time.equalsTime(edge)\n      }\n    }\n    \n    current.tweenDefined = tweening\n\n    setSelectedItems(items)\n    handleAction()\n  }\n  \n  useListeners({\n    [EventType.Action]: handleAction,\n    [EventType.Selection]: handleSelection,\n  })\n\n  const changeSelected = React.useCallback((type: string) => {\n    assertSelectType(type)\n    setOrderedTypes(original => {\n      const index = original.indexOf(type) \n      assertPositive(index) \n      const types = [type]\n      if (index) types.push(...original.slice(0, index))\n      if (index < original.length - 1) types.push(...original.slice(index + 1))\n      assertTrue(types.length === original.length, 'type lengths match')\n      // console.log(\"setOrderedTypes\", original, \"=>\", types)\n      arraySet(original, types)\n      handleSelection()\n      return original\n    })\n    info.current.selectedType = type\n    \n    setSelectedItems(editor.selection.selectedItems([type]))\n  }, [])\n\n  const changeTweening = (group: DataGroup, tweening: boolean): void => {\n    info.current.tweenSelected[group] = tweening\n    handleSelection()\n  }\n  const inspectorContext: InspectorContextInterface = {\n    ...InspectorContextDefault,\n    actionCount, selectedItems,\n    changeSelected, \n    changeTweening, selectedInfo: info.current,\n  }\n\n  return (\n    <InspectorContext.Provider value={inspectorContext}>\n      <View {...props}/>\n    </InspectorContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { PropsWithChildren, ReactResult } from '../../declarations'\nimport { View } from '../../Utilities/View'\n\n/**\n * @parents Inspector\n */\nexport function InspectorContent(props: PropsWithChildren): ReactResult {\n  return <View {...props} />\n}\n","import React from 'react'\nimport { assertPopulatedArray } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../declarations'\nimport { InspectorContext } from './InspectorContext'\nimport { propsSelectTypes } from '../../Utilities/Props'\n\nexport interface InspectorPickedProps {\n  types?: string | string[]\n  type?: string\n  children: React.ReactNode\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorPicked(props: InspectorPickedProps): ReactResult {\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedInfo } = inspectorContext\n  const { selectedType } = selectedInfo\n  const { type, types, children } = props\n  const selectTypes = propsSelectTypes(type, types)\n  assertPopulatedArray(selectTypes)\n  \n  if (!selectTypes.includes(selectedType)) return null\n\n  return <>{children}</>\n}\n","import React from 'react'\nimport { \n  Identified,\n  assertSelectType, ClassSelected, isPopulatedString, SelectType \n} from '@moviemasher/moviemasher.js'\n\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../declarations'\nimport { View } from '../../Utilities/View'\nimport { InspectorContext } from './InspectorContext'\n\n\n\nexport interface InspectorPickerProps extends PropsAndChild, WithClassName, Identified {}\n/**\n * @parents Inspector\n */\n\nexport function InspectorPicker(props: InspectorPickerProps): ReactResult {\n  const { id, children, className } = props\n  assertSelectType(id)\n  \n  const inspectorContext = React.useContext(InspectorContext)\n  const { changeSelected, selectedInfo } = inspectorContext\n  const { selectTypes, selectedType} = selectedInfo\n\n  if (!selectTypes.includes(id)) return null\n\n  const onClick = () => { changeSelected(id) }\n\n  const classes: string[] = []\n  if (isPopulatedString(className)) classes.push(className)\n  if (selectedType === id) classes.push(ClassSelected)\n\n  const viewProps = { children, onClick, className: classes.join(' ') }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { ClassButton, SelectType } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { InspectorProperties } from './InspectorProperties'\nimport { InspectorContent } from './InspectorContent'\nimport { InspectorProps } from './Inspector'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { InspectorPicked } from './InspectorPicked'\nimport { InspectorPicker } from './InspectorPicker'\nimport { EditorRemoveButton } from '../Controls/EditorRemoveButton'\nimport { Button } from '../../Utilities/Button'\nimport { EncodeControl } from '../Controls/EncodeControl'\nimport { ViewControl } from '../Controls/ViewControl'\nimport { View } from '../../Utilities/View'\nimport { labelInterpolate, labelTranslate } from '../../Utilities/Label'\nimport { EditorUndoButton } from '../Controls/EditorUndoButton'\nimport { EditorRedoButton } from '../Controls/EditorRedoButton'\n\nexport interface InspectorPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const InspectorDefaultProps: PropsMethod<InspectorPropsDefault, InspectorProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'inspector'\n  optionsStrict.props.className ||= 'panel inspector'\n\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.inspector} />,\n    <EditorUndoButton key='undo'>\n      <Button>{icons.undo}{labelTranslate('undo')}</Button>\n    </EditorUndoButton>,\n    <EditorRedoButton key='redo'>\n      <Button>{icons.redo}{labelTranslate('redo')}</Button>\n    </EditorRedoButton>,\n  ]\n \n  optionsStrict.footer.content ||= [\n    <InspectorPicker key=\"mash\" className={ClassButton} id=\"mash\">\n      {icons.mmTube}\n    </InspectorPicker>,\n    <InspectorPicker key=\"clip\" className={ClassButton} id=\"clip\">\n      {icons.clip}\n    </InspectorPicker>,\n    <InspectorPicker key=\"container\" className={ClassButton} id=\"container\">\n      {icons.container}\n    </InspectorPicker>,\n    <InspectorPicker key=\"content\" className={ClassButton} id=\"content\">\n      {icons.content}\n    </InspectorPicker>,\n ]\n\n  const contentChildren = [<InspectorProperties key=\"properties\" />]\n  const types = [SelectType.Clip, SelectType.Track]\n\n  contentChildren.push(\n    <InspectorPicked type=\"mash\" key=\"inspector-mash\">\n      <View>\n        <EncodeControl key='render-process'>\n          <Button>\n            {labelTranslate('render')} \n            {icons.render}\n          </Button>\n        </EncodeControl>\n        <ViewControl key='view-control'>\n          <Button>\n            {labelTranslate('view')} \n            {icons.view}\n          </Button>\n        </ViewControl>    \n      </View>  \n    </InspectorPicked>\n  )\n\n  types.forEach(type => {\n    contentChildren.push(\n      <InspectorPicked key={`${type}-delete`} type={type}>\n        <EditorRemoveButton type={type}>\n          <Button>\n            {labelInterpolate('delete', { type })}\n            {icons.remove}\n          </Button>\n        </EditorRemoveButton>\n      </InspectorPicked>\n    )\n  })\n  \n  optionsStrict.content.children ||= <>{contentChildren}</>\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <InspectorContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </InspectorContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n  return { ...optionsStrict.props, children }\n}\n","import { Size } from '@moviemasher/moviemasher.js'\n\nexport const elementSetPreviewSize = (current?: HTMLDivElement | null, size?: Size) => {\n  if (!(size && current))\n    return\n\n  const { width, height } = size\n  current.style.setProperty('--preview-width', `${width}px`)\n  current.style.setProperty('--preview-height', `${height}px`)\n}\n","import {\n\n  assertObject, DataDefaultRequest, DataDefaultResponse, Editor, EditorIndex, \n  editorInstance, EditType, Endpoints, eventStop, EventType,\n  idGenerate, idTemporary, isClip, isEffect, isMashAndMediaObject, isMedia, \n  isMediaObject, MashType, Media, MediaObject, ScalarRecord, Size, \n  UnknownRecord, urlBaseInitialize, VideoType\n} from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport {\n  ActivityType,\n  Client, ClientDisabledArgs, clientInstance, ClientOptions, ClientReadOptions, ReadOperation\n} from \"@moviemasher/client-core\"\n\n\n\nimport { Draggable, dropFilesFromList } from '@moviemasher/client-core'\nimport { ApiContext } from '../../../client-react-deleted/ApiClient/ApiContext'\nimport { PropsWithChildren, PropsWithoutChild, ReactResult, ThemeIcons, WithClassName } from '../../declarations'\nimport { elementSetPreviewSize } from '../../Utilities/Element'\nimport { View } from '../../Utilities/View'\nimport { ActivityPropsDefault } from '../Activity/ActivityDefaultProps'\nimport { BrowserPropsDefault } from '../Browser/BrowserDefaultProps'\nimport { InspectorPropsDefault } from '../Inspector/InspectorDefaultProps'\nimport { PanelOptions } from '../Panel/Panel'\nimport { PlayerPropsDefault } from '../Player/PlayerDefaultProps'\nimport { TimelinePropsDefault } from '../Timeline/TimelineDefaultProps'\nimport { MasherContext, MasherContextInterface } from './MasherContext'\n\nexport type PanelOptionsOrFalse = PanelOptions | false\n\nexport interface UiOptions {\n  [index: string]: PanelOptionsOrFalse\n  browser: BrowserPropsDefault | false\n  player: PlayerPropsDefault | false\n  inspector: InspectorPropsDefault | false\n  timeline: TimelinePropsDefault | false\n  activity: ActivityPropsDefault | false\n}\n\nexport interface MasherOptions extends UnknownRecord, WithClassName {\n  previewSize?: Size\n  icons?: ThemeIcons\n  editType?: EditType\n  mashMedia?: DataDefaultResponse\n  clientOptions?: ClientOptions\n}\n\nexport interface EditorProps extends MasherOptions, PropsWithoutChild {\n  panels?: Partial<UiOptions>\n}\n\nexport interface MasherProps extends MasherOptions, PropsWithChildren {}\n\n/**\n * @parents ApiClient, Masher\n * @children Browser, Timeline, Inspector, Player, Composer\n * @returns provided children wrapped in a {@link View} and {@link MasherContext}\n */\nexport function Masher(props: MasherProps): ReactResult {\n  const {\n    editType = VideoType,\n    clientOptions = ClientDisabledArgs,\n    previewSize,\n    icons = {},\n    mashMedia,\n    ...rest\n  } = props\n\n  console.log(\"Masher\", editType, previewSize)\n  const clientRef = React.useRef<Client>(clientInstance(clientOptions))\n  const editorRef = React.useRef<Editor>(editorInstance({ editType }))\n  const editorIndexRef = React.useRef<EditorIndex>({})\n  const currentRef = React.useRef<ScalarRecord>({})\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n\n  const apiContext = React.useContext(ApiContext)\n\n  const [requested, setRequested] = React.useState(false)\n  const [streaming, setStreaming] = React.useState(false)\n\n  const { current: client } = clientRef\n  const { current: editor } = editorRef\n  const { current: editorIndex } = editorIndexRef\n  const { current } = currentRef\n  const { endpointPromise, servers } = apiContext\n\n  React.useEffect(() => { \n    elementSetPreviewSize(ref.current, previewSize) \n  }, [previewSize])\n\n  const editorLoad = (object?: DataDefaultResponse) => {\n    const loadObject = object || mashMedia || { mash: { id: idTemporary(), media: [] } }\n    // const { previewSize: size = previewSize, ...rest } = loadObject\n    console.log('Masher.editorLoad', object, mashMedia, loadObject)\n\n    const { current: svg } = svgRef\n    // const { current: div } = ref\n    assertObject(svg, 'svg')\n    // if (sizeAboveZero(size)) elementSetPreviewSize(div, size)\n    \n    editor.svgElement = svg\n    const { mash } = loadObject\n    editor.load(mash)\n  }\n  React.useEffect(() => {\n    console.debug(\"Masher useEffect\", requested)\n\n    if (!client.enabled(ReadOperation)) {\n      editorLoad()\n      return\n    }\n    if (!requested) {\n      setRequested(true)\n\n      const request: DataDefaultRequest = {}\n\n      console.debug(\"DataDefaultRequest\", Endpoints.data[editType].default, request)\n\n      const promise = endpointPromise(Endpoints.data[editType].default, request)\n      promise.then((response: DataDefaultResponse) => {\n        console.debug(\"DataDefaultResponse\", Endpoints.data[editType].default, response)\n        const { previewSize: serverSize = previewSize } = response\n        console.log(\"Masher DataDefaultResponse\", servers.file?.prefix)\n        if (servers.file?.prefix) {\n          urlBaseInitialize(String(servers.file.prefix))\n          console.log(\"Masher DataDefaultResponse\", servers.file.prefix)\n        }\n        editorLoad(response)\n      })\n    }\n  }, [requested])\n\n  const dropFiles = (files: FileList, editorIndex?: EditorIndex): Promise<Media[]> => {\n    const fileInfos = dropFilesFromList(files, servers.file)\n    if (fileInfos.length) {\n      const errors: UnknownRecord[] = []\n      const validFiles: File[] = []\n      const { eventTarget } = editor\n      fileInfos.forEach(fileInfo => {\n        if (fileInfo instanceof File) validFiles.push(fileInfo)\n        else errors.push(fileInfo)\n      })\n\n      if (errors.length) {\n        errors.forEach(error => {\n          const id = idGenerate('activity-error')\n          const info = { id, type: ActivityType.Error, ...error }\n          eventTarget.emit(EventType.Active, info)\n        })\n      }\n      if (validFiles.length) return editor.addFiles(validFiles, editorIndex)\n    } else console.log('Masher.dropFiles no info')\n    return Promise.resolve([])\n  }\n\n  const dropMediaObject = (definitionObject: MediaObject, editorIndex?: EditorIndex): Promise<Media[]>  => {\n    // console.log(\"Masher onDrop DefinitionObject...\", definitionObject, editorIndex)\n    return editor.addMedia(definitionObject, editorIndex)\n  }\n\n  const drop = (draggable: Draggable, editorIndex?: EditorIndex): Promise<Media[]>  => {\n    console.log(\"Masher drop\", draggable, editorIndex)\n\n    \n    if (!draggable) return Promise.resolve([]) \n    console.log(\"Masher drop editorIndex = \", editorIndex)\n\n    if (isClip(draggable)) {\n      console.log(\"Masher drop Clip\")\n      return Promise.resolve([])\n    }\n    if (isEffect(draggable)) {\n      console.log(\"Masher drop Effect\")\n      return Promise.resolve([])\n    }\n    \n    if (isMediaObject(draggable)) {\n      console.log(\"Masher drop DefinitionObject\")\n      return dropMediaObject(draggable, editorIndex)\n      \n    }\n    if (isMashAndMediaObject(draggable)) {\n      console.log(\"Masher drop MashAndMediaObject\")\n      return Promise.resolve([])\n    }\n    return dropFiles(draggable, editorIndex).then(definitions => {\n      console.log(\"Masher.dropFiles\", definitions)\n      const [definition] = definitions\n      if (isMedia(definition)) changeDefinition(definition)\n      return definitions\n    })\n  }\n  \n\n\n  const changeDefinition = (media?: Media) => { current.mediaId = media?.id }\n  \n  const masherContext: MasherContextInterface = {\n    client, editor, \n    streaming, setStreaming,\n    current, editorIndex, drop,\n    changeDefinition, icons\n  }\n  const viewProps = { ...rest, onDrop: eventStop, ref }\n  return (\n    <MasherContext.Provider value={masherContext}>\n      <View { ...viewProps } />\n      <svg style={{ display: 'none' }} ref={svgRef} />\n    </MasherContext.Provider>\n  )\n}\n","import React from 'react'\nimport { BooleanSetter, EmptyMethod, NumberSetter } from '@moviemasher/moviemasher.js'\n\nexport interface PlayerContextInterface {\n  disabled?: boolean\n  paused: boolean,\n  changePaused: BooleanSetter\n  changeVolume: NumberSetter\n  volume: number\n}\n\nexport const PlayerContextDefault: PlayerContextInterface = {\n  paused: false,\n  changePaused: EmptyMethod,\n  changeVolume: EmptyMethod,\n  volume: 0,\n}\n\nexport const PlayerContext = React.createContext(PlayerContextDefault)\n","import React from 'react'\nimport { \n  EventType, Rect, eventStop, isMediaType, rectRound,\n  ClassDropping, sizeAboveZero, UnknownRecord, assertMediaType, \n  rectCopy, EditorIndex, assertObject, SelectType, EmptyMethod, isMediaObject, \n} from '@moviemasher/moviemasher.js'\n\nimport {  \n  PropsWithChildren, ReactResult, WithClassName \n} from '../../declarations'\nimport { \n  assertDragDefinitionObject, dragData, dragType, dragTypes, TransferTypeFiles \n} from '@moviemasher/client-core'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { PlayerContext } from './PlayerContext'\n\nexport interface PlayerContentProps extends PropsWithChildren, WithClassName {}\nconst PlayerRefreshRate = 10\n\n/**\n * @parents Player\n */\nexport function PlayerContent(props: PlayerContentProps): ReactResult {\n  const { children, className, ...rest } = props\n  \n  const editor = useEditor()\n  const [rect, setRect] = React.useState<Rect>(() => (rectCopy(editor.rect)))\n  const svgRef = React.useRef<HTMLDivElement>(null)//SVGSVGElement\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const masherContext = React.useContext(MasherContext)\n  const [over, setOver] = React.useState(false)\n  const playerContext = React.useContext(PlayerContext)\n  const { disabled } = playerContext\n  const { drop } = masherContext\n  const watchingRef = React.useRef<UnknownRecord>({})\n  const { current: watching } = watchingRef\n\n  const handleResize = () => { \n    const { current } = viewRef\n    if (!current) return\n  \n    const rect = rectRound(current.getBoundingClientRect())\n    setRect(() => {\n      editor.rect = rect\n      return rectCopy(rect)\n    })\n  }\n\n  const [resizeObserver] = React.useState(new ResizeObserver(handleResize))\n\n  React.useEffect(() => {\n    const { current } = viewRef\n    if (current) resizeObserver.observe(current)\n    return () => { resizeObserver.disconnect() }\n  }, [])\n\n  const swapChildren = (elements: Element[]) => {\n    const { current } = svgRef\n    if (!current) return\n\n    current.replaceChildren(...elements)  \n  }\n\n  const requestItemsPromise = (): Promise<void> => {\n    const { redraw } = watching\n    delete watching.timeout \n    delete watching.redraw \n\n    return editor.previewItems(!disabled).then(svgs => {\n   \n      swapChildren(svgs)\n      if (redraw) handleDraw()\n    })\n  }\n\n  const requestItems = () => { requestItemsPromise().then(EmptyMethod) }\n\n  const handleDraw = () => { \n    const { current } = svgRef\n    const { rect } = editor\n    if (!(current && sizeAboveZero(rect))) return\n\n    if (watching.timeout) {\n      watching.redraw = true\n      return\n    }\n    watching.timeout = setTimeout(requestItems, PlayerRefreshRate)\n  }\n\n  useListeners({ [EventType.Draw]: handleDraw, [EventType.Selection]: handleDraw })\n\n  const dragValid = (dataTransfer?: DataTransfer | null): dataTransfer is DataTransfer => {\n    if (!dataTransfer) return false\n\n    const types = dragTypes(dataTransfer)\n    if (types.includes(TransferTypeFiles)) return true\n    \n    return isMediaType(dragType(dataTransfer))\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    const { dataTransfer } = event\n    if (!dragValid(dataTransfer)) return \n\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n    const editorIndex: EditorIndex = {\n      clip: editor.time.scale(mashMedia.quantize).frame,\n      track: -1,\n    }\n    const types = dragTypes(dataTransfer)\n    if (types.includes(TransferTypeFiles)) {\n      drop(dataTransfer.files, editorIndex)\n    } else {\n      const type = dragType(dataTransfer)\n      assertMediaType(type)\n      const data = dragData(dataTransfer, type)\n      assertDragDefinitionObject(data)\n      const { mediaObject } = data\n      if (isMediaObject(mediaObject)) drop(mediaObject, editorIndex)\n    }\n  } \n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    setOver(dragValid(event.dataTransfer))\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n\n  const viewProps: UnknownRecord = {\n    ...rest, ref: viewRef, \n    className: classes.join(' '),\n    key: 'player-content', \n    onDragOver, onDrop, onDragLeave, \n    onPointerDown: () => { editor.selection.unset(SelectType.Clip) }\n  }\n\n  if (sizeAboveZero(rect)) {\n    const svgProps = { ref: svgRef, key: \"svg\", className: 'svgs' }\n    const nodes = [<div { ...svgProps } />]\n    if (children) {\n      const child = React.Children.only(children)\n      if (React.isValidElement(child)) nodes.push(child)\n    }\n    viewProps.children = nodes \n  } \n  return <View { ...viewProps}/>\n}\n","import React from \"react\"\nimport { View } from \"../../Utilities/View\"\nimport { PlayerContext } from \"./PlayerContext\"\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\n\n/**\n *\n * @parents Player\n */\nexport function PlayerButton(props: PropsWithChildren): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  const { paused, changePaused: setPaused } = playerContext\n\n  const onClick = () => { setPaused(!paused) }\n\n  const viewProps = {\n    ...props, key: 'player-button', onClick,\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { EventType, isArray, timeFromArgs, TimeRange } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, SliderChangeHandler, WithClassName } from \"../../declarations\"\nimport { Slider } from '../../Utilities/Slider'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\n\nexport interface PlayerTimeControlProps extends PropsWithChildren, WithClassName { }\n\nexport function PlayerTimeControl(props: PlayerTimeControlProps): ReactResult {\n  const editor = useEditor()\n  const getTimeRange = () => editor.timeRange.timeRange\n  const [timeRange, setTimeRange] = React.useState<TimeRange>(getTimeRange)\n\n  const update = () => { setTimeRange(getTimeRange())}\n  useListeners({\n    [EventType.Time]: update,\n    [EventType.Duration]: update,\n  })\n \n  const onChange: SliderChangeHandler = (_event, values) => {\n    const number = isArray(values) ? values[0] : values\n    editor.time = timeFromArgs(number, timeRange.fps)\n  }\n\n  const sliderProps = {\n    value: timeRange.frame,\n    min: 0,\n    max: timeRange.frames,\n    step: 1,\n    onChange,\n    className: 'frame slider',\n    ...props\n  }\n  return <Slider {...sliderProps} />\n}\n","import React from 'react'\n\nimport { PlayerContext } from './PlayerContext'\nimport { PropsAndChild, ReactResult } from '../../declarations'\n\n/**\n *\n * @group Player\n */\nexport function PlayerPlaying(props: PropsAndChild): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  if (playerContext.paused) return null\n\n  return props.children\n}\n","import React from 'react'\nimport { PlayerContext } from './PlayerContext'\nimport { PropsAndChild, ReactResult } from '../../declarations'\n\n/**\n *\n * @group Player\n */\nexport function PlayerNotPlaying(props: PropsAndChild): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  if (!playerContext.paused) return null\n\n  return props.children\n}\n","import React from \"react\"\nimport { View } from \"../../Utilities/View\"\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { EventType, stringSeconds } from \"@moviemasher/moviemasher.js\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport interface PlayerTimeProps extends PropsWithoutChild, WithClassName {}\n\n/**\n *\n * @parents Editor\n */\nexport function PlayerTime(props: PlayerTimeProps): ReactResult {\n  const editor = useEditor()\n  const getTimeRange = () => editor.timeRange\n  const [timeRange, setTimeRange] = React.useState(getTimeRange)\n  const update = () => { setTimeRange(getTimeRange()) }\n\n  useListeners({\n    [EventType.Time]: update, [EventType.Duration]: update,\n  })\n\n  const { seconds, fps, lengthSeconds } = timeRange\n\n  const viewChildren = [\n    stringSeconds(seconds, fps, lengthSeconds), \"/\",\n    stringSeconds(lengthSeconds, fps, lengthSeconds),\n  ]\n\n  const viewProps = { ...props, key: 'player-time', children: viewChildren }\n\n  return <View {...viewProps} />\n}\n","import React from 'react'\n\nimport { PropsMethod, PropsWithoutChild, WithClassName } from '../../declarations'\nimport { Button } from '../../Utilities/Button'\nimport { Bar } from '../../Utilities/Bar'\nimport { PlayerContent } from './PlayerContent'\nimport { PlayerButton } from './PlayerButton'\nimport { PlayerTimeControl } from './PlayerTimeControl'\nimport { PlayerPlaying } from './PlayerPlaying'\nimport { PlayerNotPlaying } from './PlayerNotPlaying'\nimport { PlayerProps } from './Player'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\n\nimport { ClassButton } from '@moviemasher/moviemasher.js'\nimport { PlayerTime } from './PlayerTime'\nimport { View } from '../../Utilities/View'\nimport { SaveControl } from '../Controls/SaveControl'\nimport { labelTranslate } from '../../Utilities/Label'\nimport { CreateEditedControl } from '../Controls/CreateEditedControl'\nimport { SelectEditedControl } from '../Controls/SelectEditedControl'\n\nexport interface PlayerPropsDefault extends PanelOptions, PropsWithoutChild, WithClassName {}\n\nexport const PlayerDefaultProps: PropsMethod<PlayerPropsDefault, PlayerProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'player'\n  optionsStrict.props.className ||= 'panel player'\n\n\n  optionsStrict.content.children ||= (\n    <PlayerContent {...optionsStrict.content.props}>\n      <View key=\"drop-box\" className=\"drop-box\" />\n    </PlayerContent>\n  )\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.app} />,\n    <SelectEditedControl key=\"select-mashMedia\" className=\"row\" children={icons.document} />,\n    <SaveControl key='save-process'>\n      <Button key=\"button\">\n        {labelTranslate('update')}\n        {icons.document}\n      </Button>\n    </SaveControl>,\n    <CreateEditedControl key=\"create-mashMedia\">\n      <Button>\n        {labelTranslate('create')} \n        {icons.document}\n      </Button>\n    </CreateEditedControl>\n   \n  ]\n  \n  optionsStrict.footer.content ||= [\n    <PlayerButton key='play-button' className={ClassButton}>\n      <PlayerPlaying key='playing'>{icons.pause}</PlayerPlaying>\n      <PlayerNotPlaying key='not-playing'>{icons.play}</PlayerNotPlaying>\n    </PlayerButton>,\n    <PlayerTimeControl key='time-slider'/>,\n    <PlayerTime key='time' className=\"time\" />,\n  ]\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    {optionsStrict.content.children}\n    <Bar {...optionsStrict.footer} />\n  </>\n  return { ...optionsStrict.props, children }\n}\n","import React from \"react\"\n\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { View } from \"../../Utilities/View\"\nimport { pixelFromFrame } from \"@moviemasher/client-core\"\n\n/**\n * @parents TimelineScrubber\n */\nexport function TimelineScrubberElement(props: PropsWithChildren): ReactResult {\n  const timelineContext = React.useContext(TimelineContext)\n  const { scale, frame } = timelineContext\n  const calculateViewProps = () => {\n    const viewProps = { ...props, style: { left: pixelFromFrame(frame, scale) } }\n    return viewProps\n  }\n\n  const viewProps = React.useMemo(calculateViewProps, [frame, scale])\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { \n  assertMashMedia, assertTrack, assertTrue, ClassSelected, DroppingPosition, \n  eventStop, UnknownRecord \n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../declarations'\nimport { TimelineContext } from './TimelineContext'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { View } from '../../Utilities/View'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { droppingPositionClass } from '@moviemasher/client-core'\nimport { ClipContext } from '../ClipItem/ClipContext'\n\nexport interface TimelineTrackProps extends PropsAndChild, WithClassName {\n  label?: string\n}\n\n/**\n * @parents TimelineTracks\n */\nexport function TimelineTrack(props: TimelineTrackProps): ReactResult {\n  const editor = useEditor()\n  const { selection } = editor\n  const { mash } = selection\n \n  const { className: propsClassName, children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const trackContext = React.useContext(TrackContext)\n  const timelineContext = React.useContext(TimelineContext)\n  const { track } = trackContext\n\n\n  const {\n    dragTypeValid, onDragLeave, onDrop, droppingTrack, setDroppingTrack,\n    droppingPosition, setDroppingPosition, setDroppingClip, selectedTrack,\n  } = timelineContext\n\n  const calculatedClassName = (): string => {\n    const selected = track === selectedTrack\n    const classes: string[] = []\n    if (propsClassName) classes.push(propsClassName)\n    if (selected) classes.push(ClassSelected)\n    if (droppingTrack === track) classes.push(droppingPositionClass(droppingPosition))\n    return classes.join(' ')\n  }\n\n  const className = React.useMemo(\n    calculatedClassName, [droppingPosition, droppingTrack, selectedTrack]\n  )\n  if (!(mash && track)) return null\n\n  // assertMashMedia(mash)\n  // assertTrack(track)\n\n  const { clips, dense, index } = track\n  \n  const childNodes = (): React.ReactElement[] => {\n    let prevClipEnd = dense ? -1 : 0\n    const childProps = child.props\n    return clips.map(clip => {\n      const cloneProps = { ...childProps, key: clip.id }\n      const children = React.cloneElement(child, cloneProps)\n      const contextProps = { children, value: { clip, prevClipEnd }, key: clip.id }\n      const context = <ClipContext.Provider { ...contextProps } />\n      if (!dense) prevClipEnd = clip.frames + clip.frame\n      return context\n    })\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const definitionType = dragTypeValid(dataTransfer)\n    const pos = definitionType ? DroppingPosition.At : DroppingPosition.None\n    setDroppingClip()\n    setDroppingTrack(definitionType ? track : undefined)\n    setDroppingPosition(pos)\n  }\n\n  const viewProps:UnknownRecord = {\n    ...rest,\n    className,\n    children: childNodes(),\n    onDragLeave, onDragOver, onDrop,\n    key: `track-${index}`\n  }\n\n  return <View {...viewProps}/>\n}\n","import React from 'react'\n\nimport { View } from \"../../Utilities/View\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { PropsWithChildren, ReactResult } from '../../declarations'\n\n/**\n * @parents Timeline\n */\nexport function TimelineSizer(props: PropsWithChildren): ReactResult {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const timelineContext = React.useContext(TimelineContext)\n  const handleResize = () => {\n    const { setRect } = timelineContext\n    const rect = ref.current!.getBoundingClientRect()\n    // console.log(\"handleResize width\", rect.width)\n    setRect(rect)\n  }\n\n  const [resizeObserver] = React.useState(new ResizeObserver(handleResize))\n\n  React.useEffect(() => {\n    const { current } = ref\n    if (current) resizeObserver.observe(current)\n    return () => { resizeObserver.disconnect() }\n  }, [ref.current])\n\n  const viewProps = { ...props, ref }\n  return <View {...viewProps}/>\n}\n","import React from 'react'\nimport { ReactResult, SliderChangeHandler, PropsWithChildren } from \"../../declarations\"\nimport { TimelineContext } from './TimelineContext'\nimport { Slider } from '../../Utilities/Slider'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { EventType, isArray } from '@moviemasher/moviemasher.js'\nimport { useListeners } from '../../Hooks/useListeners'\n\n\n/**\n * @parents Timeline\n */\nexport function TimelineZoomer(props: PropsWithChildren): ReactResult {\n  const editor = useEditor()\n  const timelineContext = React.useContext(TimelineContext)\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n\n  const handleChange : SliderChangeHandler = (_event, values) => {\n    const number = isArray(values) ? values[0] : values\n    if (timelineContext.zoom !== number) timelineContext.setZoom(number)\n  }\n\n\n  const sliderProps = {\n    disabled,\n    key: 'time-slider',\n    value: timelineContext.zoom,\n    min: 0.0,\n    max: 1.0,\n    step: 0.01,\n    onChange: handleChange,\n    ...props\n  }\n  return <Slider className='zoom slider' {...sliderProps} />\n}\n","import React from 'react'\nimport { EventType, arrayReversed, Tracks } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface TimelineTracksProps extends PropsAndChildren {}\n\n/**\n * @parents TimelineContent\n * @children TimelineTrack\n */\nexport function TimelineTracks(props: TimelineTracksProps): ReactResult {\n  const [refresh, setRefreshed] = React.useState(() => 0)\n  const updateRefreshed = () => { setRefreshed(nonce => nonce + 1) }\n  const editor = useEditor()\n  useListeners({\n    [EventType.Loaded]: updateRefreshed, [EventType.Track]: updateRefreshed,\n  })\n\n  const { children } = props\n\n  const childNodes = (): React.ReactElement[] => {\n    const { mash } = editor.selection\n    if (!mash) return []\n\n    const { tracks } = mash\n    const reversedTracks = arrayReversed(tracks) as Tracks\n    return reversedTracks.map((track, i) => {\n      const { identifier, index } = track\n      const clones = React.Children.map(children, child => {\n        if (!React.isValidElement(child)) throw `TimelineTracks`\n\n        return React.cloneElement(child, { \n          key: `track-clone-${i}-${index}-${identifier}`\n        })\n      })\n      const contextProps = {\n        children: clones,\n        value: { track },\n        key: `track-context-${i}-${index}-${identifier}`\n      }\n      return <TrackContext.Provider {...contextProps} />\n    })\n  }\n\n  const viewChildren = React.useMemo(childNodes, [refresh])\n  \n  const fragmentProps = {\n    key: `track-content`,\n    children: viewChildren,\n  }\n  return <React.Fragment { ...fragmentProps } />\n}\n","import React from \"react\"\nimport { \n  ClassDisabled, eventStop, EventType, pixelToFrame, \n  timeFromArgs, UnknownRecord \n} from \"@moviemasher/moviemasher.js\"\nimport { \n  pixelFromFrame\n} from \"@moviemasher/client-core\"\n\nimport { View } from \"../../Utilities/View\"\nimport { ReactResult, PropsWithChildren, WithClassName } from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface TimelineScrubber extends PropsWithChildren, WithClassName {\n  inactive?: boolean\n  styleHeight?: boolean\n  styleWidth?: boolean\n}\n/**\n * @parents Timeline\n */\nexport function TimelineScrubber(props: TimelineScrubber): ReactResult {\n  const editor = useEditor()\n  const clientXRef = React.useRef<number>(-1)\n  const ref = React.useRef<HTMLDivElement>(null)\n  const timelineContext = React.useContext(TimelineContext)\n  const { frames,scale, rect } = timelineContext\n  const { className, inactive, styleHeight, styleWidth, ...rest } = props\n\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const addHandlers = () => {\n    const { window } = globalThis\n\n    const removeWindowHandlers = () => {\n      window.removeEventListener('pointermove', pointerMove)\n      window.removeEventListener('pointerup', pointerUp)\n    }\n\n    const pointerMove = (event: MouseEvent) => {\n      eventStop(event)\n      \n      const { current } = ref\n      if (!(current && editor.selection.mash)) return\n\n      const { clientX } = event\n      if (clientXRef.current === clientX) return\n\n      clientXRef.current = clientX\n\n      const rect = current.getBoundingClientRect()\n      const pixel = Math.max(0, Math.min(rect.width, clientX - rect.x))\n      const frame = pixelToFrame(pixel, scale, 'floor')\n      editor.time = timeFromArgs(frame, editor.selection.mash!.quantize)\n    }\n\n    const pointerUp = (event: MouseEvent) => {\n      pointerMove(event)\n      removeWindowHandlers()\n    }   \n\n    const pointerDown = (event: MouseEvent) => {\n      event.stopPropagation()\n      clientXRef.current = -1\n      window.addEventListener('pointermove', pointerMove)\n      window.addEventListener('pointerup', pointerUp)\n      pointerMove(event)\n    }    \n    return pointerDown\n  }\n\n  const { width, height } = rect\n  const calculateViewProps = () => {\n    const classes: string[] = []\n    if (className) classes.push(className)\n    if (disabled) classes.push(ClassDisabled)\n    const viewProps: UnknownRecord = { \n      ...rest, ref, className: classes.join(' ')\n    }\n    if (styleWidth || styleHeight) {\n      const style: UnknownRecord = {}\n      if (styleHeight) style.minHeight = height\n      if (styleWidth) {\n        const width = pixelFromFrame(frames, scale, 'ceil')\n        style.minWidth = Math.max(width, width)\n      }\n      viewProps.style = style\n    }\n    if (!(inactive || disabled)) viewProps.onPointerDown = addHandlers()\n    \n    return viewProps\n  }\n\n  const viewProps = React.useMemo(calculateViewProps, [frames, scale, width, height, disabled])\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { ClassDropping, DroppingPosition, eventStop, EventType, SelectType } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, WithClassName } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { View } from '../../Utilities/View'\nimport { TimelineContext } from './TimelineContext'\n\nexport interface TimelineContentProps extends PropsWithChildren, WithClassName {}\n/**\n * @parents Timeline\n * @children TimelineTracks, TimelineScrubber, TimelineSizer\n */\nexport function TimelineContent(props: TimelineContentProps): ReactResult {\n  const { className, ...rest } = props\n\n  const timelineContext = React.useContext(TimelineContext)\n\n  const { \n    dragTypeValid, onDrop: contextDrop,\n    setScroll, setDroppingClip, setDroppingTrack, setDroppingPosition \n  } = timelineContext\n  const ref = React.useRef<HTMLDivElement>(null)\n  const [over, setOver] = React.useState(false)\n\n  const editor = useEditor()\n  const resetScroll = () => { ref.current?.scrollTo(0, 0) }\n  useListeners({ [EventType.Loaded]: resetScroll })\n\n  const onPointerDown = () => { \n    editor.selection.unset(SelectType.Track) \n  }\n  \n  const onScroll = () => {\n    const { current } = ref\n    if (!current) return\n\n    const { scrollLeft: x, scrollTop: y } = current\n    setScroll({ x, y })\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    contextDrop(event)\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const valid = dragTypeValid(dataTransfer)\n    const pos = valid ? DroppingPosition.At : DroppingPosition.None\n    setDroppingClip()\n    setDroppingTrack()\n    setDroppingPosition(pos)\n    setOver(valid)\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n\n\n  const viewProps = { \n    className: classes.join(' '),\n    ...rest, onPointerDown, onScroll, onDragOver, onDragLeave, onDrop, ref \n  }\n  return <View {...viewProps} />\n}\n","import React from \"react\"\nimport { EventType, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport interface TimelineAddTrackControlProps extends PropsAndChild, WithClassName {}\n\nexport function TimelineAddTrackControl(props:TimelineAddTrackControlProps): ReactResult {\n  const editor = useEditor()\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const { children, ...rest } = props\n  const cloneProps: UnknownRecord = { \n    ...rest, \n    disabled,\n  }\n  cloneProps.onClick = () => { editor.addTrack() }\n  return React.cloneElement(React.Children.only(children), cloneProps)\n}\n","import React from \"react\"\nimport { ClassSelected, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport {\n  PropsWithoutChild, ReactResult, WithClassName\n} from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { TrackContext } from \"../../Contexts/TrackContext\"\nimport { View } from \"../../Utilities/View\"\nimport { droppingPositionClass } from \"@moviemasher/client-core\"\n\nexport interface TimelineTrackIconProps extends PropsWithoutChild, WithClassName {\n  icons: UnknownRecord\n}\n/**\n * @parents TimelineTracks\n * @children TimelineTracks, TimelineScrubber, TimelineScrubberElement, TimelineSizer\n */\nexport function TimelineTrackIcon(props: TimelineTrackIconProps): ReactResult {\n  const { className: propsClassName, icons, ...rest } = props\n  const timelineContext = React.useContext(TimelineContext)\n  const trackContext = React.useContext(TrackContext)\n \n\n  const { droppingTrack, droppingPosition, selectedTrack } = timelineContext\n  const { track } = trackContext\n\n  const calculatedClassName = (): string => {\n    const classes: string[] = []\n    if (propsClassName) classes.push(propsClassName)\n    if (track === selectedTrack) classes.push(ClassSelected)\n    if (track === droppingTrack) classes.push(droppingPositionClass(droppingPosition))\n    return classes.join(' ')\n  }\n\n  const className = React.useMemo(\n    calculatedClassName, [droppingPosition, droppingTrack, selectedTrack]\n  )\n\n  if (!track) return null\n\n  const { dense, index } = track\n  \n  const children = dense ? icons.trackDense : icons.track\n\n  const viewProps = { \n    ...rest, className, children, key: `track-icon-${index}`\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { EventType } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, PropsAndChild, WithClassName } from \"../../declarations\"\nimport { TimelineContext } from './TimelineContext'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\n\nexport interface TimelineZoomProps extends PropsAndChild, WithClassName {\n  zoom: number\n}\n\n/**\n * @parents Timeline\n */\nexport function TimelineZoom(props: TimelineZoomProps): ReactResult {\n  const editor = useEditor()\n  const { zoom, children, ...rest } = props\n  const timelineContext = React.useContext(TimelineContext)\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n\n  const onClick = () => { timelineContext.setZoom(zoom) }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport { assertPopulatedString, DefaultContentId, EditorIndex, EventType, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { MasherContext } from \"../Masher/MasherContext\"\n\nexport interface TimelineAddClipControlProps extends PropsAndChild, WithClassName {}\n\nexport function TimelineAddClipControl(props:TimelineAddClipControlProps): ReactResult {\n  const editor = useEditor()\n  const editorContext = React.useContext(MasherContext)\n  const { current, drop } = editorContext\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const { children, ...rest } = props\n  const cloneProps: UnknownRecord = { \n    ...rest, \n    disabled,\n  }\n  cloneProps.onClick = () => { \n    const { selection, mashMedia } = editor\n    const { clip, track } = selection\n    const id = current.mediaId || DefaultContentId\n    assertPopulatedString(id)\n    const object = { id }\n    const editorIndex: EditorIndex = {\n      clip: 0, track: -1\n    }\n    if (clip && track) {\n      editorIndex.clip = track.dense ? track.clips.indexOf(clip) : clip.endFrame\n      editorIndex.track = track.index\n    } else {\n      editorIndex.clip = editor.time.scale(mashMedia!.quantize).frame\n    }\n    drop(object, editorIndex)\n  }\n  return React.cloneElement(React.Children.only(children), cloneProps)\n}\n","import React from 'react'\n\nimport {\n  PropsMethod, PropsWithoutChild, WithClassName\n} from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { TimelineScrubberElement } from './TimelineScrubberElement'\nimport { TimelineTrack } from './TimelineTrack'\nimport { TimelineSizer } from './TimelineSizer'\nimport { TimelineZoomer } from './TimelineZoomer'\nimport { TimelineTracks } from './TimelineTracks'\nimport { TimelineScrubber } from './TimelineScrubber'\nimport { TimelineContent } from './TimelineContent'\nimport { TimelineAddTrackControl } from './TimelineAddTrackControl'\n\nimport { TimelineProps } from './Timeline'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { TimelineTrackIcon } from './TimelineTrackIcon'\nimport { TimelineZoom } from './TimelineZoom'\nimport { TimelineAddClipControl } from './TimelineAddClipControl'\nimport { ClipItem } from '../ClipItem/ClipItem'\nimport { View } from '../../Utilities/View'\nimport { Button } from '../../Utilities/Button'\n\nexport interface TimelinePropsDefault extends PanelOptions, PropsWithoutChild, WithClassName {}\n\nexport const TimelineDefaultProps: PropsMethod<TimelinePropsDefault, TimelineProps> = function(props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'timeline'\n  optionsStrict.props.className ||= 'panel timeline'\n\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.timeline} />,\n  ]\n\n  optionsStrict.footer.content ||= [\n    <TimelineAddClipControl key='add-clip'>\n      <Button children={icons.add}/>\n    </TimelineAddClipControl>,\n    <TimelineAddTrackControl key='add-track'>\n      <Button children={[icons.add, icons.trackDense]}/>\n    </TimelineAddTrackControl>,\n    <TimelineZoom key=\"zoom-out\" zoom={0}>\n      <Button useView={true}>{icons.zoomLess}</Button>\n    </TimelineZoom>,\n    <TimelineZoomer key='zoomer'/>,\n    <TimelineZoom key=\"zoom-in\" zoom={1}>\n      <Button useView={true}>{icons.zoomMore}</Button>\n    </TimelineZoom>,\n  ]\n\n  optionsStrict.content.children ||= <>\n    <TimelineScrubber styleWidth={true} inactive={true} styleHeight={true} className='scrubber-bar'>\n      <TimelineScrubberElement className='scrubber-element-bar' />\n    </TimelineScrubber>\n    <TimelineScrubber styleWidth={true} className='scrubber-icon'>\n      <TimelineScrubberElement className='scrubber-element-icon'/>\n    </TimelineScrubber>\n    <TimelineTracks>\n      <TimelineTrackIcon className='track-icon' icons={icons} />\n      <TimelineTrack className='track'>\n        <ClipItem className='clip preview' />\n      </TimelineTrack>\n    </TimelineTracks>\n    <TimelineSizer className='drop-box' />\n  </>\n  \n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <TimelineContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </TimelineContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n\n  return { ...optionsStrict.props, children }\n}\n","import React from 'react'\nimport { EventType } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from '../../declarations'\nimport { PlayerContext, PlayerContextInterface } from './PlayerContext'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface PlayerProps extends PropsAndChildren, WithClassName {\n  disabled?: boolean\n}\n\n/**\n * @parents Masher\n * @children PlayerContent, PlayerPlaying, PlayerNotPlaying, PlayerTimeControl, PlayerTime, PlayerButton\n */\nexport function Player(props: PlayerProps): ReactResult {\n  const { disabled, ...rest } = props\n  const editor = useEditor()\n  const [paused, setPaused] = React.useState(editor.paused)\n  const [volume, setVolume] = React.useState(editor.volume)\n  const updatePaused = () => { setPaused(editor.paused) }\n  useListeners({\n    [EventType.Pause]: updatePaused, [EventType.Play]: updatePaused,\n    [EventType.Volume]: () => { setVolume(editor.volume) },\n  })\n\n  const changePaused = (value: boolean) => { editor.paused = value }\n  const changeVolume = (value: number) => { editor.volume = value }\n\n  const playerContext: PlayerContextInterface = {\n    paused, disabled, volume, changePaused, changeVolume,\n  }\n  const contextProps = {\n    value: playerContext, children: <View { ...rest } />\n  }\n  return (\n    <PlayerContext.Provider { ...contextProps } />\n  )\n}\n","import React from 'react'\nimport {\n  Rect, RectZero, Clip, DroppingPosition, EventType, Track, pixelToFrame, Clips, \n  Point, eventStop, EditorIndex, isPositive, assertClip, \n  EffectType, isMediaObject\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { TimelineContext, TimelineContextInterface } from './TimelineContext'\nimport { useListeners } from '../../Hooks/useListeners'\nimport {\n  dragTypes, isDragOffsetObject, isDragDefinitionObject, isTransferType, \n  dragMediaType, TransferTypeFiles, dragData, pixelPerFrame\n} from '@moviemasher/client-core'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { View } from '../../Utilities/View'\n\n\n\nexport interface TimelineProps extends PropsAndChildren {}\nexport const TimelineDefaultZoom = 1.0\n/**\n * @parents Masher\n * @children TimelineContent, TimelineZoomer\n */\nexport function Timeline(props: TimelineProps): ReactResult {\n  const editor = useEditor()\n  const editorContext = React.useContext(MasherContext)\n  const { drop } = editorContext\n  const currentFrame = () => { return editor.selection.mash?.frame || 0 }\n  const currentFrames = () => { return editor.selection.mash?.frames || 0 }\n  const [frames, setFrames] = React.useState(currentFrames)\n  const [frame, setFrame] = React.useState(currentFrame)\n  const updateFrames = () => { setFrames(currentFrames()) }\n  const updateFrame = () => { setFrame(currentFrame()) }\n\n  const [droppingPosition, setDroppingPosition] = React.useState<DroppingPosition | number>(DroppingPosition.None)\n  const [droppingTrack, setDroppingTrack] = React.useState<Track | undefined>()\n  const [droppingClip, setDroppingClip] = React.useState<Clip | undefined>()\n  const [selectedTrack, setSelectedTrack] = React.useState<Track | undefined>()\n  const [refreshed, setRefreshed] = React.useState(0)\n  const [selectedClip, setSelectedClip] = React.useState<Clip | undefined>()\n  const [zoom, setZoom] = React.useState(TimelineDefaultZoom)\n  const [rect, setRect] = React.useState<Rect>(RectZero)\n  const [scroll, setScroll] = React.useState<Point>(RectZero)\n  const refresh = () => { setRefreshed(value => value + 1) }\n\n  useListeners({\n    [EventType.Loaded]: () => { setZoom(TimelineDefaultZoom) },\n    [EventType.Action]: refresh,\n    [EventType.Selection]: () => {\n      setSelectedClip(editor.selection.clip)\n      setSelectedTrack(editor.selection.track)\n    },\n    [EventType.Time]: updateFrame,\n    [EventType.Duration]: updateFrames,\n  })\n\n  const dragTypeValid = (dataTransfer: DataTransfer, clip?: Clip): boolean => {\n    const types = dragTypes(dataTransfer)\n    // any file can be dropped\n    if (types.includes(TransferTypeFiles)) return true\n\n    const type = types.find(isTransferType)\n    if (!type) return false\n\n    // anything can be dropped on a clip \n    if (clip || type.startsWith('clip')) return true\n\n    // effects can only be dropped on clips\n    const definitionType = dragMediaType(type)\n    return definitionType !== EffectType\n  }\n\n  const onDragLeave = (event: DragEvent) => {\n    eventStop(event)\n    setDroppingPosition(DroppingPosition.None)\n    setDroppingTrack(undefined)\n    setDroppingClip(undefined)\n  }\n\n  const frameToIndex = (frame: number, clips: Clips) => {\n    const { length } = clips\n    if (!length) return 0\n\n    const foundIndex = clips.findIndex(clip => frame < clip.frame + clip.frames)\n    if (foundIndex > -1) return foundIndex\n\n    return length\n  }\n\n  const dropIndex = (dense: boolean, clips: Clips) => {\n    if (!dense) return -1\n    if (!droppingClip) return 0\n\n    const clipIndex = clips.indexOf(droppingClip)\n    if (droppingPosition === DroppingPosition.After) return clipIndex + 1\n    return clipIndex\n  }\n\n  const onDrop = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer, clientX } = event \n    console.log(\"Timeline onDrop\", dataTransfer?.types)\n\n    if (!(dataTransfer && dragTypeValid(dataTransfer, droppingClip))) {\n      console.log(\"Timeline onDrop invalid\", dataTransfer?.types, !!droppingClip)\n      return\n    }\n    console.log(\"Timeline onDrop\", dataTransfer.types, droppingClip)\n\n    const types = dragTypes(dataTransfer)\n    const droppingFiles = types.includes(TransferTypeFiles)\n\n    const dense = !!droppingTrack?.dense\n    const index = droppingTrack ? droppingTrack.index : -1\n    const clips = droppingTrack?.clips || []\n\n    const data = droppingFiles ? {} : dragData(dataTransfer)\n    const draggingItem = !droppingFiles && isDragOffsetObject(data)\n    const offset = draggingItem ? data.offset : 0\n\n    let indexDrop = dropIndex(dense, clips)\n    if (!isPositive(indexDrop)) {\n      const offsetDrop = clientX - rect.x\n      const frame = pixelToFrame(Math.max(0, scroll.x + (offsetDrop - offset)), scale)\n      indexDrop = dense ? frameToIndex(frame, clips) : frame\n    }\n    const editorIndex: EditorIndex = { clip: indexDrop, track: index }\n\n    if (droppingFiles) {\n      drop(dataTransfer.files, editorIndex)\n    } else if (draggingItem) {\n      console.log(\"onDrop\", data)\n      if (isDragDefinitionObject(data)) {\n        const { mediaObject } = data\n        if (isMediaObject(mediaObject)) drop(mediaObject, editorIndex)\n        // console.log(\"Timeline onDrop definition\", definitionObject)\n        \n      } else {\n        const { clip } = editor.selection\n        assertClip(clip)\n        \n        // console.log(\"Timeline onDrop moving clip\", editorIndex, clip.content.definition.label)\n        editor.moveClip(clip, editorIndex)\n      }\n    } \n    onDragLeave(event)\n  }\n\n  const { width } = rect\n\n  const calculatedScale = (): number => {\n    const scale = width ? pixelPerFrame(frames, width, zoom) : 0\n    // console.log(\"calculatedScale\", scale, \"frames\", frames, \"width\", width, 'zoom', zoom)\n    return scale\n  }\n\n  const scale = React.useMemo(calculatedScale, [zoom, width, frames])\n\n  const timelineContext: TimelineContextInterface = {\n    scroll, setScroll,\n    scale, refreshed, refresh,\n    zoom, setZoom,\n    rect, setRect,\n    droppingTrack, setDroppingTrack,\n    droppingClip, setDroppingClip,\n    droppingPosition, setDroppingPosition,\n    onDragLeave, onDrop, dragTypeValid,\n    selectedClip, selectedTrack,\n    frame, frames, \n  }\n\n  const contextProps = {\n    children: <View {...props} />,\n    value: timelineContext\n  }\n  return <TimelineContext.Provider { ...contextProps } />\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelsProps extends PropsAndChildren, WithClassName {}\n\nexport function Panels(props: PanelsProps): ReactResult {\n  return <View { ...props } />\n}\n","import React from 'react'\nimport { VideoType } from '@moviemasher/moviemasher.js'\nimport { Icons } from '@moviemasher/theme-default'\n\nimport { PropsMethod } from '../../declarations'\nimport { EditorProps, MasherProps } from './Masher'\nimport { Browser } from '../Browser/Browser'\nimport { BrowserDefaultProps } from '../Browser/BrowserDefaultProps'\nimport { InspectorDefaultProps } from '../Inspector/InspectorDefaultProps'\nimport { PlayerDefaultProps } from '../Player/PlayerDefaultProps'\nimport { TimelineDefaultProps } from '../Timeline/TimelineDefaultProps'\nimport { Inspector } from '../Inspector/Inspector'\nimport { Player } from '../Player/Player'\nimport { Timeline } from '../Timeline/Timeline'\nimport { ActivityDefaultProps } from '../Activity/ActivityDefaultProps'\nimport { Activity } from '../Activity/Activity'\nimport { Panels } from '../Panel/Panels'\n\nexport const MasherDefaultProps: PropsMethod<EditorProps, MasherProps> = function(options = {}) {\n  options.className ||= 'editor masher'\n  options.icons ||= Icons\n  const { panels = {}, ...rest } = options\n  const { \n    player = {}, \n    browser = {}, \n    timeline = {}, \n    inspector = {}, \n    activity = {},\n  } = panels\n  const masherChildren: JSX.Element[] = []\n\n  if (player) {\n    player.icons ||= options.icons\n    masherChildren.push(<Player { ...PlayerDefaultProps(player) } />)\n  }\n  if (browser) {\n    browser.icons ||= options.icons\n    masherChildren.push(<Browser { ...BrowserDefaultProps(browser) } />)\n  }\n  if (inspector || activity) {\n    const panelsChildren: JSX.Element[] = []\n    if (activity) {\n      activity.icons ||= options.icons\n      panelsChildren.push(<Activity { ...ActivityDefaultProps(activity) } />)\n    }   \n    if (inspector) {  \n      inspector.icons ||= options.icons\n      panelsChildren.push(<Inspector { ...InspectorDefaultProps(inspector) } />)\n    }\n    const panelsProps = {\n      children: panelsChildren, key: 'panels', className: 'panels'\n    }\n    masherChildren.push(<Panels { ...panelsProps } />)\n  }\n  if (timeline) {\n    timeline.icons ||= options.icons\n    masherChildren.push(<Timeline { ...TimelineDefaultProps(timeline) } />)\n  }\n\n\n  return {\n    className: 'editor masher', \n    ...rest, \n    editType: VideoType, \n    children: masherChildren\n  }\n}\n","import { MediaType } from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { propsMediaTypes } from '../../Utilities/Props'\n\nexport interface MashingProps extends PropsAndChildren {\n  type?: string\n  types?: string | string[]\n}\n\n/**\n * @parents Masher\n */\nexport function Mashing(props: MashingProps): ReactResult {\n  const { type, types, children } = props\n  const mediaTypes = propsMediaTypes(type, types)\n  const editor = useEditor()\n  return mediaTypes.includes(editor.editType as MediaType) ? <>{children}</> : null\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelContentProps extends PropsAndChildren, WithClassName { }\n\nexport function PanelContent(props: PanelContentProps): ReactResult {\n  const { children, className } = props\n  if (!children) return null\n  \n  const viewProps = { className, children }\n  return <View {...viewProps} />\n}\n\nexport type PanelContentElement = React.FunctionComponentElement<typeof PanelContent>\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelHeadProps extends PropsAndChildren, WithClassName { }\n\nexport function PanelHead(props: PanelHeadProps): ReactResult {\n  const { children, className } = props\n  if (!children) return null\n  const viewProps = { className, children }\n  return <View {...viewProps} />\n}\n\nexport type PanelHeadElement = React.FunctionComponentElement<typeof PanelHead>\n","\nexport const sessionGet = (key: string): string => {\n  return globalThis.window.sessionStorage.getItem(key) || ''\n}\n\nexport const sessionSet = (key: string, value: any) => {\n  globalThis.window.sessionStorage.setItem(key, String(value))\n}","import React from \"react\"\nimport { PropsWithoutChild } from \"../declarations\"\n\n\nexport const VideoView = React.forwardRef<HTMLVideoElement, PropsWithoutChild>((props, ref) =>\n  <video { ...props } ref={ref} />\n)\n"],"names":["r","m","Jo","o","e","_objectSpread","ref","ns","ss","internal","client","import","bytes","extension","type","size","duration","render","displaySize","is","audible","clip","update","delete","unlabeled","analyze","load","complete","create","view","open","undo","redo","mash","cs","_step","t","split","_iterator","_createForOfIteratorHelper","s","n","done","value","rs","err","f","Ce","includes","rt","match","forEach","i","concat","c","replace","_o","ls","label","error","Ke","Active","Error","Complete","fs","Object","values","us","ms","nt","ds","hs","activities","allActivities","picked","pick","ps","Ne","as","ae","Cs","collapsed","changeCollapsed","Ps","streaming","setStreaming","Xo","current","changeDefinition","drop","Promise","resolve","editorIndex","icons","j","ys","Qo","wt","editor","vs","eventTarget","l","a","gs","CustomEvent","d","detail","C","id","x","h","y","find","g","activityGroup","infos","unshift","Ko","addEventListener","It","removeEventListener","p","Yo","_o$initialPicked","initialPicked","_o$initialCollapsed","initialCollapsed","className","_objectWithoutProperties","_excluded","_Qe$useState","Qe","_Qe$useState2","_slicedToArray","_Qe$useState3","_Qe$useState4","_Qo","_Qo2","_Qe$useState5","_Qe$useState6","filter","u","length","push","Ts","join","Provider","bs","st","ks","er","Ye","children","_excluded2","Ds","map","key","tr","_excluded3","_eo$useState","eo","_eo$useState2","or","At","_toConsumableArray","it","child","Nt","to","Rs","Ot","_excluded4","Mt","Es","Ss","onClick","ro","Pt","As","step","steps","oo","Is","Ns","ws","max","Math","round","ge","before","content","after","_o$props","props","Boolean","Ms","Me","_o$header","_o$header$props","_o$header$props2","_o$content","_o$content$props","_o$content$props2","_o$footer","_o$footer$props","_o$footer$props2","header","footer","Os","Pd","_no$useState","no","_no$useState2","nr","rr","_o$props2","so","sr","Wt","io","Vt","co","ir","_e$props","_e$props2","_e$props3","_e$header","_e$content","_e$footer","arguments","undefined","Ws","_","activity","collapse","ao","active","Bs","addPicker","Bt","refresh","definitions","removePicker","je","Vs","jt","ar","cr","pr","Lt","Ls","media","js","definitionTypes","Gs","keys","E","some","N","_s$current","byType","flat","Ge","Hs","k","zs","po","qs","mr","dr","enabled","$s","Us","lr","list","then","_r$current$a","console","debug","Fs","data","apply","dispatchEvent","fr","Gt","_Zs$useState","Zs","_Zs$useState2","Date","valueOf","ur","_o$initialPicked2","_excluded5","_vt$useState","vt","_vt$useState2","_Gt","_vt$useState3","_vt$useState4","Js","_defineProperty","Xs","ct","_s","Cr","_He$useState","He","_He$useState2","_excluded6","Ys","ei","hr","Qs","Ks","w","P","definition","onDrop","dataTransfer","files","onDragOver","onDragLeave","xr","ri","trim","name","at","ti","yr","oi","ze","types","_excluded7","si","gt","ni","ii","Pr","vr","_excluded8","pt","accept","multiple","onChange","currentTarget","htmlFor","gr","ci","Tt","iconRatio","_excluded9","Ue","ai","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","I","R","B","wrap","_context","prev","next","rect","li","abrupt","ui","di","mi","definitionIcon","sent","replaceChildren","stop","stopPropagation","draggable","onDragStart","getBoundingClientRect","left","S","offset","clientX","mediaObject","toJSON","O","JSON","stringify","v","effectAllowed","setData","fi","onPointerDown","mediaId","pi","Tr","_e$props4","_e$props5","_e$props6","_e$header2","_e$footer2","_e$footer3","_e$footer4","_e$content2","xe","browser","et","effect","container","browserVideo","browserAudio","browserImage","browserText","Ci","prevClipEnd","lt","hi","yi","Fe","xi","gi","dragTypeValid","frame","frames","Ve","vi","refreshed","scale","scroll","setDroppingClip","setDroppingPosition","setDroppingTrack","setRect","setScroll","setZoom","zoom","te","Pi","G","Ti","ji","Er","_G","_excluded10","Ie","_Gt3","_Gt4","droppingPosition","droppingClip","selectedClip","track","bi","V","L","parentNode","HTMLDivElement","offsetHeight","_Ie$useState","_Ie$useState2","b","T","A","D","Dr","Rr","width","W","mo","redraw","Wi","$","Y","action","ee","target","Vi","property","X","timeout","mashMedia","ie","height","Oi","H","ce","F","De","clipIcon","Ae","Le","Ri","Ei","Si","lo","St","Ii","es","wi","ts","Ai","Zo","os","Ni","Mi","M","color","setTimeout","we","selection","set","se","marginLeft","ue","style","ki","Li","be","Bi","onDragEnd","br","dropEffect","removeClip","kr","Di","viewBox","me","Hh","Gi","Sr","_G2","_excluded11","can","Hi","_fo$useState","fo","_fo$useState2","uo","disabled","wr","_ho$useState","ho","_ho$useState2","Ui","zi","_excluded12","Ir","_excluded13","$i","qi","_Co$useState","Co","_Co$useState2","Fi","Zi","removeEffect","Ji","_i","removeTrack","Ar","_xo$useState","xo","_xo$useState2","Ki","Xi","_excluded14","Nr","_G6","_excluded15","Qi","_yo$useState","yo","_yo$useState2","Po","ec","Yi","encode","Or","_G7","tc","_vo$useState","vo","_vo$useState2","Mr","rc","_excluded16","oc","save","sc","servers","endpointPromise","Ht","nc","go","actionCount","selectedInfo","tweenDefined","tweenSelected","selectedType","cc","selectTypes","selectedItems","changeSelected","Wr","changeTweening","oe","ic","Br","_e$mashMedia","_e$mashMedia2","_G8","_Te$useState","Te","_Te$useState2","_Te$useState3","_Te$useState4","_Te$useState5","_Te$useState6","_Te$useState7","_Te$useState8","ac","_Te$useState9","_Te$useState10","To","ko","lc","mc","z","bo","findIndex","dc","splice","pc","partial","Vr","editType","retrieve","described","le","Q","_excluded17","fc","selectedIndex","get","jr","_G9","xc","encodings","_Do$useState","Do","_Do$useState2","Lr","_excluded18","hc","request","endpoint","uc","Cc","window","re","yc","yx","U","_U","Se","Tc","gc","defaultValue","q","vc","bc","Ro","changeHandler","checked","Fr","_excluded19","Re","kt","_Re$useState","_Re$useState2","Mc","Hr","zr","Oc","Rc","_ref2","_callee2","_f$define","_f$define2","_context2","Ac","Gr","installed","Wc","getData","parse","Nc","define","_x2","Sc","Ec","fromId","Dc","preventDefault","String","jc","zt","Vc","Lc","Hc","bt","qr","Ut","time","min","Eo","_ref3","_callee3","_context3","t0","goToTime","_x3","mt","valueAsNumber","zc","$c","wo","Zr","So","_ref4","_callee4","_context4","Fc","_x4","_x5","Zc","Ft","Jr","_ref5","_callee5","_context5","_x6","_c","Io","Qc","$t","options","Kc","kc","Ur","wc","Ic","Bc","Gc","$r","Uc","qc","Jc","Xc","ye","_ye","dt","ia","$e","selectType","_excluded20","Yc","onEdge","nearStart","timeRange","na","ea","ft","oa","ra","sa","ta","Ao","start","startTime","end","endUndefined","lastTime","Kr","removeHandler","index","movable","selected","select","_excluded21","_r","ca","Xr","onMouseDown","aa","qt","la","pa","Zt","qe","ma","group","da","selectedMovable","de","useView","_excluded22","Qr","_excluded23","fa","ua","ha","va","movableGenerator","_excluded24","ya","Pe","_Pe$useState","_Pe$useState2","_Pe$useState3","_Pe$useState4","Ca","addHandler","moveHandler","_Yr","Yr","startsWith","getAttribute","Number","Pa","remove","add","actions","Sa","Ze","_excluded25","ga","Ra","Ta","ut","ba","opacity","Da","Ea","ka","No","Va","pe","_excluded26","wa","Oa","Ia","ht","Na","Ma","offE","offW","offN","offS","Mo","Wa","Aa","Be","point","K","horz","ne","vert","unlock","lock","xa","qa","_qa","Je","Za","he","_excluded27","za","Fa","Ua","Ct","Ha","Oo","Ba","La","Ga","$a","tt","ja","Qa","Oe","dataGroup","_excluded28","Ja","Ka","fromEntries","entries","_ref6","_ref7","_toPropertyKey","Xa","_ref8","_ref9","_a","Ya","Wo","rn","_G10","_ot$useState","ot","_ot$useState2","ep","_ot$useState3","tp","_ot$useState4","_ot$useState5","_ot$useState6","tn","en","cp","tweenable","endsWith","pp","ip","ap","quantize","np","_sp","sp","_sp2","equalsTime","on","indexOf","op","slice","rp","nn","lp","Bo","Vo","mp","Dt","dp","sn","up","fp","an","_e$props7","_e$props8","_e$header3","_e$footer5","_e$content3","Z","inspector","Jt","mmTube","cn","pn","setProperty","XT","_o$editType","Ep","_o$clientOptions","clientOptions","wp","previewSize","_o$icons","_excluded29","log","ke","Ip","Cp","_ke$useState","_ke$useState2","_ke$useState3","_ke$useState4","vp","hp","svgElement","Ap","Lo","default","_I$file","_I$file2","file","prefix","Rp","gp","Tp","Dp","addMedia","kp","Np","File","Pp","Sp","emit","yp","addFiles","bp","xp","display","Op","paused","changePaused","ln","changeVolume","volume","We","Mp","$p","yn","_G11","_excluded30","_Ee$useState","Ee","un","_Ee$useState2","_Ee$useState3","_Ee$useState4","_Ee$useState5","ResizeObserver","Vp","observe","disconnect","previewItems","Hp","fn","mn","Cn","xn","Wp","hn","dn","Bp","jp","Lp","Fp","Up","zp","unset","Gp","vn","Pn","kn","_G12","_gn$useState","gn","_gn$useState2","Tn","qp","Zp","fps","bn","Jp","Dn","_p","wn","_G13","_Rn$useState","Rn","_Rn$useState2","En","seconds","lengthSeconds","Sn","In","_e$props9","_e$props10","_e$content4","_e$header4","_e$footer6","fe","app","document","Xp","pause","play","Go","jo","Kp","Nn","_excluded31","_e","Qp","droppingTrack","selectedTrack","Yp","tl","clips","dense","el","An","Mn","Rt","_Rt$useState","On","Ho","_Ho$useState","_Ho$useState2","ol","rl","Vn","_G15","_Xe$useState","Xe","_Xe$useState2","Wn","tracks","nl","identifier","zo","xt","inactive","styleHeight","styleWidth","_excluded32","_xt$useState","_xt$useState2","cl","sl","minHeight","ll","minWidth","globalThis","il","al","pl","jn","_excluded33","_t","_t$useState","_t$useState2","dl","_a$current","scrollTo","Ln","ml","fl","onScroll","scrollLeft","scrollTop","Bn","Gn","_Uo$useState","Uo","_Uo$useState2","ul","_excluded34","addTrack","Hn","_excluded35","Xt","hl","Cl","trackDense","Fo","_excluded36","Kt","_Kt$useState","_Kt$useState2","xl","zn","Qt","_Qt$useState","_Qt$useState2","vl","_excluded37","Pl","yl","endFrame","Un","_e$props11","_e$props12","_e$header5","_e$footer7","_e$content5","J","timeline","zoomLess","zoomMore","Fn","_G21","_excluded38","_Yt$useState","Yt","_Yt$useState2","_Yt$useState3","_Yt$useState4","$o","_n","Xn","_G22","ve","_e$selection$mash","_e$selection$mash2","_ve$useState","_ve$useState2","_ve$useState3","_ve$useState4","_ve$useState5","qo","_ve$useState6","_ve$useState7","_ve$useState8","_ve$useState9","_ve$useState10","_ve$useState11","_ve$useState12","_ve$useState13","_ve$useState14","_ve$useState15","_ve$useState16","_ve$useState17","_ve$useState18","_ve$useState19","$n","_ve$useState20","_ve$useState21","_ve$useState22","Et","Zn","Jn","Sl","wl","bl","qn","Al","Il","Rl","Tl","gl","El","Dl","kl","moveClip","Kn","Nl","MR","Ol","_o$panels","panels","_excluded39","_e$player","player","_e$browser","_e$timeline","_e$inspector","_e$activity","yt","Ml","LR","Qn","ZR","Wl","KR","Vl","tS","sessionStorage","getItem","oS","setItem","sS","Yn"],"sourceRoot":""}