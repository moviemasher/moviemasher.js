{"version":3,"file":"static/js/182.f1d8f0f7.chunk.js","mappings":"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","sources":["../node_modules/@moviemasher/client-react/src/Utilities/View.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Label.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityContext.ts","../node_modules/@moviemasher/client-react/src/Components/Collapse/CollapseContext.ts","../node_modules/@moviemasher/client-react/src/Components/Masher/MasherContext.ts","../node_modules/@moviemasher/client-react/src/Hooks/useEditorActivity.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/Activity.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityContentContext.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityItem.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityLabel.tsx","../node_modules/@moviemasher/client-react/src/Setup/Problems.ts","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityPicked.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityPicker.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityProgress.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Bar.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/Panel.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/PanelFoot.tsx","../node_modules/@moviemasher/client-react/src/Components/Collapse/CollapseControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Collapse/NotCollapsed.tsx","../node_modules/@moviemasher/client-react/src/Components/Collapse/Collapsed.tsx","../node_modules/@moviemasher/client-react/src/Components/Activity/ActivityDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserContext.ts","../node_modules/@moviemasher/client-react/src/Hooks/useEditorDefinitions.ts","../node_modules/@moviemasher/client-react/src/Hooks/useClient.ts","../node_modules/@moviemasher/client-react/src/Hooks/useEditor.ts","../node_modules/@moviemasher/client-react/src/Hooks/useApiDefinitions.ts","../node_modules/@moviemasher/client-react/src/Hooks/useDefinitions.ts","../node_modules/@moviemasher/client-react/src/Hooks/useRefresh.ts","../node_modules/@moviemasher/client-react/src/Components/Browser/Browser.tsx","../node_modules/@moviemasher/client-react/src/Contexts/DefinitionContext.ts","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserContent.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Props.ts","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserPicker.tsx","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserControl.tsx","../node_modules/@moviemasher/client-react/src/Components/DefinitionItem/useDefinition.ts","../node_modules/@moviemasher/client-react/src/Components/DefinitionItem/DefinitionItem.tsx","../node_modules/@moviemasher/client-react/src/Components/Browser/BrowserDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/ClipItem/ClipContext.ts","../node_modules/@moviemasher/client-react/src/Contexts/TrackContext.ts","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineContext.ts","../node_modules/@moviemasher/client-react/src/Hooks/useListeners.ts","../node_modules/@moviemasher/client-react/src/Components/ClipItem/ClipItem.tsx","../node_modules/@moviemasher/client-react/src/Components/ClipItem/useClip.ts","../node_modules/@moviemasher/client-react/src/Components/Controls/CreateEditedControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EditorRedoButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EditorRemoveButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EditorUndoButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/EncodeControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/SaveControl.tsx","../node_modules/@moviemasher/client-react/client-react-deleted/ApiClient/ApiContext.ts","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorContext.ts","../node_modules/@moviemasher/client-react/src/Components/Controls/SelectEditedControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Controls/ViewControl.tsx","../node_modules/@moviemasher/client-react/src/Setup/Constants.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/DataTypeInputs.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/InputContext.ts","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/BooleanTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/DefinitionDrop.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/DefinitionSelect.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/IconTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/NumericTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Slider.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/PercentTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/RgbTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/TextTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataTypeInputs/OptionTypeInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/DataGroupInputs.ts","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/ColorGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorMovable.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorProperty.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorProperties.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Button.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/MovablesGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/OpacityGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/PointGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/SizeGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inputs/DataGroupInputs/OptionGroupInput.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/Inspector.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorPicked.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorPicker.tsx","../node_modules/@moviemasher/client-react/src/Components/Inspector/InspectorDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Element.ts","../node_modules/@moviemasher/client-react/src/Components/Masher/Masher.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerContext.ts","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerButton.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerTimeControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerPlaying.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerNotPlaying.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerTime.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/PlayerDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineScrubberElement.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineTrack.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineSizer.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineZoomer.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineTracks.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineScrubber.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineAddTrackControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineTrackIcon.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineZoom.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineAddClipControl.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/TimelineDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Player/Player.tsx","../node_modules/@moviemasher/client-react/src/Components/Timeline/Timeline.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/Panels.tsx","../node_modules/@moviemasher/client-react/src/Components/Masher/MasherDefaultProps.tsx","../node_modules/@moviemasher/client-react/src/Components/Masher/Mashing.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/PanelContent.tsx","../node_modules/@moviemasher/client-react/src/Components/Panel/PanelHead.tsx","../node_modules/@moviemasher/client-react/src/Utilities/Session.ts","../node_modules/@moviemasher/client-react/src/Utilities/VideoView.tsx"],"sourcesContent":["import React from 'react'\nimport { UnknownRecord } from '@moviemasher/moviemasher.js'\n\nexport const View = React.forwardRef<HTMLDivElement, UnknownRecord>((props, ref) =>\n  <div ref={ref} {...props} />\n)\n","import { isString, NestedStringRecord, StringRecord } from \"@moviemasher/moviemasher.js\"\n\nconst LabelRegex = /{{([a-z0-9_]*)}}/\n\n\nexport const labelObjects: NestedStringRecord = {\n  internal: 'Internal Error',\n  client: { internal: 'Internal Client Error' },\n  import: {\n    bytes: 'Size above {{value}}',\n    extension: 'Extension {{value}}',\n    type: 'Type {{value}}',\n    size: 'Dimensions {{value}}',\n    duration: 'Duration {{value}}',\n    render: '{{value}}',\n    displaySize: '{{width}}x{{height}}',\n  }\n}\nexport const labels: StringRecord = {\n  audible: 'Audible',\n  clip: 'Clip',\n  update: 'Save',\n  delete: 'Remove {{type}}',\n  unlabeled: 'Unlabeled {{type}}',\n  analyze: 'Analyzing...',\n  load: 'Loading...',\n  complete: 'Completed',\n  create: 'New',\n  render: 'Render',\n  view: 'View',\n  open: 'Open...',\n  undo: 'Undo',\n  redo: 'Redo',\n  mash: 'Mash',\n}\n\nexport const labelLookup = (id: string): string => {\n  let object: any = labelObjects\n  const components = id.split('.') \n  for (const component of components) {\n    const child = object[component]\n    if (isString(child)) return child\n\n    object = child\n  }\n  return ''\n}\n\nexport const labelTranslate = (id: string): string => {\n  if (id.includes('.')) return labelLookup(id)\n\n  return labels[id] || id\n}\n\nexport const labelInterpolate = (id: string, context: StringRecord): string => {\n  let translated = labelTranslate(id)\n  \n  const matches = translated.match(LabelRegex)\n  if (!matches) return translated\n\n  matches.forEach((match, index) => {\n    if (!index) return\n    const search = `{{${match}}}`\n    const replace = labelTranslate(context[match])\n    \n    translated = translated.replace(search, replace)\n  })\n\n  return translated\n}\n","import React from 'react'\nimport { \n  EmptyMethod, isObject, isPopulatedString, errorThrow, Identified,\n} from '@moviemasher/moviemasher.js'\nimport { ActivityInfo } from \"@moviemasher/client-core\"\n\nimport { labelInterpolate, labelTranslate } from '../../Utilities/Label'\n\nexport const activityLabel = (info: any): string => {\n  if (!isObject(info)) return ''\n\n  const { label, error, type, value } = info as ActivityInfo\n  if (error) {\n    if (value) return labelInterpolate(error, { value })\n    return labelTranslate(error)\n  }\n\n  // switch(type) {\n  //   case ActivityType.Complete:\n  //   case ActivityType.Analyze:\n  //   case ActivityType.Render:\n  //   case ActivityType.Load: return labelTranslate(type)\n    \n  // }\n\n  // if (label) return label\n  return labelTranslate(type)\n}\n\nexport enum ActivityGroup {\n  Active = 'active',\n  Error = 'error',\n  Complete = 'complete',\n}\nexport const ActivityGroups = Object.values(ActivityGroup)\nexport const isActivityGroup = (type?: any): type is ActivityGroup => {\n  return isPopulatedString(type) && ActivityGroups.includes(type as ActivityGroup)\n}\nexport function assertActivityGroup(value: any, name?: string): asserts value is ActivityGroup {\n  if (!isActivityGroup(value)) errorThrow(value, \"ActivityGroup\", name)\n}\n\nexport interface ActivityObject extends Identified {\n  infos: ActivityInfo[]\n  activityGroup: ActivityGroup\n}\nexport type ActivityObjects = ActivityObject[]\n\nexport interface ActivityContextInterface {\n  label: string\n  activities: ActivityObjects\n  allActivities: ActivityObjects\n  picked: ActivityGroup\n  pick: (activityGroup: ActivityGroup) => void\n}\n\nexport const ActivityContextDefault: ActivityContextInterface = {\n  label: '',\n  activities: [],\n  allActivities: [],\n  picked: ActivityGroup.Active,\n  pick: EmptyMethod\n}\n\nexport const ActivityContext = React.createContext(ActivityContextDefault)\n","import React from 'react'\nimport { BooleanSetter } from '@moviemasher/moviemasher.js'\n\nexport interface CollapseContextInterface {\n  collapsed: boolean,\n  changeCollapsed: BooleanSetter\n}\n\nexport const CollapseContextDefault: CollapseContextInterface = {\n  collapsed: false,\n  changeCollapsed: () => {},\n}\n\nexport const CollapseContext = React.createContext(CollapseContextDefault)\n","import React from 'react'\nimport { \n  BooleanSetter,\n  Editor, EditorIndex, EmptyMethod, Media, ScalarRecord\n} from '@moviemasher/moviemasher.js'\n\nimport { Client, Draggable } from '@moviemasher/client-core'\nimport { ThemeIcons } from '../../declarations'\n\nexport interface MasherContextInterface {\n  client?: Client\n  streaming: boolean\n  setStreaming: BooleanSetter\n  current: ScalarRecord\n  changeDefinition: (definition?: Media) => void\n  drop: (draggable: Draggable, editorIndex?: EditorIndex) => Promise<Media[]>\n  editor?: Editor\n  editorIndex: EditorIndex\n  icons: ThemeIcons\n}\n\nexport const MasherContextDefault: MasherContextInterface = {\n  streaming: false,\n  setStreaming: EmptyMethod,\n  current: {},\n  changeDefinition: EmptyMethod,\n  drop: () => Promise.resolve([]),\n  editorIndex: {},\n  icons: {},\n}\n\nexport const MasherContext = React.createContext(MasherContextDefault)\n","import React from \"react\"\nimport { assertDefined, EventType, isEventType,  Editor } from \"@moviemasher/moviemasher.js\"\n\nimport { ActivityInfo, ActivityType } from \"@moviemasher/client-core\"\n\n\nimport { ActivityGroup, ActivityObject, ActivityObjects } from \"../Components/Activity/ActivityContext\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useEditorActivity = (): [Editor, ActivityObjects] => {\n  // console.log(\"useEditorActivity\")\n  const masherContext = React.useContext(MasherContext)\n  const { editor } = masherContext\n  assertDefined(editor)\n\n  const allActivitiesRef = React.useRef<ActivityObjects>([])\n  const { eventTarget } = editor\n  \n  const getSnapshot = () => {\n    return allActivitiesRef.current\n  }\n\n  const handleEvent = (event: Event) => {\n    const { type } = event\n    if (isEventType(type) && (event instanceof CustomEvent)) {\n      const info: ActivityInfo = event.detail\n      const { id, type } = info\n      const { current: allActivities } = allActivitiesRef\n      const existing = allActivities.find(activity => activity.id === id)\n\n      const activity: ActivityObject = existing || { id, activityGroup: ActivityGroup.Active, infos: [] }\n      activity.infos.unshift(info)\n      if (type === ActivityType.Complete) activity.activityGroup = ActivityGroup.Complete\n      else if (type === ActivityType.Error) {\n        activity.activityGroup = ActivityGroup.Error\n      }\n      if (!existing) allActivities.unshift(activity)\n    }\n  }\n  const externalStore = React.useSyncExternalStore<ActivityObjects>((callback) => {\n    eventTarget.addEventListener(EventType.Active, callback)\n    return () => {\n      eventTarget.removeEventListener(EventType.Active, callback)\n    }\n  }, getSnapshot)\n\n  const removeListener = () => {\n    eventTarget.removeEventListener(EventType.Active, handleEvent)\n  }\n\n  const addListener = () => {\n    eventTarget.addEventListener(EventType.Active, handleEvent)\n\n    return () => { removeListener() }\n  }\n\n  React.useEffect(() => addListener(), [])\n  \n  return [editor, externalStore]\n}","import React from \"react\"\nimport { ClassCollapsed } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContext, ActivityContextInterface, ActivityGroup, \n  assertActivityGroup \n} from \"./ActivityContext\"\nimport { CollapseContext, CollapseContextInterface } from \"../Collapse/CollapseContext\"\nimport { useEditorActivity } from \"../../Hooks/useEditorActivity\"\n\nexport interface ActivityProps extends PropsWithChildren, WithClassName {\n  initialPicked?: string\n  initialCollapsed?: boolean\n}\n\n/**\n * @parents Masher\n * @children ActivityContent\n */\nexport function Activity(props: ActivityProps): ReactResult {\n  const { \n    initialPicked = ActivityGroup.Active, \n    initialCollapsed = false, \n    className,\n    ...rest \n  } = props\n  assertActivityGroup(initialPicked)\n\n  const [collapsed, setCollapsed] = React.useState(initialCollapsed)\n  const [label, setLabel] = React.useState('')\n\n  const [editor, activity] = useEditorActivity() \n  const [picked, setPicked] = React.useState(initialPicked)\n\n  const filteredActivities = React.useMemo(() => {\n    // console.log(\"filteredActivities\", picked, allActivities.length)\n    return activity.filter(activity => activity.activityGroup === picked)\n  }, [picked, activity.length])\n\n  const activityContext: ActivityContextInterface = { \n    activities: filteredActivities, \n    allActivities: activity, \n    picked, pick: setPicked, label\n  }\n\n\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed: setCollapsed }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (collapsed) classes.push(ClassCollapsed)\n\n  const viewProps = { ...rest, className: classes.join(' ') }\n\n  return (\n    <ActivityContext.Provider value={activityContext}>\n      <CollapseContext.Provider value={collapseContext}>\n        <View { ...viewProps } />\n      </CollapseContext.Provider>\n    </ActivityContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { ActivityGroup, ActivityObject } from './ActivityContext'\n\nexport const ActivityContentContextDefault: ActivityObject = {\n  infos: [],\n  activityGroup: ActivityGroup.Active,\n  id: '',\n}\n\nexport const ActivityContentContext = React.createContext(ActivityContentContextDefault)\n","import React from \"react\"\nimport { assertTrue } from \"@moviemasher/moviemasher.js\"\n\nimport { WithClassName, ReactResult, PropsAndChild } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContext } from \"./ActivityContext\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\nimport { CollapseContext } from \"../Collapse/CollapseContext\"\n\nexport interface ActivityContentProps extends WithClassName, PropsAndChild {}\n\n/**\n * @parents Activity\n * @children ActivityItem\n */\nexport function ActivityContent(props: ActivityContentProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed } = collapseContext\n  const { activities } = activityContext\n  if (collapsed) return null\n\n  const { children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const viewChildren = activities.map(activity => {\n    const children = React.cloneElement(child)\n    const contextProps = { children, value: activity, key: activity.id }\n    const context = <ActivityContentContext.Provider { ...contextProps } />\n    return context\n  })\n  const viewProps = { ...rest, children: viewChildren }\n  return <View {...viewProps} />\n}\n","import React from \"react\"\n\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { CollapseContext, CollapseContextInterface } from \"../Collapse/CollapseContext\"\n\nexport interface ActivityItemProps extends PropsWithChildren, WithClassName {\n  collapsed?: boolean\n}\n\n/**\n * @parents ActivityContent\n * @children ActivityLabel, ActivityPicked, CollapseControl\n */\nexport function ActivityItem(props: ActivityItemProps): ReactResult {\n  const { collapsed: collapsedProp, ...rest } = props\n\n  const [collapsed, changeCollapsed] = React.useState(!!collapsedProp)\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed }\n\n  return (\n    <CollapseContext.Provider value={collapseContext}>\n      <View { ...rest } />\n    </CollapseContext.Provider>\n  )\n}\n","import React from \"react\"\nimport { UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { ReactResult, WithClassName } from \"../../declarations\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\nimport { activityLabel } from \"./ActivityContext\"\nimport { CollapseContext } from \"../Collapse/CollapseContext\"\nimport { View } from \"../../Utilities/View\"\n\n/**\n * @parents ActivityItem\n */\n export function ActivityLabel(props: WithClassName): ReactResult {\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed } = collapseContext\n  \n  const activityContentContext = React.useContext(ActivityContentContext)\n  const { infos } = activityContentContext\n  const [firstInfo] = infos\n  const labeledInfo = infos.find(info => info.label) || { label: '' }\n  const label = labeledInfo.label || firstInfo.type \n  const viewProps: UnknownRecord = { ...props }\n  if (collapsed) viewProps.children = label\n  else {\n    const labels = [ label, ...infos.map(info => activityLabel(info))]\n    viewProps.children = labels.map((label, i) => <View key={i} children={label} />)\n  }\n  return <View { ...viewProps } />\n }","\nexport const Problems = {\n  child: 'single child element expected',\n}\n","import React from 'react'\nimport { Identified, assertTrue } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult } from '../../declarations'\nimport { Problems } from '../../Setup/Problems'\nimport { ActivityContext, assertActivityGroup } from './ActivityContext'\n\nexport interface ActivityPickedProps extends Identified, PropsAndChild {}\n\n/**\n * @parents ActivityContent\n */\nexport function ActivityPicked(props: ActivityPickedProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const { id, children } = props\n  assertActivityGroup(id)\n\n  const { picked } = activityContext\n  if (id !== picked) return null\n\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n\n  return child\n  // return React.cloneElement(child, { key: id })\n}\n","import React from \"react\"\nimport { Identified, assertTrue, ClassSelected } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { Problems } from \"../../Setup/Problems\"\nimport { ActivityContext, assertActivityGroup } from \"./ActivityContext\"\n\nexport interface ActivityPickerProps extends PropsAndChild, WithClassName, Identified {}\n/**\n * @parents ActivityContent\n */\n export function ActivityPicker(props: ActivityPickerProps): ReactResult {\n  const { id, className, children, ...rest } = props\n  assertActivityGroup(id)\n\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n\n  const activityContext = React.useContext(ActivityContext)\n  const { picked, pick } = activityContext\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (id === picked) classes.push(ClassSelected)\n\n  const viewProps = {\n    ...rest,\n    className: classes.join(' '),\n    key: `activity-picker-${id}`,\n    onClick: () => pick(id)\n  }\n\n  return React.cloneElement(child, viewProps)\n }","import React from \"react\"\nimport { \n  assertObject, isAboveZero, isPopulatedArray, isPopulatedString, isPositive \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from \"../../declarations\"\nimport { ActivityContext, ActivityGroup } from \"./ActivityContext\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\n\nexport interface ActivityProgressProps extends PropsWithoutChild, WithClassName {}\n/**\n * @parents Activity\n */\n export function ActivityProgress(props: ActivityProgressProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const activityContentContext = React.useContext(ActivityContentContext)\n  const { infos, id } = activityContentContext\n  const elements: React.ReactChild[] = []\n  let totalSteps = 0\n  let totalStep = 0\n  if (isPopulatedArray(infos)) {\n    const [info] = infos\n    const { step, steps } = info\n    if (isPositive(step) && isAboveZero(steps)) {\n      totalStep = step\n      totalSteps = steps\n    }\n  } else {\n    const { allActivities, label } = activityContext\n    if (isPopulatedString(label)) {\n      elements.push(<label key=\"label\">{label}</label>)\n    }\n    const active = allActivities.filter(activityObject => (\n      activityObject.activityGroup === ActivityGroup.Active\n    ))\n    if (active.length) {\n      active.forEach(activityObject => {\n        const { infos } = activityObject\n        const [info] = infos\n        assertObject(info, 'info')\n\n        const { step, steps } = info\n        if (isPositive(steps)) totalSteps += steps\n        if (isPositive(step)) totalStep += step\n      })\n    }\n  }\n  \n  if (totalSteps) {\n    const progress = totalStep / totalSteps\n    const progressProps = {\n      value: progress, max: 1.0, \n      children: `${Math.round(100.0 * progress)}%`,\n      key: \"progress\",\n    }\n    elements.push(<progress {...progressProps} />)\n  }\n  const viewProps = {\n    ...props, key: 'activity-progress', children: elements\n  }\n  return <View { ...viewProps } />\n }","import React from \"react\"\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../declarations\"\nimport { View } from \"./View\"\n\nexport interface BarOptions {\n  props?: WithClassName\n  before?: React.ReactChild[]\n  after?: React.ReactChild[]\n  content?: React.ReactChild | React.ReactChild[]\n}\n\nexport interface BarProps extends BarOptions, PropsWithoutChild {}\n\nexport function Bar(props: BarProps): ReactResult {\n  const { before, content, after, props: viewProps = {} } = props\n  if (!(before || content || after)) return null\n\n  const children = [before, content, after].filter(Boolean)\n\n  viewProps.children = children\n  return <View {...viewProps}/>\n}\n","import React from 'react'\nimport { CollapseContext, CollapseContextInterface } from '../Collapse/CollapseContext'\n\nimport { PropsAndChildren, ReactResult, ThemeIcons, WithClassName } from \"../../declarations\"\nimport { BarOptions } from '../../Utilities/Bar'\nimport { View } from '../../Utilities/View'\nimport { assertPopulatedObject } from '@moviemasher/moviemasher.js'\n\nexport interface ContentOptions {\n  props?: WithClassName\n  children?: React.ReactElement<WithClassName>\n}\n\nexport interface PanelOptionsStrict {\n  icons: ThemeIcons\n  props: WithClassName\n  header: BarOptions\n  content: ContentOptions\n  footer: BarOptions\n}\n\nexport type PanelOptions = Partial<PanelOptionsStrict>\n\nexport const panelOptionsStrict = (options: PanelOptions): PanelOptionsStrict => {\n  options.header ||= {}\n  options.header.props ||= {}\n  options.header.props.key ||= 'header'\n  options.header.props.className ||= 'head'\n\n  options.content ||= {}\n  options.content.props ||= {}\n  options.content.props.key ||= 'content'\n  options.content.props.className ||= 'content'\n\n  options.footer ||= {}\n  options.footer.props ||= {}\n  options.footer.props.key ||= 'footer'\n  options.footer.props.className ||= 'foot'\n\n  options.props ||= {}\n\n  assertPopulatedObject(options.icons)\n\n  return options as PanelOptionsStrict\n}\n\nexport interface PanelProps extends PropsAndChildren, WithClassName {\n  collapsed?: boolean\n}\n\nexport function Panel(props: PanelProps): ReactResult {\n  const { children, className, collapsed: collapsedProp } = props\n  const [collapsed, changeCollapsed] = React.useState(!!collapsedProp)\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (collapsed) classes.push('collapsed')\n\n  const viewProps = { children, className: classes.join(' ') }\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed }\n  return <CollapseContext.Provider value={collapseContext}>\n    <View {...viewProps} />\n  </CollapseContext.Provider>\n}\n","import React from 'react'\nimport { CollapseContext } from '../Collapse/CollapseContext'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { BarProps } from '../../Utilities/Bar'\nimport { View } from '../../Utilities/View'\n\nexport interface PanelFootProps extends PropsAndChildren, WithClassName {}\n\nexport function PanelFoot(props: BarProps): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  const { collapsed } = panelContext\n  if (collapsed) return null\n\n  const { before, content, after, props: viewProps = {} } = props\n\n  if (!(before || content || after)) return null\n\n  const children = [before, content, after].filter(Boolean)\n\n  viewProps.children = children\n  return <View {...viewProps}/>\n}\n\n","import React from \"react\"\nimport { CollapseContext } from \"./CollapseContext\"\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\n\nexport interface CollapseControlProps extends PropsWithChildren, WithClassName {}\n\nexport function CollapseControl(props: CollapseControlProps): ReactResult {\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed, changeCollapsed: setCollapsed } = collapseContext\n  const viewProps = { \n    ...props, \n    onClick: () => { setCollapsed(!collapsed) },\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { CollapseContext } from './CollapseContext'\n\nexport function NotCollapsed(props: PropsAndChildren): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  if (panelContext.collapsed) return null\n\n  return <>{props.children}</>\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { CollapseContext } from './CollapseContext'\n\nexport function Collapsed(props: PropsAndChildren): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  if (!panelContext.collapsed) return null\n\n  return <>{props.children}</>\n}\n","import React from 'react'\nimport { ClassButton, isUndefined } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { ActivityContent } from './ActivityContent'\nimport { ActivityProps } from './Activity'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { ActivityGroup } from './ActivityContext'\nimport { ActivityPicker } from './ActivityPicker'\nimport { ActivityLabel } from './ActivityLabel'\nimport { PanelFoot } from '../Panel/PanelFoot'\nimport { CollapseControl } from '../Collapse/CollapseControl'\nimport { NotCollapsed } from '../Collapse/NotCollapsed'\nimport { Collapsed } from '../Collapse/Collapsed'\nimport { View } from '../../Utilities/View'\nimport { ActivityProgress } from './ActivityProgress'\nimport { ActivityPicked } from './ActivityPicked'\nimport { ActivityItem } from './ActivityItem'\n\nexport interface ActivityPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const ActivityDefaultProps: PropsMethod<ActivityPropsDefault, ActivityProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'activity'\n  optionsStrict.props.className ||= 'panel activity'\n  optionsStrict.props.initialPicked ||= ActivityGroup.Active\n  if (isUndefined(optionsStrict.props.initialCollapsed)) optionsStrict.props.initialCollapsed = true\n  \n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.activity} />,\n    <NotCollapsed key=\"not-collapsed\"><View key=\"view\" /></NotCollapsed>,\n    <Collapsed key=\"collapsed\">\n      <ActivityProgress key=\"progress\" className='progress' />\n    </Collapsed>,\n    <CollapseControl key=\"collapse-control\">\n      <NotCollapsed key=\"not-collapsed\" children={icons.collapse}/>\n      <Collapsed key=\"collapsed\" children={icons.collapsed}/>\n    </CollapseControl>\n  ]\n\n  optionsStrict.content.children ||= <ActivityItem className='item' collapsed={true}>\n    <CollapseControl key=\"collapse-control\">\n      <NotCollapsed key=\"not-collapsed\" children={icons.collapse}/>\n      <Collapsed key=\"collapsed\" children={icons.collapsed}/>\n    </CollapseControl>\n    <ActivityLabel key=\"label\" className=\"label\" />\n    <ActivityPicked key=\"active\" id=\"active\">\n      <ActivityProgress key=\"progress\" />\n    </ActivityPicked>\n    <ActivityPicked key=\"error\" id=\"error\" children={icons.error} />\n    <ActivityPicked key=\"complete\" id=\"complete\" children={icons.complete} />\n  </ActivityItem>\n  \n  optionsStrict.footer.content ||= [\n    <ActivityPicker key='active' id='active' className={ClassButton} children={icons.active} />,\n    <ActivityPicker key='error' id='error' className={ClassButton} children={icons.error} />,\n    <ActivityPicker key='complete' id='complete' className={ClassButton} children={icons.complete} />,\n  ]\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <ActivityContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </ActivityContent>\n    <PanelFoot {...optionsStrict.footer} />\n  </>\n\n  return { ...optionsStrict.props, children }\n}\n","import React from 'react'\nimport { \n  EmptyMethod, MediaType, MediaArray, StringSetter, VoidMethod \n} from '@moviemasher/moviemasher.js'\n\nexport interface BrowserContextInterface {\n  refresh: VoidMethod\n  addPicker:(id: string, types: MediaType[]) => void\n  definitions: MediaArray\n  pick: StringSetter\n  picked: string,\n  removePicker:(id: string) => void\n}\n\nexport const BrowserContextDefault: BrowserContextInterface = {\n  addPicker: EmptyMethod,\n  refresh: EmptyMethod,\n  definitions: [],\n  pick: EmptyMethod,\n  picked: '',\n  removePicker: EmptyMethod,\n}\n\nexport const BrowserContext = React.createContext(BrowserContextDefault)\n","import React from \"react\"\nimport { \n  assertDefined, EventType, isEventType, Editor, MediaArray, \n  MediaType, isPopulatedArray \n} from \"@moviemasher/moviemasher.js\"\n\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nconst EditorDefinitionsEventAdded = EventType.Added\nconst EditorDefinitionsEventResize = EventType.Resize\nexport const useEditorDefinitions = (types: MediaType[] = []): MediaArray => {\n  const masherContext = React.useContext(MasherContext)\n  const { editor } = masherContext\n  assertDefined(editor)\n\n  const { media } = editor\n\n  const storeRef = React.useRef<Record<string, MediaArray>>({})\n  const { eventTarget } = editor\n  \n  const snapshotInitialize = (): MediaArray => {\n    const lists = types.map(type => media.byType(type))\n    return lists.length === 1 ? lists[0] : lists.flat()\n  }\n\n  const snapshotGet = () => {\n    const key = types.join('-') || 'empty'\n    return storeRef.current[key] ||= snapshotInitialize()\n  }\n\n  const handleEvent = (event: Event) => {\n    const { type } = event\n    if (isEventType(type) && (event instanceof CustomEvent)) {\n      const { detail } = event\n      const { definitionTypes } = detail\n      if (isPopulatedArray(definitionTypes)) {\n        const types = definitionTypes as MediaType[]\n\n        const { current} = storeRef\n        const allIds = Object.keys(current)\n        const ids = allIds.filter(id => types.some(type => id.includes(type)))\n        ids.forEach(id => delete current[id])\n      }\n    }\n  }\n  const externalStore = React.useSyncExternalStore<MediaArray>((callback) => {\n    eventTarget.addEventListener(EditorDefinitionsEventAdded, callback)\n    eventTarget.addEventListener(EditorDefinitionsEventResize, callback)\n    return () => {\n      eventTarget.removeEventListener(EditorDefinitionsEventAdded, callback)\n      eventTarget.removeEventListener(EditorDefinitionsEventResize, callback)\n    }\n  }, snapshotGet)\n\n  const removeListener = () => {\n    eventTarget.removeEventListener(EditorDefinitionsEventAdded, handleEvent)\n  }\n\n  const addListener = () => {\n    eventTarget.addEventListener(EditorDefinitionsEventAdded, handleEvent)\n    return () => { removeListener() }\n  }\n\n  React.useEffect(() => addListener(), [])\n  \n  return externalStore\n}","import React from \"react\"\nimport { Client } from \"@moviemasher/client-core\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useClient = (): Client => React.useContext(MasherContext).client!\n","import React from \"react\"\nimport { Editor } from \"@moviemasher/moviemasher.js\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useEditor = (): Editor => React.useContext(MasherContext).editor!\n","import React from \"react\"\nimport { \n  assertDefined, MediaArray, Endpoints, MediaTypes, \n} from \"@moviemasher/moviemasher.js\"\nimport { \n  ClientArrayResponse, ClientReadOptions, ReadOperation \n} from \"@moviemasher/client-core\"\n\nimport { useClient } from \"./useClient\"\nimport { useEditor } from \"./useEditor\"\n\nconst ApiDefinitionsEvent = 'api-definitions'\nconst ApiDefinitionsDisabled = 'disabled'\nconst ApiDefinitionsEmpty = 'empty'\n\nexport const useApiDefinitions = (types: MediaTypes = []): MediaArray => {\n\n  const client = useClient()\n  if (!client.enabled(ReadOperation)) return []\n\n  const editor = useEditor()\n  assertDefined(editor)\n  \n  const storeRef = React.useRef<Record<string, MediaArray>>({})\n\n  const { eventTarget } = editor\n\n  const definitionsPromise = (key: string) => {\n\n    const options: ClientReadOptions = { type: types }\n    return client.list(options).then((response: ClientArrayResponse) => {\n      console.debug(\"DataDefinitionRetrieveResponse\", Endpoints.data.definition.retrieve, response)\n      const { error, data } = response\n      if (!data) return\n      const array = storeRef.current[key]\n      array.push(...data)\n      eventTarget.dispatchEvent(new CustomEvent(ApiDefinitionsEvent))\n    })\n  }\n  \n  const snapshotInitialize = (key: string): MediaArray => {\n    switch(key) {\n      case ApiDefinitionsEmpty:\n      case ApiDefinitionsDisabled: break\n      default: definitionsPromise(key) \n    }\n    return []\n  }\n\n  const currentKey = () => {\n    if (!types.length) return ApiDefinitionsEmpty\n\n    return types.join('-')\n  }\n\n  const snapshotGet = () => {\n    const key = currentKey()\n    const array = storeRef.current[key]\n    if (array) return array\n    \n    // console.log(\"useApiDefinitions defining\", key)\n    return storeRef.current[key] = snapshotInitialize(key)\n  }\n\n  const externalStore = React.useSyncExternalStore<MediaArray>((callback) => {\n    eventTarget.addEventListener(ApiDefinitionsEvent, callback)\n    return () => {\n      eventTarget.removeEventListener(ApiDefinitionsEvent, callback)\n    }\n  }, snapshotGet)\n  \n  return externalStore\n}","import { \n  Editor, MediaArray, MediaType\n} from \"@moviemasher/moviemasher.js\"\n\nimport { useEditorDefinitions } from \"./useEditorDefinitions\"\nimport { useApiDefinitions } from \"./useApiDefinitions\"\n\nexport const useDefinitions = (types: MediaType[] = []): MediaArray => {\n  const editorDefinitions = useEditorDefinitions(types)\n  const apiDefinitions = useApiDefinitions(types)\n  const definitions = apiDefinitions.filter(apiDefinition => \n    !editorDefinitions.some(editorDefinition => editorDefinition.id === apiDefinition.id)\n  )\n  const combined = [...editorDefinitions, ...definitions]\n  // console.log(\"useDefinitions\", combined.length, types.join(', '))\n  return combined\n}","import React from \"react\"\n\n\nexport const useRefresh = (): [(...args: any[]) => void, number] => {\n  const [nonce, setNonce] = React.useState(0)\n  const updateNonce = () => { setNonce(new Date().valueOf()) }\n  return [updateNonce, nonce]\n}","import React from \"react\"\nimport { \n  assertPopulatedString, MediaType, MediaTypesRecord\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { BrowserContext, BrowserContextInterface } from \"./BrowserContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { useDefinitions } from \"../../Hooks/useDefinitions\"\nimport { useRefresh } from \"../../Hooks/useRefresh\"\n\n\nexport interface BrowserProps extends PropsWithChildren {\n  initialPicked?: string\n}\n\n/**\n * @parents Masher\n * @children BrowserContent, BrowserPicker\n */\nexport function Browser(props: BrowserProps): ReactResult {\n  const { initialPicked = 'container', ...rest } = props\n\n  const [typesObject, setTypesObject] = React.useState<MediaTypesRecord>({})\n  const editorContext = React.useContext(MasherContext)\n  const { changeDefinition } = editorContext\n  const [refresh] = useRefresh()\n  const [ picked, setPicked] = React.useState(initialPicked) \n  const pick = (id: string) => {\n    assertPopulatedString(id)\n    changeDefinition()\n    setPicked(id)\n  }\n\n  const definitions = useDefinitions(typesObject[picked])\n\n  const addPicker = (id: string, types: MediaType[]) => {\n    setTypesObject(original => ({ ...original, [id]: types }))\n  }\n\n  const removePicker = (id: string): void => {\n    setTypesObject(original => ({ ...original, [id]: [] }))\n  }\n\n  const browserContext: BrowserContextInterface = {\n    refresh,\n    definitions,\n    picked,\n    pick, \n    addPicker, \n    removePicker,\n  }\n\n  const contextProps = {\n    value: browserContext,\n    children: <View {...rest} />\n  }\n  return (\n    <BrowserContext.Provider { ...contextProps } />\n  )\n}\n","import React from 'react'\nimport { Media } from '@moviemasher/moviemasher.js'\n\nexport interface DefinitionContextInterface {\n  definition?: Media\n}\n\nexport const DefinitionContextDefault: DefinitionContextInterface = {\n}\n\nexport const DefinitionContext = React.createContext(DefinitionContextDefault)\n","import React from \"react\"\nimport { \n  assertTrue, ClassDropping, eventStop\n} from \"@moviemasher/moviemasher.js\"\n\nimport { WithClassName, ReactResult, PropsAndChild } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { BrowserContext } from \"./BrowserContext\"\nimport { DefinitionContext } from \"../../Contexts/DefinitionContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { dragTypes, TransferTypeFiles } from \"@moviemasher/client-core\"\n\nexport interface BrowserContentProps extends WithClassName, PropsAndChild {}\n\n/**\n * @parents Browser\n * @children BrowserSource\n */\nexport function BrowserContent(props: BrowserContentProps): ReactResult {\n  const [over, setOver] = React.useState(false)\n  const { className, children, ...rest } = props\n\n  const editorContext = React.useContext(MasherContext)\n  const browserContext = React.useContext(BrowserContext)\n  const definitions = browserContext.definitions || []\n  const { drop } = editorContext\n\n  const dragValid = (dataTransfer?: DataTransfer | null): dataTransfer is DataTransfer => {\n    if (!dataTransfer) return false\n\n    return dragTypes(dataTransfer).includes(TransferTypeFiles)\n  }\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    const { dataTransfer } = event\n    if (dragValid(dataTransfer)) drop(dataTransfer.files)\n  } \n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    setOver(dragValid(event.dataTransfer))\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n  \n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n  \n  const childNodes = () => {\n    const childProps = child.props\n    return definitions.map(definition => {\n      const cloneProps = { ...childProps, key: definition.id }\n      const children = React.cloneElement(child, cloneProps)\n      const contextProps = { children, value: { definition }, key: definition.id }\n      const context = <DefinitionContext.Provider { ...contextProps } />\n      return context\n    })\n  }\n\n  const viewProps = {\n    ...rest, \n    className: classes.join(' '),\n    key: `browser-content`,\n    children: childNodes(), \n    onDrop, onDragOver, onDragLeave,\n\n  }\n  return <View {...viewProps} />\n}\n","import { MediaType, isMediaType, isSelectType, isString, Property, SelectType } from \"@moviemasher/moviemasher.js\"\n\nconst propsStringArray = (string?: string, array?: string | string[], properties?: Property[]): string[] => {\n  if (string) return [string]\n\n  if (!array) return properties ? properties.map(property => property.name) : []\n\n  if (isString(array)) return array.split(',').map(string => string.trim())\n\n  return array\n}\n\nexport const propsMediaTypes = (type?: string, types?: string | string[], id?: string): MediaType[] => {\n  const strings = propsStringArray(type, types)\n  if (id && !strings.length) strings.push(id)\n  const validStrings = strings.filter(string => isMediaType(string))\n  return validStrings.map(string => string as MediaType)\n}\n\n\nexport const propsSelectTypes = (type?: string, types?: string | string[], id?: string): SelectType[] => {\n  const strings = propsStringArray(type, types)\n  if (id && !strings.length) strings.push(id)\n  const validStrings = strings.filter(string => isSelectType(string))\n  return validStrings.map(string => string as SelectType)\n}\n","import React from \"react\"\nimport { \n  ClassSelected, Identified, assertPopulatedString, assertTrue \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsAndChild, ReactResult, WithClassName\n } from \"../../declarations\"\nimport { propsMediaTypes } from \"../../Utilities/Props\"\nimport { BrowserContext } from \"./BrowserContext\"\nimport { Problems } from \"../../Setup/Problems\"\n\nexport interface BrowserPickerProps extends PropsAndChild, Identified, WithClassName {\n  type?: string\n  types?: string | string[]\n}\n\n/**\n * @parents Browser\n */\nexport function BrowserPicker(props: BrowserPickerProps): ReactResult {\n  const { children, type, types, className, id, ...rest } = props\n  assertPopulatedString(id)\n\n  const browserContext = React.useContext(BrowserContext)\n  const { pick, picked, addPicker, removePicker } = browserContext\n\n  const classes = []\n  if (className) classes.push(className)\n  if (picked === id) classes.push(ClassSelected)\n\n  React.useEffect(() => {\n    addPicker(id, propsMediaTypes(type, types, id))\n    return () => { removePicker(id) }\n  }, [])\n\n  const viewProps = { \n    ...rest, \n    className: classes.join(' '),\n    key: `browser-picker-${id}`,\n    onClick: () => { pick(id) }, \n  }\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n   \n  return React.cloneElement(child, viewProps)\n}\n","import React from \"react\"\nimport { assertObject, RawTypes } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { useClient } from \"../../Hooks/useClient\"\n\nconst BrowserControlId = 'upload-control-id'\n\nexport function BrowserControl(props: PropsAndChild): ReactResult {\n  const { children, ...rest } = props\n  const fileInput = React.useRef<HTMLInputElement>(null)\n  const client = useClient()\n  const editorContext = React.useContext(MasherContext)\n  const { drop } = editorContext\n\n\n  const onChange = (event: React.FormEvent<HTMLInputElement>) => {\n    const { files } = event.currentTarget\n    if (files) drop(files)\n  }\n\n  const accept = client.accept()\n  \n  const inputProps = {\n    accept,\n    multiple: true,\n    id: BrowserControlId,\n    onChange,\n    type: 'file',\n    key: 'browser-control-input',\n    ref: fileInput,\n    ...rest,\n  }\n  const input = <input {...inputProps}/>\n\n  if (!React.isValidElement(children)) return input\n\n  const kids = [React.Children.only(children), input]\n\n  const labelProps = {\n    children: kids,\n    key: 'browser-control',\n    htmlFor: BrowserControlId\n  }\n  return <label {...labelProps} />\n}\n","import React from \"react\"\nimport { Media } from \"@moviemasher/moviemasher.js\"\nimport { DefinitionContext } from \"../../Contexts/DefinitionContext\"\n\nexport const useDefinition = (): Media => React.useContext(DefinitionContext).definition!\n","import React from 'react'\nimport { \n  assertTrue,\n  ClassSelected, MediaObject, sizeAboveZero, sizeCopy, sizeScale, Strings, UnknownRecord} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from '../../declarations'\nimport { DragDefinitionObject, DragSuffix } from '@moviemasher/client-core'\nimport { useDefinition } from './useDefinition'\nimport { View } from '../../Utilities/View'\nimport { sizeCeil } from '@moviemasher/moviemasher.js'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { BrowserContext } from '../Browser/BrowserContext'\n\nexport interface DefinitionItemProps extends WithClassName, PropsWithoutChild {\n  draggable?: boolean\n  iconRatio?: number\n}\n\n/**\n * @parents BrowserContent, DefinitionDrop\n */\nexport function DefinitionItem(props: DefinitionItemProps): ReactResult {\n  const { className, iconRatio, ...rest } = props\n  const ratio = iconRatio || 0.25\n  \n  const svgRef = React.useRef<HTMLDivElement>(null)\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const browserContext = React.useContext(BrowserContext)\n  const { refresh } = browserContext\n  const masherContext = React.useContext(MasherContext)\n  const { editor, changeDefinition, current } = masherContext\n  \n  assertTrue(editor)\n\n  const media = useDefinition()\n\n  const { id, label } = media\n \n  const updateRef = async () => {\n    const { rect } = editor\n    const { current } = svgRef\n    if (!(current && sizeAboveZero(rect))) return \n\n    const scaled = sizeCeil(sizeScale(sizeCopy(rect), ratio, ratio))\n    const element = await media.definitionIcon(scaled)\n    if (element) current.replaceChildren(element)\n  }\n\n  React.useEffect(() => { updateRef() }, [])\n  if (svgRef.current) updateRef()\n\n  const childNodes = () => {\n    const nodes = [<View key=\"icon\" ref={svgRef} />]\n    if (label) nodes.unshift(<label key='label'>{label}</label>)\n    return nodes\n  }\n\n  const onPointerDown = (event: Event) => { \n    event.stopPropagation()\n    \n    changeDefinition(media) \n    refresh()\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    onPointerDown(event)\n    const rect = viewRef.current!.getBoundingClientRect()\n    const { left } = rect\n    const { clientX } = event\n    const mediaObject = media.toJSON()\n    const data: DragDefinitionObject = { offset: clientX - left, mediaObject }\n    const json = JSON.stringify(data)\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    dataTransfer.effectAllowed = 'copy'\n    // console.log(\"DefinitionItem.onDragStart\", definition.type + DragSuffix, json)\n    dataTransfer.setData(media.type + DragSuffix, json)\n  }\n\n  const calculateClassName = () => {\n    const classes: Strings = []\n    if (className) classes.push(className)\n    if (current.mediaId === id) classes.push(ClassSelected)\n    return classes.join(' ')\n  }\n\n  const viewProps: UnknownRecord = {\n    ...rest,\n    className,\n    children: childNodes(),\n    ref: viewRef, key: id,\n  }\n  if (props.draggable) {\n    viewProps.onDragStart = onDragStart\n    viewProps.onPointerDown = onPointerDown\n    viewProps.className = calculateClassName()\n  }\n  return <View {...viewProps}/>\n}\n","import React from 'react'\nimport { ClassButton } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { BrowserContent } from './BrowserContent'\nimport { BrowserPicker } from './BrowserPicker'\nimport { BrowserProps } from './Browser'\nimport { BrowserControl } from './BrowserControl'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { DefinitionItem } from '../DefinitionItem/DefinitionItem'\nimport { View } from '../../Utilities/View'\n\nexport interface BrowserPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const BrowserDefaultProps: PropsMethod<BrowserPropsDefault, BrowserProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'browser'\n  optionsStrict.props.className ||= 'panel browser'\n  optionsStrict.props.initialPicked ||= 'container'\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.browser} />\n  ]\n\n  optionsStrict.footer.content ||= [\n    <BrowserPicker key='effect' id='effect' className={ClassButton} children={icons.effect} />,\n    <BrowserPicker key='container' id='container' className={ClassButton} children={icons.container} />,\n    <BrowserPicker key='content' id='content' className={ClassButton} children={icons.content} />,\n  ]\n  optionsStrict.footer.before ||= [\n    <BrowserPicker key='video' id='video' types='video,videosequence' className={ClassButton} children={icons.browserVideo} />,\n    <BrowserPicker key='audio' id='audio' className={ClassButton} children={icons.browserAudio} />,\n    <BrowserPicker key='image' id='image' className={ClassButton} children={icons.browserImage} />,\n    <BrowserPicker key='font' id='font' className={ClassButton} children={icons.browserText} />,\n  ]\n\n  optionsStrict.footer.after ||= [\n    <BrowserControl key='import' children={icons.import} />\n  ]\n\n  optionsStrict.content.children ||= (\n    <DefinitionItem draggable={true} className='definition preview' />\n  )\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <BrowserContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </BrowserContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n  \n  return { ...optionsStrict.props, children }\n}\n","import React from 'react'\nimport { Clip } from '@moviemasher/moviemasher.js'\n\nexport interface ClipContextInterface {\n  prevClipEnd: number\n  clip?: Clip\n}\n\nexport const ClipContextDefault: ClipContextInterface = {\n  prevClipEnd: 0\n}\n\nexport const ClipContext = React.createContext(ClipContextDefault)\n","import React from 'react'\nimport { Track } from '@moviemasher/moviemasher.js'\n\nexport interface TrackContextInterface {\n  track?: Track\n}\n\nexport const TrackContextDefault: TrackContextInterface = {}\n\nexport const TrackContext = React.createContext(TrackContextDefault)\n","import React from 'react'\nimport {\n  EmptyMethod,RectZero,\n  Clip, DroppingPosition, NumberSetter, Rect, Track, VoidMethod, Point\n} from '@moviemasher/moviemasher.js'\n\nexport interface TimelineContextInterface {\n  dragTypeValid(dataTransfer: DataTransfer, clip?: Clip): boolean\n  droppingClip?: Clip\n  droppingPosition?: DroppingPosition | number\n  droppingTrack?: Track\n  frame: number\n  frames: number\n  onDragLeave: (event: DragEvent) => void\n  onDrop: (event: DragEvent) => void\n  rect: Rect\n  refresh: VoidMethod\n  refreshed: number\n  scale: number\n  scroll: Point\n  selectedClip?: Clip\n  selectedTrack?: Track\n  setDroppingClip(_?: Clip): void\n  setDroppingPosition(_: DroppingPosition | number): void\n  setDroppingTrack(_?: Track): void\n  setRect(_:Rect): void\n  setScroll(_:Point): void\n  setZoom: NumberSetter\n  zoom: number\n}\n\nexport const TimelineContextDefault: TimelineContextInterface = {\n  dragTypeValid(): boolean { return false },\n  frame: 0,\n  frames: 0,\n  onDragLeave: EmptyMethod,\n  onDrop: EmptyMethod,\n  rect: RectZero,\n  refreshed: 0, refresh: EmptyMethod,\n  scale: 0,\n  scroll: { x: 0, y: 0 },\n  setDroppingClip: EmptyMethod,\n  setDroppingPosition: EmptyMethod,\n  setDroppingTrack: EmptyMethod,\n  setRect: EmptyMethod,\n  setScroll: EmptyMethod,\n  setZoom: EmptyMethod,\n  zoom: 1,\n}\n\nexport const TimelineContext = React.createContext(TimelineContextDefault)\n","import React from \"react\"\nimport { EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { ListenerCallback } from \"../declarations\"\nimport { useEditor } from \"./useEditor\"\n\nexport interface ListenerEvents extends Partial<Record<EventType, ListenerCallback>> {}\n\nexport const useListeners = (events: ListenerEvents): void => {\n  const editor = useEditor()\n  const { eventTarget } = editor\n\n  const handleEvent = (event : Event) => {\n    const { type } = event\n    const handler = events[type as EventType]\n    if (handler) handler(event)\n  }\n\n  const removeListeners = () => {\n    const keys = Object.keys(events)\n    keys.forEach(eventType => {\n      eventTarget.removeEventListener(eventType, handleEvent)\n    })\n  }\n\n  const addListeners = () => {\n    Object.keys(events).forEach(eventType => {\n      eventTarget.addEventListener(eventType, handleEvent)\n    })\n    return () => { removeListeners() }\n  }\n\n  React.useEffect(() => addListeners(), [])\n}\n","import React from 'react'\nimport {\n  UnknownRecord, DroppingPosition, ClassSelected, eventStop, \n  assertTrue,\n  sizeAboveZero, svgPolygonElement,\n  Size, EventType, isAboveZero, colorToRgb, colorRgbDifference, colorFromRgb, svgPatternElement, idGenerate, svgDefsElement, svgUrl, svgSvgElement, sizeCeil, isEventType, isObject\n} from '@moviemasher/moviemasher.js'\nimport { \n  pixelFromFrame, DragSuffix, droppingPositionClass \n} from '@moviemasher/client-core'\n\nimport { PropsWithoutChild, ReactResult, WithClassName } from '../../declarations'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { TimelineContext } from '../Timeline/TimelineContext'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { ClipContext } from './ClipContext'\nimport { View } from '../../Utilities/View'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { useRefresh } from '../../Hooks/useRefresh'\n\nconst ClipItemRefreshRate = 500\n\nexport interface ClipItemProps extends WithClassName, PropsWithoutChild {}\n/**\n * @parents TimelineTrack\n */\nexport function ClipItem(props: ClipItemProps): ReactResult {\n  const { className, ...rest } = props\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const editor = useEditor()\n  const trackContext = React.useContext(TrackContext)\n  const timelineContext = React.useContext(TimelineContext)\n  \n  const [refresh, nonce] = useRefresh()\n\n  const watchingRef = React.useRef<UnknownRecord>({})\n  const { current: watching } = watchingRef\n  const clipContext = React.useContext(ClipContext)\n  const {\n    droppingPosition, droppingClip, scale, selectedClip, onDrop,\n    dragTypeValid, setDroppingPosition, setDroppingClip, setDroppingTrack, \n    onDragLeave,\n  } = timelineContext\n  const { track } = trackContext\n  const { clip, prevClipEnd} = clipContext\n  assertTrue(clip)\n\n  const backgroundNode = (fill: string, size: Size, spacing: number) => {\n    const rgb = colorToRgb(fill)\n    const differenceRgb = colorRgbDifference(rgb)\n    const forecolor = colorFromRgb(differenceRgb)\n    const framePolygon = svgPolygonElement(size, '', fill)\n    const spaceRect = { \n      x: size.width, y: 0,\n      width: spacing, height: size.height, \n    }\n    const spacePolygon = svgPolygonElement(spaceRect, '', forecolor)\n\n    const patternSize = { \n      width: size.width + spacing, height: size.height\n    }\n    const patternId = idGenerate('pattern')\n    const patternItems = [framePolygon, spacePolygon]\n    const pattern = svgPatternElement(patternSize, patternId, patternItems)\n    const defsElement = svgDefsElement([pattern])\n    const patternedSize = { width: timelineContext.rect.width, height: parentHeight }\n    const patternedPolygon = svgPolygonElement(patternedSize, '', svgUrl(patternId))\n    return svgSvgElement(patternedSize, [defsElement, patternedPolygon])\n  }\n  const getParentHeight = () => {\n    const { current } = svgRef\n    const parent = current?.parentNode\n    if (parent instanceof HTMLDivElement) {\n\n      return parent.offsetHeight // .getBoundingClientRect().height\n    }\n  \n    // console.log(\"ClipItem.getParentHeight NO HEIGHT\", !!current)\n    return 0\n  }\n\n  const [parentHeight, setParentHeight] = React.useState(getParentHeight)\n\n  const { label, frame, frames } = clip\n\n  const getCurrentWidth = () => {\n    if (!(isAboveZero(scale) && isAboveZero(frames))) {\n      // console.log(\"ClipItem getCurrentWidth returing 0\", scale, frames)\n      return 0\n    }\n\n    const currentWidth = pixelFromFrame(frames, scale, 'floor')\n    const { width } = watching\n    if (currentWidth && currentWidth !== width) {\n      watching.width = currentWidth\n      refresh()\n    }\n    return currentWidth\n  }\n\n  const currentWidth = getCurrentWidth()\n\n  const actionCallback = (event: Event) => { \n    // console.log(\"ClipItem actionCallback\", event)\n    if (watching.redraw) return\n    \n    const { type } = event\n    if (!isEventType(type)) return\n    if (!(event instanceof CustomEvent)) return\n    if (type !== EventType.Action) return\n    \n    const { detail } = event\n    if (!detail) return \n    \n    const { action } = detail\n    if (!action) return\n\n    const { target } = action\n    if (!isObject(target)) return\n\n    switch(target) {\n      case clip:\n      case clip.container:\n      case clip.content: break\n      default: {\n        if (action.property === 'color') break\n        return\n      }\n    }    \n    refresh()\n  }\n\n  useListeners({ [EventType.Action]: actionCallback, [EventType.Save]: refresh })\n\n  const frameSize = () => {\n    const { rect } = editor\n    const size = { \n      width: parentHeight * (rect.width / rect.height), height: parentHeight\n    }\n    return sizeCeil(size)\n  }\n\n  const clipSize = (size: Size) => {\n    const { width, height } = size\n    return { width: Math.max(width, currentWidth), height }\n  }\n\n  const populateSvg = (): Promise<void> => {\n    const { width, redraw } = watching\n    delete watching.timeout \n    delete watching.redraw \n    \n    const { current } = svgRef\n    const { mashMedia } = editor\n\n    const allOk = current && mashMedia && width && width === getCurrentWidth()\n    if (redraw || !allOk) {\n      refresh()\n      if (!allOk) return Promise.resolve()\n    }\n    const currentSize = frameSize()\n    const fullSize = clipSize(currentSize)\n    \n    // return Promise.resolve()\n    \n    const promise = clip.clipIcon(fullSize, timelineContext.scale, 2)\n    if (!promise) return Promise.resolve()\n    \n    return promise.then(element => {\n      const latestWidth = getCurrentWidth()\n      if (element && width >= latestWidth) {\n        // console.log(\"ClipItem.populateSvg replacing children\", fullSize)\n        current.replaceChildren(backgroundNode(mashMedia.color, currentSize, 2), element)\n      } //else console.log(\"ClipItem.populateSvg\", !!element, width, \">= ?\", latestWidth)\n    })\n  }\n  \n  const handleChange = () => {\n    if (!parentHeight) {\n      // console.log(\"ClipItem.handleChange no parentHeight\")\n      return setParentHeight(getParentHeight)\n    }\n     \n    const { current } = svgRef\n    const { mashMedia } = editor\n    if (!(current && mashMedia)) return\n\n    if (watching.timeout) {\n      if (!watching.redraw) {\n        // console.log(\"ClipItem.handleChange setting redraw\", nonce, scale, parentHeight)\n        watching.redraw = true\n      }\n      return\n    }\n    // // console.log(\"ClipItem.handleChange setting timeout\", nonce, scale)\n    watching.timeout = setTimeout(populateSvg, ClipItemRefreshRate)\n  }\n\n  React.useEffect(handleChange, [nonce, scale, parentHeight])\n  \n  const onPointerDown = (event: MouseEvent) => { \n    event.stopPropagation()\n    editor.selection.set(clip) \n  }\n\n  const onDragEnd = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n    \n    const { dropEffect } = dataTransfer\n    if (dropEffect === 'none') {\n      editor.removeClip(clip)\n    }\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    onPointerDown(event)\n\n    const { dataTransfer, clientX } = event\n    const { current } = viewRef\n    if (!(dataTransfer && current)) return\n\n    const rect = current.getBoundingClientRect()\n    const { left } = rect\n\n    const data = { offset: clientX - left }\n    const json = JSON.stringify(data)\n    dataTransfer.effectAllowed = 'move'\n    dataTransfer.setData('clip' + DragSuffix, json)\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const definitionType = dragTypeValid(dataTransfer, clip)\n    const pos = definitionType ? DroppingPosition.At : DroppingPosition.None\n    setDroppingTrack(definitionType ? track : undefined)\n    setDroppingClip(definitionType ? clip : undefined)\n    setDroppingPosition(pos)\n  }\n\n  const calculateClassName = (): string => {\n    const selected = clip === selectedClip\n    const classes: string[] = []\n    if (className) classes.push(className)\n    if (selected) classes.push(ClassSelected)\n    if (droppingClip === clip) classes.push(droppingPositionClass(droppingPosition))\n\n    // console.log(\"TimelineClip calculatedClassName\", classes.join(' '))\n    return classes.join(' ')\n  }\n\n  const childNodes = () => {\n    const svgProps: UnknownRecord = {\n      key: \"clip-previews\", ref: svgRef\n    }\n    const size = { width: currentWidth, height: parentHeight }\n    if (sizeAboveZero(size)) {\n      const { width, height } = size\n      svgProps.width = width\n      svgProps.height = height\n      svgProps.viewBox = `0 0 ${width} ${height}`\n    }\n    const nodes = [<svg { ...svgProps } />]\n    if (label) nodes.unshift(<label key='label'>{label}</label>)\n    return nodes\n  }\n\n  const style: UnknownRecord = { width: currentWidth }\n  if (prevClipEnd > -1) {\n    style.marginLeft = pixelFromFrame(frame - prevClipEnd, scale, 'floor')\n  }\n\n  const clipProps = {\n    ...rest,\n    style,\n    className: calculateClassName(),\n    onPointerDown, onDragStart, onDragEnd,\n    onDragOver, onDragLeave, onDrop,\n    onClick: (event: React.MouseEvent) => event.stopPropagation(),\n    draggable: true,\n    ref: viewRef,\n    children: childNodes()\n  }\n\n  return <View { ...clipProps } />\n}\n","import React from \"react\"\nimport { Clip } from \"@moviemasher/moviemasher.js\"\n\nimport { ClipContext } from \"./ClipContext\"\n\nexport const useClip = (): Clip => React.useContext(ClipContext).clip!\n","import React from \"react\"\nimport {\n  EventType, MasherAction} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport function CreateEditedControl(props: PropsAndChild): ReactResult {\n  const { children, ...rest } = props\n  const editor = useEditor()\n  const getDisabled = () => editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n\n  useListeners({\n    [EventType.Action]: updateDisabled,\n    [EventType.Loaded]: updateDisabled,\n    [EventType.Save]: updateDisabled,\n  })\n\n  const onClick = () => {\n    if (disabled) return\n\n    editor.create()\n  }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n\n\n}\n","import React from \"react\"\nimport { MasherAction, EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorRedoButtonProps extends PropsAndChild {}\n\nexport function EditorRedoButton(props: EditorRedoButtonProps): ReactResult {\n\n  const [disabled, setDisabled] = React.useState(true)\n  const editor = useEditor()\n  useListeners({\n    [EventType.Action]: () => { setDisabled(!editor.can(MasherAction.Redo)) }\n  })\n  const { children, ...rest } = props\n  const onClick = () => { editor.redo() }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport { EventType, SelectType, assertSelectType, isEffect, isClip, isTrack } from \"@moviemasher/moviemasher.js\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorRemoveButtonProps extends PropsAndChild {\n  type: string\n}\n\nexport function EditorRemoveButton(props: EditorRemoveButtonProps): ReactResult {\n  const { children, type, ...rest } = props\n  const selectType = type || SelectType.Clip\n  assertSelectType(selectType)\n\n  const editor = useEditor()\n  const [disabled, setDisabled] = React.useState(!editor.selection[selectType])\n  useListeners({\n    [EventType.Selection]: () => { setDisabled(!editor.selection[selectType]) }\n  })\n\n  const onClick = () => {\n    if (disabled) return\n\n    const selectable = editor.selection[selectType]\n    if (isEffect(selectable)) editor.removeEffect(selectable)\n    else if (isClip(selectable)) editor.removeClip(selectable)\n    else if (isTrack(selectable)) editor.removeTrack(selectable)\n  }\n\n  const child = React.Children.only(children)\n\n  const cloneProps = { ...rest, ...child.props, onClick, disabled }\n  return React.cloneElement(child, cloneProps)\n}\n","import React from \"react\"\nimport { MasherAction, EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorUndoButtonProps extends PropsAndChild {}\n\nexport function EditorUndoButton(props: EditorUndoButtonProps): ReactResult {\n  const editor = useEditor()\n  const [disabled, setDisabled] = React.useState(true)\n  useListeners({\n    [EventType.Action]: () => { setDisabled(!editor.can(MasherAction.Undo)) }\n  })\n  const { children, ...rest } = props\n\n  const onClick = () => { editor.undo() }\n\n  const buttonOptions = { ...rest, onClick, disabled: disabled }\n  return  React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport {\n  EventType, MasherAction, assertMashMedia\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { EncodeOperation } from \"@moviemasher/client-core\"\nimport { useClient } from \"../../Hooks/useClient\"\n\nexport function EncodeControl(props: PropsAndChild): ReactResult {\n  const client = useClient()\n  const { children, ...rest } = props\n  const editor = useEditor()\n\n  const getDisabled = () => !editor.can(MasherAction.Render)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => setDisabled(getDisabled())\n  useListeners({\n    [EventType.Save]: updateDisabled,\n    [EventType.Loaded]: updateDisabled,\n    [EventType.Action]: updateDisabled\n  })\n\n  if (!client.enabled(EncodeOperation)) return null\n\n  const onClick = () => {\n    if (disabled) return\n\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n\n    setDisabled(true)\n    client.encode(mashMedia)\n  }\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport {\n  MasherAction, EventType, assertMashMedia,\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useClient } from \"../../Hooks/useClient\"\nimport { WriteOperation } from \"@moviemasher/client-core\"\n\nexport function SaveControl(props:PropsAndChild): ReactResult {\n  const editor = useEditor()\n  const client = useClient()\n\n  const getDisabled = () => !editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n  useListeners({\n    [EventType.Action]: updateDisabled, \n    [EventType.Save]: updateDisabled,\n  })\n\n  if (!client.enabled(WriteOperation)) return null\n\n  const { children, ...rest } = props\n  \n  const onClick = () => {\n    if (disabled) return\n\n    setDisabled(true)\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n    \n    client.save(mashMedia)\n  }\n  \n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from 'react'\nimport { ApiServersResponse, JsonRecord, ServerType, StringSetter } from '@moviemasher/moviemasher.js'\n\nexport interface ApiContextInterface {\n  enabled: boolean\n  servers: ApiServersResponse\n  endpointPromise: (id: string, body?: JsonRecord) => Promise<any>\n}\n\nexport const ApiContextDefault: ApiContextInterface = {\n  enabled: false,\n  servers: {},\n  endpointPromise: () => Promise.resolve({})\n}\n\nexport const ApiContext = React.createContext(ApiContextDefault)\n","import React from 'react'\nimport { \n  EmptyMethod, SelectedItems, SelectType, \n  StringSetter, DataGroup, TimeRange, Time\n} from '@moviemasher/moviemasher.js'\n\nexport type DataGroupBooleans = {\n  [index in DataGroup]?: boolean\n} \n\nexport interface SelectedInfo {\n  tweenDefined: DataGroupBooleans\n  tweenSelected: DataGroupBooleans\n  selectedType: SelectType\n  selectTypes: SelectType[]\n  timeRange?: TimeRange\n  onEdge?: boolean\n  nearStart?: boolean\n  time?: Time\n}\n\nexport type TweenSetter = (group: DataGroup, tweening: boolean) => void\nexport interface InspectorContextInterface {\n  actionCount: number\n  selectedInfo: SelectedInfo\n  selectedItems: SelectedItems\n  changeSelected: StringSetter\n  changeTweening: TweenSetter\n}\n\nexport const InspectorContextDefault: InspectorContextInterface = {\n  actionCount: 0,\n  selectedInfo: {\n    tweenDefined: {},\n    tweenSelected: {},\n    selectedType: SelectType.None,\n    selectTypes: [],\n  },\n  selectedItems: [],\n  changeSelected: EmptyMethod,\n  changeTweening: EmptyMethod,\n}\n\nexport const InspectorContext = React.createContext(InspectorContextDefault)\n","import React from \"react\"\nimport {\n  DataMashRetrieveRequest, DataRetrieveResponse, DataGetRequest,\n  Endpoints, EventType, MasherAction, ServerType, \n  DataMashGetResponse, isEventType, isSelectType, assertObject, \n  isPopulatedString, isPositive, assertTrue, Identified,\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { ApiContext } from \"../../../client-react-deleted/ApiClient/ApiContext\"\nimport { InspectorContext } from \"../Inspector/InspectorContext\"\nimport { labelInterpolate, labelTranslate } from \"../../Utilities/Label\"\nimport { View } from \"../../Utilities/View\"\n\n\ninterface AndLabel {\n  label: string\n}\n\ninterface LabelAndId extends Identified, AndLabel {}\n\nexport interface SelectEditedControlProps extends PropsAndChild, WithClassName {}\n\nexport function SelectEditedControl(props: SelectEditedControlProps): ReactResult {\n  const editor = useEditor()\n  const [requested, setRequested] = React.useState(false)\n  const [described, setDescribed] = React.useState<LabelAndId[]>(() => [])\n\n  const [editedId, setEditedId] = React.useState(editor.mashMedia?.id || '')\n  const apiContext = React.useContext(ApiContext)\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedInfo } = inspectorContext\n  const { selectedType } = selectedInfo\n\n  const [editedLabel, setEditedLabel] = React.useState(editor.mashMedia?.label || '')\n  const getDisabled = () => editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const { enabled, servers, endpointPromise } = apiContext\n\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n\n  const handleEdited = (event: Event) => {\n    const { type } = event\n    if (!(isEventType(type) && isSelectType(type))) return\n    \n    if (type !== selectedType) return\n\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n\n    const { id, label } = mashMedia\n    setDescribed(original => {\n      const copy = original.filter(object => isPopulatedString(object.label))\n      const index = copy.findIndex(object => object.id === id)\n      if (isPositive(index)) copy.splice(index, 1, mashMedia)\n      else copy.push(mashMedia)\n      setEditedId(id)\n      setEditedLabel(label)\n      return copy\n    })\n  }\n\n  const handleAction = () => {\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n\n    const { label } = mashMedia\n    if (editedLabel !== label) {\n      setDescribed(original => [...original])\n      setEditedLabel(label)\n    }\n    updateDisabled()\n  }\n\n  useListeners({\n    [EventType.Action]: handleAction,\n    [EventType.Loaded]: handleEdited,\n    [EventType.Save]: updateDisabled,\n  })\n\n  const onChange: React.ChangeEventHandler<HTMLSelectElement> = (event) => {\n    if (disabled) return\n\n    const { selectedIndex } = event.target\n    const object = described[selectedIndex]\n    assertObject(object, 'described[selectedIndex]')\n\n    const { id } = object\n    const request: DataGetRequest = { id }\n    const { editType } = editor\n    const endpoint = Endpoints.data[editType].get\n    console.debug(\"GetRequest\", endpoint, request)\n    endpointPromise(endpoint, request).then((response: DataMashGetResponse) => {\n      console.debug(\"GetResponse\", endpoint, response)\n      const { error, mash } = response\n      if (error) console.error(\"GetResponse\", endpoint, error)\n      else return editor.load(mash)\n    })\n  }\n\n  React.useEffect(() => {\n    if (!(enabled && servers[ServerType.Data])) return\n    if (requested) return\n\n    setRequested(true)\n    const request: DataMashRetrieveRequest = { partial: true }\n    const endpoint = Endpoints.data[editor.editType].retrieve\n    console.debug(\"RetrieveRequest\", endpoint, request)\n    endpointPromise(endpoint, request).then((response: DataRetrieveResponse) => {\n      console.debug(\"RetrieveResponse\", endpoint, response)\n      const { described, error } = response\n      if (error) console.error(\"RetrieveResponse\", endpoint, error)\n      else setDescribed(original => {\n        const copy = [...original]\n        described.forEach(object => {\n          const { id, label } = object\n          const found = copy.find(object => object.id === id)\n          if (found || !isPopulatedString(label)) return\n          \n          copy.push(object as LabelAndId)\n        })\n        return copy\n      })\n    })\n  }, [servers, enabled])\n\n  if (described.length < 2) return null\n\n  const describedOptions = () => {\n    const { editType, mashMedia } = editor\n    const elements = [<optgroup key=\"group\" label={labelTranslate('open')}/>]\n    if (!mashMedia) return elements\n\n    const { id: editedId, label: editedLabel } = mashMedia\n    elements.push(...described.map(object => {\n      const { label: objectLabel, id } = object\n      const label = (id === editedId) ? editedLabel : objectLabel\n      const children = isPopulatedString(label) ? label : labelInterpolate('unlabeled', { type: editType }) \n      const optionProps = { children, value: id, key: id }\n      const option = <option {...optionProps} />\n      return option\n    }))\n\n    return elements\n  }\n\n  const { children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const selectOptions = {\n    key: \"mashMedia-select\",\n    onChange, disabled, children: describedOptions(), value: editedId\n  }\n  const viewProps = { ...rest, children: [child, <select {...selectOptions} />] }\n  return <View { ...viewProps } />\n}\n","import React from \"react\"\nimport { assertEndpoint, assertMashMedia, endpointFromUrl, endpointUrl, EventType, isMashMedia, urlForEndpoint } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\n\nexport function ViewControl(props: PropsAndChild): ReactResult {\n  const editor = useEditor()\n\n  const getDisabled = () => {\n    const { mashMedia } = editor\n    if (!isMashMedia(mashMedia)) return true\n\n    const { encodings } = mashMedia\n  \n    return !encodings.length\n  }\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => setDisabled(getDisabled())\n  useListeners({\n    [EventType.Render]: updateDisabled,\n    [EventType.Loaded]: updateDisabled\n  })\n\n  const { children, ...rest } = props\n\n  const onClick = () => {\n    if (disabled) return\n\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n    \n    const { encodings } = mashMedia\n    const [encoding] = encodings\n    const {endpoint} = encoding.request\n    assertEndpoint(endpoint)\n    \n    const url = endpointUrl(endpoint)\n    window.open(url)\n  }\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from 'react'\nimport { UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { UnknownElement, ReactResult } from \"../declarations\"\n\nfunction ConstEmptyElementFunction(props: UnknownRecord): ReactResult { return null }\n\nexport const EmptyElement: UnknownElement = <ConstEmptyElementFunction key=\"empty\" />\n\n\nexport const TweenInputKey = 'tween-input-key'\n","import { DataType } from '@moviemasher/moviemasher.js'\n\nimport { UnknownElement } from '../../../../declarations'\nimport { EmptyElement } from '../../../../Setup/Constants'\n\nexport type DataTypeElements = {\n  [key in DataType]: UnknownElement\n}\n\nexport const DataTypeInputs: DataTypeElements = {\n  [DataType.Boolean]: EmptyElement,\n  [DataType.ContainerId]: EmptyElement,\n  [DataType.ContentId]: EmptyElement,\n  [DataType.DefinitionId]: EmptyElement,\n  [DataType.FontId]: EmptyElement,\n  [DataType.Frame]: EmptyElement,\n  [DataType.Icon]: EmptyElement,\n  [DataType.Number]: EmptyElement,\n  [DataType.Percent]: EmptyElement,\n  [DataType.Rgb]: EmptyElement,\n  [DataType.String]: EmptyElement,\n  [DataType.Option]: EmptyElement,\n}\n","import React from 'react'\nimport { \n  Scalar, PropertiedChangeHandler, Property, DataType, Time \n} from \"@moviemasher/moviemasher.js\"\n\nexport interface InputContextInterface {\n  property: Property\n  name: string\n  value: Scalar\n  defaultValue?: Scalar\n  changeHandler?: PropertiedChangeHandler\n  time?: Time\n}\n\nexport const InputContextDefault: InputContextInterface = {\n  value: '',\n  name: '',\n  property: { type: DataType.String, name: '', defaultValue: '' }\n}\n\nexport const InputContext = React.createContext(InputContextDefault)\n","import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from './DataTypeInputs'\n\nexport function BooleanTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n  const inputProps: UnknownRecord = {\n    type: 'checkbox',\n    name,\n    checked: !!value,\n  }\n  if (changeHandler) {\n    inputProps.onChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n      changeHandler(name, event.target.checked)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n}\n\nDataTypeInputs[DataType.Boolean] = <BooleanTypeInput />\n","import React from 'react'\nimport {\n  assertMedia, isMediaType, assertPopulatedString, ClassDropping, DataType, \n  ContainerTypes, ContentTypes, assertTrue, eventStop, isContainerDefinition, MediaObject, isMediaObject, assertDefined\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../../../declarations'\nimport { View } from '../../../../Utilities/View'\nimport { InputContext } from '../InputContext'\nimport { DefinitionContext } from '../../../../Contexts/DefinitionContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { DragDefinitionObject, dragType, dragTypes, dropType, TransferTypeFiles } from '@moviemasher/client-core'\nimport { DefinitionItem } from '../../../DefinitionItem/DefinitionItem'\nimport { propsMediaTypes } from '../../../../Utilities/Props'\nimport { MasherContext } from '../../../Masher/MasherContext'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport interface DefinitionDropProps extends WithClassName, PropsAndChild {\n  type?: string\n  types?: string | string[]\n}\n\nexport function DefinitionDrop(props: DefinitionDropProps): ReactResult {\n  const { type, types, children, className, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const [isOver, setIsOver] = React.useState(false)\n  const inputContext = React.useContext(InputContext)\n  const editorContext = React.useContext(MasherContext)\n  const { drop, editor } = editorContext\n  assertDefined(editor)\n  const { changeHandler, value, name } = inputContext\n  assertTrue(changeHandler)\n  \n  const { media } = editor\n  const mediaTypes = propsMediaTypes(type, types)\n\n  const childNodes = (): React.ReactElement | null => {\n    if (!value) return null\n\n    assertPopulatedString(value)\n    const definition = media.fromId(value)\n    assertMedia(definition)\n\n    const definitionProps = { definition, key: definition.id }\n    const children = React.cloneElement(child, definitionProps)\n    const contextProps = { children, value: { definition } }\n    return <DefinitionContext.Provider {...contextProps} />\n  }\n\n  const dropAllowed = (event: DragEvent): boolean => {\n    const { dataTransfer } = event\n    assertTrue(dataTransfer)\n    \n    const types = dragTypes(dataTransfer)\n    // any file can be dropped - we filter out invalid ones later\n    if (types.includes(TransferTypeFiles)) return true\n\n    const draggingType = dragType(dataTransfer)\n    if (!isMediaType(draggingType)) return false\n\n    return mediaTypes.includes(draggingType)\n  }\n\n  const onDragLeave = () => { setIsOver(false) }\n\n  const onDragOver = (event: DragEvent) => {\n    const allowed = dropAllowed(event)\n    setIsOver(allowed)\n    if (allowed) event.preventDefault()\n  }\n\n  const onDrop = async (event: DragEvent) => {\n    eventStop(event)\n    setIsOver(false)\n    if (!dropAllowed(event)) return\n\n    const { dataTransfer } = event\n    assertTrue(dataTransfer)\n    \n    const types = dragTypes(dataTransfer)\n    // any file can be dropped\n    if (types.includes(TransferTypeFiles)) {\n      await drop(dataTransfer.files).then(definitions => {\n        if (!definitions.length) return\n\n        const container = name === \"containerId\"\n        const valid = container ? definitions.filter(isContainerDefinition) : definitions\n        const [definition] = valid\n        if (definition) {\n          assertTrue(media.installed(definition.id), `${definition.type} installed`)\n          // console.log(\"DefinitionDrop onDrop\", definition.type, definition.label)\n          changeHandler(name, definition.id)\n        }\n      })\n      return\n    }\n    const type = dropType(dataTransfer)!\n    const json = dataTransfer.getData(type)\n    const data: DragDefinitionObject = JSON.parse(json)\n    const { mediaObject } = data\n    if (isMediaObject(mediaObject)) {\n      const [definition] = media.define(mediaObject)\n      if (name === \"containerId\" && !isContainerDefinition(definition)) return\n\n      changeHandler(name, mediaObject.id!)\n    }\n  }\n\n  const calculateClassName = (): string => {\n    const classes = []\n    if (className) classes.push(className)\n    if (isOver) classes.push(ClassDropping)\n    return classes.join(' ')\n  }\n\n  const memoClassName = React.useMemo(calculateClassName, [isOver])\n\n  const viewProps = {\n    ...rest,\n    className: memoClassName,\n    children: childNodes(),\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    value: String(value),\n    key: `${name}-drop`,\n  }\n  return <View {...viewProps} />\n}\n\nDataTypeInputs[DataType.ContainerId] = (\n  <DefinitionDrop types={ContainerTypes} className='definition-drop'>\n    <DefinitionItem className='definition preview'/>\n  </DefinitionDrop>\n)\n\nDataTypeInputs[DataType.ContentId] = (\n  <DefinitionDrop types={ContentTypes} className='definition-drop'>\n    <DefinitionItem className='definition preview' />\n  </DefinitionDrop>\n)\n","import React from 'react'\nimport { assertTrue, DataType, FontType } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function DefinitionSelect(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, value, name } = inputContext\n  const editor = useEditor()\n  const { media } = editor\n  assertTrue(changeHandler)\n  \n  const onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n\n  const options = media.byType(FontType).map(object => {\n    const { id, label } = object\n    const optionProps = { value: id, children: label, key: id }\n    return <option {...optionProps}/>\n  })\n\n  const selectProps = {\n    children: options,\n    name,\n    onChange,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.FontId] = <DefinitionSelect />\n","import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { DataTypeInputs } from './DataTypeInputs'\nimport { InputContext } from '../InputContext'\nimport { MasherContext } from '../../../Masher/MasherContext'\n\nexport function IconTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const names = Object.keys(icons)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n\n  const options = names.map(id => {\n    const optionProps = { value: id, children: id, key: id }\n    return <option {...optionProps} />\n  })\n\n  const selectProps: UnknownRecord = {\n    children: options,\n    name,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  if (changeHandler) {\n    selectProps.onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n  } else selectProps.disabled = true\n\n  \n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.Icon] = <IconTypeInput />\n","import React from 'react'\nimport { DataType, isDefined, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function NumericTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const editor = useEditor()\n  const { changeHandler, property, value, name, time } = inputContext\n  if (!property) return null\n\n  const { min, max, step } = property\n\n\n  const inputProps: UnknownRecord = {\n    type: 'number',\n    name,\n    value: String(value),\n  }\n  if (isDefined(min)) inputProps.min = min\n  if (isDefined(max)) inputProps.max = max\n  if (isDefined(step)) inputProps.step = step\n\n  if (changeHandler) {\n    inputProps.onChange = async (event:React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = event.target\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n\n}\n\nDataTypeInputs[DataType.Number] = <NumericTypeInput />\nDataTypeInputs[DataType.Frame] = <NumericTypeInput />\n","import React from \"react\"\nimport { WithClassName, ReactResult, SliderChangeHandler } from \"../declarations\";\n\nexport interface SliderProps extends WithClassName {\n  value? : number\n  step? : number\n  max? : number\n  min? : number\n  onChange? : SliderChangeHandler\n}\n\nexport function Slider(props: SliderProps): ReactResult {\n  const { className, onChange } = props\n  const options : WithClassName = { ...props }\n  const classes = ['slider']\n  if (className) classes.push(className)\n  options.className = classes.join(' ')\n  if (onChange) {\n    const handleChange = (event : React.ChangeEvent<HTMLInputElement>) => {\n      onChange(event, event.currentTarget.valueAsNumber)\n    }\n    options.onChange = handleChange\n  }\n\n  const input = <input type='range' { ...options } />\n  return input\n}\n","import React from 'react'\nimport { DataType, isArray, isDefined, isNumber, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, SliderChangeHandler } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { Slider } from '../../../../Utilities/Slider'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function PercentTypeInput(): ReactResult {\n  const editor = useEditor()\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value: contextValue, name, time, defaultValue: contextDefault  } = inputContext\n  if (!property) return null\n\n  const { max, min, step, defaultValue: propertyDefault } = property\n  const value = isDefined(contextValue) ? contextValue : (isDefined(contextDefault) ? contextDefault : propertyDefault)\n  const sliderProps: UnknownRecord = {\n    value,\n    min: isNumber(min) ? min : 0.0,\n    max: isNumber(max) ? max : 1.0,\n    step: isNumber(step) ? step : 0.01,\n    name,\n  }\n  if (changeHandler) {\n    const onChange: SliderChangeHandler = async (_event, values) => {\n      const value = isArray(values) ? values[0] : values\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n    sliderProps.onChange = onChange\n  } else sliderProps.disabled = true\n\n  return <Slider className='slider' {...sliderProps} />\n}\n\nDataTypeInputs[DataType.Percent] = <PercentTypeInput />\n","import React from 'react'\nimport { DataType, isDefined, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\nimport { MasherContext } from '../../../Masher/MasherContext'\n\nexport function RgbTypeInput(): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const inputContext = React.useContext(InputContext)\n  const editor = useEditor()\n  const { changeHandler, property, value: contextValue, name, time, defaultValue: contextDefault } = inputContext\n  if (!property) return null\n\n  const { defaultValue: propertyDefault } = property\n\n  const value = isDefined(contextValue) ? contextValue : (isDefined(contextDefault) ? contextDefault : propertyDefault)\n  const colorProps: UnknownRecord = {\n    type: 'color', name, value: String(value),\n  }\n  if (changeHandler) {\n\n    colorProps.onChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = event.target\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n  } else colorProps.disabled = true\n  return <input {...colorProps} />\n}\n\nDataTypeInputs[DataType.Rgb] = <RgbTypeInput />\n","import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\n\nexport function TextTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n  const inputProps: UnknownRecord = {\n    name, type: 'text', value: String(value)\n  }\n  if (changeHandler) {\n    inputProps.onChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n      changeHandler(name, event.target.value)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n}\n\nDataTypeInputs[DataType.String] = <TextTypeInput />\n","import React from 'react'\nimport { DataType, UnknownRecord, assertPopulatedArray } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { DataTypeInputs } from './DataTypeInputs'\nimport { InputContext } from '../InputContext'\n\nexport function OptionTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  const { options } = property\n  assertPopulatedArray(options)\n\n  const ids = options.map(String)\n  const selectProps: UnknownRecord = {\n    children: ids.map(id => {\n    const optionProps = { value: id, children: id, key: id }\n    return <option {...optionProps} />\n  }),\n    name,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  if (changeHandler) {\n    selectProps.onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n  } else selectProps.disabled = true\n\n  \n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.Option] = <OptionTypeInput />\n","import { DataGroup, SelectedItems, SelectType } from \"@moviemasher/moviemasher.js\";\nimport { PropsWithoutChild, UnknownElement, WithClassName } from \"../../../../declarations\"\nimport { EmptyElement } from '../../../../Setup/Constants'\nexport type DataGroupElements = {\n  [key in DataGroup]: UnknownElement\n}\n\nexport interface DataGroupProps extends PropsWithoutChild, WithClassName {\n  selectType?: SelectType\n  selectedItems?: SelectedItems\n}\n\nexport const DataGroupInputs: DataGroupElements = {\n  [DataGroup.Size]: EmptyElement,\n  [DataGroup.Point]: EmptyElement,\n  [DataGroup.Opacity]: EmptyElement,\n  [DataGroup.Color]: EmptyElement,\n  [DataGroup.Effects]: EmptyElement,\n  // [DataGroup.Controls]: EmptyElement,\n  [DataGroup.Timing]: EmptyElement,\n  // [DataGroup.Clicking]: EmptyElement,\n}","import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, \n  DataGroup, selectedPropertyObject, PropertyTweenSuffix,\n  assertTimeRange, tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nexport function ColorGroupInput(props: DataGroupProps): ReactResult {  \n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const editor = useEditor()\n\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  \n  const { changeTweening, selectedInfo } = inspectorContext\n\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Color]\n  const endSelected = tweenSelected[DataGroup.Color]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Color, selectType)\n  const { color, [`color${PropertyTweenSuffix}`]: colorEnd } = byName \n  const colorProperty = endSelected ? colorEnd : color\n\n\n  const { property, changeHandler, value, name: nameOveride } = colorProperty\n  const { type, name: propertyName } = property\n  const name = nameOveride || propertyName\n  const input = DataTypeInputs[type] \n  const inputContext: InputContextInterface = { \n    property, value, name, changeHandler\n  }\n\n  // go to first/last frame if needed and tween value defined...\n  inputContext.time = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  // if we're editing tween value, but it's not defined yet...\n  if (endSelected) {\n    // tell input to use start value as default, rather than the property's...\n    inputContext.defaultValue = color.value\n  }\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Color, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {      \n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Color, true)\n    }\n  }\n  \n  const providerProps = { key: 'context', value: inputContext, children: input }\n\n  const viewProps = {\n    ...rest,\n    key: `inspector-${selectType}-${name}`,\n    children: [\n      icons.color, \n      <InputContext.Provider { ...providerProps } />, \n      <View className=\"start-end\" key='start-end'>\n        <View { ...startProps } />\n        <View { ...endProps } />\n      </View>\n    ]\n  }\n  return <View { ...viewProps } />\n}\n\nDataGroupInputs[DataGroup.Color] = <ColorGroupInput className=\"color tween row\" key=\"color-group-input\" />\n","import React from 'react'\nimport { ClassSelected, IndexHandler, isPopulatedString, Movable } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, WithClassName } from '../../declarations'\nimport { DragSuffix } from '@moviemasher/client-core'\nimport { View } from '../../Utilities/View'\nimport { MasherContext } from '../Masher/MasherContext'\n\nexport interface InspectorMovableProps extends WithClassName {\n  movable: Movable\n  selected: Movable | null\n  select: (movable: Movable | null) => void\n  index: number \n  removeHandler: IndexHandler<Movable>\n  property: string\n}\n\n/**\n * @parents MovablesGroupInput\n */\nexport function InspectorMovable(props: InspectorMovableProps): ReactResult {\n  const { \n    property, className, removeHandler, index, movable, selected, select, ...rest \n  } = props\n  const isSelected = selected === movable\n\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const onMouseDown = () => { if (!isSelected) select(movable) }\n\n  const onDragEnd = (event: DragEvent) => {\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    const { dropEffect } = dataTransfer\n    if (dropEffect === 'none') removeHandler(movable)\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    if (!isSelected) onMouseDown()\n    const data = { index }\n    const json = JSON.stringify(data)\n    const { dataTransfer } = event\n\n    if (!dataTransfer) return \n\n    dataTransfer.effectAllowed = 'move'\n    dataTransfer.setData(`${property}${DragSuffix}`, json)\n  }\n\n  const classes = [className || 'movable']\n  if (isSelected) classes.push(ClassSelected)\n  const viewChildren = []\n\n\n  const label = movable.value('label')\n  const icon = movable.value('icon')\n  if (isPopulatedString(icon)) {\n    const iconElement = icons[icon]\n    if (iconElement) viewChildren.push(iconElement)\n  }\n  if (isPopulatedString(label)) viewChildren.push(label)\n  \n  const viewProps = {\n    ...rest,\n    children: viewChildren,\n    className: classes.join(' '),\n    onMouseDown, onDragStart, onDragEnd,\n    onClick: (event: React.MouseEvent) => event.stopPropagation(),\n    draggable: true,\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { \n  isDefined, PropertiedChangeHandler, Property, Scalar, Time \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from '../../declarations'\nimport { InputContext } from './Inputs/InputContext'\nimport { DataTypeInputs } from './Inputs/DataTypeInputs/DataTypeInputs'\n\nexport interface InspectorPropertyProps extends PropsWithoutChild, WithClassName {\n  property: Property\n  value: Scalar\n  defaultValue?: Scalar\n  changeHandler: PropertiedChangeHandler\n  name: string\n  time?: Time\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorProperty(props: InspectorPropertyProps): ReactResult {\n  const { \n    defaultValue: propsDefault, changeHandler, time, property, value, name\n  } = props\n  \n  const { type, defaultValue: propertyDefault } = property\n  const defaultValue = isDefined(propsDefault) ? propsDefault : propertyDefault\n  const inputContext = { \n    property, value, changeHandler, name, time, defaultValue\n  }\n  const contextProps = {\n    key: 'context', value: inputContext, children: DataTypeInputs[type] \n  }\n  return <InputContext.Provider {...contextProps} />\n}\n","import React from \"react\"\nimport { \n  SelectType, UnknownRecord, isSelectedProperty, SelectedItems, Time,\n  assertDataGroup\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { InspectorProperty, InspectorPropertyProps } from \"./InspectorProperty\"\nimport { InspectorContext } from \"./InspectorContext\"\nimport { DataGroupInputs } from \"./Inputs/DataGroupInputs/DataGroupInputs\"\nimport { View } from \"../../Utilities/View\"\nimport { MasherContext } from \"../Masher/MasherContext\"\n\nexport interface InspectorPropertiesProps extends PropsWithoutChild, WithClassName {\n  selectedItems?: SelectedItems\n  time?: Time\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorProperties(props: InspectorPropertiesProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedItems: propsItems } = props\n  const { selectedItems: inspectorItems } = inspectorContext\n  const selectedItems = propsItems || inspectorItems\n\n  const ungroupedInputs: React.ReactChild[] = []\n  const groupedInputs: React.ReactChild[] = []\n  const groups: UnknownRecord = {} \n  selectedItems.forEach(selectedItem => {\n    if (isSelectedProperty(selectedItem)) {\n      const { property, changeHandler, selectType, value, name: nameOveride } = selectedItem\n      const { name: propertyName, group } = property\n      // console.log(\"InspectorProperties\", selectType, nameOveride, propertyName, group)\n      if (group) {\n        const key = [group, selectType].join('-')\n        if (!groups[key]) {\n          groups[key] = true\n          groupedInputs.push(React.cloneElement(DataGroupInputs[group], { selectType, selectedItems }))\n        }\n        return\n      } \n      \n      const name = nameOveride || propertyName\n\n      const propertyProps: InspectorPropertyProps = {\n        key: `inspector-${selectType}-${name}`,\n        property, value, changeHandler, name, \n        ...props\n      }\n      const icon = icons[name]\n      const inspectorProperty = <InspectorProperty {...propertyProps} />\n      if (icon) {\n        const viewChildren = [inspectorProperty]\n        viewChildren.unshift(icon)\n        const viewProps = {\n          children: viewChildren,\n          className: \"row\",\n          key: `icon-${selectType}-${name}`,\n        }\n\n        ungroupedInputs.push(<View { ...viewProps } />)    \n      } else ungroupedInputs.push(inspectorProperty)    \n      \n    } else {\n      const { name } = selectedItem\n      assertDataGroup(name)\n\n      const groupProps = {\n        key: `inspector-${name}`,\n        selectedMovable: selectedItem,\n      }\n      groupedInputs.push(React.cloneElement(DataGroupInputs[name], groupProps))\n    }\n  })\n  return <>{ungroupedInputs}{groupedInputs}</>\n}\n","import { ClassButton, ClassDisabled, ClassSelected } from \"@moviemasher/moviemasher.js\"\nimport React from \"react\"\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../declarations\"\nimport { View } from \"./View\"\n\nexport interface ButtonProps extends PropsAndChildren, WithClassName {\n  onClick? : (event : React.MouseEvent ) => void\n  useView?: boolean\n  disabled?: boolean\n  selected?: boolean\n}\n\nexport function Button(props: ButtonProps): ReactResult {\n  const { useView, selected, ...rest } = props\n  if (!useView) return <button { ...rest } />\n\n  const { disabled, className, ...pruned } = rest\n  const classes = [ClassButton]\n  if (className) classes.push(className)\n  if (disabled) classes.push(ClassDisabled)\n  else if (selected) classes.push(ClassSelected)\n  const viewProps = {\n    ...pruned,\n    className: classes.join(' ')\n  }\n  return <View { ...viewProps } />\n}\n","import { \n  ClassDropping, SelectedMovable, DataGroup, Movable, \n  assertPopulatedObject, assertDefined, ScalarRecord\n} from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport { PropsWithoutChild, ReactResult } from \"../../../../declarations\"\nimport { dropType } from '@moviemasher/client-core'\nimport { useEditor } from '../../../../Hooks/useEditor'\nimport { View } from '../../../../Utilities/View'\nimport { InspectorMovable, InspectorMovableProps } from '../../InspectorMovable'\nimport { InspectorProperties, InspectorPropertiesProps } from '../../InspectorProperties'\nimport { MasherContext } from '../../../Masher/MasherContext'\nimport { DataGroupInputs } from './DataGroupInputs'\nimport { Button } from '../../../../Utilities/Button'\n\nexport interface MovablesGroupInputProps extends PropsWithoutChild {\n  selectedMovable?: SelectedMovable\n  movableGenerator?: (object: ScalarRecord) => Movable\n  property: string\n}\n/**\n *\n * @children InspectorEffect\n */\nexport function MovablesGroupInput(props: MovablesGroupInputProps): ReactResult {\n  const { movableGenerator, selectedMovable, property, ...rest } = props\n  assertPopulatedObject(selectedMovable)\n\n  const editor = useEditor()\n  const masherContext = React.useContext(MasherContext)\n  const [isOver, setIsOver] = React.useState(false)\n  const [selected, setSelected] = React.useState<Movable | null>(null)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  const memoClassName = React.useMemo((): string => {\n    const classes = ['list']\n    if (isOver) classes.push(ClassDropping)\n    return classes.join(' ')\n  }, [isOver])\n\n  const { icons } = masherContext\n  const { value, addHandler, removeHandler, moveHandler } = selectedMovable\n  const includedMovable = (selected && value.includes(selected)) ? selected : null\n  if (includedMovable !== selected) setSelected(includedMovable)\n\n  const dropIndex = (event: DragEvent): number => {\n    const { target } = event\n    if (target && target instanceof HTMLDivElement) {\n      const index = target.getAttribute('index')\n      if (index) return Number(index)\n    }\n    return value.length\n  }\n\n  const dropAllowed = (event: DragEvent): boolean => (\n    !!dropType(event.dataTransfer)?.startsWith(property)\n  )\n\n  const onDragLeave = () => { setIsOver(false) }\n\n  const onDragOver = (event: DragEvent) => {\n    const allowed = dropAllowed(event)\n    setIsOver(allowed)\n    if (allowed) event.preventDefault()\n  }\n\n  const onDrop = (event: DragEvent) => {\n    setIsOver(false)\n    if (!dropAllowed(event)) return\n\n    event.preventDefault()\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    const type = dropType(dataTransfer)!\n    const json = dataTransfer.getData(type)\n    const data = JSON.parse(json)\n    const { index } = data\n    const droppedIndex = dropIndex(event)\n\n    if (droppedIndex === index) return\n\n    assertDefined(includedMovable)\n    moveHandler(includedMovable, droppedIndex)\n  }\n\n  const onClick: React.MouseEventHandler = () => { setSelected(null) }\n\n  const childNodes = (): React.ReactElement[] => {\n    return value.map((movable, index) => {\n      const clipProps: InspectorMovableProps = {\n        key: movable.id,\n        selected: includedMovable, \n        select: setSelected,\n        movable,\n        index, removeHandler, property\n      }\n      return <InspectorMovable {...clipProps} />\n    })\n  }\n\n  const listViewProps = {\n    children: childNodes(),\n    ref,\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    onClick,\n    key: 'view',\n    className: memoClassName,\n  }\n\n  const removeProps = {\n    disabled: !includedMovable,\n    onClick: () => { removeHandler(includedMovable!) },\n    key: \"remove-button\",\n    children: icons.remove,\n  }\n  const viewChildren = [\n    icons[property],\n    <Button { ...removeProps } />,\n  ]\n  if (movableGenerator) {\n    const addProps = {\n      key: \"add-button\",\n      children: icons.add,\n      onClick: () => { addHandler(movableGenerator({})) }\n    }\n    viewChildren.push(<Button { ...addProps } />)\n  }\n\n  const iconsViewProps = {\n    className: 'icons',\n    children: viewChildren,\n    key: 'icons',\n  }\n\n  const viewProps = {\n    ...rest,\n    key: `${property}s-view`,\n    className: \"row\",\n    children: [\n    <View { ...iconsViewProps } />, \n    <View { ...listViewProps } />, \n  ],\n  }\n  const listView = <View { ...viewProps } />\n  if (!includedMovable) return listView\n\n  const inspectorProps: InspectorPropertiesProps = {\n    selectedItems: includedMovable.selectedItems(editor.actions),\n    key: 'movable-properties',\n  }\n  return <>\n    {listView}\n    <InspectorProperties { ...inspectorProps }/>\n  </>\n}\n\nDataGroupInputs[DataGroup.Effects] = <MovablesGroupInput property=\"effect\" key=\"effects-group-input\" />\n// DataGroupInputs[DataGroup.Controls] = <MovablesGroupInput movableGenerator={controlInstance} property=\"control\" key=\"controls-group-input\" />","import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, DataGroup, \n  selectedPropertyObject, PropertyTweenSuffix, assertTimeRange,\n  tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\n\nexport function OpacityGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const { changeTweening, selectedInfo } = inspectorContext\n\n\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Opacity]\n  const endSelected = tweenSelected[DataGroup.Opacity]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Opacity, selectType)\n  const { opacity, [`opacity${PropertyTweenSuffix}`]: opacityEnd } = byName \n  const opacityProperty = endSelected ? opacityEnd : opacity\n\n  const { property, changeHandler, value, name: nameOveride } = opacityProperty\n\n  const { type, name: propertyName } = property\n  const name = nameOveride || propertyName\n  const input = DataTypeInputs[type] \n  const inputContext: InputContextInterface = { \n    property, value, name, changeHandler\n  }\n  // go to first/last frame if needed and tween value defined...\n  inputContext.time = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  // if we're editing tween value, but it's not defined yet...\n  if (endSelected) {\n    // tell input to use start value as default, rather than the property's...\n    inputContext.defaultValue = opacity.value\n  }\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Opacity, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Opacity, true)\n    }\n  }\n\n  const providerProps = { key: 'context', value: inputContext, children: input }\n\n  const viewProps = {\n    ...rest,\n    key: `inspector-${selectType}-${name}`, \n    children: [\n      icons.opacity, \n      <InputContext.Provider { ...providerProps } />, \n      <View className=\"start-end\" key='start-end'>\n        <View { ...startProps } />\n        <View { ...endProps } />\n      </View>\n    ]\n  }\n  return <View { ...viewProps } />\n}\n\nDataGroupInputs[DataGroup.Opacity] = <OpacityGroupInput className=\"opacity tween row\" key=\"opacity-group-input\" />\n","import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, DataGroup, \n  isDefined, selectedPropertyObject, selectedPropertiesScalarObject, \n  PropertyTweenSuffix, ScalarRecord, assertTimeRange, tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, UnknownElement } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\n\nexport function PointGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n\n \n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n\n  const { changeTweening, selectedInfo } = inspectorContext\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Point]\n  const endSelected = tweenSelected[DataGroup.Point]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Point, selectType)\n  const values: ScalarRecord = selectedPropertiesScalarObject(byName) \n  const { \n    offE, offW, offN, offS, x, y, \n    [`x${PropertyTweenSuffix}`]: xEnd,\n    [`y${PropertyTweenSuffix}`]: yEnd\n  } = byName \n\n  const xProperty = endSelected ? xEnd : x\n  const yProperty = endSelected ? yEnd : y\n\n  const { \n    offE: offEValue, offW: offWValue, offN: offNValue, offS: offSValue\n  } = values\n\n  const elementsByName: Record<string, UnknownElement> = {}\n  const inspectingProperties = [xProperty, yProperty]\n\n  \n  // go to first/last frame if needed and tween value defined...\n  const goTime = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  inspectingProperties.forEach(selectedProperty => {\n    if (!selectedProperty) {\n      console.error(\"PointInput\", xProperty, yProperty)\n      return\n    }\n    const { property, changeHandler, value, name: nameOveride } = selectedProperty\n    const { type, name: propertyName } = property\n    const name = nameOveride || propertyName\n    const baseName = name.replace(PropertyTweenSuffix, '')\n    const input = DataTypeInputs[type] \n    const key = `inspector-${selectType}-${name}`\n    const inputContext: InputContextInterface = { \n      property, value, name, changeHandler, time: goTime\n    }\n \n    // if we're editing tween value, but it's not defined yet...\n    if (endSelected) {\n      // tell input to use start value as default, rather than the property's...\n      inputContext.defaultValue = values[baseName] \n    }\n\n    const providerProps = { key, value: inputContext, children: input }\n    elementsByName[baseName] = <InputContext.Provider { ...providerProps } />  \n  })\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Point, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Point, true)\n    }\n  }\n\n  const legendElements = [\n    icons.point, \n    <View className=\"start-end\" key={`${selectType}-point-start-end`}>\n      <View { ...startProps } />\n      <View { ...endProps } />\n    </View>\n  ]\n\n\n  const xElements = [<View key=\"horz-icon\" children={icons.horz} className={ClassButton} />]\n  const yElements = [<View key=\"vert-icon\" children={icons.vert} className={ClassButton} />]\n\n  if (offE) {\n    const lockOffEProps = { \n      key: \"lock-east\",\n      className: ClassButton,\n      children: offEValue ? icons.unlock : icons.lock, \n      onClick: () => { offE.changeHandler('offE', !offEValue) }\n    }\n    const lockOffE = <View { ...lockOffEProps } />\n\n    xElements.push(lockOffE)\n  }\n  xElements.push( elementsByName.x)\n  if (offW) {\n    const lockOffWProps = { \n      key: \"lock-west\",\n      className: ClassButton,\n      children: offWValue ? icons.unlock : icons.lock, \n      onClick: () => { offW.changeHandler('offW', !offWValue) }\n    }\n    const lockOffW = <View { ...lockOffWProps } />\n    xElements.push(lockOffW)\n  }\n  if (offN) {\n    const lockOffNProps = { \n      key: \"lock-north\",\n      className: ClassButton,\n      children: offNValue ? icons.unlock : icons.lock, \n      onClick: () => { offN.changeHandler('offN', !offNValue) }\n    }\n    const lockOffN = <View { ...lockOffNProps } />\n\n    yElements.push(lockOffN)\n  }\n  yElements.push(elementsByName.y)\n  if (offS) {\n    const lockOffSProps = { \n      key: \"lock-south\",\n      className: ClassButton,\n      children: offSValue ? icons.unlock : icons.lock, \n      onClick: () => { offS.changeHandler('offS', !offSValue) }\n    }\n    const lockOffS = <View { ...lockOffSProps } />\n    yElements.push(lockOffS)\n  }\n  const elements = [\n    <View key=\"x\" children={xElements} />, \n    <View key=\"y\" children={yElements} />\n  ]\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n\n}\n\nDataGroupInputs[DataGroup.Point] = <PointGroupInput key=\"point-input\" />\n","import React from \"react\"\nimport { \n  selectedPropertiesScalarObject, ClassButton, assertString, ClassSelected, \n  DataGroup, Orientation, PropertyTweenSuffix, isOrientation, \n  selectedPropertyObject, ScalarRecord, assertSelectType, assertTime, assertTimeRange, tweenInputTime \n} from \"@moviemasher/moviemasher.js\"\n\n\nimport { PropsAndChild, ReactResult, UnknownElement } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nconst SizeInputOrientations: Record<Orientation, string> = {\n  [Orientation.H]: 'width', [Orientation.V]: 'height'\n}\n\nexport function SizeGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType, 'selectType')\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const { selectedInfo, changeTweening } = inspectorContext\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Size]\n  const endSelected = tweenSelected[DataGroup.Size]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Size, selectType)\n  \n  const { \n    lock, width, height, \n    [`width${PropertyTweenSuffix}`]: widthEnd,\n    [`height${PropertyTweenSuffix}`]: heightEnd\n  } = byName \n  \n  const widthProperty = endSelected ? widthEnd : width\n  const heightProperty = endSelected ? heightEnd : height\n  const values: ScalarRecord = selectedPropertiesScalarObject(byName) \n\n  const { lock: lockValue } = values\n  assertString(lockValue, 'lockValue')\n    \n  const orientation = isOrientation(lockValue) ? lockValue as Orientation : undefined\n  \n  const elementsByName: Record<string, UnknownElement> = {}\n  const inspectingProperties = [widthProperty, heightProperty]\n\n  // go to first/last frame if needed and tween value defined...\n  const goTime = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  inspectingProperties.forEach(selectedProperty => {\n    \n    const { property, changeHandler, value, name: nameOveride } = selectedProperty\n    const { type, name: propertyName } = property\n    const name = nameOveride || propertyName\n    const baseName = name.replace(PropertyTweenSuffix, '')\n    const input = DataTypeInputs[type] \n    const key = `inspector-${selectType}-${name}`\n    const inputContext: InputContextInterface = { \n      property, value, name, time: goTime\n    }\n\n    // if we're editing tween value, but it's not defined yet...\n    if (endSelected) {\n      // tell input to use start value as default, rather than the property's...\n      inputContext.defaultValue = values[baseName] \n    }\n\n    if (!(orientation && baseName === SizeInputOrientations[orientation])) {\n      inputContext.changeHandler = changeHandler\n    }\n    const providerProps = { \n      key, value: inputContext, children: input\n    }\n    elementsByName[baseName] = <InputContext.Provider { ...providerProps } />  \n  })\n  const lockWidthProps = { \n    key: \"lock-width\",\n    className: ClassButton,\n    children: orientation === Orientation.H ? icons.lock : icons.unlock, \n    onClick: () => {\n      const value = orientation === Orientation.H ? \"\" : Orientation.H\n      lock.changeHandler('lock', value)\n    }\n  }\n  const lockWidth = <View { ...lockWidthProps } />\n  const lockHeightProps = { \n    key: \"lock-height\",\n    className: ClassButton,\n    children: orientation === Orientation.V ? icons.lock : icons.unlock, \n    onClick: () => {\n      const value = orientation === Orientation.V ? \"\" : Orientation.V\n      lock.changeHandler('lock', value)\n    }\n  }\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const lockHeight = <View { ...lockHeightProps } />\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Size, false)\n    }\n  }\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Size, true)\n    }\n  }\n  const legendElements = [\n    icons.size,\n    <View className=\"start-end\" key={`${selectType}-size-start-end`}>\n      <View { ...startProps } />\n      <View { ...endProps } />\n    </View>\n  ]\n  const widthElements = [\n    <View key=\"width-icon\" children={icons.width} className={ClassButton} />, \n    elementsByName.width, \n    lockWidth\n  ]\n  const heightElements = [\n    <View key=\"height-icon\" children={icons.height} className={ClassButton} />, \n    elementsByName.height, \n    lockHeight\n  ]\n  const elements = [\n    <View key=\"width\" children={widthElements} />, \n    <View key=\"height\" children={heightElements} />\n  ]\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n}\n\nDataGroupInputs[DataGroup.Size] = <SizeGroupInput key=\"size-group-input\" />\n","import React from \"react\"\nimport { \n  assertSelectType, ClassButton, DataGroup, isPopulatedObject, selectedPropertyObject \n} from \"@moviemasher/moviemasher.js\"\n\nimport { ElementRecord, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { View } from \"../../../../Utilities/View\"\nimport { InspectorProperty, InspectorPropertyProps } from \"../../InspectorProperty\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nexport interface OptionGroupInputProps extends DataGroupProps {\n  dataGroup: DataGroup\n}\n\nexport function OptionGroupInput(props: OptionGroupInputProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const { selectType, selectedItems: propsItems, dataGroup, ...rest } = props\n  assertSelectType(selectType)\n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const byName = selectedPropertyObject(selectedItems, dataGroup, selectType)\n  const elementsByName: ElementRecord = Object.fromEntries(Object.entries(byName).map(([key, selectedProperty]) => {\n    const { property, changeHandler, selectType, value, name: nameOveride } = selectedProperty\n    const { name: propertyName } = property\n    const name = nameOveride || propertyName\n    const propertyProps: InspectorPropertyProps = {\n      key: `inspector-${selectType}-group-${name}`,\n      property, value, changeHandler, name,\n      ...props\n    }\n    return [key, <InspectorProperty {...propertyProps} />]\n  }))\n\n  const { [dataGroup]: input, ...otherElements } = elementsByName\n  const iconElement = icons[dataGroup]\n  if (!isPopulatedObject(otherElements)) {\n    const viewProps = {\n      key: dataGroup, children: [iconElement, input], className: 'row'\n    }\n    return <View { ...viewProps} />\n  }\n\n  const legendElements = [iconElement]\n  if (input) legendElements.push(input)\n  const elements = Object.entries(otherElements).map(([key, value]) => {\n    const icon = icons[key]\n    const children = [value]\n    if (icon) children.unshift(<View key={`${key}-icon`} children={icon} className={ClassButton} />)\n    const frameProps = { key: `${key}-view`, children }\n    return <View { ...frameProps } />\n  })\n\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n}\n\n// [DataGroup.Timing, DataGroup.Clicking].forEach(dataGroup => {\n  const timingProps = { dataGroup: DataGroup.Timing, key: `${DataGroup.Timing}-group-input` }\n  DataGroupInputs[DataGroup.Timing] = <OptionGroupInput { ...timingProps } />\n// })\n","import React from 'react'\nimport { \n  arraySet, assertSelectType, EventType, SelectedItems, SelectType, SelectTypes, \n  assertPositive, assertTrue, timeFromArgs, timeEqualizeRates, assertDataGroup,\n  isSelectedProperty, isDefined, PropertyTweenSuffix, DataGroup, \n  SelectedProperties \n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport {\n  DataGroupBooleans,\n  InspectorContext, InspectorContextDefault, InspectorContextInterface, \n  SelectedInfo\n} from './InspectorContext'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface InspectorProps extends PropsAndChildren, WithClassName {}\n\n/**\n * @parents Masher\n * @children InspectorContent\n */\nexport function Inspector(props: InspectorProps): ReactResult {\n  const editor = useEditor()\n  const [actionCount, setActionCount] = React.useState(() => 0)\n  const info = React.useRef<SelectedInfo>({ \n    tweenDefined: {}, tweenSelected: {}, \n    selectedType: SelectType.None, selectTypes: []\n  })\n  const [orderedTypes, setOrderedTypes] = React.useState<SelectType[]>(() => SelectTypes)\n  const [selectedItems, setSelectedItems] = React.useState<SelectedItems>(() => [])\n  const handleAction = () => { setActionCount(value => value + 1) }\n  const handleSelection = () => {\n    const { selection } = editor\n    const { selectTypes: types, clip, mash } = selection\n    const { current } = info\n    const { selectedType, selectTypes } = current\n    const bestType = orderedTypes.find(type => types.includes(type))\n    assertSelectType(bestType)\n\n    if (bestType !== selectedType) {\n      // console.log(\"setInfo selectedType\", selectedType, \"=>\", bestType, types)\n      current.selectedType = bestType\n    }\n    arraySet(selectTypes, types)\n    \n    const items = editor.selection.selectedItems([bestType])\n    const tweening: DataGroupBooleans = {}\n    if (clip && mash) {\n      const tweenItems = items.filter(item => {\n        if (!isSelectedProperty(item)) return \n\n        const { property, name } = item\n        const { tweenable, group } = property\n        if (!(tweenable && group && name)) return\n\n        return name.endsWith(PropertyTweenSuffix)\n      }) as SelectedProperties\n      // console.log(\"Inspector handleSelection\", tweenItems.length, \"tweenItem(s)\")\n      tweenItems.forEach(item => {\n        const { property, value } = item\n        const { group } = property\n        assertDataGroup(group)\n        tweening[group] = isDefined(value) \n      })  \n\n      if (tweenItems.length) {\n        const { time, quantize } = mash\n        const timeRange = clip.timeRange(quantize)\n        current.time = time\n        current.timeRange = timeRange\n        // console.log(\"Inspector tweening\", time, timeRange)\n        const frame = timeRange.frame + Math.round(timeRange.frames / 2)\n        const halfTime = timeFromArgs(frame, quantize)\n        const [midTime, timeScaled] = timeEqualizeRates(halfTime, time)\n        \n        current.nearStart = midTime.frame > timeScaled.frame\n        const edge = current.nearStart ? timeRange.startTime : timeRange.lastTime\n\n        current.onEdge = time.equalsTime(edge)\n      }\n    }\n    \n    current.tweenDefined = tweening\n\n    setSelectedItems(items)\n    handleAction()\n  }\n  \n  useListeners({\n    [EventType.Action]: handleAction,\n    [EventType.Selection]: handleSelection,\n  })\n\n  const changeSelected = React.useCallback((type: string) => {\n    assertSelectType(type)\n    setOrderedTypes(original => {\n      const index = original.indexOf(type) \n      assertPositive(index) \n      const types = [type]\n      if (index) types.push(...original.slice(0, index))\n      if (index < original.length - 1) types.push(...original.slice(index + 1))\n      assertTrue(types.length === original.length, 'type lengths match')\n      // console.log(\"setOrderedTypes\", original, \"=>\", types)\n      arraySet(original, types)\n      handleSelection()\n      return original\n    })\n    info.current.selectedType = type\n    \n    setSelectedItems(editor.selection.selectedItems([type]))\n  }, [])\n\n  const changeTweening = (group: DataGroup, tweening: boolean): void => {\n    info.current.tweenSelected[group] = tweening\n    handleSelection()\n  }\n  const inspectorContext: InspectorContextInterface = {\n    ...InspectorContextDefault,\n    actionCount, selectedItems,\n    changeSelected, \n    changeTweening, selectedInfo: info.current,\n  }\n\n  return (\n    <InspectorContext.Provider value={inspectorContext}>\n      <View {...props}/>\n    </InspectorContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { PropsWithChildren, ReactResult } from '../../declarations'\nimport { View } from '../../Utilities/View'\n\n/**\n * @parents Inspector\n */\nexport function InspectorContent(props: PropsWithChildren): ReactResult {\n  return <View {...props} />\n}\n","import React from 'react'\nimport { assertPopulatedArray } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../declarations'\nimport { InspectorContext } from './InspectorContext'\nimport { propsSelectTypes } from '../../Utilities/Props'\n\nexport interface InspectorPickedProps {\n  types?: string | string[]\n  type?: string\n  children: React.ReactNode\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorPicked(props: InspectorPickedProps): ReactResult {\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedInfo } = inspectorContext\n  const { selectedType } = selectedInfo\n  const { type, types, children } = props\n  const selectTypes = propsSelectTypes(type, types)\n  assertPopulatedArray(selectTypes)\n  \n  if (!selectTypes.includes(selectedType)) return null\n\n  return <>{children}</>\n}\n","import React from 'react'\nimport { \n  Identified,\n  assertSelectType, ClassSelected, isPopulatedString, SelectType \n} from '@moviemasher/moviemasher.js'\n\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../declarations'\nimport { View } from '../../Utilities/View'\nimport { InspectorContext } from './InspectorContext'\n\n\n\nexport interface InspectorPickerProps extends PropsAndChild, WithClassName, Identified {}\n/**\n * @parents Inspector\n */\n\nexport function InspectorPicker(props: InspectorPickerProps): ReactResult {\n  const { id, children, className } = props\n  assertSelectType(id)\n  \n  const inspectorContext = React.useContext(InspectorContext)\n  const { changeSelected, selectedInfo } = inspectorContext\n  const { selectTypes, selectedType} = selectedInfo\n\n  if (!selectTypes.includes(id)) return null\n\n  const onClick = () => { changeSelected(id) }\n\n  const classes: string[] = []\n  if (isPopulatedString(className)) classes.push(className)\n  if (selectedType === id) classes.push(ClassSelected)\n\n  const viewProps = { children, onClick, className: classes.join(' ') }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { ClassButton, SelectType } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { InspectorProperties } from './InspectorProperties'\nimport { InspectorContent } from './InspectorContent'\nimport { InspectorProps } from './Inspector'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { InspectorPicked } from './InspectorPicked'\nimport { InspectorPicker } from './InspectorPicker'\nimport { EditorRemoveButton } from '../Controls/EditorRemoveButton'\nimport { Button } from '../../Utilities/Button'\nimport { EncodeControl } from '../Controls/EncodeControl'\nimport { ViewControl } from '../Controls/ViewControl'\nimport { View } from '../../Utilities/View'\nimport { labelInterpolate, labelTranslate } from '../../Utilities/Label'\nimport { EditorUndoButton } from '../Controls/EditorUndoButton'\nimport { EditorRedoButton } from '../Controls/EditorRedoButton'\n\nexport interface InspectorPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const InspectorDefaultProps: PropsMethod<InspectorPropsDefault, InspectorProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'inspector'\n  optionsStrict.props.className ||= 'panel inspector'\n\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.inspector} />,\n    <EditorUndoButton key='undo'>\n      <Button>{icons.undo}{labelTranslate('undo')}</Button>\n    </EditorUndoButton>,\n    <EditorRedoButton key='redo'>\n      <Button>{icons.redo}{labelTranslate('redo')}</Button>\n    </EditorRedoButton>,\n  ]\n \n  optionsStrict.footer.content ||= [\n    <InspectorPicker key=\"mash\" className={ClassButton} id=\"mash\">\n      {icons.mmTube}\n    </InspectorPicker>,\n    <InspectorPicker key=\"clip\" className={ClassButton} id=\"clip\">\n      {icons.clip}\n    </InspectorPicker>,\n    <InspectorPicker key=\"container\" className={ClassButton} id=\"container\">\n      {icons.container}\n    </InspectorPicker>,\n    <InspectorPicker key=\"content\" className={ClassButton} id=\"content\">\n      {icons.content}\n    </InspectorPicker>,\n ]\n\n  const contentChildren = [<InspectorProperties key=\"properties\" />]\n  const types = [SelectType.Clip, SelectType.Track]\n\n  contentChildren.push(\n    <InspectorPicked type=\"mash\" key=\"inspector-mash\">\n      <View>\n        <EncodeControl key='render-process'>\n          <Button>\n            {labelTranslate('render')} \n            {icons.render}\n          </Button>\n        </EncodeControl>\n        <ViewControl key='view-control'>\n          <Button>\n            {labelTranslate('view')} \n            {icons.view}\n          </Button>\n        </ViewControl>    \n      </View>  \n    </InspectorPicked>\n  )\n\n  types.forEach(type => {\n    contentChildren.push(\n      <InspectorPicked key={`${type}-delete`} type={type}>\n        <EditorRemoveButton type={type}>\n          <Button>\n            {labelInterpolate('delete', { type })}\n            {icons.remove}\n          </Button>\n        </EditorRemoveButton>\n      </InspectorPicked>\n    )\n  })\n  \n  optionsStrict.content.children ||= <>{contentChildren}</>\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <InspectorContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </InspectorContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n  return { ...optionsStrict.props, children }\n}\n","import { Size } from '@moviemasher/moviemasher.js'\n\nexport const elementSetPreviewSize = (current?: HTMLDivElement | null, size?: Size) => {\n  if (!(size && current))\n    return\n\n  const { width, height } = size\n  current.style.setProperty('--preview-width', `${width}px`)\n  current.style.setProperty('--preview-height', `${height}px`)\n}\n","import {\n\n  assertObject, DataDefaultRequest, DataDefaultResponse, Editor, EditorIndex, \n  editorInstance, EditType, Endpoints, eventStop, EventType,\n  idGenerate, idTemporary, isClip, isEffect, isMashAndMediaObject, isMedia, \n  isMediaObject, MashType, Media, MediaObject, ScalarRecord, Size, \n  UnknownRecord, urlBaseInitialize, VideoType\n} from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport {\n  ActivityType,\n  Client, ClientDisabledArgs, clientInstance, ClientOptions, ClientReadOptions, ReadOperation\n} from \"@moviemasher/client-core\"\n\n\n\nimport { Draggable, dropFilesFromList } from '@moviemasher/client-core'\nimport { ApiContext } from '../../../client-react-deleted/ApiClient/ApiContext'\nimport { PropsWithChildren, PropsWithoutChild, ReactResult, ThemeIcons, WithClassName } from '../../declarations'\nimport { elementSetPreviewSize } from '../../Utilities/Element'\nimport { View } from '../../Utilities/View'\nimport { ActivityPropsDefault } from '../Activity/ActivityDefaultProps'\nimport { BrowserPropsDefault } from '../Browser/BrowserDefaultProps'\nimport { InspectorPropsDefault } from '../Inspector/InspectorDefaultProps'\nimport { PanelOptions } from '../Panel/Panel'\nimport { PlayerPropsDefault } from '../Player/PlayerDefaultProps'\nimport { TimelinePropsDefault } from '../Timeline/TimelineDefaultProps'\nimport { MasherContext, MasherContextInterface } from './MasherContext'\n\nexport type PanelOptionsOrFalse = PanelOptions | false\n\nexport interface UiOptions {\n  [index: string]: PanelOptionsOrFalse\n  browser: BrowserPropsDefault | false\n  player: PlayerPropsDefault | false\n  inspector: InspectorPropsDefault | false\n  timeline: TimelinePropsDefault | false\n  activity: ActivityPropsDefault | false\n}\n\nexport interface MasherOptions extends UnknownRecord, WithClassName {\n  previewSize?: Size\n  icons?: ThemeIcons\n  editType?: EditType\n  mashMedia?: DataDefaultResponse\n  clientOptions?: ClientOptions\n}\n\nexport interface EditorProps extends MasherOptions, PropsWithoutChild {\n  panels?: Partial<UiOptions>\n}\n\nexport interface MasherProps extends MasherOptions, PropsWithChildren {}\n\n/**\n * @parents ApiClient, Masher\n * @children Browser, Timeline, Inspector, Player, Composer\n * @returns provided children wrapped in a {@link View} and {@link MasherContext}\n */\nexport function Masher(props: MasherProps): ReactResult {\n  const {\n    editType = VideoType,\n    clientOptions = ClientDisabledArgs,\n    previewSize,\n    icons = {},\n    mashMedia,\n    ...rest\n  } = props\n\n  console.log(\"Masher\", editType, previewSize)\n  const clientRef = React.useRef<Client>(clientInstance(clientOptions))\n  const editorRef = React.useRef<Editor>(editorInstance({ editType }))\n  const editorIndexRef = React.useRef<EditorIndex>({})\n  const currentRef = React.useRef<ScalarRecord>({})\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n\n  const apiContext = React.useContext(ApiContext)\n\n  const [requested, setRequested] = React.useState(false)\n  const [streaming, setStreaming] = React.useState(false)\n\n  const { current: client } = clientRef\n  const { current: editor } = editorRef\n  const { current: editorIndex } = editorIndexRef\n  const { current } = currentRef\n  const { endpointPromise, servers } = apiContext\n\n  React.useEffect(() => { \n    elementSetPreviewSize(ref.current, previewSize) \n  }, [previewSize])\n\n  const editorLoad = (object?: DataDefaultResponse) => {\n    const loadObject = object || mashMedia || { mash: { id: idTemporary(), media: [] } }\n    // const { previewSize: size = previewSize, ...rest } = loadObject\n    console.log('Masher.editorLoad', object, mashMedia, loadObject)\n\n    const { current: svg } = svgRef\n    // const { current: div } = ref\n    assertObject(svg, 'svg')\n    // if (sizeAboveZero(size)) elementSetPreviewSize(div, size)\n    \n    editor.svgElement = svg\n    const { mash } = loadObject\n    editor.load(mash)\n  }\n  React.useEffect(() => {\n    console.debug(\"Masher useEffect\", requested)\n\n    if (!client.enabled(ReadOperation)) {\n      editorLoad()\n      return\n    }\n    if (!requested) {\n      setRequested(true)\n\n      const request: DataDefaultRequest = {}\n\n      console.debug(\"DataDefaultRequest\", Endpoints.data[editType].default, request)\n\n      const promise = endpointPromise(Endpoints.data[editType].default, request)\n      promise.then((response: DataDefaultResponse) => {\n        console.debug(\"DataDefaultResponse\", Endpoints.data[editType].default, response)\n        const { previewSize: serverSize = previewSize } = response\n        console.log(\"Masher DataDefaultResponse\", servers.file?.prefix)\n        if (servers.file?.prefix) {\n          urlBaseInitialize(String(servers.file.prefix))\n          console.log(\"Masher DataDefaultResponse\", servers.file.prefix)\n        }\n        editorLoad(response)\n      })\n    }\n  }, [requested])\n\n  const dropFiles = (files: FileList, editorIndex?: EditorIndex): Promise<Media[]> => {\n    const fileInfos = dropFilesFromList(files, servers.file)\n    if (fileInfos.length) {\n      const errors: UnknownRecord[] = []\n      const validFiles: File[] = []\n      const { eventTarget } = editor\n      fileInfos.forEach(fileInfo => {\n        if (fileInfo instanceof File) validFiles.push(fileInfo)\n        else errors.push(fileInfo)\n      })\n\n      if (errors.length) {\n        errors.forEach(error => {\n          const id = idGenerate('activity-error')\n          const info = { id, type: ActivityType.Error, ...error }\n          eventTarget.emit(EventType.Active, info)\n        })\n      }\n      if (validFiles.length) return editor.addFiles(validFiles, editorIndex)\n    } else console.log('Masher.dropFiles no info')\n    return Promise.resolve([])\n  }\n\n  const dropMediaObject = (definitionObject: MediaObject, editorIndex?: EditorIndex): Promise<Media[]>  => {\n    // console.log(\"Masher onDrop DefinitionObject...\", definitionObject, editorIndex)\n    return editor.addMedia(definitionObject, editorIndex)\n  }\n\n  const drop = (draggable: Draggable, editorIndex?: EditorIndex): Promise<Media[]>  => {\n    console.log(\"Masher drop\", draggable, editorIndex)\n\n    \n    if (!draggable) return Promise.resolve([]) \n    console.log(\"Masher drop editorIndex = \", editorIndex)\n\n    if (isClip(draggable)) {\n      console.log(\"Masher drop Clip\")\n      return Promise.resolve([])\n    }\n    if (isEffect(draggable)) {\n      console.log(\"Masher drop Effect\")\n      return Promise.resolve([])\n    }\n    \n    if (isMediaObject(draggable)) {\n      console.log(\"Masher drop DefinitionObject\")\n      return dropMediaObject(draggable, editorIndex)\n      \n    }\n    if (isMashAndMediaObject(draggable)) {\n      console.log(\"Masher drop MashAndMediaObject\")\n      return Promise.resolve([])\n    }\n    return dropFiles(draggable, editorIndex).then(definitions => {\n      console.log(\"Masher.dropFiles\", definitions)\n      const [definition] = definitions\n      if (isMedia(definition)) changeDefinition(definition)\n      return definitions\n    })\n  }\n  \n\n\n  const changeDefinition = (media?: Media) => { current.mediaId = media?.id }\n  \n  const masherContext: MasherContextInterface = {\n    client, editor, \n    streaming, setStreaming,\n    current, editorIndex, drop,\n    changeDefinition, icons\n  }\n  const viewProps = { ...rest, onDrop: eventStop, ref }\n  return (\n    <MasherContext.Provider value={masherContext}>\n      <View { ...viewProps } />\n      <svg style={{ display: 'none' }} ref={svgRef} />\n    </MasherContext.Provider>\n  )\n}\n","import React from 'react'\nimport { BooleanSetter, EmptyMethod, NumberSetter } from '@moviemasher/moviemasher.js'\n\nexport interface PlayerContextInterface {\n  disabled?: boolean\n  paused: boolean,\n  changePaused: BooleanSetter\n  changeVolume: NumberSetter\n  volume: number\n}\n\nexport const PlayerContextDefault: PlayerContextInterface = {\n  paused: false,\n  changePaused: EmptyMethod,\n  changeVolume: EmptyMethod,\n  volume: 0,\n}\n\nexport const PlayerContext = React.createContext(PlayerContextDefault)\n","import React from 'react'\nimport { \n  EventType, Rect, eventStop, isMediaType, rectRound,\n  ClassDropping, sizeAboveZero, UnknownRecord, assertMediaType, \n  rectCopy, EditorIndex, assertObject, SelectType, EmptyMethod, isMediaObject, \n} from '@moviemasher/moviemasher.js'\n\nimport {  \n  PropsWithChildren, ReactResult, WithClassName \n} from '../../declarations'\nimport { \n  assertDragDefinitionObject, dragData, dragType, dragTypes, TransferTypeFiles \n} from '@moviemasher/client-core'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { PlayerContext } from './PlayerContext'\n\nexport interface PlayerContentProps extends PropsWithChildren, WithClassName {}\nconst PlayerRefreshRate = 10\n\n/**\n * @parents Player\n */\nexport function PlayerContent(props: PlayerContentProps): ReactResult {\n  const { children, className, ...rest } = props\n  \n  const editor = useEditor()\n  const [rect, setRect] = React.useState<Rect>(() => (rectCopy(editor.rect)))\n  const svgRef = React.useRef<HTMLDivElement>(null)//SVGSVGElement\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const masherContext = React.useContext(MasherContext)\n  const [over, setOver] = React.useState(false)\n  const playerContext = React.useContext(PlayerContext)\n  const { disabled } = playerContext\n  const { drop } = masherContext\n  const watchingRef = React.useRef<UnknownRecord>({})\n  const { current: watching } = watchingRef\n\n  const handleResize = () => { \n    const { current } = viewRef\n    if (!current) return\n  \n    const rect = rectRound(current.getBoundingClientRect())\n    setRect(() => {\n      editor.rect = rect\n      return rectCopy(rect)\n    })\n  }\n\n  const [resizeObserver] = React.useState(new ResizeObserver(handleResize))\n\n  React.useEffect(() => {\n    const { current } = viewRef\n    if (current) resizeObserver.observe(current)\n    return () => { resizeObserver.disconnect() }\n  }, [])\n\n  const swapChildren = (elements: Element[]) => {\n    const { current } = svgRef\n    if (!current) return\n\n    current.replaceChildren(...elements)  \n  }\n\n  const requestItemsPromise = (): Promise<void> => {\n    const { redraw } = watching\n    delete watching.timeout \n    delete watching.redraw \n\n    return editor.previewItems(!disabled).then(svgs => {\n   \n      swapChildren(svgs)\n      if (redraw) handleDraw()\n    })\n  }\n\n  const requestItems = () => { requestItemsPromise().then(EmptyMethod) }\n\n  const handleDraw = () => { \n    const { current } = svgRef\n    const { rect } = editor\n    if (!(current && sizeAboveZero(rect))) return\n\n    if (watching.timeout) {\n      watching.redraw = true\n      return\n    }\n    watching.timeout = setTimeout(requestItems, PlayerRefreshRate)\n  }\n\n  useListeners({ [EventType.Draw]: handleDraw, [EventType.Selection]: handleDraw })\n\n  const dragValid = (dataTransfer?: DataTransfer | null): dataTransfer is DataTransfer => {\n    if (!dataTransfer) return false\n\n    const types = dragTypes(dataTransfer)\n    if (types.includes(TransferTypeFiles)) return true\n    \n    return isMediaType(dragType(dataTransfer))\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    const { dataTransfer } = event\n    if (!dragValid(dataTransfer)) return \n\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n    const editorIndex: EditorIndex = {\n      clip: editor.time.scale(mashMedia.quantize).frame,\n      track: -1,\n    }\n    const types = dragTypes(dataTransfer)\n    if (types.includes(TransferTypeFiles)) {\n      drop(dataTransfer.files, editorIndex)\n    } else {\n      const type = dragType(dataTransfer)\n      assertMediaType(type)\n      const data = dragData(dataTransfer, type)\n      assertDragDefinitionObject(data)\n      const { mediaObject } = data\n      if (isMediaObject(mediaObject)) drop(mediaObject, editorIndex)\n    }\n  } \n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    setOver(dragValid(event.dataTransfer))\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n\n  const viewProps: UnknownRecord = {\n    ...rest, ref: viewRef, \n    className: classes.join(' '),\n    key: 'player-content', \n    onDragOver, onDrop, onDragLeave, \n    onPointerDown: () => { editor.selection.unset(SelectType.Clip) }\n  }\n\n  if (sizeAboveZero(rect)) {\n    const svgProps = { ref: svgRef, key: \"svg\", className: 'svgs' }\n    const nodes = [<div { ...svgProps } />]\n    if (children) {\n      const child = React.Children.only(children)\n      if (React.isValidElement(child)) nodes.push(child)\n    }\n    viewProps.children = nodes \n  } \n  return <View { ...viewProps}/>\n}\n","import React from \"react\"\nimport { View } from \"../../Utilities/View\"\nimport { PlayerContext } from \"./PlayerContext\"\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\n\n/**\n *\n * @parents Player\n */\nexport function PlayerButton(props: PropsWithChildren): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  const { paused, changePaused: setPaused } = playerContext\n\n  const onClick = () => { setPaused(!paused) }\n\n  const viewProps = {\n    ...props, key: 'player-button', onClick,\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { EventType, isArray, timeFromArgs, TimeRange } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, SliderChangeHandler, WithClassName } from \"../../declarations\"\nimport { Slider } from '../../Utilities/Slider'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\n\nexport interface PlayerTimeControlProps extends PropsWithChildren, WithClassName { }\n\nexport function PlayerTimeControl(props: PlayerTimeControlProps): ReactResult {\n  const editor = useEditor()\n  const getTimeRange = () => editor.timeRange.timeRange\n  const [timeRange, setTimeRange] = React.useState<TimeRange>(getTimeRange)\n\n  const update = () => { setTimeRange(getTimeRange())}\n  useListeners({\n    [EventType.Time]: update,\n    [EventType.Duration]: update,\n  })\n \n  const onChange: SliderChangeHandler = (_event, values) => {\n    const number = isArray(values) ? values[0] : values\n    editor.time = timeFromArgs(number, timeRange.fps)\n  }\n\n  const sliderProps = {\n    value: timeRange.frame,\n    min: 0,\n    max: timeRange.frames,\n    step: 1,\n    onChange,\n    className: 'frame slider',\n    ...props\n  }\n  return <Slider {...sliderProps} />\n}\n","import React from 'react'\n\nimport { PlayerContext } from './PlayerContext'\nimport { PropsAndChild, ReactResult } from '../../declarations'\n\n/**\n *\n * @group Player\n */\nexport function PlayerPlaying(props: PropsAndChild): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  if (playerContext.paused) return null\n\n  return props.children\n}\n","import React from 'react'\nimport { PlayerContext } from './PlayerContext'\nimport { PropsAndChild, ReactResult } from '../../declarations'\n\n/**\n *\n * @group Player\n */\nexport function PlayerNotPlaying(props: PropsAndChild): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  if (!playerContext.paused) return null\n\n  return props.children\n}\n","import React from \"react\"\nimport { View } from \"../../Utilities/View\"\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { EventType, stringSeconds } from \"@moviemasher/moviemasher.js\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport interface PlayerTimeProps extends PropsWithoutChild, WithClassName {}\n\n/**\n *\n * @parents Editor\n */\nexport function PlayerTime(props: PlayerTimeProps): ReactResult {\n  const editor = useEditor()\n  const getTimeRange = () => editor.timeRange\n  const [timeRange, setTimeRange] = React.useState(getTimeRange)\n  const update = () => { setTimeRange(getTimeRange()) }\n\n  useListeners({\n    [EventType.Time]: update, [EventType.Duration]: update,\n  })\n\n  const { seconds, fps, lengthSeconds } = timeRange\n\n  const viewChildren = [\n    stringSeconds(seconds, fps, lengthSeconds), \"/\",\n    stringSeconds(lengthSeconds, fps, lengthSeconds),\n  ]\n\n  const viewProps = { ...props, key: 'player-time', children: viewChildren }\n\n  return <View {...viewProps} />\n}\n","import React from 'react'\n\nimport { PropsMethod, PropsWithoutChild, WithClassName } from '../../declarations'\nimport { Button } from '../../Utilities/Button'\nimport { Bar } from '../../Utilities/Bar'\nimport { PlayerContent } from './PlayerContent'\nimport { PlayerButton } from './PlayerButton'\nimport { PlayerTimeControl } from './PlayerTimeControl'\nimport { PlayerPlaying } from './PlayerPlaying'\nimport { PlayerNotPlaying } from './PlayerNotPlaying'\nimport { PlayerProps } from './Player'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\n\nimport { ClassButton } from '@moviemasher/moviemasher.js'\nimport { PlayerTime } from './PlayerTime'\nimport { View } from '../../Utilities/View'\nimport { SaveControl } from '../Controls/SaveControl'\nimport { labelTranslate } from '../../Utilities/Label'\nimport { CreateEditedControl } from '../Controls/CreateEditedControl'\nimport { SelectEditedControl } from '../Controls/SelectEditedControl'\n\nexport interface PlayerPropsDefault extends PanelOptions, PropsWithoutChild, WithClassName {}\n\nexport const PlayerDefaultProps: PropsMethod<PlayerPropsDefault, PlayerProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'player'\n  optionsStrict.props.className ||= 'panel player'\n\n\n  optionsStrict.content.children ||= (\n    <PlayerContent {...optionsStrict.content.props}>\n      <View key=\"drop-box\" className=\"drop-box\" />\n    </PlayerContent>\n  )\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.app} />,\n    <SelectEditedControl key=\"select-mashMedia\" className=\"row\" children={icons.document} />,\n    <SaveControl key='save-process'>\n      <Button key=\"button\">\n        {labelTranslate('update')}\n        {icons.document}\n      </Button>\n    </SaveControl>,\n    <CreateEditedControl key=\"create-mashMedia\">\n      <Button>\n        {labelTranslate('create')} \n        {icons.document}\n      </Button>\n    </CreateEditedControl>\n   \n  ]\n  \n  optionsStrict.footer.content ||= [\n    <PlayerButton key='play-button' className={ClassButton}>\n      <PlayerPlaying key='playing'>{icons.pause}</PlayerPlaying>\n      <PlayerNotPlaying key='not-playing'>{icons.play}</PlayerNotPlaying>\n    </PlayerButton>,\n    <PlayerTimeControl key='time-slider'/>,\n    <PlayerTime key='time' className=\"time\" />,\n  ]\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    {optionsStrict.content.children}\n    <Bar {...optionsStrict.footer} />\n  </>\n  return { ...optionsStrict.props, children }\n}\n","import React from \"react\"\n\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { View } from \"../../Utilities/View\"\nimport { pixelFromFrame } from \"@moviemasher/client-core\"\n\n/**\n * @parents TimelineScrubber\n */\nexport function TimelineScrubberElement(props: PropsWithChildren): ReactResult {\n  const timelineContext = React.useContext(TimelineContext)\n  const { scale, frame } = timelineContext\n  const calculateViewProps = () => {\n    const viewProps = { ...props, style: { left: pixelFromFrame(frame, scale) } }\n    return viewProps\n  }\n\n  const viewProps = React.useMemo(calculateViewProps, [frame, scale])\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { \n  assertMashMedia, assertTrack, assertTrue, ClassSelected, DroppingPosition, \n  eventStop, UnknownRecord \n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../declarations'\nimport { TimelineContext } from './TimelineContext'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { View } from '../../Utilities/View'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { droppingPositionClass } from '@moviemasher/client-core'\nimport { ClipContext } from '../ClipItem/ClipContext'\n\nexport interface TimelineTrackProps extends PropsAndChild, WithClassName {\n  label?: string\n}\n\n/**\n * @parents TimelineTracks\n */\nexport function TimelineTrack(props: TimelineTrackProps): ReactResult {\n  const editor = useEditor()\n  const { selection } = editor\n  const { mash } = selection\n \n  const { className: propsClassName, children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const trackContext = React.useContext(TrackContext)\n  const timelineContext = React.useContext(TimelineContext)\n  const { track } = trackContext\n\n\n  const {\n    dragTypeValid, onDragLeave, onDrop, droppingTrack, setDroppingTrack,\n    droppingPosition, setDroppingPosition, setDroppingClip, selectedTrack,\n  } = timelineContext\n\n  const calculatedClassName = (): string => {\n    const selected = track === selectedTrack\n    const classes: string[] = []\n    if (propsClassName) classes.push(propsClassName)\n    if (selected) classes.push(ClassSelected)\n    if (droppingTrack === track) classes.push(droppingPositionClass(droppingPosition))\n    return classes.join(' ')\n  }\n\n  const className = React.useMemo(\n    calculatedClassName, [droppingPosition, droppingTrack, selectedTrack]\n  )\n  if (!(mash && track)) return null\n\n  // assertMashMedia(mash)\n  // assertTrack(track)\n\n  const { clips, dense, index } = track\n  \n  const childNodes = (): React.ReactElement[] => {\n    let prevClipEnd = dense ? -1 : 0\n    const childProps = child.props\n    return clips.map(clip => {\n      const cloneProps = { ...childProps, key: clip.id }\n      const children = React.cloneElement(child, cloneProps)\n      const contextProps = { children, value: { clip, prevClipEnd }, key: clip.id }\n      const context = <ClipContext.Provider { ...contextProps } />\n      if (!dense) prevClipEnd = clip.frames + clip.frame\n      return context\n    })\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const definitionType = dragTypeValid(dataTransfer)\n    const pos = definitionType ? DroppingPosition.At : DroppingPosition.None\n    setDroppingClip()\n    setDroppingTrack(definitionType ? track : undefined)\n    setDroppingPosition(pos)\n  }\n\n  const viewProps:UnknownRecord = {\n    ...rest,\n    className,\n    children: childNodes(),\n    onDragLeave, onDragOver, onDrop,\n    key: `track-${index}`\n  }\n\n  return <View {...viewProps}/>\n}\n","import React from 'react'\n\nimport { View } from \"../../Utilities/View\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { PropsWithChildren, ReactResult } from '../../declarations'\n\n/**\n * @parents Timeline\n */\nexport function TimelineSizer(props: PropsWithChildren): ReactResult {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const timelineContext = React.useContext(TimelineContext)\n  const handleResize = () => {\n    const { setRect } = timelineContext\n    const rect = ref.current!.getBoundingClientRect()\n    // console.log(\"handleResize width\", rect.width)\n    setRect(rect)\n  }\n\n  const [resizeObserver] = React.useState(new ResizeObserver(handleResize))\n\n  React.useEffect(() => {\n    const { current } = ref\n    if (current) resizeObserver.observe(current)\n    return () => { resizeObserver.disconnect() }\n  }, [ref.current])\n\n  const viewProps = { ...props, ref }\n  return <View {...viewProps}/>\n}\n","import React from 'react'\nimport { ReactResult, SliderChangeHandler, PropsWithChildren } from \"../../declarations\"\nimport { TimelineContext } from './TimelineContext'\nimport { Slider } from '../../Utilities/Slider'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { EventType, isArray } from '@moviemasher/moviemasher.js'\nimport { useListeners } from '../../Hooks/useListeners'\n\n\n/**\n * @parents Timeline\n */\nexport function TimelineZoomer(props: PropsWithChildren): ReactResult {\n  const editor = useEditor()\n  const timelineContext = React.useContext(TimelineContext)\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n\n  const handleChange : SliderChangeHandler = (_event, values) => {\n    const number = isArray(values) ? values[0] : values\n    if (timelineContext.zoom !== number) timelineContext.setZoom(number)\n  }\n\n\n  const sliderProps = {\n    disabled,\n    key: 'time-slider',\n    value: timelineContext.zoom,\n    min: 0.0,\n    max: 1.0,\n    step: 0.01,\n    onChange: handleChange,\n    ...props\n  }\n  return <Slider className='zoom slider' {...sliderProps} />\n}\n","import React from 'react'\nimport { EventType, arrayReversed, Tracks } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface TimelineTracksProps extends PropsAndChildren {}\n\n/**\n * @parents TimelineContent\n * @children TimelineTrack\n */\nexport function TimelineTracks(props: TimelineTracksProps): ReactResult {\n  const [refresh, setRefreshed] = React.useState(() => 0)\n  const updateRefreshed = () => { setRefreshed(nonce => nonce + 1) }\n  const editor = useEditor()\n  useListeners({\n    [EventType.Loaded]: updateRefreshed, [EventType.Track]: updateRefreshed,\n  })\n\n  const { children } = props\n\n  const childNodes = (): React.ReactElement[] => {\n    const { mash } = editor.selection\n    if (!mash) return []\n\n    const { tracks } = mash\n    const reversedTracks = arrayReversed(tracks) as Tracks\n    return reversedTracks.map((track, i) => {\n      const { identifier, index } = track\n      const clones = React.Children.map(children, child => {\n        if (!React.isValidElement(child)) throw `TimelineTracks`\n\n        return React.cloneElement(child, { \n          key: `track-clone-${i}-${index}-${identifier}`\n        })\n      })\n      const contextProps = {\n        children: clones,\n        value: { track },\n        key: `track-context-${i}-${index}-${identifier}`\n      }\n      return <TrackContext.Provider {...contextProps} />\n    })\n  }\n\n  const viewChildren = React.useMemo(childNodes, [refresh])\n  \n  const fragmentProps = {\n    key: `track-content`,\n    children: viewChildren,\n  }\n  return <React.Fragment { ...fragmentProps } />\n}\n","import React from \"react\"\nimport { \n  ClassDisabled, eventStop, EventType, pixelToFrame, \n  timeFromArgs, UnknownRecord \n} from \"@moviemasher/moviemasher.js\"\nimport { \n  pixelFromFrame\n} from \"@moviemasher/client-core\"\n\nimport { View } from \"../../Utilities/View\"\nimport { ReactResult, PropsWithChildren, WithClassName } from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface TimelineScrubber extends PropsWithChildren, WithClassName {\n  inactive?: boolean\n  styleHeight?: boolean\n  styleWidth?: boolean\n}\n/**\n * @parents Timeline\n */\nexport function TimelineScrubber(props: TimelineScrubber): ReactResult {\n  const editor = useEditor()\n  const clientXRef = React.useRef<number>(-1)\n  const ref = React.useRef<HTMLDivElement>(null)\n  const timelineContext = React.useContext(TimelineContext)\n  const { frames,scale, rect } = timelineContext\n  const { className, inactive, styleHeight, styleWidth, ...rest } = props\n\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const addHandlers = () => {\n    const { window } = globalThis\n\n    const removeWindowHandlers = () => {\n      window.removeEventListener('pointermove', pointerMove)\n      window.removeEventListener('pointerup', pointerUp)\n    }\n\n    const pointerMove = (event: MouseEvent) => {\n      eventStop(event)\n      \n      const { current } = ref\n      if (!(current && editor.selection.mash)) return\n\n      const { clientX } = event\n      if (clientXRef.current === clientX) return\n\n      clientXRef.current = clientX\n\n      const rect = current.getBoundingClientRect()\n      const pixel = Math.max(0, Math.min(rect.width, clientX - rect.x))\n      const frame = pixelToFrame(pixel, scale, 'floor')\n      editor.time = timeFromArgs(frame, editor.selection.mash!.quantize)\n    }\n\n    const pointerUp = (event: MouseEvent) => {\n      pointerMove(event)\n      removeWindowHandlers()\n    }   \n\n    const pointerDown = (event: MouseEvent) => {\n      event.stopPropagation()\n      clientXRef.current = -1\n      window.addEventListener('pointermove', pointerMove)\n      window.addEventListener('pointerup', pointerUp)\n      pointerMove(event)\n    }    \n    return pointerDown\n  }\n\n  const { width, height } = rect\n  const calculateViewProps = () => {\n    const classes: string[] = []\n    if (className) classes.push(className)\n    if (disabled) classes.push(ClassDisabled)\n    const viewProps: UnknownRecord = { \n      ...rest, ref, className: classes.join(' ')\n    }\n    if (styleWidth || styleHeight) {\n      const style: UnknownRecord = {}\n      if (styleHeight) style.minHeight = height\n      if (styleWidth) {\n        const width = pixelFromFrame(frames, scale, 'ceil')\n        style.minWidth = Math.max(width, width)\n      }\n      viewProps.style = style\n    }\n    if (!(inactive || disabled)) viewProps.onPointerDown = addHandlers()\n    \n    return viewProps\n  }\n\n  const viewProps = React.useMemo(calculateViewProps, [frames, scale, width, height, disabled])\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { ClassDropping, DroppingPosition, eventStop, EventType, SelectType } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, WithClassName } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { View } from '../../Utilities/View'\nimport { TimelineContext } from './TimelineContext'\n\nexport interface TimelineContentProps extends PropsWithChildren, WithClassName {}\n/**\n * @parents Timeline\n * @children TimelineTracks, TimelineScrubber, TimelineSizer\n */\nexport function TimelineContent(props: TimelineContentProps): ReactResult {\n  const { className, ...rest } = props\n\n  const timelineContext = React.useContext(TimelineContext)\n\n  const { \n    dragTypeValid, onDrop: contextDrop,\n    setScroll, setDroppingClip, setDroppingTrack, setDroppingPosition \n  } = timelineContext\n  const ref = React.useRef<HTMLDivElement>(null)\n  const [over, setOver] = React.useState(false)\n\n  const editor = useEditor()\n  const resetScroll = () => { ref.current?.scrollTo(0, 0) }\n  useListeners({ [EventType.Loaded]: resetScroll })\n\n  const onPointerDown = () => { \n    editor.selection.unset(SelectType.Track) \n  }\n  \n  const onScroll = () => {\n    const { current } = ref\n    if (!current) return\n\n    const { scrollLeft: x, scrollTop: y } = current\n    setScroll({ x, y })\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    contextDrop(event)\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const valid = dragTypeValid(dataTransfer)\n    const pos = valid ? DroppingPosition.At : DroppingPosition.None\n    setDroppingClip()\n    setDroppingTrack()\n    setDroppingPosition(pos)\n    setOver(valid)\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n\n\n  const viewProps = { \n    className: classes.join(' '),\n    ...rest, onPointerDown, onScroll, onDragOver, onDragLeave, onDrop, ref \n  }\n  return <View {...viewProps} />\n}\n","import React from \"react\"\nimport { EventType, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport interface TimelineAddTrackControlProps extends PropsAndChild, WithClassName {}\n\nexport function TimelineAddTrackControl(props:TimelineAddTrackControlProps): ReactResult {\n  const editor = useEditor()\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const { children, ...rest } = props\n  const cloneProps: UnknownRecord = { \n    ...rest, \n    disabled,\n  }\n  cloneProps.onClick = () => { editor.addTrack() }\n  return React.cloneElement(React.Children.only(children), cloneProps)\n}\n","import React from \"react\"\nimport { ClassSelected, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport {\n  PropsWithoutChild, ReactResult, WithClassName\n} from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { TrackContext } from \"../../Contexts/TrackContext\"\nimport { View } from \"../../Utilities/View\"\nimport { droppingPositionClass } from \"@moviemasher/client-core\"\n\nexport interface TimelineTrackIconProps extends PropsWithoutChild, WithClassName {\n  icons: UnknownRecord\n}\n/**\n * @parents TimelineTracks\n * @children TimelineTracks, TimelineScrubber, TimelineScrubberElement, TimelineSizer\n */\nexport function TimelineTrackIcon(props: TimelineTrackIconProps): ReactResult {\n  const { className: propsClassName, icons, ...rest } = props\n  const timelineContext = React.useContext(TimelineContext)\n  const trackContext = React.useContext(TrackContext)\n \n\n  const { droppingTrack, droppingPosition, selectedTrack } = timelineContext\n  const { track } = trackContext\n\n  const calculatedClassName = (): string => {\n    const classes: string[] = []\n    if (propsClassName) classes.push(propsClassName)\n    if (track === selectedTrack) classes.push(ClassSelected)\n    if (track === droppingTrack) classes.push(droppingPositionClass(droppingPosition))\n    return classes.join(' ')\n  }\n\n  const className = React.useMemo(\n    calculatedClassName, [droppingPosition, droppingTrack, selectedTrack]\n  )\n\n  if (!track) return null\n\n  const { dense, index } = track\n  \n  const children = dense ? icons.trackDense : icons.track\n\n  const viewProps = { \n    ...rest, className, children, key: `track-icon-${index}`\n  }\n  return <View {...viewProps} />\n}\n","import React from 'react'\nimport { EventType } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, PropsAndChild, WithClassName } from \"../../declarations\"\nimport { TimelineContext } from './TimelineContext'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\n\nexport interface TimelineZoomProps extends PropsAndChild, WithClassName {\n  zoom: number\n}\n\n/**\n * @parents Timeline\n */\nexport function TimelineZoom(props: TimelineZoomProps): ReactResult {\n  const editor = useEditor()\n  const { zoom, children, ...rest } = props\n  const timelineContext = React.useContext(TimelineContext)\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n\n  const onClick = () => { timelineContext.setZoom(zoom) }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n","import React from \"react\"\nimport { assertPopulatedString, DefaultContentId, EditorIndex, EventType, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { MasherContext } from \"../Masher/MasherContext\"\n\nexport interface TimelineAddClipControlProps extends PropsAndChild, WithClassName {}\n\nexport function TimelineAddClipControl(props:TimelineAddClipControlProps): ReactResult {\n  const editor = useEditor()\n  const editorContext = React.useContext(MasherContext)\n  const { current, drop } = editorContext\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const { children, ...rest } = props\n  const cloneProps: UnknownRecord = { \n    ...rest, \n    disabled,\n  }\n  cloneProps.onClick = () => { \n    const { selection, mashMedia } = editor\n    const { clip, track } = selection\n    const id = current.mediaId || DefaultContentId\n    assertPopulatedString(id)\n    const object = { id }\n    const editorIndex: EditorIndex = {\n      clip: 0, track: -1\n    }\n    if (clip && track) {\n      editorIndex.clip = track.dense ? track.clips.indexOf(clip) : clip.endFrame\n      editorIndex.track = track.index\n    } else {\n      editorIndex.clip = editor.time.scale(mashMedia!.quantize).frame\n    }\n    drop(object, editorIndex)\n  }\n  return React.cloneElement(React.Children.only(children), cloneProps)\n}\n","import React from 'react'\n\nimport {\n  PropsMethod, PropsWithoutChild, WithClassName\n} from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { TimelineScrubberElement } from './TimelineScrubberElement'\nimport { TimelineTrack } from './TimelineTrack'\nimport { TimelineSizer } from './TimelineSizer'\nimport { TimelineZoomer } from './TimelineZoomer'\nimport { TimelineTracks } from './TimelineTracks'\nimport { TimelineScrubber } from './TimelineScrubber'\nimport { TimelineContent } from './TimelineContent'\nimport { TimelineAddTrackControl } from './TimelineAddTrackControl'\n\nimport { TimelineProps } from './Timeline'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { TimelineTrackIcon } from './TimelineTrackIcon'\nimport { TimelineZoom } from './TimelineZoom'\nimport { TimelineAddClipControl } from './TimelineAddClipControl'\nimport { ClipItem } from '../ClipItem/ClipItem'\nimport { View } from '../../Utilities/View'\nimport { Button } from '../../Utilities/Button'\n\nexport interface TimelinePropsDefault extends PanelOptions, PropsWithoutChild, WithClassName {}\n\nexport const TimelineDefaultProps: PropsMethod<TimelinePropsDefault, TimelineProps> = function(props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'timeline'\n  optionsStrict.props.className ||= 'panel timeline'\n\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.timeline} />,\n  ]\n\n  optionsStrict.footer.content ||= [\n    <TimelineAddClipControl key='add-clip'>\n      <Button children={icons.add}/>\n    </TimelineAddClipControl>,\n    <TimelineAddTrackControl key='add-track'>\n      <Button children={[icons.add, icons.trackDense]}/>\n    </TimelineAddTrackControl>,\n    <TimelineZoom key=\"zoom-out\" zoom={0}>\n      <Button useView={true}>{icons.zoomLess}</Button>\n    </TimelineZoom>,\n    <TimelineZoomer key='zoomer'/>,\n    <TimelineZoom key=\"zoom-in\" zoom={1}>\n      <Button useView={true}>{icons.zoomMore}</Button>\n    </TimelineZoom>,\n  ]\n\n  optionsStrict.content.children ||= <>\n    <TimelineScrubber styleWidth={true} inactive={true} styleHeight={true} className='scrubber-bar'>\n      <TimelineScrubberElement className='scrubber-element-bar' />\n    </TimelineScrubber>\n    <TimelineScrubber styleWidth={true} className='scrubber-icon'>\n      <TimelineScrubberElement className='scrubber-element-icon'/>\n    </TimelineScrubber>\n    <TimelineTracks>\n      <TimelineTrackIcon className='track-icon' icons={icons} />\n      <TimelineTrack className='track'>\n        <ClipItem className='clip preview' />\n      </TimelineTrack>\n    </TimelineTracks>\n    <TimelineSizer className='drop-box' />\n  </>\n  \n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <TimelineContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </TimelineContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n\n  return { ...optionsStrict.props, children }\n}\n","import React from 'react'\nimport { EventType } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from '../../declarations'\nimport { PlayerContext, PlayerContextInterface } from './PlayerContext'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface PlayerProps extends PropsAndChildren, WithClassName {\n  disabled?: boolean\n}\n\n/**\n * @parents Masher\n * @children PlayerContent, PlayerPlaying, PlayerNotPlaying, PlayerTimeControl, PlayerTime, PlayerButton\n */\nexport function Player(props: PlayerProps): ReactResult {\n  const { disabled, ...rest } = props\n  const editor = useEditor()\n  const [paused, setPaused] = React.useState(editor.paused)\n  const [volume, setVolume] = React.useState(editor.volume)\n  const updatePaused = () => { setPaused(editor.paused) }\n  useListeners({\n    [EventType.Pause]: updatePaused, [EventType.Play]: updatePaused,\n    [EventType.Volume]: () => { setVolume(editor.volume) },\n  })\n\n  const changePaused = (value: boolean) => { editor.paused = value }\n  const changeVolume = (value: number) => { editor.volume = value }\n\n  const playerContext: PlayerContextInterface = {\n    paused, disabled, volume, changePaused, changeVolume,\n  }\n  const contextProps = {\n    value: playerContext, children: <View { ...rest } />\n  }\n  return (\n    <PlayerContext.Provider { ...contextProps } />\n  )\n}\n","import React from 'react'\nimport {\n  Rect, RectZero, Clip, DroppingPosition, EventType, Track, pixelToFrame, Clips, \n  Point, eventStop, EditorIndex, isPositive, assertClip, \n  EffectType, isMediaObject\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { TimelineContext, TimelineContextInterface } from './TimelineContext'\nimport { useListeners } from '../../Hooks/useListeners'\nimport {\n  dragTypes, isDragOffsetObject, isDragDefinitionObject, isTransferType, \n  dragMediaType, TransferTypeFiles, dragData, pixelPerFrame\n} from '@moviemasher/client-core'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { View } from '../../Utilities/View'\n\n\n\nexport interface TimelineProps extends PropsAndChildren {}\nexport const TimelineDefaultZoom = 1.0\n/**\n * @parents Masher\n * @children TimelineContent, TimelineZoomer\n */\nexport function Timeline(props: TimelineProps): ReactResult {\n  const editor = useEditor()\n  const editorContext = React.useContext(MasherContext)\n  const { drop } = editorContext\n  const currentFrame = () => { return editor.selection.mash?.frame || 0 }\n  const currentFrames = () => { return editor.selection.mash?.frames || 0 }\n  const [frames, setFrames] = React.useState(currentFrames)\n  const [frame, setFrame] = React.useState(currentFrame)\n  const updateFrames = () => { setFrames(currentFrames()) }\n  const updateFrame = () => { setFrame(currentFrame()) }\n\n  const [droppingPosition, setDroppingPosition] = React.useState<DroppingPosition | number>(DroppingPosition.None)\n  const [droppingTrack, setDroppingTrack] = React.useState<Track | undefined>()\n  const [droppingClip, setDroppingClip] = React.useState<Clip | undefined>()\n  const [selectedTrack, setSelectedTrack] = React.useState<Track | undefined>()\n  const [refreshed, setRefreshed] = React.useState(0)\n  const [selectedClip, setSelectedClip] = React.useState<Clip | undefined>()\n  const [zoom, setZoom] = React.useState(TimelineDefaultZoom)\n  const [rect, setRect] = React.useState<Rect>(RectZero)\n  const [scroll, setScroll] = React.useState<Point>(RectZero)\n  const refresh = () => { setRefreshed(value => value + 1) }\n\n  useListeners({\n    [EventType.Loaded]: () => { setZoom(TimelineDefaultZoom) },\n    [EventType.Action]: refresh,\n    [EventType.Selection]: () => {\n      setSelectedClip(editor.selection.clip)\n      setSelectedTrack(editor.selection.track)\n    },\n    [EventType.Time]: updateFrame,\n    [EventType.Duration]: updateFrames,\n  })\n\n  const dragTypeValid = (dataTransfer: DataTransfer, clip?: Clip): boolean => {\n    const types = dragTypes(dataTransfer)\n    // any file can be dropped\n    if (types.includes(TransferTypeFiles)) return true\n\n    const type = types.find(isTransferType)\n    if (!type) return false\n\n    // anything can be dropped on a clip \n    if (clip || type.startsWith('clip')) return true\n\n    // effects can only be dropped on clips\n    const definitionType = dragMediaType(type)\n    return definitionType !== EffectType\n  }\n\n  const onDragLeave = (event: DragEvent) => {\n    eventStop(event)\n    setDroppingPosition(DroppingPosition.None)\n    setDroppingTrack(undefined)\n    setDroppingClip(undefined)\n  }\n\n  const frameToIndex = (frame: number, clips: Clips) => {\n    const { length } = clips\n    if (!length) return 0\n\n    const foundIndex = clips.findIndex(clip => frame < clip.frame + clip.frames)\n    if (foundIndex > -1) return foundIndex\n\n    return length\n  }\n\n  const dropIndex = (dense: boolean, clips: Clips) => {\n    if (!dense) return -1\n    if (!droppingClip) return 0\n\n    const clipIndex = clips.indexOf(droppingClip)\n    if (droppingPosition === DroppingPosition.After) return clipIndex + 1\n    return clipIndex\n  }\n\n  const onDrop = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer, clientX } = event \n    console.log(\"Timeline onDrop\", dataTransfer?.types)\n\n    if (!(dataTransfer && dragTypeValid(dataTransfer, droppingClip))) {\n      console.log(\"Timeline onDrop invalid\", dataTransfer?.types, !!droppingClip)\n      return\n    }\n    console.log(\"Timeline onDrop\", dataTransfer.types, droppingClip)\n\n    const types = dragTypes(dataTransfer)\n    const droppingFiles = types.includes(TransferTypeFiles)\n\n    const dense = !!droppingTrack?.dense\n    const index = droppingTrack ? droppingTrack.index : -1\n    const clips = droppingTrack?.clips || []\n\n    const data = droppingFiles ? {} : dragData(dataTransfer)\n    const draggingItem = !droppingFiles && isDragOffsetObject(data)\n    const offset = draggingItem ? data.offset : 0\n\n    let indexDrop = dropIndex(dense, clips)\n    if (!isPositive(indexDrop)) {\n      const offsetDrop = clientX - rect.x\n      const frame = pixelToFrame(Math.max(0, scroll.x + (offsetDrop - offset)), scale)\n      indexDrop = dense ? frameToIndex(frame, clips) : frame\n    }\n    const editorIndex: EditorIndex = { clip: indexDrop, track: index }\n\n    if (droppingFiles) {\n      drop(dataTransfer.files, editorIndex)\n    } else if (draggingItem) {\n      console.log(\"onDrop\", data)\n      if (isDragDefinitionObject(data)) {\n        const { mediaObject } = data\n        if (isMediaObject(mediaObject)) drop(mediaObject, editorIndex)\n        // console.log(\"Timeline onDrop definition\", definitionObject)\n        \n      } else {\n        const { clip } = editor.selection\n        assertClip(clip)\n        \n        // console.log(\"Timeline onDrop moving clip\", editorIndex, clip.content.definition.label)\n        editor.moveClip(clip, editorIndex)\n      }\n    } \n    onDragLeave(event)\n  }\n\n  const { width } = rect\n\n  const calculatedScale = (): number => {\n    const scale = width ? pixelPerFrame(frames, width, zoom) : 0\n    // console.log(\"calculatedScale\", scale, \"frames\", frames, \"width\", width, 'zoom', zoom)\n    return scale\n  }\n\n  const scale = React.useMemo(calculatedScale, [zoom, width, frames])\n\n  const timelineContext: TimelineContextInterface = {\n    scroll, setScroll,\n    scale, refreshed, refresh,\n    zoom, setZoom,\n    rect, setRect,\n    droppingTrack, setDroppingTrack,\n    droppingClip, setDroppingClip,\n    droppingPosition, setDroppingPosition,\n    onDragLeave, onDrop, dragTypeValid,\n    selectedClip, selectedTrack,\n    frame, frames, \n  }\n\n  const contextProps = {\n    children: <View {...props} />,\n    value: timelineContext\n  }\n  return <TimelineContext.Provider { ...contextProps } />\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelsProps extends PropsAndChildren, WithClassName {}\n\nexport function Panels(props: PanelsProps): ReactResult {\n  return <View { ...props } />\n}\n","import React from 'react'\nimport { VideoType } from '@moviemasher/moviemasher.js'\nimport { Icons } from '@moviemasher/theme-default'\n\nimport { PropsMethod } from '../../declarations'\nimport { EditorProps, MasherProps } from './Masher'\nimport { Browser } from '../Browser/Browser'\nimport { BrowserDefaultProps } from '../Browser/BrowserDefaultProps'\nimport { InspectorDefaultProps } from '../Inspector/InspectorDefaultProps'\nimport { PlayerDefaultProps } from '../Player/PlayerDefaultProps'\nimport { TimelineDefaultProps } from '../Timeline/TimelineDefaultProps'\nimport { Inspector } from '../Inspector/Inspector'\nimport { Player } from '../Player/Player'\nimport { Timeline } from '../Timeline/Timeline'\nimport { ActivityDefaultProps } from '../Activity/ActivityDefaultProps'\nimport { Activity } from '../Activity/Activity'\nimport { Panels } from '../Panel/Panels'\n\nexport const MasherDefaultProps: PropsMethod<EditorProps, MasherProps> = function(options = {}) {\n  options.className ||= 'editor masher'\n  options.icons ||= Icons\n  const { panels = {}, ...rest } = options\n  const { \n    player = {}, \n    browser = {}, \n    timeline = {}, \n    inspector = {}, \n    activity = {},\n  } = panels\n  const masherChildren: JSX.Element[] = []\n\n  if (player) {\n    player.icons ||= options.icons\n    masherChildren.push(<Player { ...PlayerDefaultProps(player) } />)\n  }\n  if (browser) {\n    browser.icons ||= options.icons\n    masherChildren.push(<Browser { ...BrowserDefaultProps(browser) } />)\n  }\n  if (inspector || activity) {\n    const panelsChildren: JSX.Element[] = []\n    if (activity) {\n      activity.icons ||= options.icons\n      panelsChildren.push(<Activity { ...ActivityDefaultProps(activity) } />)\n    }   \n    if (inspector) {  \n      inspector.icons ||= options.icons\n      panelsChildren.push(<Inspector { ...InspectorDefaultProps(inspector) } />)\n    }\n    const panelsProps = {\n      children: panelsChildren, key: 'panels', className: 'panels'\n    }\n    masherChildren.push(<Panels { ...panelsProps } />)\n  }\n  if (timeline) {\n    timeline.icons ||= options.icons\n    masherChildren.push(<Timeline { ...TimelineDefaultProps(timeline) } />)\n  }\n\n\n  return {\n    className: 'editor masher', \n    ...rest, \n    editType: VideoType, \n    children: masherChildren\n  }\n}\n","import { MediaType } from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { propsMediaTypes } from '../../Utilities/Props'\n\nexport interface MashingProps extends PropsAndChildren {\n  type?: string\n  types?: string | string[]\n}\n\n/**\n * @parents Masher\n */\nexport function Mashing(props: MashingProps): ReactResult {\n  const { type, types, children } = props\n  const mediaTypes = propsMediaTypes(type, types)\n  const editor = useEditor()\n  return mediaTypes.includes(editor.editType as MediaType) ? <>{children}</> : null\n}\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelContentProps extends PropsAndChildren, WithClassName { }\n\nexport function PanelContent(props: PanelContentProps): ReactResult {\n  const { children, className } = props\n  if (!children) return null\n  \n  const viewProps = { className, children }\n  return <View {...viewProps} />\n}\n\nexport type PanelContentElement = React.FunctionComponentElement<typeof PanelContent>\n","import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelHeadProps extends PropsAndChildren, WithClassName { }\n\nexport function PanelHead(props: PanelHeadProps): ReactResult {\n  const { children, className } = props\n  if (!children) return null\n  const viewProps = { className, children }\n  return <View {...viewProps} />\n}\n\nexport type PanelHeadElement = React.FunctionComponentElement<typeof PanelHead>\n","\nexport const sessionGet = (key: string): string => {\n  return globalThis.window.sessionStorage.getItem(key) || ''\n}\n\nexport const sessionSet = (key: string, value: any) => {\n  globalThis.window.sessionStorage.setItem(key, String(value))\n}","import React from \"react\"\nimport { PropsWithoutChild } from \"../declarations\"\n\n\nexport const VideoView = React.forwardRef<HTMLVideoElement, PropsWithoutChild>((props, ref) =>\n  <video { ...props } ref={ref} />\n)\n"],"names":["View","React","props","ref","_objectSpread","LabelRegex","labelObjects","internal","client","import","bytes","extension","type","size","duration","render","displaySize","labels","audible","clip","update","delete","unlabeled","analyze","load","complete","create","view","open","undo","redo","mash","labelLookup","id","_step","object","components","split","_iterator","_createForOfIteratorHelper","s","n","done","child","value","isString","err","e","f","labelTranslate","includes","labelInterpolate","context","translated","matches","match","forEach","index","search","concat","replace","activityLabel","info","isObject","label","error","ActivityGroup","ActivityGroup2","ActivityGroups","Object","values","isActivityGroup","isPopulatedString","assertActivityGroup","name","errorThrow","ActivityContextDefault","activities","allActivities","picked","pick","EmptyMethod","ActivityContext","React2","CollapseContext","React3","collapsed","changeCollapsed","MasherContextDefault","streaming","setStreaming","EmptyMethod2","current","changeDefinition","drop","Promise","resolve","editorIndex","icons","MasherContext","React4","useEditorActivity","editor","React5","assertDefined","allActivitiesRef","eventTarget","handleEvent","event","isEventType","CustomEvent","detail","type2","existing","find","activity2","activity","activityGroup","infos","unshift","ActivityType","externalStore","callback","addEventListener","EventType","removeEventListener","addListener","Activity","_props$initialPicked","initialPicked","_props$initialCollaps","initialCollapsed","className","rest","_objectWithoutProperties","_excluded","_React6$useState","React6","_React6$useState2","_slicedToArray","setCollapsed","_React6$useState3","_React6$useState4","_useEditorActivity","_useEditorActivity2","_React6$useState5","_React6$useState6","setPicked","activityContext","filter","length","collapseContext","classes","push","ClassCollapsed","viewProps","join","Provider","ActivityContentContextDefault","ActivityContentContext","React7","ActivityContent","React8","children","_excluded2","assertTrue","viewChildren","map","contextProps","key","ActivityItem","collapsedProp","_excluded3","_React9$useState","React9","_React9$useState2","ActivityLabel","React10","firstInfo","labels2","_toConsumableArray","label2","i","Problems","ActivityPicked","React11","assertTrue2","ActivityPicker","_excluded4","React12","assertTrue3","ClassSelected","onClick","ActivityProgress","React13","activityContentContext","elements","totalSteps","totalStep","isPopulatedArray","step","steps","isPositive","isAboveZero","isPopulatedString2","active","activityObject","infos2","assertObject","progress","progressProps","max","Math","round","Bar","before","content","after","_props$props","Boolean","React14","panelOptionsStrict","options","_options$header","_options$header$props","_options$header$props2","_options$content","_options$content$prop","_options$content$prop2","_options$footer","_options$footer$props","_options$footer$props2","header","footer","assertPopulatedObject","Panel","_React15$useState","React15","_React15$useState2","PanelFoot","React16","_props$props2","CollapseControl","React17","NotCollapsed","React18","Collapsed","React19","ActivityDefaultProps","_optionsStrict$props","_optionsStrict$props2","_optionsStrict$props3","_optionsStrict$header","_optionsStrict$conten","_optionsStrict$footer","optionsStrict","arguments","undefined","isUndefined","React20","collapse","ClassButton","BrowserContextDefault","addPicker","EmptyMethod3","refresh","definitions","removePicker","BrowserContext","React21","EditorDefinitionsEventAdded","EventType2","EditorDefinitionsEventResize","useEditorDefinitions","types","React22","assertDefined2","media","storeRef","isEventType2","definitionTypes","isPopulatedArray2","types2","keys","some","_storeRef$current","lists","byType","flat","snapshotInitialize","useClient","React23","useEditor","React24","ApiDefinitionsEvent","ApiDefinitionsDisabled","ApiDefinitionsEmpty","useApiDefinitions","enabled","ReadOperation","assertDefined3","React25","list","then","response","console","debug","Endpoints","data","array","apply","dispatchEvent","definitionsPromise","useDefinitions","editorDefinitions","apiDefinition","editorDefinition","useRefresh","_React26$useState","React26","_React26$useState2","nonce","setNonce","Date","valueOf","Browser","_props$initialPicked2","_excluded5","_React27$useState","React27","_React27$useState2","typesObject","setTypesObject","_useRefresh","_React27$useState3","_React27$useState4","assertPopulatedString","original","_defineProperty","DefinitionContextDefault","DefinitionContext","React28","BrowserContent","_React29$useState","React29","_React29$useState2","over","setOver","_excluded6","editorContext","dragValid","dataTransfer","dragTypes","TransferTypeFiles","onDragLeave","eventStop","ClassDropping","assertTrue4","childProps","definition","cloneProps","childNodes","onDrop","files","onDragOver","propsStringArray","string","properties","isString2","string2","trim","property","propsMediaTypes","strings","isMediaType","propsSelectTypes","isSelectType","BrowserPicker","_excluded7","assertPopulatedString2","browserContext","React30","ClassSelected2","assertTrue5","BrowserControlId","BrowserControl","_excluded8","fileInput","React31","accept","inputProps","multiple","onChange","currentTarget","input","labelProps","htmlFor","useDefinition","React32","DefinitionItem","iconRatio","_excluded9","ratio","svgRef","React33","viewRef","masherContext","assertTrue6","updateRef","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","rect","current2","scaled","element","wrap","_context","prev","next","sizeAboveZero","abrupt","sizeCeil","sizeScale","sizeCopy","definitionIcon","sent","replaceChildren","stop","onPointerDown","stopPropagation","nodes","draggable","onDragStart","left","getBoundingClientRect","offset","clientX","mediaObject","toJSON","json","JSON","stringify","effectAllowed","setData","DragSuffix","mediaId","ClassSelected3","calculateClassName","BrowserDefaultProps","_optionsStrict$props4","_optionsStrict$props5","_optionsStrict$props6","_optionsStrict$header2","_optionsStrict$footer2","_optionsStrict$footer3","_optionsStrict$footer4","_optionsStrict$conten2","React34","browser","ClassButton2","effect","container","browserVideo","browserAudio","browserImage","browserText","ClipContextDefault","prevClipEnd","ClipContext","React35","TrackContextDefault","TrackContext","React36","TimelineContextDefault","dragTypeValid","frame","frames","EmptyMethod4","RectZero","refreshed","scale","scroll","x","y","setDroppingClip","setDroppingPosition","setDroppingTrack","setRect","setScroll","setZoom","zoom","TimelineContext","React37","useListeners","events","handler","addListeners","eventType","React38","ClipItemRefreshRate","ClipItem","_useListeners","_excluded10","React39","trackContext","timelineContext","_useRefresh3","_useRefresh4","watching","clipContext","droppingPosition","droppingClip","selectedClip","track","assertTrue7","getParentHeight","parent","parentNode","HTMLDivElement","offsetHeight","_React39$useState","_React39$useState2","parentHeight","setParentHeight","getCurrentWidth","isAboveZero2","currentWidth2","pixelFromFrame","width","currentWidth","EventType3","redraw","isEventType3","action","target","isObject2","populateSvg","timeout","mashMedia","allOk","currentSize","height","sizeCeil2","frameSize","fullSize","clipSize","promise","clipIcon","latestWidth","fill","spacing","rgb","colorToRgb","differenceRgb","colorRgbDifference","forecolor","colorFromRgb","framePolygon","svgPolygonElement","spaceRect","spacePolygon","patternSize","patternId","idGenerate","patternItems","pattern","svgPatternElement","defsElement","svgDefsElement","patternedSize","patternedPolygon","svgUrl","svgSvgElement","backgroundNode","color","setTimeout","selection","set","style","marginLeft","clipProps","selected","ClassSelected4","droppingPositionClass","DragSuffix2","onDragEnd","eventStop2","dropEffect","removeClip","definitionType","pos","DroppingPosition2","svgProps","sizeAboveZero2","viewBox","useClip","React40","CreateEditedControl","_useListeners2","_excluded11","getDisabled","can","MasherAction","_React41$useState","React41","_React41$useState2","disabled","setDisabled","updateDisabled","EventType4","buttonOptions","EditorRedoButton","_React42$useState","React42","_React42$useState2","EventType5","MasherAction2","_excluded12","EditorRemoveButton","_excluded13","selectType","SelectType2","assertSelectType","_React43$useState","React43","_React43$useState2","EventType6","selectable","isEffect","removeEffect","isClip","isTrack","removeTrack","EditorUndoButton","_React44$useState","React44","_React44$useState2","EventType7","MasherAction3","_excluded14","EncodeControl","_useListeners6","_excluded15","MasherAction4","_React45$useState","React45","_React45$useState2","EventType8","EncodeOperation","assertMashMedia","encode","SaveControl","_useListeners7","MasherAction5","_React46$useState","React46","_React46$useState2","EventType9","WriteOperation","_excluded16","assertMashMedia2","save","ApiContextDefault","servers","endpointPromise","ApiContext","React47","InspectorContextDefault","actionCount","selectedInfo","tweenDefined","tweenSelected","selectedType","SelectType3","selectTypes","selectedItems","changeSelected","EmptyMethod5","changeTweening","InspectorContext","React48","SelectEditedControl","_editor$mashMedia","_editor$mashMedia2","_useListeners8","_React49$useState","React49","_React49$useState2","requested","setRequested","_React49$useState3","_React49$useState4","described","setDescribed","_React49$useState5","_React49$useState6","editedId","setEditedId","apiContext","_React49$useState7","_React49$useState8","editedLabel","setEditedLabel","MasherAction6","_React49$useState9","_React49$useState10","EventType10","assertObject2","isEventType4","isSelectType2","copy","isPopulatedString3","findIndex","isPositive2","splice","ServerType","request","partial","endpoint","Endpoints2","editType","retrieve","described2","object2","_excluded17","assertTrue8","selectOptions","selectedIndex","get","editedId2","editedLabel2","objectLabel","optionProps","describedOptions","ViewControl","_useListeners9","isMashMedia","encodings","_React50$useState","React50","_React50$useState2","EventType11","_excluded18","assertMashMedia3","assertEndpoint","url","endpointUrl","window","ConstEmptyElementFunction","EmptyElement","React51","TweenInputKey","DataTypeInputs","_DataTypeInputs","DataType","InputContextDefault","DataType2","defaultValue","InputContext","React52","BooleanTypeInput","inputContext","React53","changeHandler","checked","DefinitionDrop","_excluded19","React54","assertTrue9","_React54$useState","_React54$useState2","isOver","setIsOver","assertDefined4","mediaTypes","dropAllowed","dragTypes2","TransferTypeFiles2","draggingType","dragType","isMediaType2","_ref2","_callee2","_media$define","_media$define2","_context2","eventStop3","valid","isContainerDefinition","installed","dropType","getData","parse","isMediaObject","define","_x","memoClassName","ClassDropping2","assertPopulatedString3","fromId","assertMedia","definitionProps","allowed","preventDefault","String","DefinitionSelect","React55","assertTrue10","selectProps","FontType","IconTypeInput","React56","names","NumericTypeInput","React57","time","min","isDefined","_ref3","_callee3","value2","_context3","goToTime","_x2","Slider","valueAsNumber","React58","PercentTypeInput","React59","contextValue","contextDefault","propertyDefault","sliderProps","isDefined2","isNumber","_ref4","_callee4","_event","_context4","isArray","_x3","_x4","RgbTypeInput","React60","isDefined3","colorProps","_ref5","_callee5","_context5","_x5","TextTypeInput","React61","OptionTypeInput","React62","assertPopulatedArray","DataType3","DataType4","ContainerTypes","ContentTypes","DataType5","DataType6","DataType7","DataType8","DataType9","DataType10","DataType11","DataGroupInputs","_DataGroupInputs","DataGroup2","ColorGroupInput","React63","propsItems","_excluded20","assertSelectType2","inspectorContext","onEdge","nearStart","timeRange","assertTimeRange","assertTime","endDefined","DataGroup3","endSelected","byName","selectedPropertyObject","colorEnd","PropertyTweenSuffix","colorProperty","nameOveride","propertyName","tweenInputTime","selectedButton","ClassSelected5","ClassButton3","startProps","start","startTime","endProps","end","endUndefined","lastTime","providerProps","InspectorMovable","removeHandler","movable","select","_excluded21","isSelected","React64","onMouseDown","ClassSelected6","icon","isPopulatedString4","iconElement","DragSuffix3","InspectorProperty","propsDefault","isDefined4","React65","InspectorProperties","React66","inspectorItems","ungroupedInputs","groupedInputs","groups","selectedItem","isSelectedProperty","group","propertyProps","inspectorProperty","assertDataGroup","groupProps","selectedMovable","Button","useView","_excluded22","React67","pruned","_excluded23","ClassButton4","ClassDisabled","ClassSelected7","MovablesGroupInput","movableGenerator","_excluded24","assertPopulatedObject2","React68","_React68$useState","_React68$useState2","_React68$useState3","_React68$useState4","setSelected","ClassDropping3","addHandler","moveHandler","includedMovable","_dropType","dropType2","startsWith","listViewProps","droppedIndex","getAttribute","Number","dropIndex","assertDefined5","removeProps","remove","addProps","add","iconsViewProps","listView","inspectorProps","actions","OpacityGroupInput","React69","_excluded25","assertSelectType3","assertTimeRange2","assertTime2","DataGroup5","selectedPropertyObject2","opacity","opacityEnd","PropertyTweenSuffix2","opacityProperty","tweenInputTime2","ClassSelected8","ClassButton5","PointGroupInput","React70","_excluded26","assertSelectType4","assertTimeRange3","assertTime3","DataGroup6","selectedPropertyObject3","selectedPropertiesScalarObject","offE","offW","offN","offS","xEnd","PropertyTweenSuffix3","yEnd","xProperty","yProperty","offEValue","offWValue","offNValue","offSValue","elementsByName","inspectingProperties","goTime","tweenInputTime3","selectedProperty","baseName","ClassSelected9","ClassButton6","legendElements","point","xElements","horz","yElements","vert","lockOffEProps","unlock","lock","lockOffE","lockOffWProps","lockOffW","lockOffNProps","lockOffN","lockOffSProps","lockOffS","fieldsetProps","DataGroup4","SizeInputOrientations","_SizeInputOrientation","Orientation","SizeGroupInput","React71","_excluded27","assertSelectType5","assertTimeRange4","assertTime4","DataGroup7","selectedPropertyObject4","widthEnd","PropertyTweenSuffix4","heightEnd","widthProperty","heightProperty","selectedPropertiesScalarObject2","lockValue","assertString","orientation","isOrientation","tweenInputTime4","lockWidthProps","ClassButton7","lockWidth","lockHeightProps","ClassSelected10","lockHeight","widthElements","heightElements","OptionGroupInput","React72","dataGroup","_excluded28","assertSelectType6","selectedPropertyObject5","fromEntries","entries","_ref6","_ref7","selectType2","otherElements","_toPropertyKey","isPopulatedObject","_ref8","_ref9","ClassButton8","frameProps","timingProps","DataGroup8","Inspector","_useListeners10","_React73$useState","React73","_React73$useState2","setActionCount","SelectType6","_React73$useState3","SelectTypes","_React73$useState4","orderedTypes","setOrderedTypes","_React73$useState5","_React73$useState6","setSelectedItems","handleAction","handleSelection","bestType","assertSelectType7","arraySet","items","tweening","tweenItems","item","isSelectedProperty2","tweenable","endsWith","PropertyTweenSuffix5","assertDataGroup2","isDefined6","quantize","halfTime","timeFromArgs","_timeEqualizeRates","timeEqualizeRates","_timeEqualizeRates2","midTime","timeScaled","edge","equalsTime","EventType12","indexOf","assertPositive","slice","assertTrue11","InspectorContent","React74","InspectorPicked","React75","assertPopulatedArray2","InspectorPicker","assertSelectType8","React76","isPopulatedString5","ClassSelected11","InspectorDefaultProps","_optionsStrict$props7","_optionsStrict$props8","_optionsStrict$header3","_optionsStrict$footer5","_optionsStrict$conten3","React77","inspector","ClassButton9","mmTube","contentChildren","SelectType8","elementSetPreviewSize","setProperty","Masher","_props$editType","VideoType","_props$clientOptions","clientOptions","ClientDisabledArgs","previewSize","_props$icons","_excluded29","log","clientRef","React78","clientInstance","editorRef","editorInstance","editorIndexRef","currentRef","_React78$useState","_React78$useState2","_React78$useState3","_React78$useState4","editorLoad","loadObject","idTemporary","svg","assertObject3","svgElement","ReadOperation2","Endpoints3","default","_servers$file","_servers$file2","file","prefix","urlBaseInitialize","editorIndex2","isClip2","isEffect2","isMediaObject2","definitionObject","addMedia","dropMediaObject","isMashAndMediaObject","fileInfos","dropFilesFromList","errors","validFiles","fileInfo","File","idGenerate2","ActivityType2","emit","EventType13","addFiles","dropFiles","isMedia","eventStop4","display","PlayerContextDefault","paused","changePaused","EmptyMethod6","changeVolume","volume","PlayerContext","React79","PlayerRefreshRate","PlayerContent","_useListeners11","_excluded30","_React80$useState","React80","rectCopy","_React80$useState2","_React80$useState3","_React80$useState4","_React80$useState5","ResizeObserver","rect2","rectRound","resizeObserver","observe","disconnect","requestItemsPromise","previewItems","svgs","swapChildren","handleDraw","requestItems","EmptyMethod7","sizeAboveZero3","EventType14","dragTypes3","TransferTypeFiles3","isMediaType3","dragType2","eventStop5","ClassDropping4","assertObject4","assertMediaType","dragData","assertDragDefinitionObject","isMediaObject3","unset","SelectType9","PlayerButton","playerContext","React81","setPaused","PlayerTimeControl","_useListeners12","getTimeRange","_React82$useState","React82","_React82$useState2","setTimeRange","EventType15","number","isArray2","timeFromArgs2","fps","PlayerPlaying","React83","PlayerNotPlaying","React84","PlayerTime","_useListeners13","_React85$useState","React85","_React85$useState2","EventType16","seconds","lengthSeconds","stringSeconds","PlayerDefaultProps","_optionsStrict$props9","_optionsStrict$props10","_optionsStrict$conten4","_optionsStrict$header4","_optionsStrict$footer6","React86","app","document","ClassButton10","pause","play","TimelineScrubberElement","React87","pixelFromFrame2","TimelineTrack","propsClassName","_excluded31","React88","assertTrue12","droppingTrack","selectedTrack","ClassSelected12","droppingPositionClass2","clips","dense","eventStop6","DroppingPosition3","TimelineSizer","React89","_React89$useState","TimelineZoomer","React90","_React90$useState","_React90$useState2","EventType17","isArray3","TimelineTracks","_useListeners15","_React91$useState","React91","_React91$useState2","setRefreshed","updateRefreshed","EventType18","fragmentProps","tracks","arrayReversed","identifier","TimelineScrubber","clientXRef","React92","inactive","styleHeight","styleWidth","_excluded32","_React92$useState","_React92$useState2","EventType19","ClassDisabled2","viewProps2","minHeight","width2","pixelFromFrame3","minWidth","window2","globalThis","removeWindowHandlers","pointerMove","pointerUp","eventStop7","pixel","pixelToFrame","timeFromArgs3","addHandlers","TimelineContent","_excluded33","React93","contextDrop","_React93$useState","_React93$useState2","EventType20","_ref$current","scrollTo","eventStop8","ClassDropping5","SelectType10","onScroll","scrollLeft","scrollTop","DroppingPosition4","TimelineAddTrackControl","_React94$useState","React94","_React94$useState2","EventType21","_excluded34","addTrack","TimelineTrackIcon","_excluded35","React95","ClassSelected13","droppingPositionClass3","trackDense","TimelineZoom","_excluded36","React96","_React96$useState","_React96$useState2","EventType22","TimelineAddClipControl","React97","_React97$useState","_React97$useState2","EventType23","_excluded37","DefaultContentId","assertPopulatedString4","endFrame","TimelineDefaultProps","_optionsStrict$props11","_optionsStrict$props12","_optionsStrict$header5","_optionsStrict$footer7","_optionsStrict$conten5","React98","timeline","zoomLess","zoomMore","Player","_useListeners21","_excluded38","_React99$useState","React99","_React99$useState2","_React99$useState3","_React99$useState4","setVolume","updatePaused","EventType24","TimelineDefaultZoom","Timeline","_useListeners22","React100","currentFrame","_editor$selection$mas","currentFrames","_editor$selection$mas2","_React100$useState","_React100$useState2","setFrames","_React100$useState3","_React100$useState4","setFrame","_React100$useState5","DroppingPosition5","_React100$useState6","_React100$useState7","_React100$useState8","_React100$useState9","_React100$useState10","_React100$useState11","_React100$useState12","setSelectedTrack","_React100$useState13","_React100$useState14","_React100$useState15","_React100$useState16","setSelectedClip","_React100$useState17","_React100$useState18","_React100$useState19","RectZero2","_React100$useState20","_React100$useState21","_React100$useState22","EventType25","dragTypes4","TransferTypeFiles4","isTransferType","dragMediaType","EffectType","eventStop9","pixelPerFrame","droppingFiles","dragData2","draggingItem","isDragOffsetObject","indexDrop","clipIndex","isPositive3","offsetDrop","frame2","pixelToFrame2","foundIndex","frameToIndex","isDragDefinitionObject","isMediaObject4","assertClip","moveClip","Panels","React101","MasherDefaultProps","Icons","_options$panels","panels","_excluded39","_panels$player","player","_panels$browser","_panels$timeline","_panels$inspector","_panels$activity","masherChildren","React102","panelsChildren","panelsProps","VideoType2","Mashing","React103","PanelContent","React104","PanelHead","React105","sessionGet","sessionStorage","getItem","sessionSet","setItem","VideoView","React106"],"sourceRoot":""}