{
  "version": 3,
  "sources": ["../src/Components/Activity/Activity.tsx", "../src/Utilities/View.tsx", "../src/Components/Activity/ActivityContext.ts", "../src/Utilities/Label.ts", "../src/Components/Collapse/CollapseContext.ts", "../src/Hooks/useEditorActivity.ts", "../src/Components/Masher/MasherContext.ts", "../src/Components/Activity/ActivityContent.tsx", "../src/Components/Activity/ActivityContentContext.ts", "../src/Components/Activity/ActivityItem.tsx", "../src/Components/Activity/ActivityLabel.tsx", "../src/Components/Activity/ActivityPicked.tsx", "../src/Setup/Problems.ts", "../src/Components/Activity/ActivityPicker.tsx", "../src/Components/Activity/ActivityProgress.tsx", "../src/Components/Activity/ActivityDefaultProps.tsx", "../src/Utilities/Bar.tsx", "../src/Components/Panel/Panel.tsx", "../src/Components/Panel/PanelFoot.tsx", "../src/Components/Collapse/CollapseControl.tsx", "../src/Components/Collapse/NotCollapsed.tsx", "../src/Components/Collapse/Collapsed.tsx", "../src/Components/Browser/Browser.tsx", "../src/Components/Browser/BrowserContext.ts", "../src/Hooks/useEditorDefinitions.ts", "../src/Hooks/useApiDefinitions.ts", "../src/Hooks/useClient.ts", "../src/Hooks/useEditor.ts", "../src/Hooks/useDefinitions.ts", "../src/Hooks/useRefresh.ts", "../src/Components/Browser/BrowserContent.tsx", "../src/Contexts/DefinitionContext.ts", "../src/Components/Browser/BrowserPicker.tsx", "../src/Utilities/Props.ts", "../src/Components/Browser/BrowserDefaultProps.tsx", "../src/Components/Browser/BrowserControl.tsx", "../src/Components/DefinitionItem/DefinitionItem.tsx", "../src/Components/DefinitionItem/useDefinition.ts", "../src/Components/ClipItem/ClipContext.ts", "../src/Components/ClipItem/ClipItem.tsx", "../src/Contexts/TrackContext.ts", "../src/Components/Timeline/TimelineContext.ts", "../src/Hooks/useListeners.ts", "../src/Components/ClipItem/useClip.ts", "../src/Components/Controls/CreateEditedControl.tsx", "../src/Components/Controls/EditorRedoButton.tsx", "../src/Components/Controls/EditorRemoveButton.tsx", "../src/Components/Controls/EditorUndoButton.tsx", "../src/Components/Controls/EncodeControl.tsx", "../src/Components/Controls/SaveControl.tsx", "../src/Components/Controls/SelectEditedControl.tsx", "../client-react-deleted/ApiClient/ApiContext.ts", "../src/Components/Inspector/InspectorContext.ts", "../src/Components/Controls/ViewControl.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/DataTypeInputs.tsx", "../src/Setup/Constants.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/BooleanTypeInput.tsx", "../src/Components/Inspector/Inputs/InputContext.ts", "../src/Components/Inspector/Inputs/DataTypeInputs/DefinitionDrop.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/DefinitionSelect.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/IconTypeInput.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/NumericTypeInput.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/PercentTypeInput.tsx", "../src/Utilities/Slider.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/RgbTypeInput.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/TextTypeInput.tsx", "../src/Components/Inspector/Inputs/DataTypeInputs/OptionTypeInput.tsx", "../src/Components/Inspector/Inputs/DataGroupInputs/DataGroupInputs.ts", "../src/Components/Inspector/Inputs/DataGroupInputs/ColorGroupInput.tsx", "../src/Components/Inspector/Inputs/DataGroupInputs/MovablesGroupInput.tsx", "../src/Components/Inspector/InspectorMovable.tsx", "../src/Components/Inspector/InspectorProperties.tsx", "../src/Components/Inspector/InspectorProperty.tsx", "../src/Utilities/Button.tsx", "../src/Components/Inspector/Inputs/DataGroupInputs/OpacityGroupInput.tsx", "../src/Components/Inspector/Inputs/DataGroupInputs/PointGroupInput.tsx", "../src/Components/Inspector/Inputs/DataGroupInputs/SizeGroupInput.tsx", "../src/Components/Inspector/Inputs/DataGroupInputs/OptionGroupInput.tsx", "../src/Components/Inspector/Inspector.tsx", "../src/Components/Inspector/InspectorContent.tsx", "../src/Components/Inspector/InspectorDefaultProps.tsx", "../src/Components/Inspector/InspectorPicked.tsx", "../src/Components/Inspector/InspectorPicker.tsx", "../src/Components/Masher/Masher.tsx", "../src/Utilities/Element.ts", "../src/Components/Masher/MasherDefaultProps.tsx", "../src/Components/Player/PlayerDefaultProps.tsx", "../src/Components/Player/PlayerContent.tsx", "../src/Components/Player/PlayerContext.ts", "../src/Components/Player/PlayerButton.tsx", "../src/Components/Player/PlayerTimeControl.tsx", "../src/Components/Player/PlayerPlaying.tsx", "../src/Components/Player/PlayerNotPlaying.tsx", "../src/Components/Player/PlayerTime.tsx", "../src/Components/Timeline/TimelineDefaultProps.tsx", "../src/Components/Timeline/TimelineScrubberElement.tsx", "../src/Components/Timeline/TimelineTrack.tsx", "../src/Components/Timeline/TimelineSizer.tsx", "../src/Components/Timeline/TimelineZoomer.tsx", "../src/Components/Timeline/TimelineTracks.tsx", "../src/Components/Timeline/TimelineScrubber.tsx", "../src/Components/Timeline/TimelineContent.tsx", "../src/Components/Timeline/TimelineAddTrackControl.tsx", "../src/Components/Timeline/TimelineTrackIcon.tsx", "../src/Components/Timeline/TimelineZoom.tsx", "../src/Components/Timeline/TimelineAddClipControl.tsx", "../src/Components/Player/Player.tsx", "../src/Components/Timeline/Timeline.tsx", "../src/Components/Panel/Panels.tsx", "../src/Components/Masher/Mashing.tsx", "../src/Components/Panel/PanelContent.tsx", "../src/Components/Panel/PanelHead.tsx", "../src/Utilities/Session.ts", "../src/Utilities/VideoView.tsx"],
  "sourcesContent": ["import React from \"react\"\nimport { ClassCollapsed } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContext, ActivityContextInterface, ActivityGroup, \n  assertActivityGroup \n} from \"./ActivityContext\"\nimport { CollapseContext, CollapseContextInterface } from \"../Collapse/CollapseContext\"\nimport { useEditorActivity } from \"../../Hooks/useEditorActivity\"\n\nexport interface ActivityProps extends PropsWithChildren, WithClassName {\n  initialPicked?: string\n  initialCollapsed?: boolean\n}\n\n/**\n * @parents Masher\n * @children ActivityContent\n */\nexport function Activity(props: ActivityProps): ReactResult {\n  const { \n    initialPicked = ActivityGroup.Active, \n    initialCollapsed = false, \n    className,\n    ...rest \n  } = props\n  assertActivityGroup(initialPicked)\n\n  const [collapsed, setCollapsed] = React.useState(initialCollapsed)\n  const [label, setLabel] = React.useState('')\n\n  const [editor, activity] = useEditorActivity() \n  const [picked, setPicked] = React.useState(initialPicked)\n\n  const filteredActivities = React.useMemo(() => {\n    // console.log(\"filteredActivities\", picked, allActivities.length)\n    return activity.filter(activity => activity.activityGroup === picked)\n  }, [picked, activity.length])\n\n  const activityContext: ActivityContextInterface = { \n    activities: filteredActivities, \n    allActivities: activity, \n    picked, pick: setPicked, label\n  }\n\n\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed: setCollapsed }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (collapsed) classes.push(ClassCollapsed)\n\n  const viewProps = { ...rest, className: classes.join(' ') }\n\n  return (\n    <ActivityContext.Provider value={activityContext}>\n      <CollapseContext.Provider value={collapseContext}>\n        <View { ...viewProps } />\n      </CollapseContext.Provider>\n    </ActivityContext.Provider>\n  )\n}\n", "import React from 'react'\nimport { UnknownRecord } from '@moviemasher/moviemasher.js'\n\nexport const View = React.forwardRef<HTMLDivElement, UnknownRecord>((props, ref) =>\n  <div ref={ref} {...props} />\n)\n", "import React from 'react'\nimport { \n  EmptyMethod, isObject, isPopulatedString, errorThrow, Identified,\n} from '@moviemasher/moviemasher.js'\nimport { ActivityInfo } from \"@moviemasher/client-core\"\n\nimport { labelInterpolate, labelTranslate } from '../../Utilities/Label'\n\nexport const activityLabel = (info: any): string => {\n  if (!isObject(info)) return ''\n\n  const { label, error, type, value } = info as ActivityInfo\n  if (error) {\n    if (value) return labelInterpolate(error, { value })\n    return labelTranslate(error)\n  }\n\n  // switch(type) {\n  //   case ActivityType.Complete:\n  //   case ActivityType.Analyze:\n  //   case ActivityType.Render:\n  //   case ActivityType.Load: return labelTranslate(type)\n    \n  // }\n\n  // if (label) return label\n  return labelTranslate(type)\n}\n\nexport enum ActivityGroup {\n  Active = 'active',\n  Error = 'error',\n  Complete = 'complete',\n}\nexport const ActivityGroups = Object.values(ActivityGroup)\nexport const isActivityGroup = (type?: any): type is ActivityGroup => {\n  return isPopulatedString(type) && ActivityGroups.includes(type as ActivityGroup)\n}\nexport function assertActivityGroup(value: any, name?: string): asserts value is ActivityGroup {\n  if (!isActivityGroup(value)) errorThrow(value, \"ActivityGroup\", name)\n}\n\nexport interface ActivityObject extends Identified {\n  infos: ActivityInfo[]\n  activityGroup: ActivityGroup\n}\nexport type ActivityObjects = ActivityObject[]\n\nexport interface ActivityContextInterface {\n  label: string\n  activities: ActivityObjects\n  allActivities: ActivityObjects\n  picked: ActivityGroup\n  pick: (activityGroup: ActivityGroup) => void\n}\n\nexport const ActivityContextDefault: ActivityContextInterface = {\n  label: '',\n  activities: [],\n  allActivities: [],\n  picked: ActivityGroup.Active,\n  pick: EmptyMethod\n}\n\nexport const ActivityContext = React.createContext(ActivityContextDefault)\n", "import { isString, NestedStringRecord, StringRecord } from \"@moviemasher/moviemasher.js\"\n\nconst LabelRegex = /{{([a-z0-9_]*)}}/\n\n\nexport const labelObjects: NestedStringRecord = {\n  internal: 'Internal Error',\n  client: { internal: 'Internal Client Error' },\n  import: {\n    bytes: 'Size above {{value}}',\n    extension: 'Extension {{value}}',\n    type: 'Type {{value}}',\n    size: 'Dimensions {{value}}',\n    duration: 'Duration {{value}}',\n    render: '{{value}}',\n    displaySize: '{{width}}x{{height}}',\n  }\n}\nexport const labels: StringRecord = {\n  audible: 'Audible',\n  clip: 'Clip',\n  update: 'Save',\n  delete: 'Remove {{type}}',\n  unlabeled: 'Unlabeled {{type}}',\n  analyze: 'Analyzing...',\n  load: 'Loading...',\n  complete: 'Completed',\n  create: 'New',\n  render: 'Render',\n  view: 'View',\n  open: 'Open...',\n  undo: 'Undo',\n  redo: 'Redo',\n  mash: 'Mash',\n}\n\nexport const labelLookup = (id: string): string => {\n  let object: any = labelObjects\n  const components = id.split('.') \n  for (const component of components) {\n    const child = object[component]\n    if (isString(child)) return child\n\n    object = child\n  }\n  return ''\n}\n\nexport const labelTranslate = (id: string): string => {\n  if (id.includes('.')) return labelLookup(id)\n\n  return labels[id] || id\n}\n\nexport const labelInterpolate = (id: string, context: StringRecord): string => {\n  let translated = labelTranslate(id)\n  \n  const matches = translated.match(LabelRegex)\n  if (!matches) return translated\n\n  matches.forEach((match, index) => {\n    if (!index) return\n    const search = `{{${match}}}`\n    const replace = labelTranslate(context[match])\n    \n    translated = translated.replace(search, replace)\n  })\n\n  return translated\n}\n", "import React from 'react'\nimport { BooleanSetter } from '@moviemasher/moviemasher.js'\n\nexport interface CollapseContextInterface {\n  collapsed: boolean,\n  changeCollapsed: BooleanSetter\n}\n\nexport const CollapseContextDefault: CollapseContextInterface = {\n  collapsed: false,\n  changeCollapsed: () => {},\n}\n\nexport const CollapseContext = React.createContext(CollapseContextDefault)\n", "import React from \"react\"\nimport { assertDefined, EventType, isEventType,  Editor } from \"@moviemasher/moviemasher.js\"\n\nimport { ActivityInfo, ActivityType } from \"@moviemasher/client-core\"\n\n\nimport { ActivityGroup, ActivityObject, ActivityObjects } from \"../Components/Activity/ActivityContext\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useEditorActivity = (): [Editor, ActivityObjects] => {\n  // console.log(\"useEditorActivity\")\n  const masherContext = React.useContext(MasherContext)\n  const { editor } = masherContext\n  assertDefined(editor)\n\n  const allActivitiesRef = React.useRef<ActivityObjects>([])\n  const { eventTarget } = editor\n  \n  const getSnapshot = () => {\n    return allActivitiesRef.current\n  }\n\n  const handleEvent = (event: Event) => {\n    const { type } = event\n    if (isEventType(type) && (event instanceof CustomEvent)) {\n      const info: ActivityInfo = event.detail\n      const { id, type } = info\n      const { current: allActivities } = allActivitiesRef\n      const existing = allActivities.find(activity => activity.id === id)\n\n      const activity: ActivityObject = existing || { id, activityGroup: ActivityGroup.Active, infos: [] }\n      activity.infos.unshift(info)\n      if (type === ActivityType.Complete) activity.activityGroup = ActivityGroup.Complete\n      else if (type === ActivityType.Error) {\n        activity.activityGroup = ActivityGroup.Error\n      }\n      if (!existing) allActivities.unshift(activity)\n    }\n  }\n  const externalStore = React.useSyncExternalStore<ActivityObjects>((callback) => {\n    eventTarget.addEventListener(EventType.Active, callback)\n    return () => {\n      eventTarget.removeEventListener(EventType.Active, callback)\n    }\n  }, getSnapshot)\n\n  const removeListener = () => {\n    eventTarget.removeEventListener(EventType.Active, handleEvent)\n  }\n\n  const addListener = () => {\n    eventTarget.addEventListener(EventType.Active, handleEvent)\n\n    return () => { removeListener() }\n  }\n\n  React.useEffect(() => addListener(), [])\n  \n  return [editor, externalStore]\n}", "import React from 'react'\nimport { \n  BooleanSetter,\n  Editor, EditorIndex, EmptyMethod, Media, ScalarRecord\n} from '@moviemasher/moviemasher.js'\n\nimport { Client, Draggable } from '@moviemasher/client-core'\nimport { ThemeIcons } from '../../declarations'\n\nexport interface MasherContextInterface {\n  client?: Client\n  streaming: boolean\n  setStreaming: BooleanSetter\n  current: ScalarRecord\n  changeDefinition: (definition?: Media) => void\n  drop: (draggable: Draggable, editorIndex?: EditorIndex) => Promise<Media[]>\n  editor?: Editor\n  editorIndex: EditorIndex\n  icons: ThemeIcons\n}\n\nexport const MasherContextDefault: MasherContextInterface = {\n  streaming: false,\n  setStreaming: EmptyMethod,\n  current: {},\n  changeDefinition: EmptyMethod,\n  drop: () => Promise.resolve([]),\n  editorIndex: {},\n  icons: {},\n}\n\nexport const MasherContext = React.createContext(MasherContextDefault)\n", "import React from \"react\"\nimport { assertTrue } from \"@moviemasher/moviemasher.js\"\n\nimport { WithClassName, ReactResult, PropsAndChild } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContext } from \"./ActivityContext\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\nimport { CollapseContext } from \"../Collapse/CollapseContext\"\n\nexport interface ActivityContentProps extends WithClassName, PropsAndChild {}\n\n/**\n * @parents Activity\n * @children ActivityItem\n */\nexport function ActivityContent(props: ActivityContentProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed } = collapseContext\n  const { activities } = activityContext\n  if (collapsed) return null\n\n  const { children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const viewChildren = activities.map(activity => {\n    const children = React.cloneElement(child)\n    const contextProps = { children, value: activity, key: activity.id }\n    const context = <ActivityContentContext.Provider { ...contextProps } />\n    return context\n  })\n  const viewProps = { ...rest, children: viewChildren }\n  return <View {...viewProps} />\n}\n", "import React from 'react'\n\nimport { ActivityGroup, ActivityObject } from './ActivityContext'\n\nexport const ActivityContentContextDefault: ActivityObject = {\n  infos: [],\n  activityGroup: ActivityGroup.Active,\n  id: '',\n}\n\nexport const ActivityContentContext = React.createContext(ActivityContentContextDefault)\n", "import React from \"react\"\n\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { CollapseContext, CollapseContextInterface } from \"../Collapse/CollapseContext\"\n\nexport interface ActivityItemProps extends PropsWithChildren, WithClassName {\n  collapsed?: boolean\n}\n\n/**\n * @parents ActivityContent\n * @children ActivityLabel, ActivityPicked, CollapseControl\n */\nexport function ActivityItem(props: ActivityItemProps): ReactResult {\n  const { collapsed: collapsedProp, ...rest } = props\n\n  const [collapsed, changeCollapsed] = React.useState(!!collapsedProp)\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed }\n\n  return (\n    <CollapseContext.Provider value={collapseContext}>\n      <View { ...rest } />\n    </CollapseContext.Provider>\n  )\n}\n", "import React from \"react\"\nimport { UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { ReactResult, WithClassName } from \"../../declarations\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\nimport { activityLabel } from \"./ActivityContext\"\nimport { CollapseContext } from \"../Collapse/CollapseContext\"\nimport { View } from \"../../Utilities/View\"\n\n/**\n * @parents ActivityItem\n */\n export function ActivityLabel(props: WithClassName): ReactResult {\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed } = collapseContext\n  \n  const activityContentContext = React.useContext(ActivityContentContext)\n  const { infos } = activityContentContext\n  const [firstInfo] = infos\n  const labeledInfo = infos.find(info => info.label) || { label: '' }\n  const label = labeledInfo.label || firstInfo.type \n  const viewProps: UnknownRecord = { ...props }\n  if (collapsed) viewProps.children = label\n  else {\n    const labels = [ label, ...infos.map(info => activityLabel(info))]\n    viewProps.children = labels.map((label, i) => <View key={i} children={label} />)\n  }\n  return <View { ...viewProps } />\n }", "import React from 'react'\nimport { Identified, assertTrue } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult } from '../../declarations'\nimport { Problems } from '../../Setup/Problems'\nimport { ActivityContext, assertActivityGroup } from './ActivityContext'\n\nexport interface ActivityPickedProps extends Identified, PropsAndChild {}\n\n/**\n * @parents ActivityContent\n */\nexport function ActivityPicked(props: ActivityPickedProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const { id, children } = props\n  assertActivityGroup(id)\n\n  const { picked } = activityContext\n  if (id !== picked) return null\n\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n\n  return child\n  // return React.cloneElement(child, { key: id })\n}\n", "\nexport const Problems = {\n  child: 'single child element expected',\n}\n", "import React from \"react\"\nimport { Identified, assertTrue, ClassSelected } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { Problems } from \"../../Setup/Problems\"\nimport { ActivityContext, assertActivityGroup } from \"./ActivityContext\"\n\nexport interface ActivityPickerProps extends PropsAndChild, WithClassName, Identified {}\n/**\n * @parents ActivityContent\n */\n export function ActivityPicker(props: ActivityPickerProps): ReactResult {\n  const { id, className, children, ...rest } = props\n  assertActivityGroup(id)\n\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n\n  const activityContext = React.useContext(ActivityContext)\n  const { picked, pick } = activityContext\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (id === picked) classes.push(ClassSelected)\n\n  const viewProps = {\n    ...rest,\n    className: classes.join(' '),\n    key: `activity-picker-${id}`,\n    onClick: () => pick(id)\n  }\n\n  return React.cloneElement(child, viewProps)\n }", "import React from \"react\"\nimport { \n  assertObject, isAboveZero, isPopulatedArray, isPopulatedString, isPositive \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from \"../../declarations\"\nimport { ActivityContext, ActivityGroup } from \"./ActivityContext\"\nimport { View } from \"../../Utilities/View\"\nimport { ActivityContentContext } from \"./ActivityContentContext\"\n\nexport interface ActivityProgressProps extends PropsWithoutChild, WithClassName {}\n/**\n * @parents Activity\n */\n export function ActivityProgress(props: ActivityProgressProps): ReactResult {\n  const activityContext = React.useContext(ActivityContext)\n  const activityContentContext = React.useContext(ActivityContentContext)\n  const { infos, id } = activityContentContext\n  const elements: React.ReactChild[] = []\n  let totalSteps = 0\n  let totalStep = 0\n  if (isPopulatedArray(infos)) {\n    const [info] = infos\n    const { step, steps } = info\n    if (isPositive(step) && isAboveZero(steps)) {\n      totalStep = step\n      totalSteps = steps\n    }\n  } else {\n    const { allActivities, label } = activityContext\n    if (isPopulatedString(label)) {\n      elements.push(<label key=\"label\">{label}</label>)\n    }\n    const active = allActivities.filter(activityObject => (\n      activityObject.activityGroup === ActivityGroup.Active\n    ))\n    if (active.length) {\n      active.forEach(activityObject => {\n        const { infos } = activityObject\n        const [info] = infos\n        assertObject(info, 'info')\n\n        const { step, steps } = info\n        if (isPositive(steps)) totalSteps += steps\n        if (isPositive(step)) totalStep += step\n      })\n    }\n  }\n  \n  if (totalSteps) {\n    const progress = totalStep / totalSteps\n    const progressProps = {\n      value: progress, max: 1.0, \n      children: `${Math.round(100.0 * progress)}%`,\n      key: \"progress\",\n    }\n    elements.push(<progress {...progressProps} />)\n  }\n  const viewProps = {\n    ...props, key: 'activity-progress', children: elements\n  }\n  return <View { ...viewProps } />\n }", "import React from 'react'\nimport { ClassButton, isUndefined } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { ActivityContent } from './ActivityContent'\nimport { ActivityProps } from './Activity'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { ActivityGroup } from './ActivityContext'\nimport { ActivityPicker } from './ActivityPicker'\nimport { ActivityLabel } from './ActivityLabel'\nimport { PanelFoot } from '../Panel/PanelFoot'\nimport { CollapseControl } from '../Collapse/CollapseControl'\nimport { NotCollapsed } from '../Collapse/NotCollapsed'\nimport { Collapsed } from '../Collapse/Collapsed'\nimport { View } from '../../Utilities/View'\nimport { ActivityProgress } from './ActivityProgress'\nimport { ActivityPicked } from './ActivityPicked'\nimport { ActivityItem } from './ActivityItem'\n\nexport interface ActivityPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const ActivityDefaultProps: PropsMethod<ActivityPropsDefault, ActivityProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'activity'\n  optionsStrict.props.className ||= 'panel activity'\n  optionsStrict.props.initialPicked ||= ActivityGroup.Active\n  if (isUndefined(optionsStrict.props.initialCollapsed)) optionsStrict.props.initialCollapsed = true\n  \n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.activity} />,\n    <NotCollapsed key=\"not-collapsed\"><View key=\"view\" /></NotCollapsed>,\n    <Collapsed key=\"collapsed\">\n      <ActivityProgress key=\"progress\" className='progress' />\n    </Collapsed>,\n    <CollapseControl key=\"collapse-control\">\n      <NotCollapsed key=\"not-collapsed\" children={icons.collapse}/>\n      <Collapsed key=\"collapsed\" children={icons.collapsed}/>\n    </CollapseControl>\n  ]\n\n  optionsStrict.content.children ||= <ActivityItem className='item' collapsed={true}>\n    <CollapseControl key=\"collapse-control\">\n      <NotCollapsed key=\"not-collapsed\" children={icons.collapse}/>\n      <Collapsed key=\"collapsed\" children={icons.collapsed}/>\n    </CollapseControl>\n    <ActivityLabel key=\"label\" className=\"label\" />\n    <ActivityPicked key=\"active\" id=\"active\">\n      <ActivityProgress key=\"progress\" />\n    </ActivityPicked>\n    <ActivityPicked key=\"error\" id=\"error\" children={icons.error} />\n    <ActivityPicked key=\"complete\" id=\"complete\" children={icons.complete} />\n  </ActivityItem>\n  \n  optionsStrict.footer.content ||= [\n    <ActivityPicker key='active' id='active' className={ClassButton} children={icons.active} />,\n    <ActivityPicker key='error' id='error' className={ClassButton} children={icons.error} />,\n    <ActivityPicker key='complete' id='complete' className={ClassButton} children={icons.complete} />,\n  ]\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <ActivityContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </ActivityContent>\n    <PanelFoot {...optionsStrict.footer} />\n  </>\n\n  return { ...optionsStrict.props, children }\n}\n", "import React from \"react\"\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../declarations\"\nimport { View } from \"./View\"\n\nexport interface BarOptions {\n  props?: WithClassName\n  before?: React.ReactChild[]\n  after?: React.ReactChild[]\n  content?: React.ReactChild | React.ReactChild[]\n}\n\nexport interface BarProps extends BarOptions, PropsWithoutChild {}\n\nexport function Bar(props: BarProps): ReactResult {\n  const { before, content, after, props: viewProps = {} } = props\n  if (!(before || content || after)) return null\n\n  const children = [before, content, after].filter(Boolean)\n\n  viewProps.children = children\n  return <View {...viewProps}/>\n}\n", "import React from 'react'\nimport { CollapseContext, CollapseContextInterface } from '../Collapse/CollapseContext'\n\nimport { PropsAndChildren, ReactResult, ThemeIcons, WithClassName } from \"../../declarations\"\nimport { BarOptions } from '../../Utilities/Bar'\nimport { View } from '../../Utilities/View'\nimport { assertPopulatedObject } from '@moviemasher/moviemasher.js'\n\nexport interface ContentOptions {\n  props?: WithClassName\n  children?: React.ReactElement<WithClassName>\n}\n\nexport interface PanelOptionsStrict {\n  icons: ThemeIcons\n  props: WithClassName\n  header: BarOptions\n  content: ContentOptions\n  footer: BarOptions\n}\n\nexport type PanelOptions = Partial<PanelOptionsStrict>\n\nexport const panelOptionsStrict = (options: PanelOptions): PanelOptionsStrict => {\n  options.header ||= {}\n  options.header.props ||= {}\n  options.header.props.key ||= 'header'\n  options.header.props.className ||= 'head'\n\n  options.content ||= {}\n  options.content.props ||= {}\n  options.content.props.key ||= 'content'\n  options.content.props.className ||= 'content'\n\n  options.footer ||= {}\n  options.footer.props ||= {}\n  options.footer.props.key ||= 'footer'\n  options.footer.props.className ||= 'foot'\n\n  options.props ||= {}\n\n  assertPopulatedObject(options.icons)\n\n  return options as PanelOptionsStrict\n}\n\nexport interface PanelProps extends PropsAndChildren, WithClassName {\n  collapsed?: boolean\n}\n\nexport function Panel(props: PanelProps): ReactResult {\n  const { children, className, collapsed: collapsedProp } = props\n  const [collapsed, changeCollapsed] = React.useState(!!collapsedProp)\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (collapsed) classes.push('collapsed')\n\n  const viewProps = { children, className: classes.join(' ') }\n  const collapseContext: CollapseContextInterface = { collapsed, changeCollapsed }\n  return <CollapseContext.Provider value={collapseContext}>\n    <View {...viewProps} />\n  </CollapseContext.Provider>\n}\n", "import React from 'react'\nimport { CollapseContext } from '../Collapse/CollapseContext'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { BarProps } from '../../Utilities/Bar'\nimport { View } from '../../Utilities/View'\n\nexport interface PanelFootProps extends PropsAndChildren, WithClassName {}\n\nexport function PanelFoot(props: BarProps): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  const { collapsed } = panelContext\n  if (collapsed) return null\n\n  const { before, content, after, props: viewProps = {} } = props\n\n  if (!(before || content || after)) return null\n\n  const children = [before, content, after].filter(Boolean)\n\n  viewProps.children = children\n  return <View {...viewProps}/>\n}\n\n", "import React from \"react\"\nimport { CollapseContext } from \"./CollapseContext\"\nimport { PropsWithChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\n\nexport interface CollapseControlProps extends PropsWithChildren, WithClassName {}\n\nexport function CollapseControl(props: CollapseControlProps): ReactResult {\n  const collapseContext = React.useContext(CollapseContext)\n  const { collapsed, changeCollapsed: setCollapsed } = collapseContext\n  const viewProps = { \n    ...props, \n    onClick: () => { setCollapsed(!collapsed) },\n  }\n  return <View {...viewProps} />\n}\n", "import React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { CollapseContext } from './CollapseContext'\n\nexport function NotCollapsed(props: PropsAndChildren): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  if (panelContext.collapsed) return null\n\n  return <>{props.children}</>\n}\n", "import React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { CollapseContext } from './CollapseContext'\n\nexport function Collapsed(props: PropsAndChildren): ReactResult {\n  const panelContext = React.useContext(CollapseContext)\n  if (!panelContext.collapsed) return null\n\n  return <>{props.children}</>\n}\n", "import React from \"react\"\nimport { \n  assertPopulatedString, MediaType, MediaTypesRecord\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { BrowserContext, BrowserContextInterface } from \"./BrowserContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { useDefinitions } from \"../../Hooks/useDefinitions\"\nimport { useRefresh } from \"../../Hooks/useRefresh\"\n\n\nexport interface BrowserProps extends PropsWithChildren {\n  initialPicked?: string\n}\n\n/**\n * @parents Masher\n * @children BrowserContent, BrowserPicker\n */\nexport function Browser(props: BrowserProps): ReactResult {\n  const { initialPicked = 'container', ...rest } = props\n\n  const [typesObject, setTypesObject] = React.useState<MediaTypesRecord>({})\n  const editorContext = React.useContext(MasherContext)\n  const { changeDefinition } = editorContext\n  const [refresh] = useRefresh()\n  const [ picked, setPicked] = React.useState(initialPicked) \n  const pick = (id: string) => {\n    assertPopulatedString(id)\n    changeDefinition()\n    setPicked(id)\n  }\n\n  const definitions = useDefinitions(typesObject[picked])\n\n  const addPicker = (id: string, types: MediaType[]) => {\n    setTypesObject(original => ({ ...original, [id]: types }))\n  }\n\n  const removePicker = (id: string): void => {\n    setTypesObject(original => ({ ...original, [id]: [] }))\n  }\n\n  const browserContext: BrowserContextInterface = {\n    refresh,\n    definitions,\n    picked,\n    pick, \n    addPicker, \n    removePicker,\n  }\n\n  const contextProps = {\n    value: browserContext,\n    children: <View {...rest} />\n  }\n  return (\n    <BrowserContext.Provider { ...contextProps } />\n  )\n}\n", "import React from 'react'\nimport { \n  EmptyMethod, MediaType, MediaArray, StringSetter, VoidMethod \n} from '@moviemasher/moviemasher.js'\n\nexport interface BrowserContextInterface {\n  refresh: VoidMethod\n  addPicker:(id: string, types: MediaType[]) => void\n  definitions: MediaArray\n  pick: StringSetter\n  picked: string,\n  removePicker:(id: string) => void\n}\n\nexport const BrowserContextDefault: BrowserContextInterface = {\n  addPicker: EmptyMethod,\n  refresh: EmptyMethod,\n  definitions: [],\n  pick: EmptyMethod,\n  picked: '',\n  removePicker: EmptyMethod,\n}\n\nexport const BrowserContext = React.createContext(BrowserContextDefault)\n", "import React from \"react\"\nimport { \n  assertDefined, EventType, isEventType, Editor, MediaArray, \n  MediaType, isPopulatedArray \n} from \"@moviemasher/moviemasher.js\"\n\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nconst EditorDefinitionsEventAdded = EventType.Added\nconst EditorDefinitionsEventResize = EventType.Resize\nexport const useEditorDefinitions = (types: MediaType[] = []): MediaArray => {\n  const masherContext = React.useContext(MasherContext)\n  const { editor } = masherContext\n  assertDefined(editor)\n\n  const { media } = editor\n\n  const storeRef = React.useRef<Record<string, MediaArray>>({})\n  const { eventTarget } = editor\n  \n  const snapshotInitialize = (): MediaArray => {\n    const lists = types.map(type => media.byType(type))\n    return lists.length === 1 ? lists[0] : lists.flat()\n  }\n\n  const snapshotGet = () => {\n    const key = types.join('-') || 'empty'\n    return storeRef.current[key] ||= snapshotInitialize()\n  }\n\n  const handleEvent = (event: Event) => {\n    const { type } = event\n    if (isEventType(type) && (event instanceof CustomEvent)) {\n      const { detail } = event\n      const { definitionTypes } = detail\n      if (isPopulatedArray(definitionTypes)) {\n        const types = definitionTypes as MediaType[]\n\n        const { current} = storeRef\n        const allIds = Object.keys(current)\n        const ids = allIds.filter(id => types.some(type => id.includes(type)))\n        ids.forEach(id => delete current[id])\n      }\n    }\n  }\n  const externalStore = React.useSyncExternalStore<MediaArray>((callback) => {\n    eventTarget.addEventListener(EditorDefinitionsEventAdded, callback)\n    eventTarget.addEventListener(EditorDefinitionsEventResize, callback)\n    return () => {\n      eventTarget.removeEventListener(EditorDefinitionsEventAdded, callback)\n      eventTarget.removeEventListener(EditorDefinitionsEventResize, callback)\n    }\n  }, snapshotGet)\n\n  const removeListener = () => {\n    eventTarget.removeEventListener(EditorDefinitionsEventAdded, handleEvent)\n  }\n\n  const addListener = () => {\n    eventTarget.addEventListener(EditorDefinitionsEventAdded, handleEvent)\n    return () => { removeListener() }\n  }\n\n  React.useEffect(() => addListener(), [])\n  \n  return externalStore\n}", "import React from \"react\"\nimport { \n  assertDefined, MediaArray, Endpoints, MediaTypes, \n} from \"@moviemasher/moviemasher.js\"\nimport { \n  ClientArrayResponse, ClientReadOptions, ReadOperation \n} from \"@moviemasher/client-core\"\n\nimport { useClient } from \"./useClient\"\nimport { useEditor } from \"./useEditor\"\n\nconst ApiDefinitionsEvent = 'api-definitions'\nconst ApiDefinitionsDisabled = 'disabled'\nconst ApiDefinitionsEmpty = 'empty'\n\nexport const useApiDefinitions = (types: MediaTypes = []): MediaArray => {\n\n  const client = useClient()\n  if (!client.enabled(ReadOperation)) return []\n\n  const editor = useEditor()\n  assertDefined(editor)\n  \n  const storeRef = React.useRef<Record<string, MediaArray>>({})\n\n  const { eventTarget } = editor\n\n  const definitionsPromise = (key: string) => {\n\n    const options: ClientReadOptions = { type: types }\n    return client.list(options).then((response: ClientArrayResponse) => {\n      console.debug(\"DataDefinitionRetrieveResponse\", Endpoints.data.definition.retrieve, response)\n      const { error, data } = response\n      if (!data) return\n      const array = storeRef.current[key]\n      array.push(...data)\n      eventTarget.dispatchEvent(new CustomEvent(ApiDefinitionsEvent))\n    })\n  }\n  \n  const snapshotInitialize = (key: string): MediaArray => {\n    switch(key) {\n      case ApiDefinitionsEmpty:\n      case ApiDefinitionsDisabled: break\n      default: definitionsPromise(key) \n    }\n    return []\n  }\n\n  const currentKey = () => {\n    if (!types.length) return ApiDefinitionsEmpty\n\n    return types.join('-')\n  }\n\n  const snapshotGet = () => {\n    const key = currentKey()\n    const array = storeRef.current[key]\n    if (array) return array\n    \n    // console.log(\"useApiDefinitions defining\", key)\n    return storeRef.current[key] = snapshotInitialize(key)\n  }\n\n  const externalStore = React.useSyncExternalStore<MediaArray>((callback) => {\n    eventTarget.addEventListener(ApiDefinitionsEvent, callback)\n    return () => {\n      eventTarget.removeEventListener(ApiDefinitionsEvent, callback)\n    }\n  }, snapshotGet)\n  \n  return externalStore\n}", "import React from \"react\"\nimport { Client } from \"@moviemasher/client-core\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useClient = (): Client => React.useContext(MasherContext).client!\n", "import React from \"react\"\nimport { Editor } from \"@moviemasher/moviemasher.js\"\nimport { MasherContext } from \"../Components/Masher/MasherContext\"\n\nexport const useEditor = (): Editor => React.useContext(MasherContext).editor!\n", "import { \n  Editor, MediaArray, MediaType\n} from \"@moviemasher/moviemasher.js\"\n\nimport { useEditorDefinitions } from \"./useEditorDefinitions\"\nimport { useApiDefinitions } from \"./useApiDefinitions\"\n\nexport const useDefinitions = (types: MediaType[] = []): MediaArray => {\n  const editorDefinitions = useEditorDefinitions(types)\n  const apiDefinitions = useApiDefinitions(types)\n  const definitions = apiDefinitions.filter(apiDefinition => \n    !editorDefinitions.some(editorDefinition => editorDefinition.id === apiDefinition.id)\n  )\n  const combined = [...editorDefinitions, ...definitions]\n  // console.log(\"useDefinitions\", combined.length, types.join(', '))\n  return combined\n}", "import React from \"react\"\n\n\nexport const useRefresh = (): [(...args: any[]) => void, number] => {\n  const [nonce, setNonce] = React.useState(0)\n  const updateNonce = () => { setNonce(new Date().valueOf()) }\n  return [updateNonce, nonce]\n}", "import React from \"react\"\nimport { \n  assertTrue, ClassDropping, eventStop\n} from \"@moviemasher/moviemasher.js\"\n\nimport { WithClassName, ReactResult, PropsAndChild } from \"../../declarations\"\nimport { View } from \"../../Utilities/View\"\nimport { BrowserContext } from \"./BrowserContext\"\nimport { DefinitionContext } from \"../../Contexts/DefinitionContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { dragTypes, TransferTypeFiles } from \"@moviemasher/client-core\"\n\nexport interface BrowserContentProps extends WithClassName, PropsAndChild {}\n\n/**\n * @parents Browser\n * @children BrowserSource\n */\nexport function BrowserContent(props: BrowserContentProps): ReactResult {\n  const [over, setOver] = React.useState(false)\n  const { className, children, ...rest } = props\n\n  const editorContext = React.useContext(MasherContext)\n  const browserContext = React.useContext(BrowserContext)\n  const definitions = browserContext.definitions || []\n  const { drop } = editorContext\n\n  const dragValid = (dataTransfer?: DataTransfer | null): dataTransfer is DataTransfer => {\n    if (!dataTransfer) return false\n\n    return dragTypes(dataTransfer).includes(TransferTypeFiles)\n  }\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    const { dataTransfer } = event\n    if (dragValid(dataTransfer)) drop(dataTransfer.files)\n  } \n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    setOver(dragValid(event.dataTransfer))\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n  \n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n  \n  const childNodes = () => {\n    const childProps = child.props\n    return definitions.map(definition => {\n      const cloneProps = { ...childProps, key: definition.id }\n      const children = React.cloneElement(child, cloneProps)\n      const contextProps = { children, value: { definition }, key: definition.id }\n      const context = <DefinitionContext.Provider { ...contextProps } />\n      return context\n    })\n  }\n\n  const viewProps = {\n    ...rest, \n    className: classes.join(' '),\n    key: `browser-content`,\n    children: childNodes(), \n    onDrop, onDragOver, onDragLeave,\n\n  }\n  return <View {...viewProps} />\n}\n", "import React from 'react'\nimport { Media } from '@moviemasher/moviemasher.js'\n\nexport interface DefinitionContextInterface {\n  definition?: Media\n}\n\nexport const DefinitionContextDefault: DefinitionContextInterface = {\n}\n\nexport const DefinitionContext = React.createContext(DefinitionContextDefault)\n", "import React from \"react\"\nimport { \n  ClassSelected, Identified, assertPopulatedString, assertTrue \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsAndChild, ReactResult, WithClassName\n } from \"../../declarations\"\nimport { propsMediaTypes } from \"../../Utilities/Props\"\nimport { BrowserContext } from \"./BrowserContext\"\nimport { Problems } from \"../../Setup/Problems\"\n\nexport interface BrowserPickerProps extends PropsAndChild, Identified, WithClassName {\n  type?: string\n  types?: string | string[]\n}\n\n/**\n * @parents Browser\n */\nexport function BrowserPicker(props: BrowserPickerProps): ReactResult {\n  const { children, type, types, className, id, ...rest } = props\n  assertPopulatedString(id)\n\n  const browserContext = React.useContext(BrowserContext)\n  const { pick, picked, addPicker, removePicker } = browserContext\n\n  const classes = []\n  if (className) classes.push(className)\n  if (picked === id) classes.push(ClassSelected)\n\n  React.useEffect(() => {\n    addPicker(id, propsMediaTypes(type, types, id))\n    return () => { removePicker(id) }\n  }, [])\n\n  const viewProps = { \n    ...rest, \n    className: classes.join(' '),\n    key: `browser-picker-${id}`,\n    onClick: () => { pick(id) }, \n  }\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child), Problems.child)\n   \n  return React.cloneElement(child, viewProps)\n}\n", "import { MediaType, isMediaType, isSelectType, isString, Property, SelectType } from \"@moviemasher/moviemasher.js\"\n\nconst propsStringArray = (string?: string, array?: string | string[], properties?: Property[]): string[] => {\n  if (string) return [string]\n\n  if (!array) return properties ? properties.map(property => property.name) : []\n\n  if (isString(array)) return array.split(',').map(string => string.trim())\n\n  return array\n}\n\nexport const propsMediaTypes = (type?: string, types?: string | string[], id?: string): MediaType[] => {\n  const strings = propsStringArray(type, types)\n  if (id && !strings.length) strings.push(id)\n  const validStrings = strings.filter(string => isMediaType(string))\n  return validStrings.map(string => string as MediaType)\n}\n\n\nexport const propsSelectTypes = (type?: string, types?: string | string[], id?: string): SelectType[] => {\n  const strings = propsStringArray(type, types)\n  if (id && !strings.length) strings.push(id)\n  const validStrings = strings.filter(string => isSelectType(string))\n  return validStrings.map(string => string as SelectType)\n}\n", "import React from 'react'\nimport { ClassButton } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { BrowserContent } from './BrowserContent'\nimport { BrowserPicker } from './BrowserPicker'\nimport { BrowserProps } from './Browser'\nimport { BrowserControl } from './BrowserControl'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { DefinitionItem } from '../DefinitionItem/DefinitionItem'\nimport { View } from '../../Utilities/View'\n\nexport interface BrowserPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const BrowserDefaultProps: PropsMethod<BrowserPropsDefault, BrowserProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'browser'\n  optionsStrict.props.className ||= 'panel browser'\n  optionsStrict.props.initialPicked ||= 'container'\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.browser} />\n  ]\n\n  optionsStrict.footer.content ||= [\n    <BrowserPicker key='effect' id='effect' className={ClassButton} children={icons.effect} />,\n    <BrowserPicker key='container' id='container' className={ClassButton} children={icons.container} />,\n    <BrowserPicker key='content' id='content' className={ClassButton} children={icons.content} />,\n  ]\n  optionsStrict.footer.before ||= [\n    <BrowserPicker key='video' id='video' types='video,videosequence' className={ClassButton} children={icons.browserVideo} />,\n    <BrowserPicker key='audio' id='audio' className={ClassButton} children={icons.browserAudio} />,\n    <BrowserPicker key='image' id='image' className={ClassButton} children={icons.browserImage} />,\n    <BrowserPicker key='font' id='font' className={ClassButton} children={icons.browserText} />,\n  ]\n\n  optionsStrict.footer.after ||= [\n    <BrowserControl key='import' children={icons.import} />\n  ]\n\n  optionsStrict.content.children ||= (\n    <DefinitionItem draggable={true} className='definition preview' />\n  )\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <BrowserContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </BrowserContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n  \n  return { ...optionsStrict.props, children }\n}\n", "import React from \"react\"\nimport { assertObject, RawTypes } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { useClient } from \"../../Hooks/useClient\"\n\nconst BrowserControlId = 'upload-control-id'\n\nexport function BrowserControl(props: PropsAndChild): ReactResult {\n  const { children, ...rest } = props\n  const fileInput = React.useRef<HTMLInputElement>(null)\n  const client = useClient()\n  const editorContext = React.useContext(MasherContext)\n  const { drop } = editorContext\n\n\n  const onChange = (event: React.FormEvent<HTMLInputElement>) => {\n    const { files } = event.currentTarget\n    if (files) drop(files)\n  }\n\n  const accept = client.accept()\n  \n  const inputProps = {\n    accept,\n    multiple: true,\n    id: BrowserControlId,\n    onChange,\n    type: 'file',\n    key: 'browser-control-input',\n    ref: fileInput,\n    ...rest,\n  }\n  const input = <input {...inputProps}/>\n\n  if (!React.isValidElement(children)) return input\n\n  const kids = [React.Children.only(children), input]\n\n  const labelProps = {\n    children: kids,\n    key: 'browser-control',\n    htmlFor: BrowserControlId\n  }\n  return <label {...labelProps} />\n}\n", "import React from 'react'\nimport { \n  assertTrue,\n  ClassSelected, MediaObject, sizeAboveZero, sizeCopy, sizeScale, Strings, UnknownRecord} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from '../../declarations'\nimport { DragDefinitionObject, DragSuffix } from '@moviemasher/client-core'\nimport { useDefinition } from './useDefinition'\nimport { View } from '../../Utilities/View'\nimport { sizeCeil } from '@moviemasher/moviemasher.js'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { BrowserContext } from '../Browser/BrowserContext'\n\nexport interface DefinitionItemProps extends WithClassName, PropsWithoutChild {\n  draggable?: boolean\n  iconRatio?: number\n}\n\n/**\n * @parents BrowserContent, DefinitionDrop\n */\nexport function DefinitionItem(props: DefinitionItemProps): ReactResult {\n  const { className, iconRatio, ...rest } = props\n  const ratio = iconRatio || 0.25\n  \n  const svgRef = React.useRef<HTMLDivElement>(null)\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const browserContext = React.useContext(BrowserContext)\n  const { refresh } = browserContext\n  const masherContext = React.useContext(MasherContext)\n  const { editor, changeDefinition, current } = masherContext\n  \n  assertTrue(editor)\n\n  const media = useDefinition()\n\n  const { id, label } = media\n \n  const updateRef = async () => {\n    const { rect } = editor\n    const { current } = svgRef\n    if (!(current && sizeAboveZero(rect))) return \n\n    const scaled = sizeCeil(sizeScale(sizeCopy(rect), ratio, ratio))\n    const element = await media.definitionIcon(scaled)\n    if (element) current.replaceChildren(element)\n  }\n\n  React.useEffect(() => { updateRef() }, [])\n  if (svgRef.current) updateRef()\n\n  const childNodes = () => {\n    const nodes = [<View key=\"icon\" ref={svgRef} />]\n    if (label) nodes.unshift(<label key='label'>{label}</label>)\n    return nodes\n  }\n\n  const onPointerDown = (event: Event) => { \n    event.stopPropagation()\n    \n    changeDefinition(media) \n    refresh()\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    onPointerDown(event)\n    const rect = viewRef.current!.getBoundingClientRect()\n    const { left } = rect\n    const { clientX } = event\n    const mediaObject = media.toJSON()\n    const data: DragDefinitionObject = { offset: clientX - left, mediaObject }\n    const json = JSON.stringify(data)\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    dataTransfer.effectAllowed = 'copy'\n    // console.log(\"DefinitionItem.onDragStart\", definition.type + DragSuffix, json)\n    dataTransfer.setData(media.type + DragSuffix, json)\n  }\n\n  const calculateClassName = () => {\n    const classes: Strings = []\n    if (className) classes.push(className)\n    if (current.mediaId === id) classes.push(ClassSelected)\n    return classes.join(' ')\n  }\n\n  const viewProps: UnknownRecord = {\n    ...rest,\n    className,\n    children: childNodes(),\n    ref: viewRef, key: id,\n  }\n  if (props.draggable) {\n    viewProps.onDragStart = onDragStart\n    viewProps.onPointerDown = onPointerDown\n    viewProps.className = calculateClassName()\n  }\n  return <View {...viewProps}/>\n}\n", "import React from \"react\"\nimport { Media } from \"@moviemasher/moviemasher.js\"\nimport { DefinitionContext } from \"../../Contexts/DefinitionContext\"\n\nexport const useDefinition = (): Media => React.useContext(DefinitionContext).definition!\n", "import React from 'react'\nimport { Clip } from '@moviemasher/moviemasher.js'\n\nexport interface ClipContextInterface {\n  prevClipEnd: number\n  clip?: Clip\n}\n\nexport const ClipContextDefault: ClipContextInterface = {\n  prevClipEnd: 0\n}\n\nexport const ClipContext = React.createContext(ClipContextDefault)\n", "import React from 'react'\nimport {\n  UnknownRecord, DroppingPosition, ClassSelected, eventStop, \n  assertTrue,\n  sizeAboveZero, svgPolygonElement,\n  Size, EventType, isAboveZero, colorToRgb, colorRgbDifference, colorFromRgb, svgPatternElement, idGenerate, svgDefsElement, svgUrl, svgSvgElement, sizeCeil, isEventType, isObject\n} from '@moviemasher/moviemasher.js'\nimport { \n  pixelFromFrame, DragSuffix, droppingPositionClass \n} from '@moviemasher/client-core'\n\nimport { PropsWithoutChild, ReactResult, WithClassName } from '../../declarations'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { TimelineContext } from '../Timeline/TimelineContext'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { ClipContext } from './ClipContext'\nimport { View } from '../../Utilities/View'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { useRefresh } from '../../Hooks/useRefresh'\n\nconst ClipItemRefreshRate = 500\n\nexport interface ClipItemProps extends WithClassName, PropsWithoutChild {}\n/**\n * @parents TimelineTrack\n */\nexport function ClipItem(props: ClipItemProps): ReactResult {\n  const { className, ...rest } = props\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const editor = useEditor()\n  const trackContext = React.useContext(TrackContext)\n  const timelineContext = React.useContext(TimelineContext)\n  \n  const [refresh, nonce] = useRefresh()\n\n  const watchingRef = React.useRef<UnknownRecord>({})\n  const { current: watching } = watchingRef\n  const clipContext = React.useContext(ClipContext)\n  const {\n    droppingPosition, droppingClip, scale, selectedClip, onDrop,\n    dragTypeValid, setDroppingPosition, setDroppingClip, setDroppingTrack, \n    onDragLeave,\n  } = timelineContext\n  const { track } = trackContext\n  const { clip, prevClipEnd} = clipContext\n  assertTrue(clip)\n\n  const backgroundNode = (fill: string, size: Size, spacing: number) => {\n    const rgb = colorToRgb(fill)\n    const differenceRgb = colorRgbDifference(rgb)\n    const forecolor = colorFromRgb(differenceRgb)\n    const framePolygon = svgPolygonElement(size, '', fill)\n    const spaceRect = { \n      x: size.width, y: 0,\n      width: spacing, height: size.height, \n    }\n    const spacePolygon = svgPolygonElement(spaceRect, '', forecolor)\n\n    const patternSize = { \n      width: size.width + spacing, height: size.height\n    }\n    const patternId = idGenerate('pattern')\n    const patternItems = [framePolygon, spacePolygon]\n    const pattern = svgPatternElement(patternSize, patternId, patternItems)\n    const defsElement = svgDefsElement([pattern])\n    const patternedSize = { width: timelineContext.rect.width, height: parentHeight }\n    const patternedPolygon = svgPolygonElement(patternedSize, '', svgUrl(patternId))\n    return svgSvgElement(patternedSize, [defsElement, patternedPolygon])\n  }\n  const getParentHeight = () => {\n    const { current } = svgRef\n    const parent = current?.parentNode\n    if (parent instanceof HTMLDivElement) {\n\n      return parent.offsetHeight // .getBoundingClientRect().height\n    }\n  \n    // console.log(\"ClipItem.getParentHeight NO HEIGHT\", !!current)\n    return 0\n  }\n\n  const [parentHeight, setParentHeight] = React.useState(getParentHeight)\n\n  const { label, frame, frames } = clip\n\n  const getCurrentWidth = () => {\n    if (!(isAboveZero(scale) && isAboveZero(frames))) {\n      // console.log(\"ClipItem getCurrentWidth returing 0\", scale, frames)\n      return 0\n    }\n\n    const currentWidth = pixelFromFrame(frames, scale, 'floor')\n    const { width } = watching\n    if (currentWidth && currentWidth !== width) {\n      watching.width = currentWidth\n      refresh()\n    }\n    return currentWidth\n  }\n\n  const currentWidth = getCurrentWidth()\n\n  const actionCallback = (event: Event) => { \n    // console.log(\"ClipItem actionCallback\", event)\n    if (watching.redraw) return\n    \n    const { type } = event\n    if (!isEventType(type)) return\n    if (!(event instanceof CustomEvent)) return\n    if (type !== EventType.Action) return\n    \n    const { detail } = event\n    if (!detail) return \n    \n    const { action } = detail\n    if (!action) return\n\n    const { target } = action\n    if (!isObject(target)) return\n\n    switch(target) {\n      case clip:\n      case clip.container:\n      case clip.content: break\n      default: {\n        if (action.property === 'color') break\n        return\n      }\n    }    \n    refresh()\n  }\n\n  useListeners({ [EventType.Action]: actionCallback, [EventType.Save]: refresh })\n\n  const frameSize = () => {\n    const { rect } = editor\n    const size = { \n      width: parentHeight * (rect.width / rect.height), height: parentHeight\n    }\n    return sizeCeil(size)\n  }\n\n  const clipSize = (size: Size) => {\n    const { width, height } = size\n    return { width: Math.max(width, currentWidth), height }\n  }\n\n  const populateSvg = (): Promise<void> => {\n    const { width, redraw } = watching\n    delete watching.timeout \n    delete watching.redraw \n    \n    const { current } = svgRef\n    const { mashMedia } = editor\n\n    const allOk = current && mashMedia && width && width === getCurrentWidth()\n    if (redraw || !allOk) {\n      refresh()\n      if (!allOk) return Promise.resolve()\n    }\n    const currentSize = frameSize()\n    const fullSize = clipSize(currentSize)\n    \n    // return Promise.resolve()\n    \n    const promise = clip.clipIcon(fullSize, timelineContext.scale, 2)\n    if (!promise) return Promise.resolve()\n    \n    return promise.then(element => {\n      const latestWidth = getCurrentWidth()\n      if (element && width >= latestWidth) {\n        // console.log(\"ClipItem.populateSvg replacing children\", fullSize)\n        current.replaceChildren(backgroundNode(mashMedia.color, currentSize, 2), element)\n      } //else console.log(\"ClipItem.populateSvg\", !!element, width, \">= ?\", latestWidth)\n    })\n  }\n  \n  const handleChange = () => {\n    if (!parentHeight) {\n      // console.log(\"ClipItem.handleChange no parentHeight\")\n      return setParentHeight(getParentHeight)\n    }\n     \n    const { current } = svgRef\n    const { mashMedia } = editor\n    if (!(current && mashMedia)) return\n\n    if (watching.timeout) {\n      if (!watching.redraw) {\n        // console.log(\"ClipItem.handleChange setting redraw\", nonce, scale, parentHeight)\n        watching.redraw = true\n      }\n      return\n    }\n    // // console.log(\"ClipItem.handleChange setting timeout\", nonce, scale)\n    watching.timeout = setTimeout(populateSvg, ClipItemRefreshRate)\n  }\n\n  React.useEffect(handleChange, [nonce, scale, parentHeight])\n  \n  const onPointerDown = (event: MouseEvent) => { \n    event.stopPropagation()\n    editor.selection.set(clip) \n  }\n\n  const onDragEnd = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n    \n    const { dropEffect } = dataTransfer\n    if (dropEffect === 'none') {\n      editor.removeClip(clip)\n    }\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    onPointerDown(event)\n\n    const { dataTransfer, clientX } = event\n    const { current } = viewRef\n    if (!(dataTransfer && current)) return\n\n    const rect = current.getBoundingClientRect()\n    const { left } = rect\n\n    const data = { offset: clientX - left }\n    const json = JSON.stringify(data)\n    dataTransfer.effectAllowed = 'move'\n    dataTransfer.setData('clip' + DragSuffix, json)\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const definitionType = dragTypeValid(dataTransfer, clip)\n    const pos = definitionType ? DroppingPosition.At : DroppingPosition.None\n    setDroppingTrack(definitionType ? track : undefined)\n    setDroppingClip(definitionType ? clip : undefined)\n    setDroppingPosition(pos)\n  }\n\n  const calculateClassName = (): string => {\n    const selected = clip === selectedClip\n    const classes: string[] = []\n    if (className) classes.push(className)\n    if (selected) classes.push(ClassSelected)\n    if (droppingClip === clip) classes.push(droppingPositionClass(droppingPosition))\n\n    // console.log(\"TimelineClip calculatedClassName\", classes.join(' '))\n    return classes.join(' ')\n  }\n\n  const childNodes = () => {\n    const svgProps: UnknownRecord = {\n      key: \"clip-previews\", ref: svgRef\n    }\n    const size = { width: currentWidth, height: parentHeight }\n    if (sizeAboveZero(size)) {\n      const { width, height } = size\n      svgProps.width = width\n      svgProps.height = height\n      svgProps.viewBox = `0 0 ${width} ${height}`\n    }\n    const nodes = [<svg { ...svgProps } />]\n    if (label) nodes.unshift(<label key='label'>{label}</label>)\n    return nodes\n  }\n\n  const style: UnknownRecord = { width: currentWidth }\n  if (prevClipEnd > -1) {\n    style.marginLeft = pixelFromFrame(frame - prevClipEnd, scale, 'floor')\n  }\n\n  const clipProps = {\n    ...rest,\n    style,\n    className: calculateClassName(),\n    onPointerDown, onDragStart, onDragEnd,\n    onDragOver, onDragLeave, onDrop,\n    onClick: (event: React.MouseEvent) => event.stopPropagation(),\n    draggable: true,\n    ref: viewRef,\n    children: childNodes()\n  }\n\n  return <View { ...clipProps } />\n}\n", "import React from 'react'\nimport { Track } from '@moviemasher/moviemasher.js'\n\nexport interface TrackContextInterface {\n  track?: Track\n}\n\nexport const TrackContextDefault: TrackContextInterface = {}\n\nexport const TrackContext = React.createContext(TrackContextDefault)\n", "import React from 'react'\nimport {\n  EmptyMethod,RectZero,\n  Clip, DroppingPosition, NumberSetter, Rect, Track, VoidMethod, Point\n} from '@moviemasher/moviemasher.js'\n\nexport interface TimelineContextInterface {\n  dragTypeValid(dataTransfer: DataTransfer, clip?: Clip): boolean\n  droppingClip?: Clip\n  droppingPosition?: DroppingPosition | number\n  droppingTrack?: Track\n  frame: number\n  frames: number\n  onDragLeave: (event: DragEvent) => void\n  onDrop: (event: DragEvent) => void\n  rect: Rect\n  refresh: VoidMethod\n  refreshed: number\n  scale: number\n  scroll: Point\n  selectedClip?: Clip\n  selectedTrack?: Track\n  setDroppingClip(_?: Clip): void\n  setDroppingPosition(_: DroppingPosition | number): void\n  setDroppingTrack(_?: Track): void\n  setRect(_:Rect): void\n  setScroll(_:Point): void\n  setZoom: NumberSetter\n  zoom: number\n}\n\nexport const TimelineContextDefault: TimelineContextInterface = {\n  dragTypeValid(): boolean { return false },\n  frame: 0,\n  frames: 0,\n  onDragLeave: EmptyMethod,\n  onDrop: EmptyMethod,\n  rect: RectZero,\n  refreshed: 0, refresh: EmptyMethod,\n  scale: 0,\n  scroll: { x: 0, y: 0 },\n  setDroppingClip: EmptyMethod,\n  setDroppingPosition: EmptyMethod,\n  setDroppingTrack: EmptyMethod,\n  setRect: EmptyMethod,\n  setScroll: EmptyMethod,\n  setZoom: EmptyMethod,\n  zoom: 1,\n}\n\nexport const TimelineContext = React.createContext(TimelineContextDefault)\n", "import React from \"react\"\nimport { EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { ListenerCallback } from \"../declarations\"\nimport { useEditor } from \"./useEditor\"\n\nexport interface ListenerEvents extends Partial<Record<EventType, ListenerCallback>> {}\n\nexport const useListeners = (events: ListenerEvents): void => {\n  const editor = useEditor()\n  const { eventTarget } = editor\n\n  const handleEvent = (event : Event) => {\n    const { type } = event\n    const handler = events[type as EventType]\n    if (handler) handler(event)\n  }\n\n  const removeListeners = () => {\n    const keys = Object.keys(events)\n    keys.forEach(eventType => {\n      eventTarget.removeEventListener(eventType, handleEvent)\n    })\n  }\n\n  const addListeners = () => {\n    Object.keys(events).forEach(eventType => {\n      eventTarget.addEventListener(eventType, handleEvent)\n    })\n    return () => { removeListeners() }\n  }\n\n  React.useEffect(() => addListeners(), [])\n}\n", "import React from \"react\"\nimport { Clip } from \"@moviemasher/moviemasher.js\"\n\nimport { ClipContext } from \"./ClipContext\"\n\nexport const useClip = (): Clip => React.useContext(ClipContext).clip!\n", "import React from \"react\"\nimport {\n  EventType, MasherAction} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport function CreateEditedControl(props: PropsAndChild): ReactResult {\n  const { children, ...rest } = props\n  const editor = useEditor()\n  const getDisabled = () => editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n\n  useListeners({\n    [EventType.Action]: updateDisabled,\n    [EventType.Loaded]: updateDisabled,\n    [EventType.Save]: updateDisabled,\n  })\n\n  const onClick = () => {\n    if (disabled) return\n\n    editor.create()\n  }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n\n\n}\n", "import React from \"react\"\nimport { MasherAction, EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorRedoButtonProps extends PropsAndChild {}\n\nexport function EditorRedoButton(props: EditorRedoButtonProps): ReactResult {\n\n  const [disabled, setDisabled] = React.useState(true)\n  const editor = useEditor()\n  useListeners({\n    [EventType.Action]: () => { setDisabled(!editor.can(MasherAction.Redo)) }\n  })\n  const { children, ...rest } = props\n  const onClick = () => { editor.redo() }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n", "import React from \"react\"\nimport { EventType, SelectType, assertSelectType, isEffect, isClip, isTrack } from \"@moviemasher/moviemasher.js\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorRemoveButtonProps extends PropsAndChild {\n  type: string\n}\n\nexport function EditorRemoveButton(props: EditorRemoveButtonProps): ReactResult {\n  const { children, type, ...rest } = props\n  const selectType = type || SelectType.Clip\n  assertSelectType(selectType)\n\n  const editor = useEditor()\n  const [disabled, setDisabled] = React.useState(!editor.selection[selectType])\n  useListeners({\n    [EventType.Selection]: () => { setDisabled(!editor.selection[selectType]) }\n  })\n\n  const onClick = () => {\n    if (disabled) return\n\n    const selectable = editor.selection[selectType]\n    if (isEffect(selectable)) editor.removeEffect(selectable)\n    else if (isClip(selectable)) editor.removeClip(selectable)\n    else if (isTrack(selectable)) editor.removeTrack(selectable)\n  }\n\n  const child = React.Children.only(children)\n\n  const cloneProps = { ...rest, ...child.props, onClick, disabled }\n  return React.cloneElement(child, cloneProps)\n}\n", "import React from \"react\"\nimport { MasherAction, EventType } from \"@moviemasher/moviemasher.js\"\n\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface EditorUndoButtonProps extends PropsAndChild {}\n\nexport function EditorUndoButton(props: EditorUndoButtonProps): ReactResult {\n  const editor = useEditor()\n  const [disabled, setDisabled] = React.useState(true)\n  useListeners({\n    [EventType.Action]: () => { setDisabled(!editor.can(MasherAction.Undo)) }\n  })\n  const { children, ...rest } = props\n\n  const onClick = () => { editor.undo() }\n\n  const buttonOptions = { ...rest, onClick, disabled: disabled }\n  return  React.cloneElement(React.Children.only(children), buttonOptions)\n}\n", "import React from \"react\"\nimport {\n  EventType, MasherAction, assertMashMedia\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { EncodeOperation } from \"@moviemasher/client-core\"\nimport { useClient } from \"../../Hooks/useClient\"\n\nexport function EncodeControl(props: PropsAndChild): ReactResult {\n  const client = useClient()\n  const { children, ...rest } = props\n  const editor = useEditor()\n\n  const getDisabled = () => !editor.can(MasherAction.Render)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => setDisabled(getDisabled())\n  useListeners({\n    [EventType.Save]: updateDisabled,\n    [EventType.Loaded]: updateDisabled,\n    [EventType.Action]: updateDisabled\n  })\n\n  if (!client.enabled(EncodeOperation)) return null\n\n  const onClick = () => {\n    if (disabled) return\n\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n\n    setDisabled(true)\n    client.encode(mashMedia)\n  }\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n", "import React from \"react\"\nimport {\n  MasherAction, EventType, assertMashMedia,\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useClient } from \"../../Hooks/useClient\"\nimport { WriteOperation } from \"@moviemasher/client-core\"\n\nexport function SaveControl(props:PropsAndChild): ReactResult {\n  const editor = useEditor()\n  const client = useClient()\n\n  const getDisabled = () => !editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n  useListeners({\n    [EventType.Action]: updateDisabled, \n    [EventType.Save]: updateDisabled,\n  })\n\n  if (!client.enabled(WriteOperation)) return null\n\n  const { children, ...rest } = props\n  \n  const onClick = () => {\n    if (disabled) return\n\n    setDisabled(true)\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n    \n    client.save(mashMedia)\n  }\n  \n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n", "import React from \"react\"\nimport {\n  DataMashRetrieveRequest, DataRetrieveResponse, DataGetRequest,\n  Endpoints, EventType, MasherAction, ServerType, \n  DataMashGetResponse, isEventType, isSelectType, assertObject, \n  isPopulatedString, isPositive, assertTrue, Identified,\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { ApiContext } from \"../../../client-react-deleted/ApiClient/ApiContext\"\nimport { InspectorContext } from \"../Inspector/InspectorContext\"\nimport { labelInterpolate, labelTranslate } from \"../../Utilities/Label\"\nimport { View } from \"../../Utilities/View\"\n\n\ninterface AndLabel {\n  label: string\n}\n\ninterface LabelAndId extends Identified, AndLabel {}\n\nexport interface SelectEditedControlProps extends PropsAndChild, WithClassName {}\n\nexport function SelectEditedControl(props: SelectEditedControlProps): ReactResult {\n  const editor = useEditor()\n  const [requested, setRequested] = React.useState(false)\n  const [described, setDescribed] = React.useState<LabelAndId[]>(() => [])\n\n  const [editedId, setEditedId] = React.useState(editor.mashMedia?.id || '')\n  const apiContext = React.useContext(ApiContext)\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedInfo } = inspectorContext\n  const { selectedType } = selectedInfo\n\n  const [editedLabel, setEditedLabel] = React.useState(editor.mashMedia?.label || '')\n  const getDisabled = () => editor.can(MasherAction.Save)\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const { enabled, servers, endpointPromise } = apiContext\n\n  const updateDisabled = () => { setDisabled(getDisabled()) }\n\n  const handleEdited = (event: Event) => {\n    const { type } = event\n    if (!(isEventType(type) && isSelectType(type))) return\n    \n    if (type !== selectedType) return\n\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n\n    const { id, label } = mashMedia\n    setDescribed(original => {\n      const copy = original.filter(object => isPopulatedString(object.label))\n      const index = copy.findIndex(object => object.id === id)\n      if (isPositive(index)) copy.splice(index, 1, mashMedia)\n      else copy.push(mashMedia)\n      setEditedId(id)\n      setEditedLabel(label)\n      return copy\n    })\n  }\n\n  const handleAction = () => {\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n\n    const { label } = mashMedia\n    if (editedLabel !== label) {\n      setDescribed(original => [...original])\n      setEditedLabel(label)\n    }\n    updateDisabled()\n  }\n\n  useListeners({\n    [EventType.Action]: handleAction,\n    [EventType.Loaded]: handleEdited,\n    [EventType.Save]: updateDisabled,\n  })\n\n  const onChange: React.ChangeEventHandler<HTMLSelectElement> = (event) => {\n    if (disabled) return\n\n    const { selectedIndex } = event.target\n    const object = described[selectedIndex]\n    assertObject(object, 'described[selectedIndex]')\n\n    const { id } = object\n    const request: DataGetRequest = { id }\n    const { editType } = editor\n    const endpoint = Endpoints.data[editType].get\n    console.debug(\"GetRequest\", endpoint, request)\n    endpointPromise(endpoint, request).then((response: DataMashGetResponse) => {\n      console.debug(\"GetResponse\", endpoint, response)\n      const { error, mash } = response\n      if (error) console.error(\"GetResponse\", endpoint, error)\n      else return editor.load(mash)\n    })\n  }\n\n  React.useEffect(() => {\n    if (!(enabled && servers[ServerType.Data])) return\n    if (requested) return\n\n    setRequested(true)\n    const request: DataMashRetrieveRequest = { partial: true }\n    const endpoint = Endpoints.data[editor.editType].retrieve\n    console.debug(\"RetrieveRequest\", endpoint, request)\n    endpointPromise(endpoint, request).then((response: DataRetrieveResponse) => {\n      console.debug(\"RetrieveResponse\", endpoint, response)\n      const { described, error } = response\n      if (error) console.error(\"RetrieveResponse\", endpoint, error)\n      else setDescribed(original => {\n        const copy = [...original]\n        described.forEach(object => {\n          const { id, label } = object\n          const found = copy.find(object => object.id === id)\n          if (found || !isPopulatedString(label)) return\n          \n          copy.push(object as LabelAndId)\n        })\n        return copy\n      })\n    })\n  }, [servers, enabled])\n\n  if (described.length < 2) return null\n\n  const describedOptions = () => {\n    const { editType, mashMedia } = editor\n    const elements = [<optgroup key=\"group\" label={labelTranslate('open')}/>]\n    if (!mashMedia) return elements\n\n    const { id: editedId, label: editedLabel } = mashMedia\n    elements.push(...described.map(object => {\n      const { label: objectLabel, id } = object\n      const label = (id === editedId) ? editedLabel : objectLabel\n      const children = isPopulatedString(label) ? label : labelInterpolate('unlabeled', { type: editType }) \n      const optionProps = { children, value: id, key: id }\n      const option = <option {...optionProps} />\n      return option\n    }))\n\n    return elements\n  }\n\n  const { children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const selectOptions = {\n    key: \"mashMedia-select\",\n    onChange, disabled, children: describedOptions(), value: editedId\n  }\n  const viewProps = { ...rest, children: [child, <select {...selectOptions} />] }\n  return <View { ...viewProps } />\n}\n", "import React from 'react'\nimport { ApiServersResponse, JsonRecord, ServerType, StringSetter } from '@moviemasher/moviemasher.js'\n\nexport interface ApiContextInterface {\n  enabled: boolean\n  servers: ApiServersResponse\n  endpointPromise: (id: string, body?: JsonRecord) => Promise<any>\n}\n\nexport const ApiContextDefault: ApiContextInterface = {\n  enabled: false,\n  servers: {},\n  endpointPromise: () => Promise.resolve({})\n}\n\nexport const ApiContext = React.createContext(ApiContextDefault)\n", "import React from 'react'\nimport { \n  EmptyMethod, SelectedItems, SelectType, \n  StringSetter, DataGroup, TimeRange, Time\n} from '@moviemasher/moviemasher.js'\n\nexport type DataGroupBooleans = {\n  [index in DataGroup]?: boolean\n} \n\nexport interface SelectedInfo {\n  tweenDefined: DataGroupBooleans\n  tweenSelected: DataGroupBooleans\n  selectedType: SelectType\n  selectTypes: SelectType[]\n  timeRange?: TimeRange\n  onEdge?: boolean\n  nearStart?: boolean\n  time?: Time\n}\n\nexport type TweenSetter = (group: DataGroup, tweening: boolean) => void\nexport interface InspectorContextInterface {\n  actionCount: number\n  selectedInfo: SelectedInfo\n  selectedItems: SelectedItems\n  changeSelected: StringSetter\n  changeTweening: TweenSetter\n}\n\nexport const InspectorContextDefault: InspectorContextInterface = {\n  actionCount: 0,\n  selectedInfo: {\n    tweenDefined: {},\n    tweenSelected: {},\n    selectedType: SelectType.None,\n    selectTypes: [],\n  },\n  selectedItems: [],\n  changeSelected: EmptyMethod,\n  changeTweening: EmptyMethod,\n}\n\nexport const InspectorContext = React.createContext(InspectorContextDefault)\n", "import React from \"react\"\nimport { assertEndpoint, assertMashMedia, endpointFromUrl, endpointUrl, EventType, isMashMedia, urlForEndpoint } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\n\nexport function ViewControl(props: PropsAndChild): ReactResult {\n  const editor = useEditor()\n\n  const getDisabled = () => {\n    const { mashMedia } = editor\n    if (!isMashMedia(mashMedia)) return true\n\n    const { encodings } = mashMedia\n  \n    return !encodings.length\n  }\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => setDisabled(getDisabled())\n  useListeners({\n    [EventType.Render]: updateDisabled,\n    [EventType.Loaded]: updateDisabled\n  })\n\n  const { children, ...rest } = props\n\n  const onClick = () => {\n    if (disabled) return\n\n    const { mashMedia } = editor\n    assertMashMedia(mashMedia)\n    \n    const { encodings } = mashMedia\n    const [encoding] = encodings\n    const {endpoint} = encoding.request\n    assertEndpoint(endpoint)\n    \n    const url = endpointUrl(endpoint)\n    window.open(url)\n  }\n  const buttonOptions = { ...rest, onClick, disabled }\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n", "import { DataType } from '@moviemasher/moviemasher.js'\n\nimport { UnknownElement } from '../../../../declarations'\nimport { EmptyElement } from '../../../../Setup/Constants'\n\nexport type DataTypeElements = {\n  [key in DataType]: UnknownElement\n}\n\nexport const DataTypeInputs: DataTypeElements = {\n  [DataType.Boolean]: EmptyElement,\n  [DataType.ContainerId]: EmptyElement,\n  [DataType.ContentId]: EmptyElement,\n  [DataType.DefinitionId]: EmptyElement,\n  [DataType.FontId]: EmptyElement,\n  [DataType.Frame]: EmptyElement,\n  [DataType.Icon]: EmptyElement,\n  [DataType.Number]: EmptyElement,\n  [DataType.Percent]: EmptyElement,\n  [DataType.Rgb]: EmptyElement,\n  [DataType.String]: EmptyElement,\n  [DataType.Option]: EmptyElement,\n}\n", "import React from 'react'\nimport { UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { UnknownElement, ReactResult } from \"../declarations\"\n\nfunction ConstEmptyElementFunction(props: UnknownRecord): ReactResult { return null }\n\nexport const EmptyElement: UnknownElement = <ConstEmptyElementFunction key=\"empty\" />\n\n\nexport const TweenInputKey = 'tween-input-key'\n", "import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from './DataTypeInputs'\n\nexport function BooleanTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n  const inputProps: UnknownRecord = {\n    type: 'checkbox',\n    name,\n    checked: !!value,\n  }\n  if (changeHandler) {\n    inputProps.onChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n      changeHandler(name, event.target.checked)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n}\n\nDataTypeInputs[DataType.Boolean] = <BooleanTypeInput />\n", "import React from 'react'\nimport { \n  Scalar, PropertiedChangeHandler, Property, DataType, Time \n} from \"@moviemasher/moviemasher.js\"\n\nexport interface InputContextInterface {\n  property: Property\n  name: string\n  value: Scalar\n  defaultValue?: Scalar\n  changeHandler?: PropertiedChangeHandler\n  time?: Time\n}\n\nexport const InputContextDefault: InputContextInterface = {\n  value: '',\n  name: '',\n  property: { type: DataType.String, name: '', defaultValue: '' }\n}\n\nexport const InputContext = React.createContext(InputContextDefault)\n", "import React from 'react'\nimport {\n  assertMedia, isMediaType, assertPopulatedString, ClassDropping, DataType, \n  ContainerTypes, ContentTypes, assertTrue, eventStop, isContainerDefinition, MediaObject, isMediaObject, assertDefined\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../../../declarations'\nimport { View } from '../../../../Utilities/View'\nimport { InputContext } from '../InputContext'\nimport { DefinitionContext } from '../../../../Contexts/DefinitionContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { DragDefinitionObject, dragType, dragTypes, dropType, TransferTypeFiles } from '@moviemasher/client-core'\nimport { DefinitionItem } from '../../../DefinitionItem/DefinitionItem'\nimport { propsMediaTypes } from '../../../../Utilities/Props'\nimport { MasherContext } from '../../../Masher/MasherContext'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport interface DefinitionDropProps extends WithClassName, PropsAndChild {\n  type?: string\n  types?: string | string[]\n}\n\nexport function DefinitionDrop(props: DefinitionDropProps): ReactResult {\n  const { type, types, children, className, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const [isOver, setIsOver] = React.useState(false)\n  const inputContext = React.useContext(InputContext)\n  const editorContext = React.useContext(MasherContext)\n  const { drop, editor } = editorContext\n  assertDefined(editor)\n  const { changeHandler, value, name } = inputContext\n  assertTrue(changeHandler)\n  \n  const { media } = editor\n  const mediaTypes = propsMediaTypes(type, types)\n\n  const childNodes = (): React.ReactElement | null => {\n    if (!value) return null\n\n    assertPopulatedString(value)\n    const definition = media.fromId(value)\n    assertMedia(definition)\n\n    const definitionProps = { definition, key: definition.id }\n    const children = React.cloneElement(child, definitionProps)\n    const contextProps = { children, value: { definition } }\n    return <DefinitionContext.Provider {...contextProps} />\n  }\n\n  const dropAllowed = (event: DragEvent): boolean => {\n    const { dataTransfer } = event\n    assertTrue(dataTransfer)\n    \n    const types = dragTypes(dataTransfer)\n    // any file can be dropped - we filter out invalid ones later\n    if (types.includes(TransferTypeFiles)) return true\n\n    const draggingType = dragType(dataTransfer)\n    if (!isMediaType(draggingType)) return false\n\n    return mediaTypes.includes(draggingType)\n  }\n\n  const onDragLeave = () => { setIsOver(false) }\n\n  const onDragOver = (event: DragEvent) => {\n    const allowed = dropAllowed(event)\n    setIsOver(allowed)\n    if (allowed) event.preventDefault()\n  }\n\n  const onDrop = async (event: DragEvent) => {\n    eventStop(event)\n    setIsOver(false)\n    if (!dropAllowed(event)) return\n\n    const { dataTransfer } = event\n    assertTrue(dataTransfer)\n    \n    const types = dragTypes(dataTransfer)\n    // any file can be dropped\n    if (types.includes(TransferTypeFiles)) {\n      await drop(dataTransfer.files).then(definitions => {\n        if (!definitions.length) return\n\n        const container = name === \"containerId\"\n        const valid = container ? definitions.filter(isContainerDefinition) : definitions\n        const [definition] = valid\n        if (definition) {\n          assertTrue(media.installed(definition.id), `${definition.type} installed`)\n          // console.log(\"DefinitionDrop onDrop\", definition.type, definition.label)\n          changeHandler(name, definition.id)\n        }\n      })\n      return\n    }\n    const type = dropType(dataTransfer)!\n    const json = dataTransfer.getData(type)\n    const data: DragDefinitionObject = JSON.parse(json)\n    const { mediaObject } = data\n    if (isMediaObject(mediaObject)) {\n      const [definition] = media.define(mediaObject)\n      if (name === \"containerId\" && !isContainerDefinition(definition)) return\n\n      changeHandler(name, mediaObject.id!)\n    }\n  }\n\n  const calculateClassName = (): string => {\n    const classes = []\n    if (className) classes.push(className)\n    if (isOver) classes.push(ClassDropping)\n    return classes.join(' ')\n  }\n\n  const memoClassName = React.useMemo(calculateClassName, [isOver])\n\n  const viewProps = {\n    ...rest,\n    className: memoClassName,\n    children: childNodes(),\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    value: String(value),\n    key: `${name}-drop`,\n  }\n  return <View {...viewProps} />\n}\n\nDataTypeInputs[DataType.ContainerId] = (\n  <DefinitionDrop types={ContainerTypes} className='definition-drop'>\n    <DefinitionItem className='definition preview'/>\n  </DefinitionDrop>\n)\n\nDataTypeInputs[DataType.ContentId] = (\n  <DefinitionDrop types={ContentTypes} className='definition-drop'>\n    <DefinitionItem className='definition preview' />\n  </DefinitionDrop>\n)\n", "import React from 'react'\nimport { assertTrue, DataType, FontType } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function DefinitionSelect(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, value, name } = inputContext\n  const editor = useEditor()\n  const { media } = editor\n  assertTrue(changeHandler)\n  \n  const onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n\n  const options = media.byType(FontType).map(object => {\n    const { id, label } = object\n    const optionProps = { value: id, children: label, key: id }\n    return <option {...optionProps}/>\n  })\n\n  const selectProps = {\n    children: options,\n    name,\n    onChange,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.FontId] = <DefinitionSelect />\n", "import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { DataTypeInputs } from './DataTypeInputs'\nimport { InputContext } from '../InputContext'\nimport { MasherContext } from '../../../Masher/MasherContext'\n\nexport function IconTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const names = Object.keys(icons)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n\n  const options = names.map(id => {\n    const optionProps = { value: id, children: id, key: id }\n    return <option {...optionProps} />\n  })\n\n  const selectProps: UnknownRecord = {\n    children: options,\n    name,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  if (changeHandler) {\n    selectProps.onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n  } else selectProps.disabled = true\n\n  \n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.Icon] = <IconTypeInput />\n", "import React from 'react'\nimport { DataType, isDefined, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function NumericTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const editor = useEditor()\n  const { changeHandler, property, value, name, time } = inputContext\n  if (!property) return null\n\n  const { min, max, step } = property\n\n\n  const inputProps: UnknownRecord = {\n    type: 'number',\n    name,\n    value: String(value),\n  }\n  if (isDefined(min)) inputProps.min = min\n  if (isDefined(max)) inputProps.max = max\n  if (isDefined(step)) inputProps.step = step\n\n  if (changeHandler) {\n    inputProps.onChange = async (event:React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = event.target\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n\n}\n\nDataTypeInputs[DataType.Number] = <NumericTypeInput />\nDataTypeInputs[DataType.Frame] = <NumericTypeInput />\n", "import React from 'react'\nimport { DataType, isArray, isDefined, isNumber, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, SliderChangeHandler } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { Slider } from '../../../../Utilities/Slider'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\n\nexport function PercentTypeInput(): ReactResult {\n  const editor = useEditor()\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value: contextValue, name, time, defaultValue: contextDefault  } = inputContext\n  if (!property) return null\n\n  const { max, min, step, defaultValue: propertyDefault } = property\n  const value = isDefined(contextValue) ? contextValue : (isDefined(contextDefault) ? contextDefault : propertyDefault)\n  const sliderProps: UnknownRecord = {\n    value,\n    min: isNumber(min) ? min : 0.0,\n    max: isNumber(max) ? max : 1.0,\n    step: isNumber(step) ? step : 0.01,\n    name,\n  }\n  if (changeHandler) {\n    const onChange: SliderChangeHandler = async (_event, values) => {\n      const value = isArray(values) ? values[0] : values\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n    sliderProps.onChange = onChange\n  } else sliderProps.disabled = true\n\n  return <Slider className='slider' {...sliderProps} />\n}\n\nDataTypeInputs[DataType.Percent] = <PercentTypeInput />\n", "import React from \"react\"\nimport { WithClassName, ReactResult, SliderChangeHandler } from \"../declarations\";\n\nexport interface SliderProps extends WithClassName {\n  value? : number\n  step? : number\n  max? : number\n  min? : number\n  onChange? : SliderChangeHandler\n}\n\nexport function Slider(props: SliderProps): ReactResult {\n  const { className, onChange } = props\n  const options : WithClassName = { ...props }\n  const classes = ['slider']\n  if (className) classes.push(className)\n  options.className = classes.join(' ')\n  if (onChange) {\n    const handleChange = (event : React.ChangeEvent<HTMLInputElement>) => {\n      onChange(event, event.currentTarget.valueAsNumber)\n    }\n    options.onChange = handleChange\n  }\n\n  const input = <input type='range' { ...options } />\n  return input\n}\n", "import React from 'react'\nimport { DataType, isDefined, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\nimport { useEditor } from '../../../../Hooks/useEditor'\nimport { MasherContext } from '../../../Masher/MasherContext'\n\nexport function RgbTypeInput(): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const inputContext = React.useContext(InputContext)\n  const editor = useEditor()\n  const { changeHandler, property, value: contextValue, name, time, defaultValue: contextDefault } = inputContext\n  if (!property) return null\n\n  const { defaultValue: propertyDefault } = property\n\n  const value = isDefined(contextValue) ? contextValue : (isDefined(contextDefault) ? contextDefault : propertyDefault)\n  const colorProps: UnknownRecord = {\n    type: 'color', name, value: String(value),\n  }\n  if (changeHandler) {\n\n    colorProps.onChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n      const { value } = event.target\n      if (time) await editor.goToTime(time)\n      changeHandler(name, value)\n    }\n  } else colorProps.disabled = true\n  return <input {...colorProps} />\n}\n\nDataTypeInputs[DataType.Rgb] = <RgbTypeInput />\n", "import React from 'react'\nimport { DataType, UnknownRecord } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { InputContext } from '../InputContext'\nimport { DataTypeInputs } from '../DataTypeInputs/DataTypeInputs'\n\nexport function TextTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  if (!property) return null\n\n  const inputProps: UnknownRecord = {\n    name, type: 'text', value: String(value)\n  }\n  if (changeHandler) {\n    inputProps.onChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n      changeHandler(name, event.target.value)\n    }\n  } else inputProps.disabled = true\n  return <input {...inputProps} />\n}\n\nDataTypeInputs[DataType.String] = <TextTypeInput />\n", "import React from 'react'\nimport { DataType, UnknownRecord, assertPopulatedArray } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../../../declarations'\nimport { DataTypeInputs } from './DataTypeInputs'\nimport { InputContext } from '../InputContext'\n\nexport function OptionTypeInput(): ReactResult {\n  const inputContext = React.useContext(InputContext)\n  const { changeHandler, property, value, name } = inputContext\n  const { options } = property\n  assertPopulatedArray(options)\n\n  const ids = options.map(String)\n  const selectProps: UnknownRecord = {\n    children: ids.map(id => {\n    const optionProps = { value: id, children: id, key: id }\n    return <option {...optionProps} />\n  }),\n    name,\n    value: String(value),\n    key: `${name}-select`,\n  }\n  if (changeHandler) {\n    selectProps.onChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    changeHandler(name, event.target.value)\n  }\n  } else selectProps.disabled = true\n\n  \n  return <select {...selectProps} />\n}\n\nDataTypeInputs[DataType.Option] = <OptionTypeInput />\n", "import { DataGroup, SelectedItems, SelectType } from \"@moviemasher/moviemasher.js\";\nimport { PropsWithoutChild, UnknownElement, WithClassName } from \"../../../../declarations\"\nimport { EmptyElement } from '../../../../Setup/Constants'\nexport type DataGroupElements = {\n  [key in DataGroup]: UnknownElement\n}\n\nexport interface DataGroupProps extends PropsWithoutChild, WithClassName {\n  selectType?: SelectType\n  selectedItems?: SelectedItems\n}\n\nexport const DataGroupInputs: DataGroupElements = {\n  [DataGroup.Size]: EmptyElement,\n  [DataGroup.Point]: EmptyElement,\n  [DataGroup.Opacity]: EmptyElement,\n  [DataGroup.Color]: EmptyElement,\n  [DataGroup.Effects]: EmptyElement,\n  // [DataGroup.Controls]: EmptyElement,\n  [DataGroup.Timing]: EmptyElement,\n  // [DataGroup.Clicking]: EmptyElement,\n}", "import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, \n  DataGroup, selectedPropertyObject, PropertyTweenSuffix,\n  assertTimeRange, tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nexport function ColorGroupInput(props: DataGroupProps): ReactResult {  \n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const editor = useEditor()\n\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  \n  const { changeTweening, selectedInfo } = inspectorContext\n\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Color]\n  const endSelected = tweenSelected[DataGroup.Color]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Color, selectType)\n  const { color, [`color${PropertyTweenSuffix}`]: colorEnd } = byName \n  const colorProperty = endSelected ? colorEnd : color\n\n\n  const { property, changeHandler, value, name: nameOveride } = colorProperty\n  const { type, name: propertyName } = property\n  const name = nameOveride || propertyName\n  const input = DataTypeInputs[type] \n  const inputContext: InputContextInterface = { \n    property, value, name, changeHandler\n  }\n\n  // go to first/last frame if needed and tween value defined...\n  inputContext.time = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  // if we're editing tween value, but it's not defined yet...\n  if (endSelected) {\n    // tell input to use start value as default, rather than the property's...\n    inputContext.defaultValue = color.value\n  }\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Color, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {      \n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Color, true)\n    }\n  }\n  \n  const providerProps = { key: 'context', value: inputContext, children: input }\n\n  const viewProps = {\n    ...rest,\n    key: `inspector-${selectType}-${name}`,\n    children: [\n      icons.color, \n      <InputContext.Provider { ...providerProps } />, \n      <View className=\"start-end\" key='start-end'>\n        <View { ...startProps } />\n        <View { ...endProps } />\n      </View>\n    ]\n  }\n  return <View { ...viewProps } />\n}\n\nDataGroupInputs[DataGroup.Color] = <ColorGroupInput className=\"color tween row\" key=\"color-group-input\" />\n", "import { \n  ClassDropping, SelectedMovable, DataGroup, Movable, \n  assertPopulatedObject, assertDefined, ScalarRecord\n} from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport { PropsWithoutChild, ReactResult } from \"../../../../declarations\"\nimport { dropType } from '@moviemasher/client-core'\nimport { useEditor } from '../../../../Hooks/useEditor'\nimport { View } from '../../../../Utilities/View'\nimport { InspectorMovable, InspectorMovableProps } from '../../InspectorMovable'\nimport { InspectorProperties, InspectorPropertiesProps } from '../../InspectorProperties'\nimport { MasherContext } from '../../../Masher/MasherContext'\nimport { DataGroupInputs } from './DataGroupInputs'\nimport { Button } from '../../../../Utilities/Button'\n\nexport interface MovablesGroupInputProps extends PropsWithoutChild {\n  selectedMovable?: SelectedMovable\n  movableGenerator?: (object: ScalarRecord) => Movable\n  property: string\n}\n/**\n *\n * @children InspectorEffect\n */\nexport function MovablesGroupInput(props: MovablesGroupInputProps): ReactResult {\n  const { movableGenerator, selectedMovable, property, ...rest } = props\n  assertPopulatedObject(selectedMovable)\n\n  const editor = useEditor()\n  const masherContext = React.useContext(MasherContext)\n  const [isOver, setIsOver] = React.useState(false)\n  const [selected, setSelected] = React.useState<Movable | null>(null)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n  const memoClassName = React.useMemo((): string => {\n    const classes = ['list']\n    if (isOver) classes.push(ClassDropping)\n    return classes.join(' ')\n  }, [isOver])\n\n  const { icons } = masherContext\n  const { value, addHandler, removeHandler, moveHandler } = selectedMovable\n  const includedMovable = (selected && value.includes(selected)) ? selected : null\n  if (includedMovable !== selected) setSelected(includedMovable)\n\n  const dropIndex = (event: DragEvent): number => {\n    const { target } = event\n    if (target && target instanceof HTMLDivElement) {\n      const index = target.getAttribute('index')\n      if (index) return Number(index)\n    }\n    return value.length\n  }\n\n  const dropAllowed = (event: DragEvent): boolean => (\n    !!dropType(event.dataTransfer)?.startsWith(property)\n  )\n\n  const onDragLeave = () => { setIsOver(false) }\n\n  const onDragOver = (event: DragEvent) => {\n    const allowed = dropAllowed(event)\n    setIsOver(allowed)\n    if (allowed) event.preventDefault()\n  }\n\n  const onDrop = (event: DragEvent) => {\n    setIsOver(false)\n    if (!dropAllowed(event)) return\n\n    event.preventDefault()\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    const type = dropType(dataTransfer)!\n    const json = dataTransfer.getData(type)\n    const data = JSON.parse(json)\n    const { index } = data\n    const droppedIndex = dropIndex(event)\n\n    if (droppedIndex === index) return\n\n    assertDefined(includedMovable)\n    moveHandler(includedMovable, droppedIndex)\n  }\n\n  const onClick: React.MouseEventHandler = () => { setSelected(null) }\n\n  const childNodes = (): React.ReactElement[] => {\n    return value.map((movable, index) => {\n      const clipProps: InspectorMovableProps = {\n        key: movable.id,\n        selected: includedMovable, \n        select: setSelected,\n        movable,\n        index, removeHandler, property\n      }\n      return <InspectorMovable {...clipProps} />\n    })\n  }\n\n  const listViewProps = {\n    children: childNodes(),\n    ref,\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    onClick,\n    key: 'view',\n    className: memoClassName,\n  }\n\n  const removeProps = {\n    disabled: !includedMovable,\n    onClick: () => { removeHandler(includedMovable!) },\n    key: \"remove-button\",\n    children: icons.remove,\n  }\n  const viewChildren = [\n    icons[property],\n    <Button { ...removeProps } />,\n  ]\n  if (movableGenerator) {\n    const addProps = {\n      key: \"add-button\",\n      children: icons.add,\n      onClick: () => { addHandler(movableGenerator({})) }\n    }\n    viewChildren.push(<Button { ...addProps } />)\n  }\n\n  const iconsViewProps = {\n    className: 'icons',\n    children: viewChildren,\n    key: 'icons',\n  }\n\n  const viewProps = {\n    ...rest,\n    key: `${property}s-view`,\n    className: \"row\",\n    children: [\n    <View { ...iconsViewProps } />, \n    <View { ...listViewProps } />, \n  ],\n  }\n  const listView = <View { ...viewProps } />\n  if (!includedMovable) return listView\n\n  const inspectorProps: InspectorPropertiesProps = {\n    selectedItems: includedMovable.selectedItems(editor.actions),\n    key: 'movable-properties',\n  }\n  return <>\n    {listView}\n    <InspectorProperties { ...inspectorProps }/>\n  </>\n}\n\nDataGroupInputs[DataGroup.Effects] = <MovablesGroupInput property=\"effect\" key=\"effects-group-input\" />\n// DataGroupInputs[DataGroup.Controls] = <MovablesGroupInput movableGenerator={controlInstance} property=\"control\" key=\"controls-group-input\" />", "import React from 'react'\nimport { ClassSelected, IndexHandler, isPopulatedString, Movable } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, WithClassName } from '../../declarations'\nimport { DragSuffix } from '@moviemasher/client-core'\nimport { View } from '../../Utilities/View'\nimport { MasherContext } from '../Masher/MasherContext'\n\nexport interface InspectorMovableProps extends WithClassName {\n  movable: Movable\n  selected: Movable | null\n  select: (movable: Movable | null) => void\n  index: number \n  removeHandler: IndexHandler<Movable>\n  property: string\n}\n\n/**\n * @parents MovablesGroupInput\n */\nexport function InspectorMovable(props: InspectorMovableProps): ReactResult {\n  const { \n    property, className, removeHandler, index, movable, selected, select, ...rest \n  } = props\n  const isSelected = selected === movable\n\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const onMouseDown = () => { if (!isSelected) select(movable) }\n\n  const onDragEnd = (event: DragEvent) => {\n    const { dataTransfer } = event\n    if (!dataTransfer) return \n    \n    const { dropEffect } = dataTransfer\n    if (dropEffect === 'none') removeHandler(movable)\n  }\n\n  const onDragStart = (event: DragEvent) => {\n    if (!isSelected) onMouseDown()\n    const data = { index }\n    const json = JSON.stringify(data)\n    const { dataTransfer } = event\n\n    if (!dataTransfer) return \n\n    dataTransfer.effectAllowed = 'move'\n    dataTransfer.setData(`${property}${DragSuffix}`, json)\n  }\n\n  const classes = [className || 'movable']\n  if (isSelected) classes.push(ClassSelected)\n  const viewChildren = []\n\n\n  const label = movable.value('label')\n  const icon = movable.value('icon')\n  if (isPopulatedString(icon)) {\n    const iconElement = icons[icon]\n    if (iconElement) viewChildren.push(iconElement)\n  }\n  if (isPopulatedString(label)) viewChildren.push(label)\n  \n  const viewProps = {\n    ...rest,\n    children: viewChildren,\n    className: classes.join(' '),\n    onMouseDown, onDragStart, onDragEnd,\n    onClick: (event: React.MouseEvent) => event.stopPropagation(),\n    draggable: true,\n  }\n  return <View {...viewProps} />\n}\n", "import React from \"react\"\nimport { \n  SelectType, UnknownRecord, isSelectedProperty, SelectedItems, Time,\n  assertDataGroup\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { InspectorProperty, InspectorPropertyProps } from \"./InspectorProperty\"\nimport { InspectorContext } from \"./InspectorContext\"\nimport { DataGroupInputs } from \"./Inputs/DataGroupInputs/DataGroupInputs\"\nimport { View } from \"../../Utilities/View\"\nimport { MasherContext } from \"../Masher/MasherContext\"\n\nexport interface InspectorPropertiesProps extends PropsWithoutChild, WithClassName {\n  selectedItems?: SelectedItems\n  time?: Time\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorProperties(props: InspectorPropertiesProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedItems: propsItems } = props\n  const { selectedItems: inspectorItems } = inspectorContext\n  const selectedItems = propsItems || inspectorItems\n\n  const ungroupedInputs: React.ReactChild[] = []\n  const groupedInputs: React.ReactChild[] = []\n  const groups: UnknownRecord = {} \n  selectedItems.forEach(selectedItem => {\n    if (isSelectedProperty(selectedItem)) {\n      const { property, changeHandler, selectType, value, name: nameOveride } = selectedItem\n      const { name: propertyName, group } = property\n      // console.log(\"InspectorProperties\", selectType, nameOveride, propertyName, group)\n      if (group) {\n        const key = [group, selectType].join('-')\n        if (!groups[key]) {\n          groups[key] = true\n          groupedInputs.push(React.cloneElement(DataGroupInputs[group], { selectType, selectedItems }))\n        }\n        return\n      } \n      \n      const name = nameOveride || propertyName\n\n      const propertyProps: InspectorPropertyProps = {\n        key: `inspector-${selectType}-${name}`,\n        property, value, changeHandler, name, \n        ...props\n      }\n      const icon = icons[name]\n      const inspectorProperty = <InspectorProperty {...propertyProps} />\n      if (icon) {\n        const viewChildren = [inspectorProperty]\n        viewChildren.unshift(icon)\n        const viewProps = {\n          children: viewChildren,\n          className: \"row\",\n          key: `icon-${selectType}-${name}`,\n        }\n\n        ungroupedInputs.push(<View { ...viewProps } />)    \n      } else ungroupedInputs.push(inspectorProperty)    \n      \n    } else {\n      const { name } = selectedItem\n      assertDataGroup(name)\n\n      const groupProps = {\n        key: `inspector-${name}`,\n        selectedMovable: selectedItem,\n      }\n      groupedInputs.push(React.cloneElement(DataGroupInputs[name], groupProps))\n    }\n  })\n  return <>{ungroupedInputs}{groupedInputs}</>\n}\n", "import React from 'react'\nimport { \n  isDefined, PropertiedChangeHandler, Property, Scalar, Time \n} from \"@moviemasher/moviemasher.js\"\n\nimport { \n  PropsWithoutChild, ReactResult, WithClassName \n} from '../../declarations'\nimport { InputContext } from './Inputs/InputContext'\nimport { DataTypeInputs } from './Inputs/DataTypeInputs/DataTypeInputs'\n\nexport interface InspectorPropertyProps extends PropsWithoutChild, WithClassName {\n  property: Property\n  value: Scalar\n  defaultValue?: Scalar\n  changeHandler: PropertiedChangeHandler\n  name: string\n  time?: Time\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorProperty(props: InspectorPropertyProps): ReactResult {\n  const { \n    defaultValue: propsDefault, changeHandler, time, property, value, name\n  } = props\n  \n  const { type, defaultValue: propertyDefault } = property\n  const defaultValue = isDefined(propsDefault) ? propsDefault : propertyDefault\n  const inputContext = { \n    property, value, changeHandler, name, time, defaultValue\n  }\n  const contextProps = {\n    key: 'context', value: inputContext, children: DataTypeInputs[type] \n  }\n  return <InputContext.Provider {...contextProps} />\n}\n", "import { ClassButton, ClassDisabled, ClassSelected } from \"@moviemasher/moviemasher.js\"\nimport React from \"react\"\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../declarations\"\nimport { View } from \"./View\"\n\nexport interface ButtonProps extends PropsAndChildren, WithClassName {\n  onClick? : (event : React.MouseEvent ) => void\n  useView?: boolean\n  disabled?: boolean\n  selected?: boolean\n}\n\nexport function Button(props: ButtonProps): ReactResult {\n  const { useView, selected, ...rest } = props\n  if (!useView) return <button { ...rest } />\n\n  const { disabled, className, ...pruned } = rest\n  const classes = [ClassButton]\n  if (className) classes.push(className)\n  if (disabled) classes.push(ClassDisabled)\n  else if (selected) classes.push(ClassSelected)\n  const viewProps = {\n    ...pruned,\n    className: classes.join(' ')\n  }\n  return <View { ...viewProps } />\n}\n", "import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, DataGroup, \n  selectedPropertyObject, PropertyTweenSuffix, assertTimeRange,\n  tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\n\nexport function OpacityGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const { changeTweening, selectedInfo } = inspectorContext\n\n\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Opacity]\n  const endSelected = tweenSelected[DataGroup.Opacity]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Opacity, selectType)\n  const { opacity, [`opacity${PropertyTweenSuffix}`]: opacityEnd } = byName \n  const opacityProperty = endSelected ? opacityEnd : opacity\n\n  const { property, changeHandler, value, name: nameOveride } = opacityProperty\n\n  const { type, name: propertyName } = property\n  const name = nameOveride || propertyName\n  const input = DataTypeInputs[type] \n  const inputContext: InputContextInterface = { \n    property, value, name, changeHandler\n  }\n  // go to first/last frame if needed and tween value defined...\n  inputContext.time = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  // if we're editing tween value, but it's not defined yet...\n  if (endSelected) {\n    // tell input to use start value as default, rather than the property's...\n    inputContext.defaultValue = opacity.value\n  }\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Opacity, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Opacity, true)\n    }\n  }\n\n  const providerProps = { key: 'context', value: inputContext, children: input }\n\n  const viewProps = {\n    ...rest,\n    key: `inspector-${selectType}-${name}`, \n    children: [\n      icons.opacity, \n      <InputContext.Provider { ...providerProps } />, \n      <View className=\"start-end\" key='start-end'>\n        <View { ...startProps } />\n        <View { ...endProps } />\n      </View>\n    ]\n  }\n  return <View { ...viewProps } />\n}\n\nDataGroupInputs[DataGroup.Opacity] = <OpacityGroupInput className=\"opacity tween row\" key=\"opacity-group-input\" />\n", "import React from \"react\"\nimport { \n  assertSelectType, assertTime, ClassButton, ClassSelected, DataGroup, \n  isDefined, selectedPropertyObject, selectedPropertiesScalarObject, \n  PropertyTweenSuffix, ScalarRecord, assertTimeRange, tweenInputTime\n} from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, UnknownElement } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\n\nexport function PointGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  \n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType)\n\n \n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n\n  const { changeTweening, selectedInfo } = inspectorContext\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Point]\n  const endSelected = tweenSelected[DataGroup.Point]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Point, selectType)\n  const values: ScalarRecord = selectedPropertiesScalarObject(byName) \n  const { \n    offE, offW, offN, offS, x, y, \n    [`x${PropertyTweenSuffix}`]: xEnd,\n    [`y${PropertyTweenSuffix}`]: yEnd\n  } = byName \n\n  const xProperty = endSelected ? xEnd : x\n  const yProperty = endSelected ? yEnd : y\n\n  const { \n    offE: offEValue, offW: offWValue, offN: offNValue, offS: offSValue\n  } = values\n\n  const elementsByName: Record<string, UnknownElement> = {}\n  const inspectingProperties = [xProperty, yProperty]\n\n  \n  // go to first/last frame if needed and tween value defined...\n  const goTime = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  inspectingProperties.forEach(selectedProperty => {\n    if (!selectedProperty) {\n      console.error(\"PointInput\", xProperty, yProperty)\n      return\n    }\n    const { property, changeHandler, value, name: nameOveride } = selectedProperty\n    const { type, name: propertyName } = property\n    const name = nameOveride || propertyName\n    const baseName = name.replace(PropertyTweenSuffix, '')\n    const input = DataTypeInputs[type] \n    const key = `inspector-${selectType}-${name}`\n    const inputContext: InputContextInterface = { \n      property, value, name, changeHandler, time: goTime\n    }\n \n    // if we're editing tween value, but it's not defined yet...\n    if (endSelected) {\n      // tell input to use start value as default, rather than the property's...\n      inputContext.defaultValue = values[baseName] \n    }\n\n    const providerProps = { key, value: inputContext, children: input }\n    elementsByName[baseName] = <InputContext.Provider { ...providerProps } />  \n  })\n\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Point, false)\n    }\n  }\n\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Point, true)\n    }\n  }\n\n  const legendElements = [\n    icons.point, \n    <View className=\"start-end\" key={`${selectType}-point-start-end`}>\n      <View { ...startProps } />\n      <View { ...endProps } />\n    </View>\n  ]\n\n\n  const xElements = [<View key=\"horz-icon\" children={icons.horz} className={ClassButton} />]\n  const yElements = [<View key=\"vert-icon\" children={icons.vert} className={ClassButton} />]\n\n  if (offE) {\n    const lockOffEProps = { \n      key: \"lock-east\",\n      className: ClassButton,\n      children: offEValue ? icons.unlock : icons.lock, \n      onClick: () => { offE.changeHandler('offE', !offEValue) }\n    }\n    const lockOffE = <View { ...lockOffEProps } />\n\n    xElements.push(lockOffE)\n  }\n  xElements.push( elementsByName.x)\n  if (offW) {\n    const lockOffWProps = { \n      key: \"lock-west\",\n      className: ClassButton,\n      children: offWValue ? icons.unlock : icons.lock, \n      onClick: () => { offW.changeHandler('offW', !offWValue) }\n    }\n    const lockOffW = <View { ...lockOffWProps } />\n    xElements.push(lockOffW)\n  }\n  if (offN) {\n    const lockOffNProps = { \n      key: \"lock-north\",\n      className: ClassButton,\n      children: offNValue ? icons.unlock : icons.lock, \n      onClick: () => { offN.changeHandler('offN', !offNValue) }\n    }\n    const lockOffN = <View { ...lockOffNProps } />\n\n    yElements.push(lockOffN)\n  }\n  yElements.push(elementsByName.y)\n  if (offS) {\n    const lockOffSProps = { \n      key: \"lock-south\",\n      className: ClassButton,\n      children: offSValue ? icons.unlock : icons.lock, \n      onClick: () => { offS.changeHandler('offS', !offSValue) }\n    }\n    const lockOffS = <View { ...lockOffSProps } />\n    yElements.push(lockOffS)\n  }\n  const elements = [\n    <View key=\"x\" children={xElements} />, \n    <View key=\"y\" children={yElements} />\n  ]\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n\n}\n\nDataGroupInputs[DataGroup.Point] = <PointGroupInput key=\"point-input\" />\n", "import React from \"react\"\nimport { \n  selectedPropertiesScalarObject, ClassButton, assertString, ClassSelected, \n  DataGroup, Orientation, PropertyTweenSuffix, isOrientation, \n  selectedPropertyObject, ScalarRecord, assertSelectType, assertTime, assertTimeRange, tweenInputTime \n} from \"@moviemasher/moviemasher.js\"\n\n\nimport { PropsAndChild, ReactResult, UnknownElement } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../../Inspector/InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { DataTypeInputs } from \"../DataTypeInputs/DataTypeInputs\"\nimport { InputContext, InputContextInterface } from \"../InputContext\"\nimport { View } from \"../../../../Utilities/View\"\nimport { useEditor } from \"../../../../Hooks/useEditor\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nconst SizeInputOrientations: Record<Orientation, string> = {\n  [Orientation.H]: 'width', [Orientation.V]: 'height'\n}\n\nexport function SizeGroupInput(props: DataGroupProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const editor = useEditor()\n  const { selectType, selectedItems: propsItems, ...rest } = props\n  assertSelectType(selectType, 'selectType')\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const { selectedInfo, changeTweening } = inspectorContext\n  const { tweenDefined, tweenSelected, onEdge, time, nearStart, timeRange } = selectedInfo\n  assertTimeRange(timeRange)\n  assertTime(time)\n  \n  const endDefined = tweenDefined[DataGroup.Size]\n  const endSelected = tweenSelected[DataGroup.Size]\n\n  const byName = selectedPropertyObject(selectedItems, DataGroup.Size, selectType)\n  \n  const { \n    lock, width, height, \n    [`width${PropertyTweenSuffix}`]: widthEnd,\n    [`height${PropertyTweenSuffix}`]: heightEnd\n  } = byName \n  \n  const widthProperty = endSelected ? widthEnd : width\n  const heightProperty = endSelected ? heightEnd : height\n  const values: ScalarRecord = selectedPropertiesScalarObject(byName) \n\n  const { lock: lockValue } = values\n  assertString(lockValue, 'lockValue')\n    \n  const orientation = isOrientation(lockValue) ? lockValue as Orientation : undefined\n  \n  const elementsByName: Record<string, UnknownElement> = {}\n  const inspectingProperties = [widthProperty, heightProperty]\n\n  // go to first/last frame if needed and tween value defined...\n  const goTime = tweenInputTime(timeRange, onEdge, nearStart, endDefined, endSelected)\n\n  inspectingProperties.forEach(selectedProperty => {\n    \n    const { property, changeHandler, value, name: nameOveride } = selectedProperty\n    const { type, name: propertyName } = property\n    const name = nameOveride || propertyName\n    const baseName = name.replace(PropertyTweenSuffix, '')\n    const input = DataTypeInputs[type] \n    const key = `inspector-${selectType}-${name}`\n    const inputContext: InputContextInterface = { \n      property, value, name, time: goTime\n    }\n\n    // if we're editing tween value, but it's not defined yet...\n    if (endSelected) {\n      // tell input to use start value as default, rather than the property's...\n      inputContext.defaultValue = values[baseName] \n    }\n\n    if (!(orientation && baseName === SizeInputOrientations[orientation])) {\n      inputContext.changeHandler = changeHandler\n    }\n    const providerProps = { \n      key, value: inputContext, children: input\n    }\n    elementsByName[baseName] = <InputContext.Provider { ...providerProps } />  \n  })\n  const lockWidthProps = { \n    key: \"lock-width\",\n    className: ClassButton,\n    children: orientation === Orientation.H ? icons.lock : icons.unlock, \n    onClick: () => {\n      const value = orientation === Orientation.H ? \"\" : Orientation.H\n      lock.changeHandler('lock', value)\n    }\n  }\n  const lockWidth = <View { ...lockWidthProps } />\n  const lockHeightProps = { \n    key: \"lock-height\",\n    className: ClassButton,\n    children: orientation === Orientation.V ? icons.lock : icons.unlock, \n    onClick: () => {\n      const value = orientation === Orientation.V ? \"\" : Orientation.V\n      lock.changeHandler('lock', value)\n    }\n  }\n  const selectedButton = [ClassSelected, ClassButton].join(' ')\n  const lockHeight = <View { ...lockHeightProps } />\n  const startProps: PropsAndChild = {\n    children: icons.start,\n    className: endSelected ? ClassButton : selectedButton,\n    key: 'start',\n    onClick: () => {\n      editor.goToTime(timeRange.startTime)\n      changeTweening(DataGroup.Size, false)\n    }\n  }\n  const endProps: PropsAndChild = {\n    key: 'end',\n    className: endSelected ? selectedButton : ClassButton,\n    children: endDefined ? icons.end : icons.endUndefined,\n    onClick: () => {\n      editor.goToTime(timeRange.lastTime)\n      changeTweening(DataGroup.Size, true)\n    }\n  }\n  const legendElements = [\n    icons.size,\n    <View className=\"start-end\" key={`${selectType}-size-start-end`}>\n      <View { ...startProps } />\n      <View { ...endProps } />\n    </View>\n  ]\n  const widthElements = [\n    <View key=\"width-icon\" children={icons.width} className={ClassButton} />, \n    elementsByName.width, \n    lockWidth\n  ]\n  const heightElements = [\n    <View key=\"height-icon\" children={icons.height} className={ClassButton} />, \n    elementsByName.height, \n    lockHeight\n  ]\n  const elements = [\n    <View key=\"width\" children={widthElements} />, \n    <View key=\"height\" children={heightElements} />\n  ]\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n}\n\nDataGroupInputs[DataGroup.Size] = <SizeGroupInput key=\"size-group-input\" />\n", "import React from \"react\"\nimport { \n  assertSelectType, ClassButton, DataGroup, isPopulatedObject, selectedPropertyObject \n} from \"@moviemasher/moviemasher.js\"\n\nimport { ElementRecord, ReactResult } from \"../../../../declarations\"\nimport { InspectorContext } from \"../../InspectorContext\"\nimport { DataGroupInputs, DataGroupProps } from \"./DataGroupInputs\"\nimport { View } from \"../../../../Utilities/View\"\nimport { InspectorProperty, InspectorPropertyProps } from \"../../InspectorProperty\"\nimport { MasherContext } from \"../../../Masher/MasherContext\"\n\nexport interface OptionGroupInputProps extends DataGroupProps {\n  dataGroup: DataGroup\n}\n\nexport function OptionGroupInput(props: OptionGroupInputProps): ReactResult {\n  const masherContext = React.useContext(MasherContext)\n  const { icons } = masherContext\n  const { selectType, selectedItems: propsItems, dataGroup, ...rest } = props\n  assertSelectType(selectType)\n\n  const inspectorContext = React.useContext(InspectorContext)\n  const selectedItems = propsItems || inspectorContext.selectedItems\n  const byName = selectedPropertyObject(selectedItems, dataGroup, selectType)\n  const elementsByName: ElementRecord = Object.fromEntries(Object.entries(byName).map(([key, selectedProperty]) => {\n    const { property, changeHandler, selectType, value, name: nameOveride } = selectedProperty\n    const { name: propertyName } = property\n    const name = nameOveride || propertyName\n    const propertyProps: InspectorPropertyProps = {\n      key: `inspector-${selectType}-group-${name}`,\n      property, value, changeHandler, name,\n      ...props\n    }\n    return [key, <InspectorProperty {...propertyProps} />]\n  }))\n\n  const { [dataGroup]: input, ...otherElements } = elementsByName\n  const iconElement = icons[dataGroup]\n  if (!isPopulatedObject(otherElements)) {\n    const viewProps = {\n      key: dataGroup, children: [iconElement, input], className: 'row'\n    }\n    return <View { ...viewProps} />\n  }\n\n  const legendElements = [iconElement]\n  if (input) legendElements.push(input)\n  const elements = Object.entries(otherElements).map(([key, value]) => {\n    const icon = icons[key]\n    const children = [value]\n    if (icon) children.unshift(<View key={`${key}-icon`} children={icon} className={ClassButton} />)\n    const frameProps = { key: `${key}-view`, children }\n    return <View { ...frameProps } />\n  })\n\n\n  const fieldsetProps = { ...rest }\n  return <fieldset { ...fieldsetProps }>\n    <legend key=\"legend\"><View>{legendElements}</View></legend>\n    {elements}\n  </fieldset>\n}\n\n// [DataGroup.Timing, DataGroup.Clicking].forEach(dataGroup => {\n  const timingProps = { dataGroup: DataGroup.Timing, key: `${DataGroup.Timing}-group-input` }\n  DataGroupInputs[DataGroup.Timing] = <OptionGroupInput { ...timingProps } />\n// })\n", "import React from 'react'\nimport { \n  arraySet, assertSelectType, EventType, SelectedItems, SelectType, SelectTypes, \n  assertPositive, assertTrue, timeFromArgs, timeEqualizeRates, assertDataGroup,\n  isSelectedProperty, isDefined, PropertyTweenSuffix, DataGroup, \n  SelectedProperties \n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport {\n  DataGroupBooleans,\n  InspectorContext, InspectorContextDefault, InspectorContextInterface, \n  SelectedInfo\n} from './InspectorContext'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface InspectorProps extends PropsAndChildren, WithClassName {}\n\n/**\n * @parents Masher\n * @children InspectorContent\n */\nexport function Inspector(props: InspectorProps): ReactResult {\n  const editor = useEditor()\n  const [actionCount, setActionCount] = React.useState(() => 0)\n  const info = React.useRef<SelectedInfo>({ \n    tweenDefined: {}, tweenSelected: {}, \n    selectedType: SelectType.None, selectTypes: []\n  })\n  const [orderedTypes, setOrderedTypes] = React.useState<SelectType[]>(() => SelectTypes)\n  const [selectedItems, setSelectedItems] = React.useState<SelectedItems>(() => [])\n  const handleAction = () => { setActionCount(value => value + 1) }\n  const handleSelection = () => {\n    const { selection } = editor\n    const { selectTypes: types, clip, mash } = selection\n    const { current } = info\n    const { selectedType, selectTypes } = current\n    const bestType = orderedTypes.find(type => types.includes(type))\n    assertSelectType(bestType)\n\n    if (bestType !== selectedType) {\n      // console.log(\"setInfo selectedType\", selectedType, \"=>\", bestType, types)\n      current.selectedType = bestType\n    }\n    arraySet(selectTypes, types)\n    \n    const items = editor.selection.selectedItems([bestType])\n    const tweening: DataGroupBooleans = {}\n    if (clip && mash) {\n      const tweenItems = items.filter(item => {\n        if (!isSelectedProperty(item)) return \n\n        const { property, name } = item\n        const { tweenable, group } = property\n        if (!(tweenable && group && name)) return\n\n        return name.endsWith(PropertyTweenSuffix)\n      }) as SelectedProperties\n      // console.log(\"Inspector handleSelection\", tweenItems.length, \"tweenItem(s)\")\n      tweenItems.forEach(item => {\n        const { property, value } = item\n        const { group } = property\n        assertDataGroup(group)\n        tweening[group] = isDefined(value) \n      })  \n\n      if (tweenItems.length) {\n        const { time, quantize } = mash\n        const timeRange = clip.timeRange(quantize)\n        current.time = time\n        current.timeRange = timeRange\n        // console.log(\"Inspector tweening\", time, timeRange)\n        const frame = timeRange.frame + Math.round(timeRange.frames / 2)\n        const halfTime = timeFromArgs(frame, quantize)\n        const [midTime, timeScaled] = timeEqualizeRates(halfTime, time)\n        \n        current.nearStart = midTime.frame > timeScaled.frame\n        const edge = current.nearStart ? timeRange.startTime : timeRange.lastTime\n\n        current.onEdge = time.equalsTime(edge)\n      }\n    }\n    \n    current.tweenDefined = tweening\n\n    setSelectedItems(items)\n    handleAction()\n  }\n  \n  useListeners({\n    [EventType.Action]: handleAction,\n    [EventType.Selection]: handleSelection,\n  })\n\n  const changeSelected = React.useCallback((type: string) => {\n    assertSelectType(type)\n    setOrderedTypes(original => {\n      const index = original.indexOf(type) \n      assertPositive(index) \n      const types = [type]\n      if (index) types.push(...original.slice(0, index))\n      if (index < original.length - 1) types.push(...original.slice(index + 1))\n      assertTrue(types.length === original.length, 'type lengths match')\n      // console.log(\"setOrderedTypes\", original, \"=>\", types)\n      arraySet(original, types)\n      handleSelection()\n      return original\n    })\n    info.current.selectedType = type\n    \n    setSelectedItems(editor.selection.selectedItems([type]))\n  }, [])\n\n  const changeTweening = (group: DataGroup, tweening: boolean): void => {\n    info.current.tweenSelected[group] = tweening\n    handleSelection()\n  }\n  const inspectorContext: InspectorContextInterface = {\n    ...InspectorContextDefault,\n    actionCount, selectedItems,\n    changeSelected, \n    changeTweening, selectedInfo: info.current,\n  }\n\n  return (\n    <InspectorContext.Provider value={inspectorContext}>\n      <View {...props}/>\n    </InspectorContext.Provider>\n  )\n}\n", "import React from 'react'\n\nimport { PropsWithChildren, ReactResult } from '../../declarations'\nimport { View } from '../../Utilities/View'\n\n/**\n * @parents Inspector\n */\nexport function InspectorContent(props: PropsWithChildren): ReactResult {\n  return <View {...props} />\n}\n", "import React from 'react'\nimport { ClassButton, SelectType } from '@moviemasher/moviemasher.js'\n\nimport { PropsMethod, PropsWithoutChild } from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { InspectorProperties } from './InspectorProperties'\nimport { InspectorContent } from './InspectorContent'\nimport { InspectorProps } from './Inspector'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { InspectorPicked } from './InspectorPicked'\nimport { InspectorPicker } from './InspectorPicker'\nimport { EditorRemoveButton } from '../Controls/EditorRemoveButton'\nimport { Button } from '../../Utilities/Button'\nimport { EncodeControl } from '../Controls/EncodeControl'\nimport { ViewControl } from '../Controls/ViewControl'\nimport { View } from '../../Utilities/View'\nimport { labelInterpolate, labelTranslate } from '../../Utilities/Label'\nimport { EditorUndoButton } from '../Controls/EditorUndoButton'\nimport { EditorRedoButton } from '../Controls/EditorRedoButton'\n\nexport interface InspectorPropsDefault extends PanelOptions, PropsWithoutChild {}\n\nexport const InspectorDefaultProps: PropsMethod<InspectorPropsDefault, InspectorProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'inspector'\n  optionsStrict.props.className ||= 'panel inspector'\n\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.inspector} />,\n    <EditorUndoButton key='undo'>\n      <Button>{icons.undo}{labelTranslate('undo')}</Button>\n    </EditorUndoButton>,\n    <EditorRedoButton key='redo'>\n      <Button>{icons.redo}{labelTranslate('redo')}</Button>\n    </EditorRedoButton>,\n  ]\n \n  optionsStrict.footer.content ||= [\n    <InspectorPicker key=\"mash\" className={ClassButton} id=\"mash\">\n      {icons.mmTube}\n    </InspectorPicker>,\n    <InspectorPicker key=\"clip\" className={ClassButton} id=\"clip\">\n      {icons.clip}\n    </InspectorPicker>,\n    <InspectorPicker key=\"container\" className={ClassButton} id=\"container\">\n      {icons.container}\n    </InspectorPicker>,\n    <InspectorPicker key=\"content\" className={ClassButton} id=\"content\">\n      {icons.content}\n    </InspectorPicker>,\n ]\n\n  const contentChildren = [<InspectorProperties key=\"properties\" />]\n  const types = [SelectType.Clip, SelectType.Track]\n\n  contentChildren.push(\n    <InspectorPicked type=\"mash\" key=\"inspector-mash\">\n      <View>\n        <EncodeControl key='render-process'>\n          <Button>\n            {labelTranslate('render')} \n            {icons.render}\n          </Button>\n        </EncodeControl>\n        <ViewControl key='view-control'>\n          <Button>\n            {labelTranslate('view')} \n            {icons.view}\n          </Button>\n        </ViewControl>    \n      </View>  \n    </InspectorPicked>\n  )\n\n  types.forEach(type => {\n    contentChildren.push(\n      <InspectorPicked key={`${type}-delete`} type={type}>\n        <EditorRemoveButton type={type}>\n          <Button>\n            {labelInterpolate('delete', { type })}\n            {icons.remove}\n          </Button>\n        </EditorRemoveButton>\n      </InspectorPicked>\n    )\n  })\n  \n  optionsStrict.content.children ||= <>{contentChildren}</>\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <InspectorContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </InspectorContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n  return { ...optionsStrict.props, children }\n}\n", "import React from 'react'\nimport { assertPopulatedArray } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult } from '../../declarations'\nimport { InspectorContext } from './InspectorContext'\nimport { propsSelectTypes } from '../../Utilities/Props'\n\nexport interface InspectorPickedProps {\n  types?: string | string[]\n  type?: string\n  children: React.ReactNode\n}\n\n/**\n * @parents InspectorContent\n */\nexport function InspectorPicked(props: InspectorPickedProps): ReactResult {\n  const inspectorContext = React.useContext(InspectorContext)\n  const { selectedInfo } = inspectorContext\n  const { selectedType } = selectedInfo\n  const { type, types, children } = props\n  const selectTypes = propsSelectTypes(type, types)\n  assertPopulatedArray(selectTypes)\n  \n  if (!selectTypes.includes(selectedType)) return null\n\n  return <>{children}</>\n}\n", "import React from 'react'\nimport { \n  Identified,\n  assertSelectType, ClassSelected, isPopulatedString, SelectType \n} from '@moviemasher/moviemasher.js'\n\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../declarations'\nimport { View } from '../../Utilities/View'\nimport { InspectorContext } from './InspectorContext'\n\n\n\nexport interface InspectorPickerProps extends PropsAndChild, WithClassName, Identified {}\n/**\n * @parents Inspector\n */\n\nexport function InspectorPicker(props: InspectorPickerProps): ReactResult {\n  const { id, children, className } = props\n  assertSelectType(id)\n  \n  const inspectorContext = React.useContext(InspectorContext)\n  const { changeSelected, selectedInfo } = inspectorContext\n  const { selectTypes, selectedType} = selectedInfo\n\n  if (!selectTypes.includes(id)) return null\n\n  const onClick = () => { changeSelected(id) }\n\n  const classes: string[] = []\n  if (isPopulatedString(className)) classes.push(className)\n  if (selectedType === id) classes.push(ClassSelected)\n\n  const viewProps = { children, onClick, className: classes.join(' ') }\n  return <View {...viewProps} />\n}\n", "import {\n\n  assertObject, DataDefaultRequest, DataDefaultResponse, Editor, EditorIndex, \n  editorInstance, EditType, Endpoints, eventStop, EventType,\n  idGenerate, idTemporary, isClip, isEffect, isMashAndMediaObject, isMedia, \n  isMediaObject, MashType, Media, MediaObject, ScalarRecord, Size, \n  UnknownRecord, urlBaseInitialize, VideoType\n} from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport {\n  ActivityType,\n  Client, ClientDisabledArgs, clientInstance, ClientOptions, ClientReadOptions, ReadOperation\n} from \"@moviemasher/client-core\"\n\n\n\nimport { Draggable, dropFilesFromList } from '@moviemasher/client-core'\nimport { ApiContext } from '../../../client-react-deleted/ApiClient/ApiContext'\nimport { PropsWithChildren, PropsWithoutChild, ReactResult, ThemeIcons, WithClassName } from '../../declarations'\nimport { elementSetPreviewSize } from '../../Utilities/Element'\nimport { View } from '../../Utilities/View'\nimport { ActivityPropsDefault } from '../Activity/ActivityDefaultProps'\nimport { BrowserPropsDefault } from '../Browser/BrowserDefaultProps'\nimport { InspectorPropsDefault } from '../Inspector/InspectorDefaultProps'\nimport { PanelOptions } from '../Panel/Panel'\nimport { PlayerPropsDefault } from '../Player/PlayerDefaultProps'\nimport { TimelinePropsDefault } from '../Timeline/TimelineDefaultProps'\nimport { MasherContext, MasherContextInterface } from './MasherContext'\n\nexport type PanelOptionsOrFalse = PanelOptions | false\n\nexport interface UiOptions {\n  [index: string]: PanelOptionsOrFalse\n  browser: BrowserPropsDefault | false\n  player: PlayerPropsDefault | false\n  inspector: InspectorPropsDefault | false\n  timeline: TimelinePropsDefault | false\n  activity: ActivityPropsDefault | false\n}\n\nexport interface MasherOptions extends UnknownRecord, WithClassName {\n  previewSize?: Size\n  icons?: ThemeIcons\n  editType?: EditType\n  mashMedia?: DataDefaultResponse\n  clientOptions?: ClientOptions\n}\n\nexport interface EditorProps extends MasherOptions, PropsWithoutChild {\n  panels?: Partial<UiOptions>\n}\n\nexport interface MasherProps extends MasherOptions, PropsWithChildren {}\n\n/**\n * @parents ApiClient, Masher\n * @children Browser, Timeline, Inspector, Player, Composer\n * @returns provided children wrapped in a {@link View} and {@link MasherContext}\n */\nexport function Masher(props: MasherProps): ReactResult {\n  const {\n    editType = VideoType,\n    clientOptions = ClientDisabledArgs,\n    previewSize,\n    icons = {},\n    mashMedia,\n    ...rest\n  } = props\n\n  console.log(\"Masher\", editType, previewSize)\n  const clientRef = React.useRef<Client>(clientInstance(clientOptions))\n  const editorRef = React.useRef<Editor>(editorInstance({ editType }))\n  const editorIndexRef = React.useRef<EditorIndex>({})\n  const currentRef = React.useRef<ScalarRecord>({})\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const ref = React.useRef<HTMLDivElement>(null)\n\n\n  const apiContext = React.useContext(ApiContext)\n\n  const [requested, setRequested] = React.useState(false)\n  const [streaming, setStreaming] = React.useState(false)\n\n  const { current: client } = clientRef\n  const { current: editor } = editorRef\n  const { current: editorIndex } = editorIndexRef\n  const { current } = currentRef\n  const { endpointPromise, servers } = apiContext\n\n  React.useEffect(() => { \n    elementSetPreviewSize(ref.current, previewSize) \n  }, [previewSize])\n\n  const editorLoad = (object?: DataDefaultResponse) => {\n    const loadObject = object || mashMedia || { mash: { id: idTemporary(), media: [] } }\n    // const { previewSize: size = previewSize, ...rest } = loadObject\n    console.log('Masher.editorLoad', object, mashMedia, loadObject)\n\n    const { current: svg } = svgRef\n    // const { current: div } = ref\n    assertObject(svg, 'svg')\n    // if (sizeAboveZero(size)) elementSetPreviewSize(div, size)\n    \n    editor.svgElement = svg\n    const { mash } = loadObject\n    editor.load(mash)\n  }\n  React.useEffect(() => {\n    console.debug(\"Masher useEffect\", requested)\n\n    if (!client.enabled(ReadOperation)) {\n      editorLoad()\n      return\n    }\n    if (!requested) {\n      setRequested(true)\n\n      const request: DataDefaultRequest = {}\n\n      console.debug(\"DataDefaultRequest\", Endpoints.data[editType].default, request)\n\n      const promise = endpointPromise(Endpoints.data[editType].default, request)\n      promise.then((response: DataDefaultResponse) => {\n        console.debug(\"DataDefaultResponse\", Endpoints.data[editType].default, response)\n        const { previewSize: serverSize = previewSize } = response\n        console.log(\"Masher DataDefaultResponse\", servers.file?.prefix)\n        if (servers.file?.prefix) {\n          urlBaseInitialize(String(servers.file.prefix))\n          console.log(\"Masher DataDefaultResponse\", servers.file.prefix)\n        }\n        editorLoad(response)\n      })\n    }\n  }, [requested])\n\n  const dropFiles = (files: FileList, editorIndex?: EditorIndex): Promise<Media[]> => {\n    const fileInfos = dropFilesFromList(files, servers.file)\n    if (fileInfos.length) {\n      const errors: UnknownRecord[] = []\n      const validFiles: File[] = []\n      const { eventTarget } = editor\n      fileInfos.forEach(fileInfo => {\n        if (fileInfo instanceof File) validFiles.push(fileInfo)\n        else errors.push(fileInfo)\n      })\n\n      if (errors.length) {\n        errors.forEach(error => {\n          const id = idGenerate('activity-error')\n          const info = { id, type: ActivityType.Error, ...error }\n          eventTarget.emit(EventType.Active, info)\n        })\n      }\n      if (validFiles.length) return editor.addFiles(validFiles, editorIndex)\n    } else console.log('Masher.dropFiles no info')\n    return Promise.resolve([])\n  }\n\n  const dropMediaObject = (definitionObject: MediaObject, editorIndex?: EditorIndex): Promise<Media[]>  => {\n    // console.log(\"Masher onDrop DefinitionObject...\", definitionObject, editorIndex)\n    return editor.addMedia(definitionObject, editorIndex)\n  }\n\n  const drop = (draggable: Draggable, editorIndex?: EditorIndex): Promise<Media[]>  => {\n    console.log(\"Masher drop\", draggable, editorIndex)\n\n    \n    if (!draggable) return Promise.resolve([]) \n    console.log(\"Masher drop editorIndex = \", editorIndex)\n\n    if (isClip(draggable)) {\n      console.log(\"Masher drop Clip\")\n      return Promise.resolve([])\n    }\n    if (isEffect(draggable)) {\n      console.log(\"Masher drop Effect\")\n      return Promise.resolve([])\n    }\n    \n    if (isMediaObject(draggable)) {\n      console.log(\"Masher drop DefinitionObject\")\n      return dropMediaObject(draggable, editorIndex)\n      \n    }\n    if (isMashAndMediaObject(draggable)) {\n      console.log(\"Masher drop MashAndMediaObject\")\n      return Promise.resolve([])\n    }\n    return dropFiles(draggable, editorIndex).then(definitions => {\n      console.log(\"Masher.dropFiles\", definitions)\n      const [definition] = definitions\n      if (isMedia(definition)) changeDefinition(definition)\n      return definitions\n    })\n  }\n  \n\n\n  const changeDefinition = (media?: Media) => { current.mediaId = media?.id }\n  \n  const masherContext: MasherContextInterface = {\n    client, editor, \n    streaming, setStreaming,\n    current, editorIndex, drop,\n    changeDefinition, icons\n  }\n  const viewProps = { ...rest, onDrop: eventStop, ref }\n  return (\n    <MasherContext.Provider value={masherContext}>\n      <View { ...viewProps } />\n      <svg style={{ display: 'none' }} ref={svgRef} />\n    </MasherContext.Provider>\n  )\n}\n", "import { Size } from '@moviemasher/moviemasher.js'\n\nexport const elementSetPreviewSize = (current?: HTMLDivElement | null, size?: Size) => {\n  if (!(size && current))\n    return\n\n  const { width, height } = size\n  current.style.setProperty('--preview-width', `${width}px`)\n  current.style.setProperty('--preview-height', `${height}px`)\n}\n", "import React from 'react'\nimport { VideoType } from '@moviemasher/moviemasher.js'\nimport { Icons } from '@moviemasher/theme-default'\n\nimport { PropsMethod } from '../../declarations'\nimport { EditorProps, MasherProps } from './Masher'\nimport { Browser } from '../Browser/Browser'\nimport { BrowserDefaultProps } from '../Browser/BrowserDefaultProps'\nimport { InspectorDefaultProps } from '../Inspector/InspectorDefaultProps'\nimport { PlayerDefaultProps } from '../Player/PlayerDefaultProps'\nimport { TimelineDefaultProps } from '../Timeline/TimelineDefaultProps'\nimport { Inspector } from '../Inspector/Inspector'\nimport { Player } from '../Player/Player'\nimport { Timeline } from '../Timeline/Timeline'\nimport { ActivityDefaultProps } from '../Activity/ActivityDefaultProps'\nimport { Activity } from '../Activity/Activity'\nimport { Panels } from '../Panel/Panels'\n\nexport const MasherDefaultProps: PropsMethod<EditorProps, MasherProps> = function(options = {}) {\n  options.className ||= 'editor masher'\n  options.icons ||= Icons\n  const { panels = {}, ...rest } = options\n  const { \n    player = {}, \n    browser = {}, \n    timeline = {}, \n    inspector = {}, \n    activity = {},\n  } = panels\n  const masherChildren: JSX.Element[] = []\n\n  if (player) {\n    player.icons ||= options.icons\n    masherChildren.push(<Player { ...PlayerDefaultProps(player) } />)\n  }\n  if (browser) {\n    browser.icons ||= options.icons\n    masherChildren.push(<Browser { ...BrowserDefaultProps(browser) } />)\n  }\n  if (inspector || activity) {\n    const panelsChildren: JSX.Element[] = []\n    if (activity) {\n      activity.icons ||= options.icons\n      panelsChildren.push(<Activity { ...ActivityDefaultProps(activity) } />)\n    }   \n    if (inspector) {  \n      inspector.icons ||= options.icons\n      panelsChildren.push(<Inspector { ...InspectorDefaultProps(inspector) } />)\n    }\n    const panelsProps = {\n      children: panelsChildren, key: 'panels', className: 'panels'\n    }\n    masherChildren.push(<Panels { ...panelsProps } />)\n  }\n  if (timeline) {\n    timeline.icons ||= options.icons\n    masherChildren.push(<Timeline { ...TimelineDefaultProps(timeline) } />)\n  }\n\n\n  return {\n    className: 'editor masher', \n    ...rest, \n    editType: VideoType, \n    children: masherChildren\n  }\n}\n", "import React from 'react'\n\nimport { PropsMethod, PropsWithoutChild, WithClassName } from '../../declarations'\nimport { Button } from '../../Utilities/Button'\nimport { Bar } from '../../Utilities/Bar'\nimport { PlayerContent } from './PlayerContent'\nimport { PlayerButton } from './PlayerButton'\nimport { PlayerTimeControl } from './PlayerTimeControl'\nimport { PlayerPlaying } from './PlayerPlaying'\nimport { PlayerNotPlaying } from './PlayerNotPlaying'\nimport { PlayerProps } from './Player'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\n\nimport { ClassButton } from '@moviemasher/moviemasher.js'\nimport { PlayerTime } from './PlayerTime'\nimport { View } from '../../Utilities/View'\nimport { SaveControl } from '../Controls/SaveControl'\nimport { labelTranslate } from '../../Utilities/Label'\nimport { CreateEditedControl } from '../Controls/CreateEditedControl'\nimport { SelectEditedControl } from '../Controls/SelectEditedControl'\n\nexport interface PlayerPropsDefault extends PanelOptions, PropsWithoutChild, WithClassName {}\n\nexport const PlayerDefaultProps: PropsMethod<PlayerPropsDefault, PlayerProps> = function (props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'player'\n  optionsStrict.props.className ||= 'panel player'\n\n\n  optionsStrict.content.children ||= (\n    <PlayerContent {...optionsStrict.content.props}>\n      <View key=\"drop-box\" className=\"drop-box\" />\n    </PlayerContent>\n  )\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.app} />,\n    <SelectEditedControl key=\"select-mashMedia\" className=\"row\" children={icons.document} />,\n    <SaveControl key='save-process'>\n      <Button key=\"button\">\n        {labelTranslate('update')}\n        {icons.document}\n      </Button>\n    </SaveControl>,\n    <CreateEditedControl key=\"create-mashMedia\">\n      <Button>\n        {labelTranslate('create')} \n        {icons.document}\n      </Button>\n    </CreateEditedControl>\n   \n  ]\n  \n  optionsStrict.footer.content ||= [\n    <PlayerButton key='play-button' className={ClassButton}>\n      <PlayerPlaying key='playing'>{icons.pause}</PlayerPlaying>\n      <PlayerNotPlaying key='not-playing'>{icons.play}</PlayerNotPlaying>\n    </PlayerButton>,\n    <PlayerTimeControl key='time-slider'/>,\n    <PlayerTime key='time' className=\"time\" />,\n  ]\n\n  const children = <>\n    <Bar {...optionsStrict.header} />\n    {optionsStrict.content.children}\n    <Bar {...optionsStrict.footer} />\n  </>\n  return { ...optionsStrict.props, children }\n}\n", "import React from 'react'\nimport { \n  EventType, Rect, eventStop, isMediaType, rectRound,\n  ClassDropping, sizeAboveZero, UnknownRecord, assertMediaType, \n  rectCopy, EditorIndex, assertObject, SelectType, EmptyMethod, isMediaObject, \n} from '@moviemasher/moviemasher.js'\n\nimport {  \n  PropsWithChildren, ReactResult, WithClassName \n} from '../../declarations'\nimport { \n  assertDragDefinitionObject, dragData, dragType, dragTypes, TransferTypeFiles \n} from '@moviemasher/client-core'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { PlayerContext } from './PlayerContext'\n\nexport interface PlayerContentProps extends PropsWithChildren, WithClassName {}\nconst PlayerRefreshRate = 10\n\n/**\n * @parents Player\n */\nexport function PlayerContent(props: PlayerContentProps): ReactResult {\n  const { children, className, ...rest } = props\n  \n  const editor = useEditor()\n  const [rect, setRect] = React.useState<Rect>(() => (rectCopy(editor.rect)))\n  const svgRef = React.useRef<HTMLDivElement>(null)//SVGSVGElement\n  const viewRef = React.useRef<HTMLDivElement>(null)\n  const masherContext = React.useContext(MasherContext)\n  const [over, setOver] = React.useState(false)\n  const playerContext = React.useContext(PlayerContext)\n  const { disabled } = playerContext\n  const { drop } = masherContext\n  const watchingRef = React.useRef<UnknownRecord>({})\n  const { current: watching } = watchingRef\n\n  const handleResize = () => { \n    const { current } = viewRef\n    if (!current) return\n  \n    const rect = rectRound(current.getBoundingClientRect())\n    setRect(() => {\n      editor.rect = rect\n      return rectCopy(rect)\n    })\n  }\n\n  const [resizeObserver] = React.useState(new ResizeObserver(handleResize))\n\n  React.useEffect(() => {\n    const { current } = viewRef\n    if (current) resizeObserver.observe(current)\n    return () => { resizeObserver.disconnect() }\n  }, [])\n\n  const swapChildren = (elements: Element[]) => {\n    const { current } = svgRef\n    if (!current) return\n\n    current.replaceChildren(...elements)  \n  }\n\n  const requestItemsPromise = (): Promise<void> => {\n    const { redraw } = watching\n    delete watching.timeout \n    delete watching.redraw \n\n    return editor.previewItems(!disabled).then(svgs => {\n   \n      swapChildren(svgs)\n      if (redraw) handleDraw()\n    })\n  }\n\n  const requestItems = () => { requestItemsPromise().then(EmptyMethod) }\n\n  const handleDraw = () => { \n    const { current } = svgRef\n    const { rect } = editor\n    if (!(current && sizeAboveZero(rect))) return\n\n    if (watching.timeout) {\n      watching.redraw = true\n      return\n    }\n    watching.timeout = setTimeout(requestItems, PlayerRefreshRate)\n  }\n\n  useListeners({ [EventType.Draw]: handleDraw, [EventType.Selection]: handleDraw })\n\n  const dragValid = (dataTransfer?: DataTransfer | null): dataTransfer is DataTransfer => {\n    if (!dataTransfer) return false\n\n    const types = dragTypes(dataTransfer)\n    if (types.includes(TransferTypeFiles)) return true\n    \n    return isMediaType(dragType(dataTransfer))\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    const { dataTransfer } = event\n    if (!dragValid(dataTransfer)) return \n\n    const { mashMedia } = editor\n    assertObject(mashMedia, 'mashMedia')\n    const editorIndex: EditorIndex = {\n      clip: editor.time.scale(mashMedia.quantize).frame,\n      track: -1,\n    }\n    const types = dragTypes(dataTransfer)\n    if (types.includes(TransferTypeFiles)) {\n      drop(dataTransfer.files, editorIndex)\n    } else {\n      const type = dragType(dataTransfer)\n      assertMediaType(type)\n      const data = dragData(dataTransfer, type)\n      assertDragDefinitionObject(data)\n      const { mediaObject } = data\n      if (isMediaObject(mediaObject)) drop(mediaObject, editorIndex)\n    }\n  } \n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    setOver(dragValid(event.dataTransfer))\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n\n  const viewProps: UnknownRecord = {\n    ...rest, ref: viewRef, \n    className: classes.join(' '),\n    key: 'player-content', \n    onDragOver, onDrop, onDragLeave, \n    onPointerDown: () => { editor.selection.unset(SelectType.Clip) }\n  }\n\n  if (sizeAboveZero(rect)) {\n    const svgProps = { ref: svgRef, key: \"svg\", className: 'svgs' }\n    const nodes = [<div { ...svgProps } />]\n    if (children) {\n      const child = React.Children.only(children)\n      if (React.isValidElement(child)) nodes.push(child)\n    }\n    viewProps.children = nodes \n  } \n  return <View { ...viewProps}/>\n}\n", "import React from 'react'\nimport { BooleanSetter, EmptyMethod, NumberSetter } from '@moviemasher/moviemasher.js'\n\nexport interface PlayerContextInterface {\n  disabled?: boolean\n  paused: boolean,\n  changePaused: BooleanSetter\n  changeVolume: NumberSetter\n  volume: number\n}\n\nexport const PlayerContextDefault: PlayerContextInterface = {\n  paused: false,\n  changePaused: EmptyMethod,\n  changeVolume: EmptyMethod,\n  volume: 0,\n}\n\nexport const PlayerContext = React.createContext(PlayerContextDefault)\n", "import React from \"react\"\nimport { View } from \"../../Utilities/View\"\nimport { PlayerContext } from \"./PlayerContext\"\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\n\n/**\n *\n * @parents Player\n */\nexport function PlayerButton(props: PropsWithChildren): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  const { paused, changePaused: setPaused } = playerContext\n\n  const onClick = () => { setPaused(!paused) }\n\n  const viewProps = {\n    ...props, key: 'player-button', onClick,\n  }\n  return <View {...viewProps} />\n}\n", "import React from 'react'\nimport { EventType, isArray, timeFromArgs, TimeRange } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, SliderChangeHandler, WithClassName } from \"../../declarations\"\nimport { Slider } from '../../Utilities/Slider'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\n\nexport interface PlayerTimeControlProps extends PropsWithChildren, WithClassName { }\n\nexport function PlayerTimeControl(props: PlayerTimeControlProps): ReactResult {\n  const editor = useEditor()\n  const getTimeRange = () => editor.timeRange.timeRange\n  const [timeRange, setTimeRange] = React.useState<TimeRange>(getTimeRange)\n\n  const update = () => { setTimeRange(getTimeRange())}\n  useListeners({\n    [EventType.Time]: update,\n    [EventType.Duration]: update,\n  })\n \n  const onChange: SliderChangeHandler = (_event, values) => {\n    const number = isArray(values) ? values[0] : values\n    editor.time = timeFromArgs(number, timeRange.fps)\n  }\n\n  const sliderProps = {\n    value: timeRange.frame,\n    min: 0,\n    max: timeRange.frames,\n    step: 1,\n    onChange,\n    className: 'frame slider',\n    ...props\n  }\n  return <Slider {...sliderProps} />\n}\n", "import React from 'react'\n\nimport { PlayerContext } from './PlayerContext'\nimport { PropsAndChild, ReactResult } from '../../declarations'\n\n/**\n *\n * @group Player\n */\nexport function PlayerPlaying(props: PropsAndChild): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  if (playerContext.paused) return null\n\n  return props.children\n}\n", "import React from 'react'\nimport { PlayerContext } from './PlayerContext'\nimport { PropsAndChild, ReactResult } from '../../declarations'\n\n/**\n *\n * @group Player\n */\nexport function PlayerNotPlaying(props: PropsAndChild): ReactResult {\n  const playerContext = React.useContext(PlayerContext)\n  if (!playerContext.paused) return null\n\n  return props.children\n}\n", "import React from \"react\"\nimport { View } from \"../../Utilities/View\"\nimport { PropsWithoutChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { EventType, stringSeconds } from \"@moviemasher/moviemasher.js\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport interface PlayerTimeProps extends PropsWithoutChild, WithClassName {}\n\n/**\n *\n * @parents Editor\n */\nexport function PlayerTime(props: PlayerTimeProps): ReactResult {\n  const editor = useEditor()\n  const getTimeRange = () => editor.timeRange\n  const [timeRange, setTimeRange] = React.useState(getTimeRange)\n  const update = () => { setTimeRange(getTimeRange()) }\n\n  useListeners({\n    [EventType.Time]: update, [EventType.Duration]: update,\n  })\n\n  const { seconds, fps, lengthSeconds } = timeRange\n\n  const viewChildren = [\n    stringSeconds(seconds, fps, lengthSeconds), \"/\",\n    stringSeconds(lengthSeconds, fps, lengthSeconds),\n  ]\n\n  const viewProps = { ...props, key: 'player-time', children: viewChildren }\n\n  return <View {...viewProps} />\n}\n", "import React from 'react'\n\nimport {\n  PropsMethod, PropsWithoutChild, WithClassName\n} from '../../declarations'\nimport { Bar } from '../../Utilities/Bar'\nimport { TimelineScrubberElement } from './TimelineScrubberElement'\nimport { TimelineTrack } from './TimelineTrack'\nimport { TimelineSizer } from './TimelineSizer'\nimport { TimelineZoomer } from './TimelineZoomer'\nimport { TimelineTracks } from './TimelineTracks'\nimport { TimelineScrubber } from './TimelineScrubber'\nimport { TimelineContent } from './TimelineContent'\nimport { TimelineAddTrackControl } from './TimelineAddTrackControl'\n\nimport { TimelineProps } from './Timeline'\nimport { PanelOptions, panelOptionsStrict } from '../Panel/Panel'\nimport { TimelineTrackIcon } from './TimelineTrackIcon'\nimport { TimelineZoom } from './TimelineZoom'\nimport { TimelineAddClipControl } from './TimelineAddClipControl'\nimport { ClipItem } from '../ClipItem/ClipItem'\nimport { View } from '../../Utilities/View'\nimport { Button } from '../../Utilities/Button'\n\nexport interface TimelinePropsDefault extends PanelOptions, PropsWithoutChild, WithClassName {}\n\nexport const TimelineDefaultProps: PropsMethod<TimelinePropsDefault, TimelineProps> = function(props = {}) {\n  const optionsStrict = panelOptionsStrict(props)\n  const { icons } = optionsStrict\n  optionsStrict.props.key ||= 'timeline'\n  optionsStrict.props.className ||= 'panel timeline'\n\n  optionsStrict.header.content ||= [\n    <View key=\"panel-icon\" children={icons.timeline} />,\n  ]\n\n  optionsStrict.footer.content ||= [\n    <TimelineAddClipControl key='add-clip'>\n      <Button children={icons.add}/>\n    </TimelineAddClipControl>,\n    <TimelineAddTrackControl key='add-track'>\n      <Button children={[icons.add, icons.trackDense]}/>\n    </TimelineAddTrackControl>,\n    <TimelineZoom key=\"zoom-out\" zoom={0}>\n      <Button useView={true}>{icons.zoomLess}</Button>\n    </TimelineZoom>,\n    <TimelineZoomer key='zoomer'/>,\n    <TimelineZoom key=\"zoom-in\" zoom={1}>\n      <Button useView={true}>{icons.zoomMore}</Button>\n    </TimelineZoom>,\n  ]\n\n  optionsStrict.content.children ||= <>\n    <TimelineScrubber styleWidth={true} inactive={true} styleHeight={true} className='scrubber-bar'>\n      <TimelineScrubberElement className='scrubber-element-bar' />\n    </TimelineScrubber>\n    <TimelineScrubber styleWidth={true} className='scrubber-icon'>\n      <TimelineScrubberElement className='scrubber-element-icon'/>\n    </TimelineScrubber>\n    <TimelineTracks>\n      <TimelineTrackIcon className='track-icon' icons={icons} />\n      <TimelineTrack className='track'>\n        <ClipItem className='clip preview' />\n      </TimelineTrack>\n    </TimelineTracks>\n    <TimelineSizer className='drop-box' />\n  </>\n  \n  const children = <>\n    <Bar {...optionsStrict.header} />\n    <TimelineContent {...optionsStrict.content.props}>\n      {optionsStrict.content.children}\n    </TimelineContent>\n    <Bar {...optionsStrict.footer} />\n  </>\n\n  return { ...optionsStrict.props, children }\n}\n", "import React from \"react\"\n\nimport { PropsWithChildren, ReactResult } from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { MasherContext } from \"../Masher/MasherContext\"\nimport { View } from \"../../Utilities/View\"\nimport { pixelFromFrame } from \"@moviemasher/client-core\"\n\n/**\n * @parents TimelineScrubber\n */\nexport function TimelineScrubberElement(props: PropsWithChildren): ReactResult {\n  const timelineContext = React.useContext(TimelineContext)\n  const { scale, frame } = timelineContext\n  const calculateViewProps = () => {\n    const viewProps = { ...props, style: { left: pixelFromFrame(frame, scale) } }\n    return viewProps\n  }\n\n  const viewProps = React.useMemo(calculateViewProps, [frame, scale])\n  return <View {...viewProps} />\n}\n", "import React from 'react'\nimport { \n  assertMashMedia, assertTrack, assertTrue, ClassSelected, DroppingPosition, \n  eventStop, UnknownRecord \n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChild, ReactResult, WithClassName } from '../../declarations'\nimport { TimelineContext } from './TimelineContext'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { View } from '../../Utilities/View'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { droppingPositionClass } from '@moviemasher/client-core'\nimport { ClipContext } from '../ClipItem/ClipContext'\n\nexport interface TimelineTrackProps extends PropsAndChild, WithClassName {\n  label?: string\n}\n\n/**\n * @parents TimelineTracks\n */\nexport function TimelineTrack(props: TimelineTrackProps): ReactResult {\n  const editor = useEditor()\n  const { selection } = editor\n  const { mash } = selection\n \n  const { className: propsClassName, children, ...rest } = props\n  const child = React.Children.only(children)\n  assertTrue(React.isValidElement(child))\n\n  const trackContext = React.useContext(TrackContext)\n  const timelineContext = React.useContext(TimelineContext)\n  const { track } = trackContext\n\n\n  const {\n    dragTypeValid, onDragLeave, onDrop, droppingTrack, setDroppingTrack,\n    droppingPosition, setDroppingPosition, setDroppingClip, selectedTrack,\n  } = timelineContext\n\n  const calculatedClassName = (): string => {\n    const selected = track === selectedTrack\n    const classes: string[] = []\n    if (propsClassName) classes.push(propsClassName)\n    if (selected) classes.push(ClassSelected)\n    if (droppingTrack === track) classes.push(droppingPositionClass(droppingPosition))\n    return classes.join(' ')\n  }\n\n  const className = React.useMemo(\n    calculatedClassName, [droppingPosition, droppingTrack, selectedTrack]\n  )\n  if (!(mash && track)) return null\n\n  // assertMashMedia(mash)\n  // assertTrack(track)\n\n  const { clips, dense, index } = track\n  \n  const childNodes = (): React.ReactElement[] => {\n    let prevClipEnd = dense ? -1 : 0\n    const childProps = child.props\n    return clips.map(clip => {\n      const cloneProps = { ...childProps, key: clip.id }\n      const children = React.cloneElement(child, cloneProps)\n      const contextProps = { children, value: { clip, prevClipEnd }, key: clip.id }\n      const context = <ClipContext.Provider { ...contextProps } />\n      if (!dense) prevClipEnd = clip.frames + clip.frame\n      return context\n    })\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const definitionType = dragTypeValid(dataTransfer)\n    const pos = definitionType ? DroppingPosition.At : DroppingPosition.None\n    setDroppingClip()\n    setDroppingTrack(definitionType ? track : undefined)\n    setDroppingPosition(pos)\n  }\n\n  const viewProps:UnknownRecord = {\n    ...rest,\n    className,\n    children: childNodes(),\n    onDragLeave, onDragOver, onDrop,\n    key: `track-${index}`\n  }\n\n  return <View {...viewProps}/>\n}\n", "import React from 'react'\n\nimport { View } from \"../../Utilities/View\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { PropsWithChildren, ReactResult } from '../../declarations'\n\n/**\n * @parents Timeline\n */\nexport function TimelineSizer(props: PropsWithChildren): ReactResult {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const timelineContext = React.useContext(TimelineContext)\n  const handleResize = () => {\n    const { setRect } = timelineContext\n    const rect = ref.current!.getBoundingClientRect()\n    // console.log(\"handleResize width\", rect.width)\n    setRect(rect)\n  }\n\n  const [resizeObserver] = React.useState(new ResizeObserver(handleResize))\n\n  React.useEffect(() => {\n    const { current } = ref\n    if (current) resizeObserver.observe(current)\n    return () => { resizeObserver.disconnect() }\n  }, [ref.current])\n\n  const viewProps = { ...props, ref }\n  return <View {...viewProps}/>\n}\n", "import React from 'react'\nimport { ReactResult, SliderChangeHandler, PropsWithChildren } from \"../../declarations\"\nimport { TimelineContext } from './TimelineContext'\nimport { Slider } from '../../Utilities/Slider'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { EventType, isArray } from '@moviemasher/moviemasher.js'\nimport { useListeners } from '../../Hooks/useListeners'\n\n\n/**\n * @parents Timeline\n */\nexport function TimelineZoomer(props: PropsWithChildren): ReactResult {\n  const editor = useEditor()\n  const timelineContext = React.useContext(TimelineContext)\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n\n  const handleChange : SliderChangeHandler = (_event, values) => {\n    const number = isArray(values) ? values[0] : values\n    if (timelineContext.zoom !== number) timelineContext.setZoom(number)\n  }\n\n\n  const sliderProps = {\n    disabled,\n    key: 'time-slider',\n    value: timelineContext.zoom,\n    min: 0.0,\n    max: 1.0,\n    step: 0.01,\n    onChange: handleChange,\n    ...props\n  }\n  return <Slider className='zoom slider' {...sliderProps} />\n}\n", "import React from 'react'\nimport { EventType, arrayReversed, Tracks } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { TrackContext } from '../../Contexts/TrackContext'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface TimelineTracksProps extends PropsAndChildren {}\n\n/**\n * @parents TimelineContent\n * @children TimelineTrack\n */\nexport function TimelineTracks(props: TimelineTracksProps): ReactResult {\n  const [refresh, setRefreshed] = React.useState(() => 0)\n  const updateRefreshed = () => { setRefreshed(nonce => nonce + 1) }\n  const editor = useEditor()\n  useListeners({\n    [EventType.Loaded]: updateRefreshed, [EventType.Track]: updateRefreshed,\n  })\n\n  const { children } = props\n\n  const childNodes = (): React.ReactElement[] => {\n    const { mash } = editor.selection\n    if (!mash) return []\n\n    const { tracks } = mash\n    const reversedTracks = arrayReversed(tracks) as Tracks\n    return reversedTracks.map((track, i) => {\n      const { identifier, index } = track\n      const clones = React.Children.map(children, child => {\n        if (!React.isValidElement(child)) throw `TimelineTracks`\n\n        return React.cloneElement(child, { \n          key: `track-clone-${i}-${index}-${identifier}`\n        })\n      })\n      const contextProps = {\n        children: clones,\n        value: { track },\n        key: `track-context-${i}-${index}-${identifier}`\n      }\n      return <TrackContext.Provider {...contextProps} />\n    })\n  }\n\n  const viewChildren = React.useMemo(childNodes, [refresh])\n  \n  const fragmentProps = {\n    key: `track-content`,\n    children: viewChildren,\n  }\n  return <React.Fragment { ...fragmentProps } />\n}\n", "import React from \"react\"\nimport { \n  ClassDisabled, eventStop, EventType, pixelToFrame, \n  timeFromArgs, UnknownRecord \n} from \"@moviemasher/moviemasher.js\"\nimport { \n  pixelFromFrame\n} from \"@moviemasher/client-core\"\n\nimport { View } from \"../../Utilities/View\"\nimport { ReactResult, PropsWithChildren, WithClassName } from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { useEditor } from \"../../Hooks/useEditor\"\n\nexport interface TimelineScrubber extends PropsWithChildren, WithClassName {\n  inactive?: boolean\n  styleHeight?: boolean\n  styleWidth?: boolean\n}\n/**\n * @parents Timeline\n */\nexport function TimelineScrubber(props: TimelineScrubber): ReactResult {\n  const editor = useEditor()\n  const clientXRef = React.useRef<number>(-1)\n  const ref = React.useRef<HTMLDivElement>(null)\n  const timelineContext = React.useContext(TimelineContext)\n  const { frames,scale, rect } = timelineContext\n  const { className, inactive, styleHeight, styleWidth, ...rest } = props\n\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const addHandlers = () => {\n    const { window } = globalThis\n\n    const removeWindowHandlers = () => {\n      window.removeEventListener('pointermove', pointerMove)\n      window.removeEventListener('pointerup', pointerUp)\n    }\n\n    const pointerMove = (event: MouseEvent) => {\n      eventStop(event)\n      \n      const { current } = ref\n      if (!(current && editor.selection.mash)) return\n\n      const { clientX } = event\n      if (clientXRef.current === clientX) return\n\n      clientXRef.current = clientX\n\n      const rect = current.getBoundingClientRect()\n      const pixel = Math.max(0, Math.min(rect.width, clientX - rect.x))\n      const frame = pixelToFrame(pixel, scale, 'floor')\n      editor.time = timeFromArgs(frame, editor.selection.mash!.quantize)\n    }\n\n    const pointerUp = (event: MouseEvent) => {\n      pointerMove(event)\n      removeWindowHandlers()\n    }   \n\n    const pointerDown = (event: MouseEvent) => {\n      event.stopPropagation()\n      clientXRef.current = -1\n      window.addEventListener('pointermove', pointerMove)\n      window.addEventListener('pointerup', pointerUp)\n      pointerMove(event)\n    }    \n    return pointerDown\n  }\n\n  const { width, height } = rect\n  const calculateViewProps = () => {\n    const classes: string[] = []\n    if (className) classes.push(className)\n    if (disabled) classes.push(ClassDisabled)\n    const viewProps: UnknownRecord = { \n      ...rest, ref, className: classes.join(' ')\n    }\n    if (styleWidth || styleHeight) {\n      const style: UnknownRecord = {}\n      if (styleHeight) style.minHeight = height\n      if (styleWidth) {\n        const width = pixelFromFrame(frames, scale, 'ceil')\n        style.minWidth = Math.max(width, width)\n      }\n      viewProps.style = style\n    }\n    if (!(inactive || disabled)) viewProps.onPointerDown = addHandlers()\n    \n    return viewProps\n  }\n\n  const viewProps = React.useMemo(calculateViewProps, [frames, scale, width, height, disabled])\n  return <View {...viewProps} />\n}\n", "import React from 'react'\nimport { ClassDropping, DroppingPosition, eventStop, EventType, SelectType } from '@moviemasher/moviemasher.js'\n\nimport { PropsWithChildren, ReactResult, WithClassName } from '../../declarations'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { View } from '../../Utilities/View'\nimport { TimelineContext } from './TimelineContext'\n\nexport interface TimelineContentProps extends PropsWithChildren, WithClassName {}\n/**\n * @parents Timeline\n * @children TimelineTracks, TimelineScrubber, TimelineSizer\n */\nexport function TimelineContent(props: TimelineContentProps): ReactResult {\n  const { className, ...rest } = props\n\n  const timelineContext = React.useContext(TimelineContext)\n\n  const { \n    dragTypeValid, onDrop: contextDrop,\n    setScroll, setDroppingClip, setDroppingTrack, setDroppingPosition \n  } = timelineContext\n  const ref = React.useRef<HTMLDivElement>(null)\n  const [over, setOver] = React.useState(false)\n\n  const editor = useEditor()\n  const resetScroll = () => { ref.current?.scrollTo(0, 0) }\n  useListeners({ [EventType.Loaded]: resetScroll })\n\n  const onPointerDown = () => { \n    editor.selection.unset(SelectType.Track) \n  }\n  \n  const onScroll = () => {\n    const { current } = ref\n    if (!current) return\n\n    const { scrollLeft: x, scrollTop: y } = current\n    setScroll({ x, y })\n  }\n\n  const onDragLeave = (event: DragEvent): void => {\n    eventStop(event)\n    setOver(false)\n  }\n\n\n  const onDrop = (event: DragEvent): void => {\n    onDragLeave(event)\n    contextDrop(event)\n  }\n\n  const onDragOver = (event: DragEvent) => {\n    eventStop(event)\n\n    const { dataTransfer } = event\n    if (!dataTransfer) return\n\n    const valid = dragTypeValid(dataTransfer)\n    const pos = valid ? DroppingPosition.At : DroppingPosition.None\n    setDroppingClip()\n    setDroppingTrack()\n    setDroppingPosition(pos)\n    setOver(valid)\n  }\n\n  const classes: string[] = []\n  if (className) classes.push(className)\n  if (over) classes.push(ClassDropping)\n\n\n  const viewProps = { \n    className: classes.join(' '),\n    ...rest, onPointerDown, onScroll, onDragOver, onDragLeave, onDrop, ref \n  }\n  return <View {...viewProps} />\n}\n", "import React from \"react\"\nimport { EventType, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\n\nexport interface TimelineAddTrackControlProps extends PropsAndChild, WithClassName {}\n\nexport function TimelineAddTrackControl(props:TimelineAddTrackControlProps): ReactResult {\n  const editor = useEditor()\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const { children, ...rest } = props\n  const cloneProps: UnknownRecord = { \n    ...rest, \n    disabled,\n  }\n  cloneProps.onClick = () => { editor.addTrack() }\n  return React.cloneElement(React.Children.only(children), cloneProps)\n}\n", "import React from \"react\"\nimport { ClassSelected, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport {\n  PropsWithoutChild, ReactResult, WithClassName\n} from \"../../declarations\"\nimport { TimelineContext } from \"./TimelineContext\"\nimport { TrackContext } from \"../../Contexts/TrackContext\"\nimport { View } from \"../../Utilities/View\"\nimport { droppingPositionClass } from \"@moviemasher/client-core\"\n\nexport interface TimelineTrackIconProps extends PropsWithoutChild, WithClassName {\n  icons: UnknownRecord\n}\n/**\n * @parents TimelineTracks\n * @children TimelineTracks, TimelineScrubber, TimelineScrubberElement, TimelineSizer\n */\nexport function TimelineTrackIcon(props: TimelineTrackIconProps): ReactResult {\n  const { className: propsClassName, icons, ...rest } = props\n  const timelineContext = React.useContext(TimelineContext)\n  const trackContext = React.useContext(TrackContext)\n \n\n  const { droppingTrack, droppingPosition, selectedTrack } = timelineContext\n  const { track } = trackContext\n\n  const calculatedClassName = (): string => {\n    const classes: string[] = []\n    if (propsClassName) classes.push(propsClassName)\n    if (track === selectedTrack) classes.push(ClassSelected)\n    if (track === droppingTrack) classes.push(droppingPositionClass(droppingPosition))\n    return classes.join(' ')\n  }\n\n  const className = React.useMemo(\n    calculatedClassName, [droppingPosition, droppingTrack, selectedTrack]\n  )\n\n  if (!track) return null\n\n  const { dense, index } = track\n  \n  const children = dense ? icons.trackDense : icons.track\n\n  const viewProps = { \n    ...rest, className, children, key: `track-icon-${index}`\n  }\n  return <View {...viewProps} />\n}\n", "import React from 'react'\nimport { EventType } from '@moviemasher/moviemasher.js'\n\nimport { ReactResult, PropsAndChild, WithClassName } from \"../../declarations\"\nimport { TimelineContext } from './TimelineContext'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { useListeners } from '../../Hooks/useListeners'\n\nexport interface TimelineZoomProps extends PropsAndChild, WithClassName {\n  zoom: number\n}\n\n/**\n * @parents Timeline\n */\nexport function TimelineZoom(props: TimelineZoomProps): ReactResult {\n  const editor = useEditor()\n  const { zoom, children, ...rest } = props\n  const timelineContext = React.useContext(TimelineContext)\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n\n  const onClick = () => { timelineContext.setZoom(zoom) }\n\n  const buttonOptions = { ...rest, onClick, disabled }\n\n  return React.cloneElement(React.Children.only(children), buttonOptions)\n}\n", "import React from \"react\"\nimport { assertPopulatedString, DefaultContentId, EditorIndex, EventType, UnknownRecord } from \"@moviemasher/moviemasher.js\"\n\nimport { PropsAndChild, ReactResult, WithClassName } from \"../../declarations\"\nimport { useEditor } from \"../../Hooks/useEditor\"\nimport { useListeners } from \"../../Hooks/useListeners\"\nimport { MasherContext } from \"../Masher/MasherContext\"\n\nexport interface TimelineAddClipControlProps extends PropsAndChild, WithClassName {}\n\nexport function TimelineAddClipControl(props:TimelineAddClipControlProps): ReactResult {\n  const editor = useEditor()\n  const editorContext = React.useContext(MasherContext)\n  const { current, drop } = editorContext\n  const getDisabled = () => !editor.selection.mash\n  const [disabled, setDisabled] = React.useState(getDisabled)\n  const updateDisabled = () => { setDisabled(getDisabled())}\n  useListeners({ [EventType.Selection]: updateDisabled })\n  \n  const { children, ...rest } = props\n  const cloneProps: UnknownRecord = { \n    ...rest, \n    disabled,\n  }\n  cloneProps.onClick = () => { \n    const { selection, mashMedia } = editor\n    const { clip, track } = selection\n    const id = current.mediaId || DefaultContentId\n    assertPopulatedString(id)\n    const object = { id }\n    const editorIndex: EditorIndex = {\n      clip: 0, track: -1\n    }\n    if (clip && track) {\n      editorIndex.clip = track.dense ? track.clips.indexOf(clip) : clip.endFrame\n      editorIndex.track = track.index\n    } else {\n      editorIndex.clip = editor.time.scale(mashMedia!.quantize).frame\n    }\n    drop(object, editorIndex)\n  }\n  return React.cloneElement(React.Children.only(children), cloneProps)\n}\n", "import React from 'react'\nimport { EventType } from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from '../../declarations'\nimport { PlayerContext, PlayerContextInterface } from './PlayerContext'\nimport { useListeners } from '../../Hooks/useListeners'\nimport { View } from '../../Utilities/View'\nimport { useEditor } from '../../Hooks/useEditor'\n\nexport interface PlayerProps extends PropsAndChildren, WithClassName {\n  disabled?: boolean\n}\n\n/**\n * @parents Masher\n * @children PlayerContent, PlayerPlaying, PlayerNotPlaying, PlayerTimeControl, PlayerTime, PlayerButton\n */\nexport function Player(props: PlayerProps): ReactResult {\n  const { disabled, ...rest } = props\n  const editor = useEditor()\n  const [paused, setPaused] = React.useState(editor.paused)\n  const [volume, setVolume] = React.useState(editor.volume)\n  const updatePaused = () => { setPaused(editor.paused) }\n  useListeners({\n    [EventType.Pause]: updatePaused, [EventType.Play]: updatePaused,\n    [EventType.Volume]: () => { setVolume(editor.volume) },\n  })\n\n  const changePaused = (value: boolean) => { editor.paused = value }\n  const changeVolume = (value: number) => { editor.volume = value }\n\n  const playerContext: PlayerContextInterface = {\n    paused, disabled, volume, changePaused, changeVolume,\n  }\n  const contextProps = {\n    value: playerContext, children: <View { ...rest } />\n  }\n  return (\n    <PlayerContext.Provider { ...contextProps } />\n  )\n}\n", "import React from 'react'\nimport {\n  Rect, RectZero, Clip, DroppingPosition, EventType, Track, pixelToFrame, Clips, \n  Point, eventStop, EditorIndex, isPositive, assertClip, \n  EffectType, isMediaObject\n} from '@moviemasher/moviemasher.js'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { TimelineContext, TimelineContextInterface } from './TimelineContext'\nimport { useListeners } from '../../Hooks/useListeners'\nimport {\n  dragTypes, isDragOffsetObject, isDragDefinitionObject, isTransferType, \n  dragMediaType, TransferTypeFiles, dragData, pixelPerFrame\n} from '@moviemasher/client-core'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { MasherContext } from '../Masher/MasherContext'\nimport { View } from '../../Utilities/View'\n\n\n\nexport interface TimelineProps extends PropsAndChildren {}\nexport const TimelineDefaultZoom = 1.0\n/**\n * @parents Masher\n * @children TimelineContent, TimelineZoomer\n */\nexport function Timeline(props: TimelineProps): ReactResult {\n  const editor = useEditor()\n  const editorContext = React.useContext(MasherContext)\n  const { drop } = editorContext\n  const currentFrame = () => { return editor.selection.mash?.frame || 0 }\n  const currentFrames = () => { return editor.selection.mash?.frames || 0 }\n  const [frames, setFrames] = React.useState(currentFrames)\n  const [frame, setFrame] = React.useState(currentFrame)\n  const updateFrames = () => { setFrames(currentFrames()) }\n  const updateFrame = () => { setFrame(currentFrame()) }\n\n  const [droppingPosition, setDroppingPosition] = React.useState<DroppingPosition | number>(DroppingPosition.None)\n  const [droppingTrack, setDroppingTrack] = React.useState<Track | undefined>()\n  const [droppingClip, setDroppingClip] = React.useState<Clip | undefined>()\n  const [selectedTrack, setSelectedTrack] = React.useState<Track | undefined>()\n  const [refreshed, setRefreshed] = React.useState(0)\n  const [selectedClip, setSelectedClip] = React.useState<Clip | undefined>()\n  const [zoom, setZoom] = React.useState(TimelineDefaultZoom)\n  const [rect, setRect] = React.useState<Rect>(RectZero)\n  const [scroll, setScroll] = React.useState<Point>(RectZero)\n  const refresh = () => { setRefreshed(value => value + 1) }\n\n  useListeners({\n    [EventType.Loaded]: () => { setZoom(TimelineDefaultZoom) },\n    [EventType.Action]: refresh,\n    [EventType.Selection]: () => {\n      setSelectedClip(editor.selection.clip)\n      setSelectedTrack(editor.selection.track)\n    },\n    [EventType.Time]: updateFrame,\n    [EventType.Duration]: updateFrames,\n  })\n\n  const dragTypeValid = (dataTransfer: DataTransfer, clip?: Clip): boolean => {\n    const types = dragTypes(dataTransfer)\n    // any file can be dropped\n    if (types.includes(TransferTypeFiles)) return true\n\n    const type = types.find(isTransferType)\n    if (!type) return false\n\n    // anything can be dropped on a clip \n    if (clip || type.startsWith('clip')) return true\n\n    // effects can only be dropped on clips\n    const definitionType = dragMediaType(type)\n    return definitionType !== EffectType\n  }\n\n  const onDragLeave = (event: DragEvent) => {\n    eventStop(event)\n    setDroppingPosition(DroppingPosition.None)\n    setDroppingTrack(undefined)\n    setDroppingClip(undefined)\n  }\n\n  const frameToIndex = (frame: number, clips: Clips) => {\n    const { length } = clips\n    if (!length) return 0\n\n    const foundIndex = clips.findIndex(clip => frame < clip.frame + clip.frames)\n    if (foundIndex > -1) return foundIndex\n\n    return length\n  }\n\n  const dropIndex = (dense: boolean, clips: Clips) => {\n    if (!dense) return -1\n    if (!droppingClip) return 0\n\n    const clipIndex = clips.indexOf(droppingClip)\n    if (droppingPosition === DroppingPosition.After) return clipIndex + 1\n    return clipIndex\n  }\n\n  const onDrop = (event: DragEvent) => {\n    eventStop(event)\n    const { dataTransfer, clientX } = event \n    console.log(\"Timeline onDrop\", dataTransfer?.types)\n\n    if (!(dataTransfer && dragTypeValid(dataTransfer, droppingClip))) {\n      console.log(\"Timeline onDrop invalid\", dataTransfer?.types, !!droppingClip)\n      return\n    }\n    console.log(\"Timeline onDrop\", dataTransfer.types, droppingClip)\n\n    const types = dragTypes(dataTransfer)\n    const droppingFiles = types.includes(TransferTypeFiles)\n\n    const dense = !!droppingTrack?.dense\n    const index = droppingTrack ? droppingTrack.index : -1\n    const clips = droppingTrack?.clips || []\n\n    const data = droppingFiles ? {} : dragData(dataTransfer)\n    const draggingItem = !droppingFiles && isDragOffsetObject(data)\n    const offset = draggingItem ? data.offset : 0\n\n    let indexDrop = dropIndex(dense, clips)\n    if (!isPositive(indexDrop)) {\n      const offsetDrop = clientX - rect.x\n      const frame = pixelToFrame(Math.max(0, scroll.x + (offsetDrop - offset)), scale)\n      indexDrop = dense ? frameToIndex(frame, clips) : frame\n    }\n    const editorIndex: EditorIndex = { clip: indexDrop, track: index }\n\n    if (droppingFiles) {\n      drop(dataTransfer.files, editorIndex)\n    } else if (draggingItem) {\n      console.log(\"onDrop\", data)\n      if (isDragDefinitionObject(data)) {\n        const { mediaObject } = data\n        if (isMediaObject(mediaObject)) drop(mediaObject, editorIndex)\n        // console.log(\"Timeline onDrop definition\", definitionObject)\n        \n      } else {\n        const { clip } = editor.selection\n        assertClip(clip)\n        \n        // console.log(\"Timeline onDrop moving clip\", editorIndex, clip.content.definition.label)\n        editor.moveClip(clip, editorIndex)\n      }\n    } \n    onDragLeave(event)\n  }\n\n  const { width } = rect\n\n  const calculatedScale = (): number => {\n    const scale = width ? pixelPerFrame(frames, width, zoom) : 0\n    // console.log(\"calculatedScale\", scale, \"frames\", frames, \"width\", width, 'zoom', zoom)\n    return scale\n  }\n\n  const scale = React.useMemo(calculatedScale, [zoom, width, frames])\n\n  const timelineContext: TimelineContextInterface = {\n    scroll, setScroll,\n    scale, refreshed, refresh,\n    zoom, setZoom,\n    rect, setRect,\n    droppingTrack, setDroppingTrack,\n    droppingClip, setDroppingClip,\n    droppingPosition, setDroppingPosition,\n    onDragLeave, onDrop, dragTypeValid,\n    selectedClip, selectedTrack,\n    frame, frames, \n  }\n\n  const contextProps = {\n    children: <View {...props} />,\n    value: timelineContext\n  }\n  return <TimelineContext.Provider { ...contextProps } />\n}\n", "import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelsProps extends PropsAndChildren, WithClassName {}\n\nexport function Panels(props: PanelsProps): ReactResult {\n  return <View { ...props } />\n}\n", "import { MediaType } from '@moviemasher/moviemasher.js'\nimport React from 'react'\n\nimport { PropsAndChildren, ReactResult } from '../../declarations'\nimport { useEditor } from '../../Hooks/useEditor'\nimport { propsMediaTypes } from '../../Utilities/Props'\n\nexport interface MashingProps extends PropsAndChildren {\n  type?: string\n  types?: string | string[]\n}\n\n/**\n * @parents Masher\n */\nexport function Mashing(props: MashingProps): ReactResult {\n  const { type, types, children } = props\n  const mediaTypes = propsMediaTypes(type, types)\n  const editor = useEditor()\n  return mediaTypes.includes(editor.editType as MediaType) ? <>{children}</> : null\n}\n", "import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelContentProps extends PropsAndChildren, WithClassName { }\n\nexport function PanelContent(props: PanelContentProps): ReactResult {\n  const { children, className } = props\n  if (!children) return null\n  \n  const viewProps = { className, children }\n  return <View {...viewProps} />\n}\n\nexport type PanelContentElement = React.FunctionComponentElement<typeof PanelContent>\n", "import React from 'react'\n\nimport { PropsAndChildren, ReactResult, WithClassName } from \"../../declarations\"\nimport { View } from '../../Utilities/View'\n\nexport interface PanelHeadProps extends PropsAndChildren, WithClassName { }\n\nexport function PanelHead(props: PanelHeadProps): ReactResult {\n  const { children, className } = props\n  if (!children) return null\n  const viewProps = { className, children }\n  return <View {...viewProps} />\n}\n\nexport type PanelHeadElement = React.FunctionComponentElement<typeof PanelHead>\n", "\nexport const sessionGet = (key: string): string => {\n  return globalThis.window.sessionStorage.getItem(key) || ''\n}\n\nexport const sessionSet = (key: string, value: any) => {\n  globalThis.window.sessionStorage.setItem(key, String(value))\n}", "import React from \"react\"\nimport { PropsWithoutChild } from \"../declarations\"\n\n\nexport const VideoView = React.forwardRef<HTMLVideoElement, PropsWithoutChild>((props, ref) =>\n  <video { ...props } ref={ref} />\n)\n"],
  "mappings": "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",
  "names": ["React", "ClassCollapsed", "React", "View", "props", "ref", "React", "EmptyMethod", "isObject", "isPopulatedString", "errorThrow", "isString", "LabelRegex", "labelObjects", "labels", "labelLookup", "id", "object", "components", "component", "child", "labelTranslate", "labelInterpolate", "context", "translated", "matches", "match", "index", "search", "replace", "activityLabel", "info", "isObject", "label", "error", "type", "value", "labelInterpolate", "labelTranslate", "ActivityGroup", "ActivityGroups", "isActivityGroup", "isPopulatedString", "assertActivityGroup", "name", "errorThrow", "ActivityContextDefault", "EmptyMethod", "ActivityContext", "React", "React", "CollapseContextDefault", "CollapseContext", "React", "assertDefined", "EventType", "isEventType", "ActivityType", "React", "EmptyMethod", "MasherContextDefault", "MasherContext", "useEditorActivity", "masherContext", "React", "MasherContext", "editor", "assertDefined", "allActivitiesRef", "eventTarget", "getSnapshot", "handleEvent", "event", "type", "isEventType", "info", "id", "allActivities", "existing", "activity", "ActivityType", "externalStore", "callback", "EventType", "removeListener", "addListener", "Activity", "props", "initialPicked", "initialCollapsed", "className", "rest", "assertActivityGroup", "collapsed", "setCollapsed", "React", "label", "setLabel", "editor", "activity", "useEditorActivity", "picked", "setPicked", "activityContext", "collapseContext", "classes", "ClassCollapsed", "viewProps", "ActivityContext", "CollapseContext", "View", "React", "assertTrue", "React", "ActivityContentContextDefault", "ActivityContentContext", "React", "ActivityContent", "props", "activityContext", "React", "ActivityContext", "collapseContext", "CollapseContext", "collapsed", "activities", "children", "rest", "child", "assertTrue", "viewChildren", "activity", "contextProps", "ActivityContentContext", "viewProps", "View", "React", "ActivityItem", "props", "collapsedProp", "rest", "collapsed", "changeCollapsed", "React", "collapseContext", "CollapseContext", "View", "React", "ActivityLabel", "props", "collapseContext", "React", "CollapseContext", "collapsed", "activityContentContext", "ActivityContentContext", "infos", "firstInfo", "label", "info", "viewProps", "labels", "activityLabel", "i", "View", "React", "assertTrue", "Problems", "ActivityPicked", "props", "activityContext", "React", "ActivityContext", "id", "children", "assertActivityGroup", "picked", "child", "assertTrue", "Problems", "React", "assertTrue", "ClassSelected", "ActivityPicker", "props", "id", "className", "children", "rest", "assertActivityGroup", "child", "React", "assertTrue", "Problems", "activityContext", "ActivityContext", "picked", "pick", "classes", "ClassSelected", "viewProps", "React", "assertObject", "isAboveZero", "isPopulatedArray", "isPopulatedString", "isPositive", "ActivityProgress", "props", "activityContext", "React", "ActivityContext", "activityContentContext", "ActivityContentContext", "infos", "id", "elements", "totalSteps", "totalStep", "isPopulatedArray", "info", "step", "steps", "isPositive", "isAboveZero", "allActivities", "label", "isPopulatedString", "active", "activityObject", "assertObject", "progress", "progressProps", "viewProps", "View", "React", "ClassButton", "isUndefined", "React", "Bar", "props", "before", "content", "after", "viewProps", "children", "React", "View", "React", "assertPopulatedObject", "panelOptionsStrict", "options", "Panel", "props", "children", "className", "collapsedProp", "collapsed", "changeCollapsed", "React", "classes", "viewProps", "collapseContext", "CollapseContext", "View", "React", "PanelFoot", "props", "panelContext", "React", "CollapseContext", "collapsed", "before", "content", "after", "viewProps", "children", "View", "React", "CollapseControl", "props", "collapseContext", "React", "CollapseContext", "collapsed", "setCollapsed", "viewProps", "View", "React", "NotCollapsed", "props", "React", "CollapseContext", "React", "Collapsed", "props", "React", "CollapseContext", "ActivityDefaultProps", "props", "optionsStrict", "panelOptionsStrict", "icons", "isUndefined", "React", "View", "NotCollapsed", "Collapsed", "ActivityProgress", "CollapseControl", "ActivityItem", "ActivityLabel", "ActivityPicked", "ActivityPicker", "ClassButton", "children", "Bar", "ActivityContent", "PanelFoot", "React", "assertPopulatedString", "React", "EmptyMethod", "BrowserContextDefault", "BrowserContext", "React", "assertDefined", "EventType", "isEventType", "isPopulatedArray", "EditorDefinitionsEventAdded", "EventType", "EditorDefinitionsEventResize", "useEditorDefinitions", "types", "masherContext", "React", "MasherContext", "editor", "assertDefined", "media", "storeRef", "eventTarget", "snapshotInitialize", "lists", "type", "snapshotGet", "key", "handleEvent", "event", "isEventType", "detail", "definitionTypes", "isPopulatedArray", "current", "id", "externalStore", "callback", "removeListener", "addListener", "React", "assertDefined", "Endpoints", "ReadOperation", "React", "useClient", "React", "MasherContext", "React", "useEditor", "React", "MasherContext", "ApiDefinitionsEvent", "ApiDefinitionsDisabled", "ApiDefinitionsEmpty", "useApiDefinitions", "types", "client", "useClient", "ReadOperation", "editor", "useEditor", "assertDefined", "storeRef", "React", "eventTarget", "definitionsPromise", "key", "options", "response", "Endpoints", "error", "data", "snapshotInitialize", "currentKey", "snapshotGet", "array", "callback", "useDefinitions", "types", "editorDefinitions", "useEditorDefinitions", "definitions", "useApiDefinitions", "apiDefinition", "editorDefinition", "React", "useRefresh", "nonce", "setNonce", "Browser", "props", "initialPicked", "rest", "typesObject", "setTypesObject", "React", "editorContext", "MasherContext", "changeDefinition", "refresh", "useRefresh", "picked", "setPicked", "pick", "id", "assertPopulatedString", "definitions", "useDefinitions", "contextProps", "types", "original", "View", "BrowserContext", "React", "assertTrue", "ClassDropping", "eventStop", "React", "DefinitionContextDefault", "DefinitionContext", "dragTypes", "TransferTypeFiles", "BrowserContent", "props", "over", "setOver", "React", "className", "children", "rest", "editorContext", "MasherContext", "definitions", "BrowserContext", "drop", "dragValid", "dataTransfer", "onDrop", "event", "onDragLeave", "onDragOver", "eventStop", "classes", "ClassDropping", "child", "assertTrue", "childNodes", "childProps", "definition", "cloneProps", "contextProps", "DefinitionContext", "viewProps", "View", "React", "ClassSelected", "assertPopulatedString", "assertTrue", "isMediaType", "isSelectType", "isString", "propsStringArray", "string", "array", "properties", "property", "propsMediaTypes", "type", "types", "id", "strings", "propsSelectTypes", "BrowserPicker", "props", "children", "type", "types", "className", "id", "rest", "assertPopulatedString", "browserContext", "React", "BrowserContext", "pick", "picked", "addPicker", "removePicker", "classes", "ClassSelected", "propsMediaTypes", "viewProps", "child", "assertTrue", "Problems", "React", "ClassButton", "React", "BrowserControlId", "BrowserControl", "props", "children", "rest", "fileInput", "React", "client", "useClient", "editorContext", "MasherContext", "drop", "onChange", "event", "files", "inputProps", "input", "labelProps", "React", "assertTrue", "ClassSelected", "sizeAboveZero", "sizeCopy", "sizeScale", "DragSuffix", "React", "useDefinition", "React", "DefinitionContext", "sizeCeil", "DefinitionItem", "props", "className", "iconRatio", "rest", "ratio", "svgRef", "React", "viewRef", "browserContext", "BrowserContext", "refresh", "masherContext", "MasherContext", "editor", "changeDefinition", "current", "assertTrue", "media", "useDefinition", "id", "label", "updateRef", "rect", "sizeAboveZero", "scaled", "sizeCeil", "sizeScale", "sizeCopy", "element", "childNodes", "nodes", "View", "onPointerDown", "event", "onDragStart", "left", "clientX", "mediaObject", "data", "json", "dataTransfer", "DragSuffix", "calculateClassName", "classes", "ClassSelected", "viewProps", "BrowserDefaultProps", "props", "optionsStrict", "panelOptionsStrict", "icons", "React", "View", "BrowserPicker", "ClassButton", "BrowserControl", "DefinitionItem", "children", "Bar", "BrowserContent", "React", "ClipContextDefault", "ClipContext", "React", "DroppingPosition", "ClassSelected", "eventStop", "assertTrue", "sizeAboveZero", "svgPolygonElement", "EventType", "isAboveZero", "colorToRgb", "colorRgbDifference", "colorFromRgb", "svgPatternElement", "idGenerate", "svgDefsElement", "svgUrl", "svgSvgElement", "sizeCeil", "isEventType", "isObject", "pixelFromFrame", "DragSuffix", "droppingPositionClass", "React", "TrackContextDefault", "TrackContext", "React", "EmptyMethod", "RectZero", "TimelineContextDefault", "TimelineContext", "React", "useListeners", "events", "editor", "useEditor", "eventTarget", "handleEvent", "event", "type", "handler", "removeListeners", "eventType", "addListeners", "React", "ClipItemRefreshRate", "ClipItem", "props", "className", "rest", "svgRef", "React", "viewRef", "editor", "useEditor", "trackContext", "TrackContext", "timelineContext", "TimelineContext", "refresh", "nonce", "useRefresh", "watchingRef", "watching", "clipContext", "ClipContext", "droppingPosition", "droppingClip", "scale", "selectedClip", "onDrop", "dragTypeValid", "setDroppingPosition", "setDroppingClip", "setDroppingTrack", "onDragLeave", "track", "clip", "prevClipEnd", "assertTrue", "backgroundNode", "fill", "size", "spacing", "rgb", "colorToRgb", "differenceRgb", "colorRgbDifference", "forecolor", "colorFromRgb", "framePolygon", "svgPolygonElement", "spaceRect", "spacePolygon", "patternSize", "patternId", "idGenerate", "pattern", "svgPatternElement", "defsElement", "svgDefsElement", "patternedSize", "parentHeight", "patternedPolygon", "svgUrl", "svgSvgElement", "getParentHeight", "current", "parent", "setParentHeight", "label", "frame", "frames", "getCurrentWidth", "isAboveZero", "currentWidth", "pixelFromFrame", "width", "actionCallback", "event", "type", "isEventType", "EventType", "detail", "action", "target", "isObject", "useListeners", "frameSize", "rect", "sizeCeil", "clipSize", "height", "populateSvg", "redraw", "mashMedia", "allOk", "currentSize", "fullSize", "promise", "element", "latestWidth", "handleChange", "onPointerDown", "onDragEnd", "eventStop", "dataTransfer", "dropEffect", "onDragStart", "clientX", "left", "data", "json", "DragSuffix", "onDragOver", "definitionType", "pos", "DroppingPosition", "calculateClassName", "selected", "classes", "ClassSelected", "droppingPositionClass", "childNodes", "svgProps", "sizeAboveZero", "nodes", "style", "clipProps", "View", "React", "useClip", "React", "ClipContext", "React", "EventType", "MasherAction", "CreateEditedControl", "props", "children", "rest", "editor", "useEditor", "getDisabled", "MasherAction", "disabled", "setDisabled", "React", "updateDisabled", "useListeners", "EventType", "buttonOptions", "React", "MasherAction", "EventType", "EditorRedoButton", "props", "disabled", "setDisabled", "React", "editor", "useEditor", "useListeners", "EventType", "MasherAction", "children", "rest", "buttonOptions", "React", "EventType", "SelectType", "assertSelectType", "isEffect", "isClip", "isTrack", "EditorRemoveButton", "props", "children", "type", "rest", "selectType", "SelectType", "assertSelectType", "editor", "useEditor", "disabled", "setDisabled", "React", "useListeners", "EventType", "onClick", "selectable", "isEffect", "isClip", "isTrack", "child", "cloneProps", "React", "MasherAction", "EventType", "EditorUndoButton", "props", "editor", "useEditor", "disabled", "setDisabled", "React", "useListeners", "EventType", "MasherAction", "children", "rest", "buttonOptions", "React", "EventType", "MasherAction", "assertMashMedia", "EncodeOperation", "EncodeControl", "props", "client", "useClient", "children", "rest", "editor", "useEditor", "getDisabled", "MasherAction", "disabled", "setDisabled", "React", "updateDisabled", "useListeners", "EventType", "EncodeOperation", "buttonOptions", "mashMedia", "assertMashMedia", "React", "MasherAction", "EventType", "assertMashMedia", "WriteOperation", "SaveControl", "props", "editor", "useEditor", "client", "useClient", "getDisabled", "MasherAction", "disabled", "setDisabled", "React", "updateDisabled", "useListeners", "EventType", "children", "rest", "buttonOptions", "mashMedia", "assertMashMedia", "React", "Endpoints", "EventType", "MasherAction", "ServerType", "isEventType", "isSelectType", "assertObject", "isPopulatedString", "isPositive", "assertTrue", "React", "ApiContextDefault", "ApiContext", "React", "EmptyMethod", "SelectType", "InspectorContextDefault", "InspectorContext", "SelectEditedControl", "props", "editor", "useEditor", "requested", "setRequested", "React", "described", "setDescribed", "editedId", "setEditedId", "apiContext", "ApiContext", "inspectorContext", "InspectorContext", "selectedInfo", "selectedType", "editedLabel", "setEditedLabel", "getDisabled", "MasherAction", "disabled", "setDisabled", "enabled", "servers", "endpointPromise", "updateDisabled", "handleEdited", "event", "type", "isEventType", "isSelectType", "mashMedia", "assertObject", "id", "label", "original", "copy", "object", "isPopulatedString", "index", "isPositive", "handleAction", "useListeners", "EventType", "onChange", "selectedIndex", "request", "editType", "endpoint", "Endpoints", "response", "error", "mash", "ServerType", "describedOptions", "elements", "labelTranslate", "objectLabel", "optionProps", "labelInterpolate", "children", "rest", "child", "assertTrue", "selectOptions", "viewProps", "View", "React", "assertEndpoint", "assertMashMedia", "endpointUrl", "EventType", "isMashMedia", "ViewControl", "props", "editor", "useEditor", "getDisabled", "mashMedia", "isMashMedia", "encodings", "disabled", "setDisabled", "React", "updateDisabled", "useListeners", "EventType", "children", "rest", "buttonOptions", "assertMashMedia", "encoding", "endpoint", "assertEndpoint", "url", "endpointUrl", "DataType", "React", "ConstEmptyElementFunction", "props", "EmptyElement", "TweenInputKey", "DataTypeInputs", "DataType", "EmptyElement", "React", "DataType", "React", "DataType", "InputContextDefault", "InputContext", "BooleanTypeInput", "inputContext", "React", "InputContext", "changeHandler", "property", "value", "name", "inputProps", "event", "DataTypeInputs", "DataType", "React", "assertMedia", "isMediaType", "assertPopulatedString", "ClassDropping", "DataType", "ContainerTypes", "ContentTypes", "assertTrue", "eventStop", "isContainerDefinition", "isMediaObject", "assertDefined", "dragType", "dragTypes", "dropType", "TransferTypeFiles", "DefinitionDrop", "props", "type", "types", "children", "className", "rest", "child", "React", "assertTrue", "isOver", "setIsOver", "inputContext", "InputContext", "editorContext", "MasherContext", "drop", "editor", "assertDefined", "changeHandler", "value", "name", "media", "mediaTypes", "propsMediaTypes", "childNodes", "assertPopulatedString", "definition", "assertMedia", "definitionProps", "contextProps", "DefinitionContext", "dropAllowed", "event", "dataTransfer", "dragTypes", "TransferTypeFiles", "draggingType", "dragType", "isMediaType", "onDragLeave", "onDragOver", "allowed", "onDrop", "eventStop", "definitions", "valid", "isContainerDefinition", "dropType", "json", "data", "mediaObject", "isMediaObject", "calculateClassName", "classes", "ClassDropping", "memoClassName", "viewProps", "View", "DataTypeInputs", "DataType", "ContainerTypes", "DefinitionItem", "ContentTypes", "React", "assertTrue", "DataType", "FontType", "DefinitionSelect", "inputContext", "React", "InputContext", "changeHandler", "value", "name", "editor", "useEditor", "media", "assertTrue", "onChange", "event", "selectProps", "FontType", "object", "id", "label", "DataTypeInputs", "DataType", "React", "DataType", "IconTypeInput", "inputContext", "React", "InputContext", "masherContext", "MasherContext", "icons", "names", "changeHandler", "property", "value", "name", "selectProps", "id", "event", "DataTypeInputs", "DataType", "React", "DataType", "isDefined", "NumericTypeInput", "inputContext", "React", "InputContext", "editor", "useEditor", "changeHandler", "property", "value", "name", "time", "min", "max", "step", "inputProps", "isDefined", "event", "DataTypeInputs", "DataType", "React", "DataType", "isArray", "isDefined", "isNumber", "React", "Slider", "props", "className", "onChange", "options", "classes", "handleChange", "event", "PercentTypeInput", "editor", "useEditor", "inputContext", "React", "InputContext", "changeHandler", "property", "contextValue", "name", "time", "contextDefault", "max", "min", "step", "propertyDefault", "sliderProps", "isDefined", "isNumber", "onChange", "_event", "values", "value", "isArray", "Slider", "DataTypeInputs", "DataType", "React", "DataType", "isDefined", "RgbTypeInput", "masherContext", "React", "MasherContext", "icons", "inputContext", "InputContext", "editor", "useEditor", "changeHandler", "property", "contextValue", "name", "time", "contextDefault", "propertyDefault", "value", "isDefined", "colorProps", "event", "DataTypeInputs", "DataType", "React", "DataType", "TextTypeInput", "inputContext", "React", "InputContext", "changeHandler", "property", "value", "name", "inputProps", "event", "DataTypeInputs", "DataType", "React", "DataType", "assertPopulatedArray", "OptionTypeInput", "inputContext", "React", "InputContext", "changeHandler", "property", "value", "name", "options", "assertPopulatedArray", "selectProps", "id", "event", "DataTypeInputs", "DataType", "DataGroup", "DataGroupInputs", "DataGroup", "EmptyElement", "React", "assertSelectType", "assertTime", "ClassButton", "ClassSelected", "DataGroup", "selectedPropertyObject", "PropertyTweenSuffix", "assertTimeRange", "tweenInputTime", "ColorGroupInput", "props", "masherContext", "React", "MasherContext", "icons", "editor", "useEditor", "selectType", "propsItems", "rest", "assertSelectType", "inspectorContext", "InspectorContext", "selectedItems", "changeTweening", "selectedInfo", "tweenDefined", "tweenSelected", "onEdge", "time", "nearStart", "timeRange", "assertTimeRange", "assertTime", "endDefined", "DataGroup", "endSelected", "byName", "selectedPropertyObject", "color", "PropertyTweenSuffix", "colorEnd", "colorProperty", "property", "changeHandler", "value", "nameOveride", "type", "propertyName", "name", "input", "DataTypeInputs", "inputContext", "tweenInputTime", "selectedButton", "ClassSelected", "ClassButton", "startProps", "endProps", "providerProps", "viewProps", "InputContext", "View", "DataGroupInputs", "ClassDropping", "DataGroup", "assertPopulatedObject", "assertDefined", "React", "dropType", "React", "ClassSelected", "isPopulatedString", "DragSuffix", "InspectorMovable", "props", "property", "className", "removeHandler", "index", "movable", "selected", "select", "rest", "isSelected", "masherContext", "React", "MasherContext", "icons", "onMouseDown", "onDragEnd", "event", "dataTransfer", "dropEffect", "onDragStart", "json", "DragSuffix", "classes", "ClassSelected", "viewChildren", "label", "icon", "isPopulatedString", "iconElement", "viewProps", "View", "React", "isSelectedProperty", "assertDataGroup", "React", "isDefined", "InspectorProperty", "props", "propsDefault", "changeHandler", "time", "property", "value", "name", "type", "propertyDefault", "defaultValue", "isDefined", "contextProps", "DataTypeInputs", "React", "InputContext", "InspectorProperties", "props", "masherContext", "React", "MasherContext", "icons", "inspectorContext", "InspectorContext", "propsItems", "inspectorItems", "selectedItems", "ungroupedInputs", "groupedInputs", "groups", "selectedItem", "isSelectedProperty", "property", "changeHandler", "selectType", "value", "nameOveride", "propertyName", "group", "key", "DataGroupInputs", "name", "propertyProps", "icon", "inspectorProperty", "InspectorProperty", "viewChildren", "viewProps", "View", "assertDataGroup", "groupProps", "ClassButton", "ClassDisabled", "ClassSelected", "React", "Button", "props", "useView", "selected", "rest", "React", "disabled", "className", "pruned", "classes", "ClassButton", "ClassDisabled", "ClassSelected", "viewProps", "View", "MovablesGroupInput", "props", "movableGenerator", "selectedMovable", "property", "rest", "assertPopulatedObject", "editor", "useEditor", "masherContext", "React", "MasherContext", "isOver", "setIsOver", "selected", "setSelected", "ref", "memoClassName", "classes", "ClassDropping", "icons", "value", "addHandler", "removeHandler", "moveHandler", "includedMovable", "dropIndex", "event", "target", "index", "dropAllowed", "dropType", "onDragLeave", "onDragOver", "allowed", "onDrop", "dataTransfer", "type", "json", "data", "droppedIndex", "assertDefined", "onClick", "listViewProps", "movable", "clipProps", "InspectorMovable", "removeProps", "viewChildren", "Button", "addProps", "iconsViewProps", "viewProps", "View", "listView", "inspectorProps", "InspectorProperties", "DataGroupInputs", "DataGroup", "React", "assertSelectType", "assertTime", "ClassButton", "ClassSelected", "DataGroup", "selectedPropertyObject", "PropertyTweenSuffix", "assertTimeRange", "tweenInputTime", "OpacityGroupInput", "props", "masherContext", "React", "MasherContext", "icons", "editor", "useEditor", "selectType", "propsItems", "rest", "assertSelectType", "inspectorContext", "InspectorContext", "selectedItems", "changeTweening", "selectedInfo", "tweenDefined", "tweenSelected", "onEdge", "time", "nearStart", "timeRange", "assertTimeRange", "assertTime", "endDefined", "DataGroup", "endSelected", "byName", "selectedPropertyObject", "opacity", "PropertyTweenSuffix", "opacityEnd", "opacityProperty", "property", "changeHandler", "value", "nameOveride", "type", "propertyName", "name", "input", "DataTypeInputs", "inputContext", "tweenInputTime", "selectedButton", "ClassSelected", "ClassButton", "startProps", "endProps", "providerProps", "viewProps", "InputContext", "View", "DataGroupInputs", "React", "assertSelectType", "assertTime", "ClassButton", "ClassSelected", "DataGroup", "selectedPropertyObject", "selectedPropertiesScalarObject", "PropertyTweenSuffix", "assertTimeRange", "tweenInputTime", "PointGroupInput", "props", "masherContext", "React", "MasherContext", "icons", "editor", "useEditor", "selectType", "propsItems", "rest", "assertSelectType", "inspectorContext", "InspectorContext", "selectedItems", "changeTweening", "selectedInfo", "tweenDefined", "tweenSelected", "onEdge", "time", "nearStart", "timeRange", "assertTimeRange", "assertTime", "endDefined", "DataGroup", "endSelected", "byName", "selectedPropertyObject", "values", "selectedPropertiesScalarObject", "offE", "offW", "offN", "offS", "x", "y", "PropertyTweenSuffix", "xEnd", "yEnd", "xProperty", "yProperty", "offEValue", "offWValue", "offNValue", "offSValue", "elementsByName", "inspectingProperties", "goTime", "tweenInputTime", "selectedProperty", "property", "changeHandler", "value", "nameOveride", "type", "propertyName", "name", "baseName", "input", "DataTypeInputs", "key", "inputContext", "providerProps", "InputContext", "selectedButton", "ClassSelected", "ClassButton", "startProps", "endProps", "legendElements", "View", "xElements", "yElements", "lockOffEProps", "lockOffE", "lockOffWProps", "lockOffW", "lockOffNProps", "lockOffN", "lockOffSProps", "lockOffS", "elements", "fieldsetProps", "DataGroupInputs", "React", "selectedPropertiesScalarObject", "ClassButton", "assertString", "ClassSelected", "DataGroup", "Orientation", "PropertyTweenSuffix", "isOrientation", "selectedPropertyObject", "assertSelectType", "assertTime", "assertTimeRange", "tweenInputTime", "SizeInputOrientations", "Orientation", "SizeGroupInput", "props", "masherContext", "React", "MasherContext", "icons", "editor", "useEditor", "selectType", "propsItems", "rest", "assertSelectType", "inspectorContext", "InspectorContext", "selectedItems", "selectedInfo", "changeTweening", "tweenDefined", "tweenSelected", "onEdge", "time", "nearStart", "timeRange", "assertTimeRange", "assertTime", "endDefined", "DataGroup", "endSelected", "byName", "selectedPropertyObject", "lock", "width", "height", "PropertyTweenSuffix", "widthEnd", "heightEnd", "widthProperty", "heightProperty", "values", "selectedPropertiesScalarObject", "lockValue", "assertString", "orientation", "isOrientation", "elementsByName", "inspectingProperties", "goTime", "tweenInputTime", "selectedProperty", "property", "changeHandler", "value", "nameOveride", "type", "propertyName", "name", "baseName", "input", "DataTypeInputs", "key", "inputContext", "providerProps", "InputContext", "lockWidthProps", "ClassButton", "lockWidth", "View", "lockHeightProps", "selectedButton", "ClassSelected", "lockHeight", "startProps", "endProps", "legendElements", "widthElements", "heightElements", "elements", "fieldsetProps", "DataGroupInputs", "React", "assertSelectType", "ClassButton", "DataGroup", "isPopulatedObject", "selectedPropertyObject", "OptionGroupInput", "props", "masherContext", "React", "MasherContext", "icons", "selectType", "propsItems", "dataGroup", "rest", "assertSelectType", "inspectorContext", "InspectorContext", "selectedItems", "byName", "selectedPropertyObject", "elementsByName", "key", "selectedProperty", "property", "changeHandler", "value", "nameOveride", "propertyName", "name", "propertyProps", "InspectorProperty", "input", "otherElements", "iconElement", "isPopulatedObject", "View", "legendElements", "elements", "icon", "children", "ClassButton", "frameProps", "fieldsetProps", "timingProps", "DataGroup", "DataGroupInputs", "React", "arraySet", "assertSelectType", "EventType", "SelectType", "SelectTypes", "assertPositive", "assertTrue", "timeFromArgs", "timeEqualizeRates", "assertDataGroup", "isSelectedProperty", "isDefined", "PropertyTweenSuffix", "Inspector", "props", "editor", "useEditor", "actionCount", "setActionCount", "React", "info", "SelectType", "orderedTypes", "setOrderedTypes", "SelectTypes", "selectedItems", "setSelectedItems", "handleAction", "value", "handleSelection", "selection", "types", "clip", "mash", "current", "selectedType", "selectTypes", "bestType", "type", "assertSelectType", "arraySet", "items", "tweening", "tweenItems", "item", "isSelectedProperty", "property", "name", "tweenable", "group", "PropertyTweenSuffix", "assertDataGroup", "isDefined", "time", "quantize", "timeRange", "frame", "halfTime", "timeFromArgs", "midTime", "timeScaled", "timeEqualizeRates", "edge", "useListeners", "EventType", "changeSelected", "original", "index", "assertPositive", "assertTrue", "inspectorContext", "InspectorContextDefault", "InspectorContext", "View", "React", "InspectorContent", "props", "React", "View", "React", "ClassButton", "SelectType", "React", "assertPopulatedArray", "InspectorPicked", "props", "inspectorContext", "React", "InspectorContext", "selectedInfo", "selectedType", "type", "types", "children", "selectTypes", "propsSelectTypes", "assertPopulatedArray", "React", "assertSelectType", "ClassSelected", "isPopulatedString", "InspectorPicker", "props", "id", "children", "className", "assertSelectType", "inspectorContext", "React", "InspectorContext", "changeSelected", "selectedInfo", "selectTypes", "selectedType", "onClick", "classes", "isPopulatedString", "ClassSelected", "viewProps", "View", "InspectorDefaultProps", "props", "optionsStrict", "panelOptionsStrict", "icons", "React", "View", "EditorUndoButton", "Button", "labelTranslate", "EditorRedoButton", "InspectorPicker", "ClassButton", "contentChildren", "InspectorProperties", "types", "SelectType", "InspectorPicked", "EncodeControl", "ViewControl", "type", "EditorRemoveButton", "labelInterpolate", "children", "Bar", "InspectorContent", "assertObject", "editorInstance", "Endpoints", "eventStop", "EventType", "idGenerate", "idTemporary", "isClip", "isEffect", "isMashAndMediaObject", "isMedia", "isMediaObject", "urlBaseInitialize", "VideoType", "React", "ActivityType", "ClientDisabledArgs", "clientInstance", "ReadOperation", "dropFilesFromList", "elementSetPreviewSize", "current", "size", "width", "height", "Masher", "props", "editType", "VideoType", "clientOptions", "ClientDisabledArgs", "previewSize", "icons", "mashMedia", "rest", "clientRef", "React", "clientInstance", "editorRef", "editorInstance", "editorIndexRef", "currentRef", "svgRef", "ref", "apiContext", "ApiContext", "requested", "setRequested", "streaming", "setStreaming", "client", "editor", "editorIndex", "current", "endpointPromise", "servers", "elementSetPreviewSize", "editorLoad", "object", "loadObject", "idTemporary", "svg", "assertObject", "mash", "ReadOperation", "request", "Endpoints", "response", "serverSize", "urlBaseInitialize", "dropFiles", "files", "fileInfos", "dropFilesFromList", "errors", "validFiles", "eventTarget", "fileInfo", "error", "info", "idGenerate", "ActivityType", "EventType", "dropMediaObject", "definitionObject", "drop", "draggable", "isClip", "isEffect", "isMediaObject", "isMashAndMediaObject", "definitions", "definition", "isMedia", "changeDefinition", "media", "masherContext", "viewProps", "eventStop", "MasherContext", "View", "React", "VideoType", "Icons", "React", "React", "EventType", "eventStop", "isMediaType", "rectRound", "ClassDropping", "sizeAboveZero", "assertMediaType", "rectCopy", "assertObject", "SelectType", "EmptyMethod", "isMediaObject", "assertDragDefinitionObject", "dragData", "dragType", "dragTypes", "TransferTypeFiles", "React", "EmptyMethod", "PlayerContextDefault", "PlayerContext", "PlayerRefreshRate", "PlayerContent", "props", "children", "className", "rest", "editor", "useEditor", "rect", "setRect", "React", "rectCopy", "svgRef", "viewRef", "masherContext", "MasherContext", "over", "setOver", "playerContext", "PlayerContext", "disabled", "drop", "watchingRef", "watching", "handleResize", "current", "rectRound", "resizeObserver", "swapChildren", "elements", "requestItemsPromise", "redraw", "svgs", "handleDraw", "requestItems", "EmptyMethod", "sizeAboveZero", "useListeners", "EventType", "dragValid", "dataTransfer", "dragTypes", "TransferTypeFiles", "isMediaType", "dragType", "onDragLeave", "event", "eventStop", "onDrop", "mashMedia", "assertObject", "editorIndex", "type", "assertMediaType", "data", "dragData", "assertDragDefinitionObject", "mediaObject", "isMediaObject", "onDragOver", "classes", "ClassDropping", "viewProps", "SelectType", "nodes", "child", "View", "React", "PlayerButton", "props", "playerContext", "React", "PlayerContext", "paused", "setPaused", "viewProps", "View", "React", "EventType", "isArray", "timeFromArgs", "PlayerTimeControl", "props", "editor", "useEditor", "getTimeRange", "timeRange", "setTimeRange", "React", "update", "useListeners", "EventType", "onChange", "_event", "values", "number", "isArray", "timeFromArgs", "sliderProps", "Slider", "React", "PlayerPlaying", "props", "React", "PlayerContext", "React", "PlayerNotPlaying", "props", "React", "PlayerContext", "ClassButton", "React", "EventType", "stringSeconds", "PlayerTime", "props", "editor", "useEditor", "getTimeRange", "timeRange", "setTimeRange", "React", "update", "useListeners", "EventType", "seconds", "fps", "lengthSeconds", "viewChildren", "stringSeconds", "viewProps", "View", "PlayerDefaultProps", "props", "optionsStrict", "panelOptionsStrict", "icons", "React", "PlayerContent", "View", "SelectEditedControl", "SaveControl", "Button", "labelTranslate", "CreateEditedControl", "PlayerButton", "ClassButton", "PlayerPlaying", "PlayerNotPlaying", "PlayerTimeControl", "PlayerTime", "children", "Bar", "React", "React", "pixelFromFrame", "TimelineScrubberElement", "props", "timelineContext", "React", "TimelineContext", "scale", "frame", "calculateViewProps", "viewProps", "View", "React", "assertTrue", "ClassSelected", "DroppingPosition", "eventStop", "droppingPositionClass", "TimelineTrack", "props", "editor", "useEditor", "selection", "mash", "propsClassName", "children", "rest", "child", "React", "assertTrue", "trackContext", "TrackContext", "timelineContext", "TimelineContext", "track", "dragTypeValid", "onDragLeave", "onDrop", "droppingTrack", "setDroppingTrack", "droppingPosition", "setDroppingPosition", "setDroppingClip", "selectedTrack", "calculatedClassName", "selected", "classes", "ClassSelected", "droppingPositionClass", "className", "clips", "dense", "index", "childNodes", "prevClipEnd", "childProps", "clip", "cloneProps", "contextProps", "context", "ClipContext", "onDragOver", "event", "eventStop", "dataTransfer", "definitionType", "pos", "DroppingPosition", "viewProps", "View", "React", "TimelineSizer", "props", "ref", "React", "timelineContext", "TimelineContext", "handleResize", "setRect", "rect", "resizeObserver", "current", "viewProps", "View", "React", "EventType", "isArray", "TimelineZoomer", "props", "editor", "useEditor", "timelineContext", "React", "TimelineContext", "getDisabled", "disabled", "setDisabled", "updateDisabled", "useListeners", "EventType", "handleChange", "_event", "values", "number", "isArray", "sliderProps", "Slider", "React", "EventType", "arrayReversed", "TimelineTracks", "props", "refresh", "setRefreshed", "React", "updateRefreshed", "nonce", "editor", "useEditor", "useListeners", "EventType", "children", "childNodes", "mash", "tracks", "arrayReversed", "track", "i", "identifier", "index", "contextProps", "child", "TrackContext", "fragmentProps", "React", "ClassDisabled", "eventStop", "EventType", "pixelToFrame", "timeFromArgs", "pixelFromFrame", "TimelineScrubber", "props", "editor", "useEditor", "clientXRef", "React", "ref", "timelineContext", "TimelineContext", "frames", "scale", "rect", "className", "inactive", "styleHeight", "styleWidth", "rest", "getDisabled", "disabled", "setDisabled", "updateDisabled", "useListeners", "EventType", "addHandlers", "window", "removeWindowHandlers", "pointerMove", "pointerUp", "event", "eventStop", "current", "clientX", "pixel", "frame", "pixelToFrame", "timeFromArgs", "width", "height", "calculateViewProps", "classes", "ClassDisabled", "viewProps", "style", "pixelFromFrame", "View", "React", "ClassDropping", "DroppingPosition", "eventStop", "EventType", "SelectType", "TimelineContent", "props", "className", "rest", "timelineContext", "React", "TimelineContext", "dragTypeValid", "contextDrop", "setScroll", "setDroppingClip", "setDroppingTrack", "setDroppingPosition", "ref", "over", "setOver", "editor", "useEditor", "resetScroll", "useListeners", "EventType", "onPointerDown", "SelectType", "onScroll", "current", "x", "y", "onDragLeave", "event", "eventStop", "onDrop", "onDragOver", "dataTransfer", "valid", "pos", "DroppingPosition", "classes", "ClassDropping", "viewProps", "View", "React", "EventType", "TimelineAddTrackControl", "props", "editor", "useEditor", "getDisabled", "disabled", "setDisabled", "React", "updateDisabled", "useListeners", "EventType", "children", "rest", "cloneProps", "React", "ClassSelected", "droppingPositionClass", "TimelineTrackIcon", "props", "propsClassName", "icons", "rest", "timelineContext", "React", "TimelineContext", "trackContext", "TrackContext", "droppingTrack", "droppingPosition", "selectedTrack", "track", "calculatedClassName", "classes", "ClassSelected", "className", "dense", "index", "children", "viewProps", "View", "React", "EventType", "TimelineZoom", "props", "editor", "useEditor", "zoom", "children", "rest", "timelineContext", "React", "TimelineContext", "getDisabled", "disabled", "setDisabled", "updateDisabled", "useListeners", "EventType", "buttonOptions", "React", "assertPopulatedString", "DefaultContentId", "EventType", "TimelineAddClipControl", "props", "editor", "useEditor", "editorContext", "React", "MasherContext", "current", "drop", "getDisabled", "disabled", "setDisabled", "updateDisabled", "useListeners", "EventType", "children", "rest", "cloneProps", "selection", "mashMedia", "clip", "track", "id", "DefaultContentId", "assertPopulatedString", "object", "editorIndex", "TimelineDefaultProps", "props", "optionsStrict", "panelOptionsStrict", "icons", "React", "View", "TimelineAddClipControl", "Button", "TimelineAddTrackControl", "TimelineZoom", "TimelineZoomer", "TimelineScrubber", "TimelineScrubberElement", "TimelineTracks", "TimelineTrackIcon", "TimelineTrack", "ClipItem", "TimelineSizer", "children", "Bar", "TimelineContent", "React", "EventType", "Player", "props", "disabled", "rest", "editor", "useEditor", "paused", "setPaused", "React", "volume", "setVolume", "updatePaused", "useListeners", "EventType", "contextProps", "value", "View", "PlayerContext", "React", "RectZero", "DroppingPosition", "EventType", "pixelToFrame", "eventStop", "isPositive", "assertClip", "EffectType", "isMediaObject", "dragTypes", "isDragOffsetObject", "isDragDefinitionObject", "isTransferType", "dragMediaType", "TransferTypeFiles", "dragData", "pixelPerFrame", "TimelineDefaultZoom", "Timeline", "props", "editor", "useEditor", "editorContext", "React", "MasherContext", "drop", "currentFrame", "currentFrames", "frames", "setFrames", "frame", "setFrame", "updateFrames", "updateFrame", "droppingPosition", "setDroppingPosition", "DroppingPosition", "droppingTrack", "setDroppingTrack", "droppingClip", "setDroppingClip", "selectedTrack", "setSelectedTrack", "refreshed", "setRefreshed", "selectedClip", "setSelectedClip", "zoom", "setZoom", "rect", "setRect", "RectZero", "scroll", "setScroll", "refresh", "value", "useListeners", "EventType", "dragTypeValid", "dataTransfer", "clip", "types", "dragTypes", "TransferTypeFiles", "type", "isTransferType", "dragMediaType", "EffectType", "onDragLeave", "event", "eventStop", "frameToIndex", "clips", "length", "foundIndex", "dropIndex", "dense", "clipIndex", "onDrop", "clientX", "droppingFiles", "index", "data", "dragData", "draggingItem", "isDragOffsetObject", "offset", "indexDrop", "isPositive", "offsetDrop", "pixelToFrame", "scale", "editorIndex", "isDragDefinitionObject", "mediaObject", "isMediaObject", "assertClip", "width", "calculatedScale", "pixelPerFrame", "timelineContext", "contextProps", "View", "TimelineContext", "React", "Panels", "props", "React", "View", "MasherDefaultProps", "options", "Icons", "panels", "rest", "player", "browser", "timeline", "inspector", "activity", "masherChildren", "React", "Player", "PlayerDefaultProps", "Browser", "BrowserDefaultProps", "panelsChildren", "Activity", "ActivityDefaultProps", "Inspector", "InspectorDefaultProps", "panelsProps", "Panels", "Timeline", "TimelineDefaultProps", "VideoType", "React", "Mashing", "props", "type", "types", "children", "mediaTypes", "propsMediaTypes", "editor", "useEditor", "React", "React", "PanelContent", "props", "children", "className", "React", "View", "React", "PanelHead", "props", "children", "className", "React", "View", "sessionGet", "key", "sessionSet", "value", "React", "VideoView", "props", "ref"]
}
